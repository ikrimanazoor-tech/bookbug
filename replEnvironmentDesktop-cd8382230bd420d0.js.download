!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7c7b6740-b4ed-418d-a8f5-49198052092a",e._sentryDebugIdIdentifier="sentry-dbid-7c7b6740-b4ed-418d-a8f5-49198052092a")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"7cb832ac"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2542,9765],{705:(e,n,t)=>{"use strict";t.d(n,{R:()=>s});var r=t(34837),i=t(49999),o=t(67862),a=t(30724),l=t(9844),u=t(91953),c=t(85801);function s(e){var n=e.type,t=(0,a.Z)("org-roles-and-permissions-info-banner"),s=t.isLoading,d=t.isDone,p=t.setAsDone;return s||d?null:(0,r.Y)(l.N,{text:(0,r.FD)(u.EY,{children:["View detailed role permissions"," ",(0,r.Y)("a",{href:function(e){switch(e){case"org":return o.ik.ORG_PERMISSIONS;case"repl":return o.ik.REPL_PERMISSIONS;case"group":return o.ik.GROUP_PERMISSIONS;default:(0,i.A)(e)}}(n),target:"_blank",children:"here"}),"."]}),icon:(0,r.Y)(c.A,{}),colorway:"primary",closable:!0,closeAction:p})}},1220:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(12694),i=t(34837),o=t(21462),a=t(96513),l=t(6563),u=t(39534),c=t(70764),s=t(18712),d=t(99933),p=t(90233),f=t(25227),h=t(73635),g=t(70399),m=t(89364),v=t(80325),w=t(88976),y=t(22440),b=t(33683),x=t(90843),_=(0,c.x)({scopeSelector:[s.wp.position.relative],selectOption:[{"&:hover":{cursor:"auto"}}],icon:[s.wp.position.absolute,s.wp.top("50%"),s.wp.left(-4),{transform:"translate(-100%, -50%)"}]}),Y=function(e){switch(e){case a.oOo.Owner:return{icon:(0,i.Y)(y.A,{}),label:"Owner",description:"Full permissions including App deletion"};case a.oOo.Deployer:return{icon:(0,i.Y)(m.A,{}),label:"Deployer",description:"Can edit, deploy, and manage resources"};case a.oOo.Editor:return{icon:(0,i.Y)(v.A,{}),label:"Editor",description:"Can edit code and view resources"};case a.oOo.Viewer:return{icon:(0,i.Y)(w.A,{}),label:"Viewer",description:"Can only view code and fork Apps"};case a.oOo.None:return{icon:(0,i.Y)(g.A,{}),label:"None",description:"Cannot search, view, or edit Apps"}}},S=function(e){switch(e){case a.oOo.Owner:return a.Fvk.Owner;case a.oOo.Deployer:return a.Fvk.Deployer;case a.oOo.Editor:return a.Fvk.Editor;case a.oOo.Viewer:return a.Fvk.Viewer}};let A=function(e){var n,t=e.group,c=e.repl,s=e.options,g=e.onScopeChange,m=e.iconSize,v=void 0===m?24:m,w=(0,r._)((0,o.useState)(!1),2),y=w[0],A=w[1],I=(0,r._)((0,o.useState)(s.find(function(e){return e.status===a.jLn.Current})),2),k=I[0],E=I[1],C="".concat(c.id,"-role-").concat((0,o.useId)()),D=k?Y(k.role).label:void 0,R=c.authorizations.editPermissions.isAuthorized,F=(0,r._)((0,l.k6)({onCompleted:function(e){"OrgGroup"===e.updateOrgGroupScopes.__typename&&(g(),A(!0),setTimeout(function(){return A(!1)},2e3))}}),2),U=F[0],P=F[1],O=P.data,T=P.loading,L=P.error,M=(null==O?void 0:O.updateOrgGroupScopes)&&"OrgGroup"!==O.updateOrgGroupScopes.__typename?O.updateOrgGroupScopes.message:null==L?void 0:L.message;return n=M?(0,i.Y)(p.m_,{tooltip:M,children:(0,i.Y)(x.A,{size:v,color:u.LU.accentNegativeDefault})}):T?(0,i.Y)(b.A,{size:v}):y?(0,i.Y)(h.A,{size:v,color:u.LU.accentPositiveDefault}):null,(0,i.FD)(f.S,{css:_.scopeSelector,row:!0,gap:8,justify:"end",children:[n?(0,i.Y)(f.S,{css:_.icon,children:n}):null,(0,i.Y)(p.m_,{tooltip:"You cannot edit this group's permissions.",isDisabled:R,children:(0,i.Y)(d.in,{id:C,label:null!=D?D:"Select a role...","aria-label":"".concat(t.name,"'s access to ").concat(c.title),onAction:function(e){var n=s.find(function(n){return n.role===e});if(n&&n.role!==(null==k?void 0:k.role)){E(n);var r=n.role===a.oOo.None?[]:[{resourceId:c.id,role:S(n.role)}],i=n.role===a.oOo.None?[{resourceType:a.mWV.Repl,resourceId:c.id}]:[];U({variables:{input:{orgGroupId:t.id,orgScopes:[],groupScopes:[],replScopes:r,removeScopes:i}}})}},items:s,disallowEmptySelection:!0,isDisabled:!R,children:function(e){var n=Y(e.role),r=e.status===a.jLn.Unavailable;return(0,i.Y)(d.Dr,{id:e.role,label:n.label,description:r?"".concat(t.name," cannot have ").concat(e.role," access"):n.description,css:_.selectOption,icon:n.icon,isDisabled:r},e.role)}})})]})}},3171:e=>{e.exports={avatar:"InviteButton_avatar__mHOhc",stacked:"InviteButton_stacked__C4XOq",remainingCountButton:"InviteButton_remainingCountButton__Ez4IJ",inviteDialog:"InviteButton_inviteDialog__pLiZ3"}},4760:(e,n,t)=>{"use strict";t.d(n,{Sc:()=>p,pV:()=>s});var r=t(17844),i=t(12584),o=t(41114),a=t(39590);function l(){var e=(0,i._)(["\n  fragment EditReplFormRepl on Repl {\n    id\n    title\n    description\n    imageUrl\n    iconUrl\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n    }\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation EditReplFormEdit($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditReplFormRepl\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var c={},s=(0,o.J1)(l()),d=(0,o.J1)(u(),s);function p(e){var n=(0,r._)({},c,e);return a.n(d,n)}},6125:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(77737)}])},6563:(e,n,t)=>{"use strict";t.d(n,{LT:()=>L,TR:()=>z,c6:()=>W,hh:()=>k,k6:()=>O,qO:()=>B,vJ:()=>G});var r=t(17844),i=t(12584),o=t(41114),a=t(39590),l=t(54744),u=t(57933),c=t(6876),s=t(92084),d=t(42736);function p(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsOrgScopeOption on OrgScopeOption {\n    __typename\n    role\n    status\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsGroup on OrgGroup {\n    ...OrgGroupMetadata\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n    orgScopeOptions {\n      ...OrgGroupPermissionsOrgScopeOption\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgGroupOption on OrgGroupScopeOption {\n    status\n    role\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgGroupOptions on OrgGroupScopeOptions {\n    targetGroupId\n    options {\n      __typename\n      ...OrgGroupOption\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgGroupRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    authorizations {\n      editPermissions {\n        isAuthorized\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment GroupReplsPage on ReplConnection {\n    pageInfo {\n      hasNextPage\n      nextCursor\n      previousCursor\n    }\n    items {\n      __typename\n      ...OrgGroupRepl\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  fragment ReplScopeOption on ReplScopeOption {\n    status\n    role\n  }\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  fragment ReplScopeOptions on ReplScopeOptions {\n    replId\n    options {\n      __typename\n      ...ReplScopeOption\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation UpdateOrgGroupScopes($input: UpdateOrgGroupScopesInput!) {\n    updateOrgGroupScopes(input: $input) {\n      __typename\n      ... on OrgGroup {\n        ...OrgGroupPermissionsGroup\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function x(){var e=(0,i._)(["\n  query OrgGroupPermissionsGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupMetadata\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function _(){var e=(0,i._)(["\n  query OrgGroupScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupGroupScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              groupScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupGroupScopeOptions {\n                  items {\n                    ...OrgGroupOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}function Y(){var e=(0,i._)(["\n  query OrgGroupPermissionsRepls($orgId: String, $input: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...OrgReplManagement\n          replsCount\n          repls(input: $input) {\n            __typename\n            ... on ReplConnection {\n              ...GroupReplsPage\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Y=function(){return e},e}function S(){var e=(0,i._)(["\n  query OrgGroupReplScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupReplScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              replScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupReplScopeOptions {\n                  items {\n                    ...ReplScopeOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return S=function(){return e},e}var A={},I=(0,o.J1)(p()),k=(0,o.J1)(f(),s.Fe,I),E=(0,o.J1)(h()),C=(0,o.J1)(g(),E),D=(0,o.J1)(m(),c.r),R=(0,o.J1)(v(),D),F=(0,o.J1)(w()),U=(0,o.J1)(y(),F),P=(0,o.J1)(b(),k);function O(e){var n=(0,r._)({},A,e);return a.n(P,n)}var T=(0,o.J1)(x(),s.Fe);function L(e){var n=(0,r._)({},A,e);return l.I(T,n)}var M=(0,o.J1)(_(),C);function G(e){var n=(0,r._)({},A,e);return l.I(M,n)}var N=(0,o.J1)(Y(),d.PQ,R);function z(e){var n=(0,r._)({},A,e);return l.I(N,n)}var H=(0,o.J1)(S(),U);function W(e){var n=(0,r._)({},A,e);return l.I(H,n)}function B(e){var n=(0,r._)({},A,e);return u._(H,n)}},7909:e=>{e.exports={dividerContainer:"PlanningTimeline_dividerContainer__1Fxqg",divider:"PlanningTimeline_divider__J7gIK",pill:"PlanningTimeline_pill__E8NBl",pillActive:"PlanningTimeline_pillActive__f75bR",text:"PlanningTimeline_text__mGnOC",stepInteractive:"PlanningTimeline_stepInteractive__8yHKb"}},7922:(e,n,t)=>{"use strict";t.d(n,{H:()=>eg,A:()=>em});var r=t(34837),i=t(10795),o=t(17844),a=t(12584),l=t(41114),u=t(54744),c=t(32516);function s(){var e=(0,a._)(["\n  fragment FigmaImportCurrentUser on CurrentUser {\n    id\n    url\n    image\n    username\n    fullName\n    email\n    timeCreated\n    isStaff: hasRole(role: REPLIT_STAFF)\n    replCount {\n      ... on ReplCount {\n        count\n      }\n    }\n    ...ReplOwnerCurrentUser\n    teams {\n      id\n      ...ReplOwnerTeam\n    }\n    figmaAuth: auth(provider: FIGMA) {\n      provider\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,a._)(["\n  query FigmaImport {\n    currentUser {\n      id\n      ...FigmaImportCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,l.J1)(s(),c.nM,c.eC),h=(0,l.J1)(d(),f),g=t(30284),m=t(46941),v=t(35897),w=t(34778),y=t(40756),b=t(91953),x=t(25227),_=t(29935),Y=t(53847),S=t(12694),A=t(82643),I=t(21462),k=t(90629),E=t(29765),C=t(44082),D=t(31980),R=t(16714),F=t(36925),U=t(12389),P=t(79316),O=t(89890),T=t(69498),L=t(32186),M=t(73496),G=t(31051),N=t(16653),z=t(83096),H=t(62019),W=t(37743),B=t(1833),j=t(93629),$=t(89264),q=t(40185),V=t(39590);function K(){var e=(0,a._)(["\n  mutation CreateFigmaRepl($input: CreateReplInput!) {\n    createRepl(input: $input, isTitleAutoGenerated: false) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        nextPagePathname\n        origin {\n          id\n          isOwner\n        }\n        config {\n          figmaUrl\n          figmaImportStatus\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return K=function(){return e},e}var Z={},J=(0,l.J1)(K()),Q=t(89742),X=t(47737),ee=t(99344),en=t(14385),et=function(e){function n(e){var t;return(0,W._)(this,n),(t=(0,H._)(this,n,[e])).name="CreateFigmaReplError",t}return(0,B._)(n,e),n}((0,$._)(Error)),er=t(74013),ei=t(33683),eo=t(89846),ea=t.n(eo),el="Invalid Figma URL. Please ensure link is a valid Figma frame for your connected account in the format https://www.figma.com/design/...";function eu(e){var n,t,a,l,u,c,s,d,p,f=e.currentUser,h=e.onUpsell,g=(0,S._)((0,I.useState)(null),2),m=g[0],v=g[1],H=(0,S._)((0,E.ZA)("figmaUrl",{defaultValue:""}),2),W=H[0],B=H[1],$=(0,M.A)(W,500),K=(0,L.ET)().orgId,eo=(0,S._)((0,U.p)(f,K),1)[0],eu="Org"===eo.__typename,ec=eu?eo.name:eo.username,es=null!=(p=eo.image)?p:null,ed=(0,P.d)(eo,void 0),ep=ed.isPrivate,ef=ed.setIsPrivate,eh=ed.privacyAuthz,eg=ed.isValidPrivacy,em=(t=(n=(0,S._)((0,I.useState)("idle"),2))[0],a=n[1],l=(0,X.m6)(),c=(0,S._)((u=(0,o._)({},Z,void 0),V.n(J,u)),1)[0],s=(0,q.useRouter)(),d=(0,ee.A)(),{createFigmaRepl:function(e){return(0,_._)(function(e){var n,t,r,u,p,f,h,g,m;return(0,A.YH)(this,function(v){switch(v.label){case 0:return n=e.isPrivate,t=e.orgId,r=e.figmaUrl,a("creating_repl"),[4,c({variables:{input:{isPrivate:n,orgId:t,figmaUrl:r,figmaImportStatus:i.u4D.Started}}})];case 1:if((f=v.sent()).errors)throw(0,Q.B)(new et(f.errors.map(function(e){return e.message}).join(", "))),new et("Something went wrong. Please try again.");if((null==(p=f.data)||null==(u=p.createRepl)?void 0:u.__typename)==="UserError")throw(0,Q.B)(new et(f.data.createRepl.message)),new et(f.data.createRepl.message);if(!f.data)throw new et("Something went wrong. Please try again.");if(h=f.data.createRepl,a("opening_repl"),g={enterInAgentMode:!0,agentOnboarding:!1},m=(0,en.q1)(h,g),!l)return[3,2];return window.location.href=(0,en.cY)(h,g),[3,4];case 2:return[4,s.push((0,j._)((0,o._)({},m.href),{pathname:d}),m.as)];case 3:v.sent(),v.label=4;case 4:return[2]}})}).apply(this,arguments)},status:t}),ev=em.createFigmaRepl,ew=em.status;(0,I.useEffect)(function(){$?v((0,S._)((0,C.uQ)($),1)[0]?null:el):v(null)},[$]);var ey=(0,O.g)(),eb="CurrentUser"===eo.__typename&&eo.id===f.id,ex=eb&&"data"===ey.type&&!ey.canCreateRepl;return(0,r.Y)(x.S,{tag:"form",onSubmit:function(e){(0,_._)(function(){var e;return(0,A.YH)(this,function(n){switch(n.label){case 0:if(!(0,S._)((0,C.uQ)(W),1)[0])return v(el),[2];(0,w.u4)(w.AZ.FIGMA_IMPORT_USED,{action:"form_submitted"}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ev({isPrivate:ep,orgId:"Org"===eo.__typename?eo.id:void 0,figmaUrl:W})];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),(0,Y._)(e,et)?v(e.message):(v("Something went wrong. Please try again."),k.v4(function(n){n.setTag("figma-import-create-repl",!0),n.setExtras({figmaUrl:W,isPrivate:ep,orgId:"Org"===eo.__typename?eo.id:void 0}),k.Cp(e)})),[2];case 4:return[2]}})})(),e.preventDefault()},gap:16,children:(0,r.Y)(x.S,{gap:8,children:(0,r.FD)(x.S,{clsx:ea().container,p:16,children:[(0,r.FD)(x.S,{gap:8,pb:8,children:[(0,r.Y)("label",{htmlFor:"figmaUrl",children:"Figma URL"}),(0,r.Y)(z.pd,{id:"figmaUrl",value:W,onChange:function(e){return B(e.target.value)},placeholder:"https://www.figma.com/design/...",clsx:ea().input})]}),m?(0,r.Y)(x.S,{pb:8,py:4,children:(0,r.Y)(D.A,{children:m})}):null,(0,r.Y)(N.a,{clsx:ea().divider}),(0,r.FD)(x.S,{gap:12,children:[(0,r.FD)(x.S,{gap:8,children:[(0,r.Y)(b.EY,{children:"Owner"}),(0,r.FD)(x.S,{row:!0,align:"center",gap:8,children:[(0,r.Y)(G.e,{src:es,size:16,username:ec,isOrg:eu}),(0,r.Y)(b.EY,{children:ec})]})]}),"Org"===eo.__typename?(0,r.Y)(R.A,{org:eo,isPrivate:ep,setIsPrivate:ef,privacyAuthz:eh}):(0,r.Y)(F.Z,{isPrivate:ep,isTeam:"Team"===eo.__typename,setIsPrivate:ef,privacyAuthz:eh,onUpsell:h})]}),(0,r.FD)(x.S,{clsx:ea().importButtonContainer,row:!0,gap:12,justify:"space-between",pt:12,children:[(0,r.Y)(x.S,{clsx:ea().limitMeter,children:(0,r.Y)(T.g,{isIndividualOwner:eb,showUpgradeForm:function(){(0,w.u4)(w.AZ.UPGRADE_SELECTED,{source:"import_figma"}),null==h||h(!0)}})}),(0,r.Y)(x.S,{align:"center",justify:"center",children:(0,r.Y)(y.$n,{iconLeft:"idle"!==ew?(0,r.Y)(ei.A,{}):(0,r.Y)(er.A,{}),colorway:"primary",stretch:!0,type:"submit",loading:"loading"===ey.type,disabled:!!m||"idle"!==ew||"loading"===ey.type||ex||!eg,text:"Import from Figma",dataCy:"import-figma-btn"})})]})]})})})}var ec=t(12263),es=t(13298),ed=t(9648),ep=t(15549),ef=t(86059),eh=t.n(ef),eg=function(){return(0,r.FD)(x.S,{row:!0,justify:"center",gap:8,pb:12,align:"center",children:[(0,r.Y)(x.S,{justify:"center",align:"center",clsx:eh().figmaIcon,children:(0,r.Y)(ed.A,{size:24})}),(0,r.Y)(x.S,{justify:"center",align:"center",children:(0,r.Y)(es.A,{})}),(0,r.Y)(x.S,{justify:"center",align:"center",clsx:eh().replitIcon,children:(0,r.Y)(ep.A,{size:24})})]})};function em(e){var n,t,a,l=e.onUpsell,c=(n={fetchPolicy:"no-cache"},t=(0,o._)({},p,n),u.I(h,t)),s=c.data,d=c.refetch,f=null==s?void 0:s.currentUser,_=(0,v.A)().showConfirm,Y=(0,m.m)({onAuth:function(){_("Successfully connected to Figma"),d(),(0,w.u4)(g.AZ.FIGMA_AUTH_COMPLETE,{source:"import_page"})}}),S=(null==f?void 0:f.__typename)==="CurrentUser"&&(null==f||null==(a=f.figmaAuth)?void 0:a.provider)===i.edb.Figma;return(null==f?void 0:f.__typename)!=="CurrentUser"?(0,r.Y)(ec.A,{}):S?(0,r.Y)(eu,{currentUser:f,onUpsell:l}):(0,r.FD)(x.S,{clsx:eh().container,px:24,py:32,gap:12,align:"center",justify:"center",children:[(0,r.Y)(eg,{}),(0,r.Y)(b.EY,{variant:"subheadDefault",children:"Connect Figma to Replit"}),(0,r.Y)(b.EY,{children:"Get started by logging in with your Figma account"}),(0,r.Y)(y.$n,{clsx:eh().button,onClick:function(){return Y()},text:"Log in with Figma",colorway:"primary",iconRight:(0,r.Y)(es.A,{})})]})}},9313:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(86103);function i(){return(0,r._P)({controlName:"flag-agent-gossip-network",logFlagToAnalytics:!1})}},10384:e=>{e.exports={surface:"Header_surface__O1_Hg",simple:"Header_simple__JCx7w",headerContentMoreActions:"Header_headerContentMoreActions__WHJN2",left:"Header_left__RrNvy",right:"Header_right__6qiEj"}},12263:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(34837),i=t(70764),o=t(18712),a=t(25227),l=t(33683),u=(0,i.x)({container:[o.wp.width("100%"),o.wp.height(200),o.wp.center]});let c=function(){return(0,r.Y)(a.S,{css:u.container,children:(0,r.Y)(l.A,{size:24})})}},19223:(e,n,t)=>{"use strict";t.d(n,{P_:()=>p,kh:()=>s});var r=t(17844),i=t(12584),o=t(41114),a=t(39590);function l(){var e=(0,i._)(["\n  fragment DeleteReplDialogRepl on Repl {\n    id\n    title\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation DeleteReplDialogReplDelete($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return u=function(){return e},e}var c={},s=(0,o.J1)(l()),d=(0,o.J1)(u());function p(e){var n=(0,r._)({},c,e);return a.n(d,n)}},23680:e=>{e.exports={root:"Border_root__PbshN",pulse:"Border_pulse__dsy09","fade-out":"Border_fade-out__IgQfd"}},24759:(e,n,t)=>{"use strict";t.d(n,{A:()=>R});var r=t(17844),i=t(93629),o=t(12694),a=t(86105),l=t(34837),u=t(21462),c=t(39695),s=t(12584),d=t(41114),p=t(54744),f=t(97608);function h(){var e=(0,s._)(["\n  query OrgGroupSearch($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var g={},m=(0,d.J1)(h(),f.Um),v=t(73496),w=t(39534),y=t(70764),b=t(18712),x=t(73455),_=t(83096),Y=t(9844),S=t(91953),A=t(25227),I=t(70399),k=t(33683),E=t(90173),C=[b.wp.p(8),b.wp.cursor.pointer],D=(0,y.x)({container:[b.wp.position.relative],rightIcon:[b.wp.position.absolute,b.wp.right(8),b.wp.top("50%"),{transform:"translateY(-50%)"}],dropdownMenu:[b.wp.width("100%"),b.wp.position.absolute,b.wp.zIndex(1),b.wp.top("100%"),b.wp.left(0),b.wp.backgroundColor.backgroundDefault,b.wp.maxHeight(300),b.wp.overflow("auto"),b.wp.borderRadius(4),b.wp.border({color:w.LU.foregroundDimmest}),{borderTop:"0 none"}],result:(0,a._)(C),activeResult:(0,a._)(C).concat([b.wp.backgroundColor.accentPrimaryDimmer]),closeIconButton:[{"&:hover":{backgroundColor:"".concat(w.LU.backgroundHighest," !important")}}]});let R=function(e){var n,t,a,s=e.inputId,d=e.orgId,f=e.types,h=e.selectedGroups,w=e.value,y=e.setValue,b=e.onSelect,C=e.onClear,R=e.placeholder,F=void 0===R?"Find an existing group...":R,U=(0,o._)((0,u.useState)([]),2),P=U[0],O=U[1],T=(0,v.A)(w.trim(),250),L=(n={variables:{orgId:d,input:{count:10,types:f,filters:{name:{search:T}}}},ssr:!1,skip:!T,fetchPolicy:"cache-and-network",onCompleted:function(e){if((null==e||null==(t=e.currentUser)||null==(n=t.org)?void 0:n.__typename)==="Org"&&(null==e||null==(o=e.currentUser)||null==(i=o.org)||null==(r=i.groups)?void 0:r.__typename)==="OrgGroupConnection"){var n,t,r,i,o;O(e.currentUser.org.groups.items.filter(function(e){return!h.some(function(n){return e.id===n.id})}))}}},t=(0,r._)({},g,n),p.I(m,t)),M=L.data,G=L.loading,N=L.error,z=M&&M.currentUser&&"Org"!==M.currentUser.org.__typename?M.currentUser.org.message:void 0,H=M&&M.currentUser&&"Org"===M.currentUser.org.__typename&&"OrgGroupConnection"!==M.currentUser.org.groups.__typename?M.currentUser.org.groups.message:void 0,W=null==N?void 0:N.message,B=null!=(a=null!=z?z:H)?a:W;return(0,u.useEffect)(function(){0===w.length&&0!==P.length&&O([])},[w.length,P.length]),(0,l.Y)(A.S,{css:D.container,children:(0,l.Y)(c.Ay,{onSelect:function(e){e&&b(e)},itemToString:function(e){return(null==e?void 0:e.name)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,t=e.getItemProps,o=e.getMenuProps,a=e.isOpen,u=e.highlightedIndex,c=e.getRootProps;return(0,l.FD)(A.S,(0,i._)((0,r._)({},c({refKey:"innerRef"})),{children:[(0,l.Y)(_.pd,(0,r._)({},n({id:s,ref:null,value:w,onChange:function(e){y(e.currentTarget.value)},placeholder:F,autoComplete:"off"}))),G||0!==w.length?null:(0,l.Y)(E.A,{css:D.rightIcon}),G?(0,l.Y)(A.S,{css:D.rightIcon,children:(0,l.Y)(k.A,{})}):null,!G&&w.length>0?(0,l.Y)(A.S,{css:D.rightIcon,children:(0,l.Y)(x.K0,{css:D.closeIconButton,alt:"Clear",tooltipBehavior:"hidden",onClick:function(){y(""),C&&C()},children:(0,l.Y)(I.A,{})})}):null,(0,l.FD)(A.S,(0,i._)((0,r._)({tag:"ul"},o({refKey:"innerRef"})),{children:[B?(0,l.Y)(A.S,{tag:"ul",css:D.dropdownMenu,children:(0,l.Y)(A.S,{tag:"li",css:D.result,children:(0,l.Y)(Y.N,{colorway:"negative",text:B})})}):null,a&&P&&P.length?(0,l.Y)(A.S,{css:D.dropdownMenu,children:P.map(function(e,n){return(0,l.Y)(A.S,(0,i._)((0,r._)({tag:"li"},t({item:e,index:n})),{css:n===u?D.activeResult:D.result,children:(0,l.Y)(S.EY,{height:"singleLine",multiline:!1,children:e.name})}),e.id)})}):null,a&&!G&&T.length>0&&0===P.length?(0,l.Y)(A.S,{tag:"ul",css:D.dropdownMenu,children:(0,l.Y)(A.S,{tag:"li",css:D.result,children:(0,l.FD)(S.EY,{height:"singleLine",color:"dimmer",multiline:!1,children:['No results found for "',w,'"']})})}):null]}))]}))}})})}},28561:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(34837),i=t(96513),o=t(49999),a=t(70764),l=t(18712),u=t(25227),c=t(8440),s=[l.wp.backgroundColor.outlineDimmest,l.wp.color.foregroundDefault,l.wp.borderRadius(4),l.wp.align.center,l.wp.justify.center,{height:"var(--group-icon-size)",width:"var(--group-icon-size)"}],d=(0,a.x)({grey:[s,l.wp.backgroundColor.greyDimmest],red:[s,l.wp.backgroundColor.redDimmest],orange:[s,l.wp.backgroundColor.orangeDimmest],yellow:[s,l.wp.backgroundColor.yellowDimmest],lime:[s,l.wp.backgroundColor.limeDimmest],blue:[s,l.wp.backgroundColor.blueDimmest],purple:[s,l.wp.backgroundColor.purpleDimmest],pink:[s,l.wp.backgroundColor.pinkDimmest]});let p=function(e){var n,t,a=e.group,l=e.variant,s=void 0===l?"normal":l;switch(a.color){case i.RVn.Grey:n=d.grey;break;case i.RVn.Red:n=d.red;break;case i.RVn.Orange:n=d.orange;break;case i.RVn.Yellow:n=d.yellow;break;case i.RVn.Lime:n=d.lime;break;case i.RVn.Blue:n=d.blue;break;case i.RVn.Purple:n=d.purple;break;case i.RVn.Pink:n=d.pink;break;default:n=d.grey}switch(s){case"normal":t=32;break;case"compact":t=24;break;default:(0,o.A)(s)}return(0,r.Y)(u.S,{css:n,style:{"--group-icon-size":"".concat(t,"px")},children:(0,r.Y)(c.A,{})})}},28659:e=>{e.exports={surface:"replEnvironmentDesktop_surface__18l0g",loadingAnimationWrapper:"replEnvironmentDesktop_loadingAnimationWrapper__upKsd",emailVerificationWrapper:"replEnvironmentDesktop_emailVerificationWrapper__KPi4v"}},29765:(e,n,t)=>{"use strict";t.d(n,{cr:()=>c,tU:()=>u,ZA:()=>k});var r=t(95570),i="object"==typeof localStorage&&(localStorage.getItem("debug")?.includes("next-usequerystate")||localStorage.getItem("debug")?.includes("nuqs"))||!1;function o(e,...n){if(!i)return;let t=function(e,...n){return e.replace(/%[sfdO]/g,e=>{let t=n.shift();return"%O"===e&&t?JSON.stringify(t).replace(/"([^"]+)":/g,"$1:"):String(t)})}(e,...n);performance.mark(t),r.log(e,...n)}function a(e,n,t){try{return e(n)}catch(e){return!function(e,...n){i&&r.warn(e,...n)}("[nuqs] Error while parsing value `%s`: %O"+(t?" (for key `%s`)":""),n,e,t),null}}function l(e){function n(n){if(void 0===n)return null;let t="";if(Array.isArray(n)){if(void 0===n[0])return null;t=n[0]}return"string"==typeof n&&(t=n),a(e.parse,t)}return{...e,parseServerSide:n,withDefault(e){return{...this,defaultValue:e,parseServerSide:t=>n(t)??e}},withOptions(e){return{...this,...e}}}}var u=l({parse:e=>e,serialize:e=>`${e}`});l({parse:e=>{let n=parseInt(e);return Number.isNaN(n)?null:n},serialize:e=>Math.round(e).toFixed()}),l({parse:e=>{let n=parseInt(e,16);return Number.isNaN(n)?null:n},serialize:e=>{let n=Math.round(e).toString(16);return n.padStart(n.length+n.length%2,"0")}}),l({parse:e=>{let n=parseFloat(e);return Number.isNaN(n)?null:n},serialize:e=>e.toString()});var c=l({parse:e=>"true"===e,serialize:e=>e?"true":"false"});l({parse:e=>{let n=parseInt(e);return Number.isNaN(n)?null:new Date(n)},serialize:e=>e.valueOf().toString()}),l({parse:e=>{let n=new Date(e);return Number.isNaN(n.valueOf())?null:n},serialize:e=>e.toISOString()});var s={409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using %s, but %s was about to load on top.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for keys %s. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function d(e){return`[nuqs] ${s[e]}
  See https://err.47ng.com/NUQS-${e}`}var p=t(16614),f=t(21462),h=t(95570),g=function(){if("undefined"==typeof window||!window.GestureEvent)return 50;try{let e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}(),m=new Map,v={history:"replace",scroll:!1,shallow:!0,throttleMs:g},w=new Set,y=0,b=null;function x(e){return m.get(e)??null}function _(e,n){let t=e.split("#")[0]??"";return t+function(e){if(0===e.size)return"";let n=[];for(let[t,r]of e.entries())n.push(`${t}=${r.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E")}`);return"?"+n.join("&")}(n)+location.hash}var Y=Symbol("__nuqs__SYNC__"),S="__nuqs__NO_SYNC__",A=Symbol("__nuqs__NOTIFY__"),I=function(e){return{all:e=e||new Map,on:function(n,t){var r=e.get(n);r?r.push(t):e.set(n,[t])},off:function(n,t){var r=e.get(n);r&&(t?r.splice(r.indexOf(t)>>>0,1):e.set(n,[]))},emit:function(n,t){var r=e.get(n);r&&r.slice().map(function(e){e(t)}),(r=e.get("*"))&&r.slice().map(function(e){e(n,t)})}}}();function k(e,{history:n="replace",shallow:t=!0,scroll:r=!1,throttleMs:i=g,parse:l=e=>e,serialize:u=String,defaultValue:c,startTransition:s}={history:"replace",scroll:!1,shallow:!0,throttleMs:g,parse:e=>e,serialize:String,defaultValue:void 0}){let A=(0,p.useRouter)(),E=(0,p.useSearchParams)(),[C,D]=f.useState(()=>{let n=x(e),t="object"!=typeof location?E?.get(e)??null:new URLSearchParams(location.search).get(e)??null,r=n??t;return null===r?null:a(l,r,e)}),R=f.useRef(C);o("[nuqs `%s`] render - state: %O, iSP: %s",e,C,E?.get(e)??null),f.useEffect(()=>{if("14.0.3"!==window.next.version)return;let n=E.get(e)??null,t=null===n?null:a(l,n,e);o("[nuqs `%s`] syncFromUseSearchParams %O",e,t),R.current=t,D(t)},[E?.get(e),e]),f.useInsertionEffect(()=>{function n(n){o("[nuqs `%s`] updateInternalState %O",e,n),R.current=n,D(n)}function t(t){let r=t.get(e)??null,i=null===r?null:a(l,r,e);o("[nuqs `%s`] syncFromURL %O",e,i),n(i)}return o("[nuqs `%s`] subscribing to sync",e),I.on(Y,t),I.on(e,n),()=>{o("[nuqs `%s`] unsubscribing from sync",e),I.off(Y,t),I.off(e,n)}},[e]);let F=f.useCallback((a,l={})=>{let p="function"==typeof a?a(R.current??c??null):a;I.emit(e,p);var f={history:l.history??n,shallow:l.shallow??t,scroll:l.scroll??r,throttleMs:l.throttleMs??i,startTransition:l.startTransition??s};let x=null===p?null:u(p);return o("[nuqs queue] Enqueueing %s=%s %O",e,x,f),m.set(e,x),"push"===f.history&&(v.history="push"),f.scroll&&(v.scroll=!0),!1===f.shallow&&(v.shallow=!1),f.startTransition&&(w.add(f.startTransition),v.shallow=!1),v.throttleMs=Math.max(f.throttleMs??g,Number.isFinite(v.throttleMs)?v.throttleMs:0),null===b&&(b=new Promise((e,n)=>{if(!Number.isFinite(v.throttleMs)){o("[nuqs queue] Skipping flush due to throttleMs=Infinity"),e(new URLSearchParams(location.search)),setTimeout(()=>{b=null},0);return}function t(){y=performance.now();let[t,r]=function(e){let n=new URLSearchParams(location.search);if(0===m.size)return[n,null];let t=Array.from(m.entries()),r={...v},i=Array.from(w);for(let[e,i]of(m.clear(),w.clear(),v.history="replace",v.scroll=!1,v.shallow=!0,v.throttleMs=g,o("[nuqs queue] Flushing queue %O with options %O",t,r),t))null===i?n.delete(e):n.set(e,i);try{let t=window.next?.router;if("string"==typeof t?.state?.asPath){let e=_(t.state.asPath.split("?")[0]??"",n);o("[nuqs queue (pages)] Updating url: %s",e),("push"===r.history?t.push:t.replace).call(t,e,e,{scroll:r.scroll,shallow:r.shallow})}else{let t=_(location.origin+location.pathname,n);o("[nuqs queue (app)] Updating url: %s",t),("push"===r.history?history.pushState:history.replaceState).call(history,history.state,S,t),r.scroll&&window.scrollTo(0,0),r.shallow||function(e,n){let t=r=>{if(r===e.length)return n();let i=e[r];if(!i)throw Error("Invalid transition function");i(()=>t(r+1))};t(0)}(i,()=>{e.replace(t,{scroll:!1,shallow:!1})})}return[n,null]}catch(e){return h.error(d(429),t.map(([e])=>e).join(),e),[n,e]}}(A);null===r?e(t):n(t),b=null}setTimeout(function(){let e=performance.now()-y,n=v.throttleMs,r=Math.max(0,Math.min(n,n-e));o("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",r,n),0===r?t():setTimeout(t,r)},0)})),b},[e,n,t,r,i,s]);return[C??c??null,F]}"object"==typeof history&&function(){let e="1.15.3",n=history.__nuqs_patched;if(n){n!==e&&h.error(d(409),n,e);return}for(let n of(o("[nuqs] Patching history with %s",e),["pushState","replaceState"])){let e=history[n].bind(history);history[n]=function(t,r,i){if(!i)return o("[nuqs] history.%s(null) (%s) %O",n,r,t),e(t,r,i);let a=r===S?"internal":"external",l=new URL(i,location.origin).searchParams;if(o("[nuqs] history.%s(%s) (%s) %O",n,i,a,t),"external"===a){for(let[e,n]of l.entries()){let t=x(e);null!==t&&t!==n&&(o("[nuqs] Overwrite detected for key: %s, Server: %s, queue: %s",e,n,t),l.set(e,t))}setTimeout(()=>{o("[nuqs] External history.%s call: triggering sync with %s",n,l),I.emit(Y,l),I.emit(A,{search:l,source:a})},0)}else setTimeout(()=>{I.emit(A,{search:l,source:a})},0);return e(t,r===S?"":r,i)}}Object.defineProperty(history,"__nuqs_patched",{value:e,writable:!1,enumerable:!1,configurable:!1})}()},30799:e=>{e.exports={root:"DockSidebar_root__N_L1p",header:"DockSidebar_header__xaaAD",content:"DockSidebar_content__e0_hV",title:"DockSidebar_title__e3CZQ",footerButtons:"DockSidebar_footerButtons__ENw63"}},31130:(e,n,t)=>{"use strict";t.d(n,{P4:()=>h,Qs:()=>f,_L:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(54744);function l(){var e=(0,i._)(["\n  fragment OrgReplCreator on User {\n    id\n    displayName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i._)(["\n  query UserSelectorSearch($orgId: String!, $searchInput: OrgMembersInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          members(input: $searchInput) {\n            __typename\n            ... on Error {\n              message\n            }\n            ... on OrgMemberConnection {\n              __typename\n              items {\n                member {\n                  id\n                  user {\n                    id\n                    ...OrgReplCreator\n                  }\n                }\n                type\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,i._)(["\n  query UserSelectorGetUser($id: Int!) {\n    user(id: $id) {\n      id\n      ...OrgReplCreator\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},d=(0,o.J1)(l()),p=(0,o.J1)(u(),d);function f(e){var n=(0,r._)({},s,e);return a.I(p,n)}var h=(0,o.J1)(c(),d)},33095:(e,n,t)=>{"use strict";t.d(n,{k:()=>l});var r=t(21462),i=t(69832),o=t(34305),a=t(9313);function l(e){var n,t,l=(0,o.Ay)(),u=(0,a.A)(),c=(0,r.useMemo)(function(){return u?l.map(function(n){var t,r=n.get(e.id);return r?{status:r.status,label:(0,o.zz)(r.status),appImageUrl:r.appImageUrl}:(null==(t=e.latestAgentStatus)?void 0:t.status)?{status:e.latestAgentStatus.status,label:(0,o.zz)(e.latestAgentStatus.status),appImageUrl:e.latestAgentStatus.appImageUrl}:null}):null},[u,l,e.id,null==(n=e.latestAgentStatus)?void 0:n.status,null==(t=e.latestAgentStatus)?void 0:t.appImageUrl]);return(0,i.J2)(c)}},34305:(e,n,t)=>{"use strict";t.d(n,{h8:()=>v,Ay:()=>w,zz:()=>g});var r=t(34837),i=t(21462),o=t(17844),a=t(12584),l=t(41114),u=t(90676);function c(){var e=(0,a._)(["\n  subscription CurrentUserReplAgentStatuses {\n    currentUserReplAgentStatuses {\n      replId\n      status\n      updatedAt\n      appImageUrl\n    }\n  }\n"]);return c=function(){return e},e}var s={},d=(0,l.J1)(c()),p=t(69832),f=t(9313),h={"waiting-for-user":"Waiting for you","in-progress":"Workingâ€¦"};function g(e){var n;return null!=(n=h[e])?n:"Paused"}var m=(0,i.createContext)(null);function v(e){var n,t,i=e.children,a=(0,p.HJ)(new Map),l=function(e){if(null==e?void 0:e.currentUserReplAgentStatuses){var n=new Map(e.currentUserReplAgentStatuses.map(function(e){return[e.replId,{status:e.status,updatedAt:e.updatedAt,appImageUrl:e.appImageUrl}]}));a.set(n)}};return n={skip:!(0,f.A)(),onError:function(e){},onData:function(e){l(e.data.data)}},t=(0,o._)({},s,n),u.R(d,t),(0,r.Y)(m.Provider,{value:a,children:i})}function w(){var e=(0,i.useContext)(m);if(null===e)throw Error("useCurrentUserAgentStatus must be used within an AgentStatusProvider");return e}},38299:e=>{e.exports={container:"TabList_container__s3ufN",newTabButton:"TabList_newTabButton__F7Fv4",tabScrollAreaRoot:"TabList_tabScrollAreaRoot__O0iqm",tabScrollAreaViewport:"TabList_tabScrollAreaViewport__9wZEC",tabScrollAreaScrollbar:"TabList_tabScrollAreaScrollbar__6xrLt",tabScrollAreaThumb:"TabList_tabScrollAreaThumb__KxoId",tabContainer:"TabList_tabContainer__o__tr",tabPreview:"TabList_tabPreview__7VoJt"}},38535:e=>{e.exports={root:"Layout_root__zbmnW","fade-in":"Layout_fade-in___4xKz",middle:"Layout_middle__CTNFw",enter:"Layout_enter__U3ed7",divider:"Layout_divider__K1Gu3",secondarySection:"Layout_secondarySection__QzsOI",primaryTools:"Layout_primaryTools__ynQG1",secondaryTools:"Layout_secondaryTools__xDqvE",secondaryToolsScroll:"Layout_secondaryToolsScroll__ZeWEF",fade:"Layout_fade__5GmrQ",fadeTop:"Layout_fadeTop__y79T3",fadeBottom:"Layout_fadeBottom__spqF7"}},40607:e=>{e.exports={left:"Header2_left__9hIwC",right:"Header2_right__XiLBj",planningHeader:"Header2_planningHeader__SRV_k"}},42736:(e,n,t)=>{"use strict";t.d(n,{An:()=>A,PQ:()=>E,ce:()=>k,mC:()=>D});var r=t(17844),i=t(12584),o=t(41114),a=t(54744),l=t(56367),u=t(6876),c=t(78627),s=t(31130);function d(){var e=(0,i._)(["\n  fragment OrgReplMultiplayers on Repl {\n    multiplayers {\n      id\n      displayName\n      username\n      url\n      image\n      presenceStatus {\n        isOnline\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment OrgReplTemplateInfo on Repl {\n    templateInfo {\n      label\n      replId\n      iconUrl\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgReplHostingDeployment on Repl {\n    hostingDeployment {\n      __typename\n      ... on HostingDeployment {\n        id\n        latestBuildStatus\n        currentBuild {\n          id\n          status\n          timeCreated\n          isPrivate\n          user {\n            id\n            displayName\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgReplOwner on Repl {\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgReplAuthorizations on Repl {\n    authorizations {\n      editFileContents {\n        isAuthorized\n        code\n        message\n      }\n      viewFileContents {\n        isAuthorized\n        code\n        message\n      }\n      connectToWorkspace {\n        isAuthorized\n        code\n        message\n      }\n      deleteRepl {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n        code\n        message\n      }\n    }\n  }\n"]);return g=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgReplListRepl on Repl {\n    __typename\n    id\n    title\n    timeCreated\n    timeUpdated\n    imageUrl\n    iconUrl\n    wasPublished\n    isOwner\n    org {\n      id\n    }\n    project {\n      id\n      title\n    }\n    user {\n      id\n      ...OrgReplCreator\n    }\n    ...ReplLinkRepl\n    ...OrgReplMultiplayers\n    ...OrgReplTemplateInfo\n    ...OrgReplHostingDeployment\n    ...OrgReplOwner\n    ...OrgReplAuthorizations\n    ...ComponentsReplActions\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment OrgReplsResult on ReplConnection {\n    items {\n      ...OrgReplListRepl\n    }\n    pageInfo {\n      hasPreviousPage\n      previousCursor\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  fragment OrgReplManagement on Org {\n    ...OrgMetadata\n    authorizations {\n      createPublicRepl: createRepl(private: false) {\n        isAuthorized\n        message\n      }\n      createPrivateRepl: createRepl(private: true) {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  query OrgRepls($orgId: String!, $replsInput: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgReplManagement\n          repls(input: $replsInput) {\n            __typename\n            ... on ReplConnection {\n              ...OrgReplsResult\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}var b={},x=(0,o.J1)(d()),_=(0,o.J1)(p()),Y=(0,o.J1)(f()),S=(0,o.J1)(h()),A=(0,o.J1)(g()),I=(0,o.J1)(m(),s._L,u.r,x,_,Y,S,A,l.X),k=(0,o.J1)(v(),I),E=(0,o.J1)(w(),c.wW),C=(0,o.J1)(y(),E,k);function D(e){var n=(0,r._)({},b,e);return a.I(C,n)}},44263:(e,n,t)=>{"use strict";t.d(n,{n:()=>a,u:()=>o});var r=t(34837),i=t(42793);function o(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},44744:(e,n,t)=>{"use strict";t.d(n,{A:()=>f,z:()=>p});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),u=t(54744);function c(){var e=(0,a._)(["\n  query CreateReplTitle($teamId: Int, $title: String) {\n    replTitle(teamId: $teamId, title: $title)\n  }\n"]);return c=function(){return e},e}var s={},d=(0,l.J1)(c()),p=60;function f(e){var n,t,a=e.preferredTitle,l=e.teamId,c=(0,r._)((0,i.useState)(""),2),f=c[0],h=c[1],g=(0,i.useRef)(null),m=(0,i.useRef)(!1),v=(n={variables:{title:a,teamId:l},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1},t=(0,o._)({},s,n),u.I(d,t)),w=v.data,y=v.previousData,b=(null==w?void 0:w.replTitle)||(null==y?void 0:y.replTitle);(0,i.useEffect)(function(){b&&(m.current||h(b))},[b]);var x=(0,i.useCallback)(function(e){m.current=!0,h(e.slice(0,p))},[]),_=!a&&b===f;return{title:f,setTitle:x,titleInputRef:g,isTitleAutoGenerated:_}}},48495:e=>{e.exports={root:"index2_root__i6WdL",header:"index2_header__1hU2H",content:"index2_content__qZTQc",title:"index2_title__tsDs2"}},54766:(e,n,t)=>{"use strict";t.d(n,{G:()=>i,W:()=>o});var r=t(31700),i=3,o=r.i9},55226:e=>{e.exports={root:"Pane_root__Dz_FC",container:"Pane_container__V2H53",interactionBlanket:"Pane_interactionBlanket__HGhM4"}},56367:(e,n,t)=>{"use strict";t.d(n,{X:()=>d});var r=t(12584),i=t(41114),o=t(19223),a=t(4760),l=t(59734);function u(){var e=(0,r._)(["\n  fragment ComponentsReplActionsFeaturedRepl on Repl {\n    id\n    isPrivate\n    isFeaturedRepl\n    publicForkCount\n    timeUpdated\n    org {\n      id\n    }\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,r._)(["\n  fragment ComponentsReplActions on Repl {\n    id\n    url\n    title\n    slug\n    user {\n      id\n      username\n    }\n    ...DeleteReplDialogRepl\n    ...EditReplFormRepl\n    ...ComponentsReplActionsFeaturedRepl\n    ...TransferReplToOrgDialogRepl\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    authorizations {\n      deleteRepl {\n        isAuthorized\n      }\n      fork {\n        isAuthorized\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return c=function(){return e},e}var s=(0,i.J1)(u()),d=(0,i.J1)(c(),o.kh,a.pV,s,l.B_)},63914:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i,_:()=>o});var r=t(34778),i=function(e){(0,r.u4)(r.AZ.COURSE_ACTION,e)},o=function(e){(0,r.u4)(r.AZ.LESSON_ACTION,e)}},64957:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(12694),i=t(34837),o=t(21462),a=t(52963),l=t(82954),u=t(26575),c=t(25189),s=t(42793),d=t(39534),p=t(18712),f=t(25227),h=(0,s.AH)(p.wp.dragRegion);function g(){var e,n,t,s,p,g,m,v,w=(0,c.vm)(),y=(0,u.A)(),b=(e=(0,u.A)(),t=(n=(0,r._)((0,o.useState)(!1),2))[0],s=n[1],(0,o.useEffect)(function(){if(e)return s(document.hasFocus()),a.M.onFocusChanged(s)},[e]),t),x=(p=(0,u.A)(),m=(g=(0,r._)((0,o.useState)(!1),2))[0],v=g[1],(0,o.useEffect)(function(){if(p)return a.M.onFullScreenChanged(v)},[p]),m);return w&&y&&!x?(0,i.Y)(f.S,{css:h,children:(0,i.Y)("svg",{width:l.Cp,height:l.GB-16,children:b?null:(0,i.FD)(i.FK,{children:[(0,i.Y)("circle",{cx:19,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:39,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:59,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1})]})})}):null}},65169:e=>{e.exports={root:"Search_root__qfJle"}},69490:e=>{e.exports={opaqueOnHover:"Header_opaqueOnHover__cvJl6",root:"Header_root__fJWuA",desktopAppWindowsOs:"Header_desktopAppWindowsOs__XZvA_"}},69498:(e,n,t)=>{"use strict";t.d(n,{g:()=>w});var r=t(12694),i=t(34837),o=t(21462),a=t(44962),l=t(89890),u=t(16710),c=t(90405),s=t(11901),d=t(39534),p=t(70764),f=t(51292),h=t(18712),g=t(3937),m=t(91953),v=t(25227),w=function(e){var n=e.isIndividualOwner,t=e.showUpgradeForm,p=(0,r._)((0,o.useState)({type:"closed"}),2),f=p[0],h=p[1],w=(0,l.g)();if(!n||"loading"===w.type||"error"===w.type)return null;var b=w.replCount,x=w.isStarterUser,_=w.shouldEnforceUsersOverLimit;if(!x||!_)return null;var Y=a.q-b,S=Array.from({length:a.q}).map(function(e,n){return(0,i.Y)(v.S,{css:y.measureBar,style:{backgroundColor:n<b?(0,c.p)({replCount:b}):d.LU.backgroundDefault,border:n+1>b?"1px solid ".concat(d.LU.outlineDefault):"1px solid ".concat((0,c.A)({replCount:b}))}},n)});return(0,i.FD)(i.FK,{children:[(0,i.Y)(v.S,{tag:"button",css:y.bannerWrapper,onClick:function(e){e.preventDefault(),t?t():h({type:"open",onUpgradeConfirm:w.refetch})},children:(0,i.FD)(g.ui,{css:y.container,p:8,children:[(0,i.Y)(m.EY,{variant:"small",color:"dimmest",height:"singleLine",css:y.text,children:b===a.q-1?"This is your last free app":b<a.q?"You have ".concat(Y," free ").concat((0,s.A)("app",Y)," left"):"You're at the limit of free Apps"}),(0,i.Y)(v.S,{css:y.measures,row:!0,gap:4,children:S})]})}),(0,i.Y)(u.k,{setState:h,state:f})]})},y=(0,p.x)({bannerWrapper:[h.wp.reset.button,h.wp.textAlign.left,h.wp.borderRadius()],container:[h.wp.cursor.pointer,h.wp.borderRadius(),f.b.filled,h.wp.rowWithGap(24),h.wp.align.center],text:[h.wp.fontWeight.medium],measures:[h.wp.cursor.pointer,h.wp.flex.growAndShrink(1),h.wp.minWidth(42),h.wp.align.center],measureBar:[h.wp.height(10),h.wp.borderRadius(2),h.wp.overflow("visible"),h.wp.backgroundColor.backgroundDefault,h.wp.flex.growAndShrink(1)]})},69681:e=>{e.exports={root:"AgentChat_root__S4p6B",expandIcon:"AgentChat_expandIcon__lWPo0",expandBlanket:"AgentChat_expandBlanket__MTD97",right:"AgentChat_right__QSUg7",left:"AgentChat_left__B_TFP",sidebarResizeHandle:"AgentChat_sidebarResizeHandle__LT0LS"}},75429:e=>{e.exports={container:"NavMenu_container__dCg0w",menu:"NavMenu_menu__ob40z",statusIndicator:"NavMenu_statusIndicator__6N6qX",notificationIndicator:"NavMenu_notificationIndicator__bQpK2",bottom:"NavMenu_bottom__BvCEx",button:"NavMenu_button__dNTXA",popover:"NavMenu_popover__8_kzP",repl:"NavMenu_repl__s6nEw",link:"NavMenu_link__F9emD",notificationCount:"NavMenu_notificationCount___TZvW",themeIcon:"NavMenu_themeIcon__UOT4h"}},77737:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>Y6});var r,i,o,a,l,u,c=t(12694),s=t(34837),d=t(40185),p=t(21462),f=t(17844),h=t(12584),g=t(41114),m=t(54744),v=t(39590),w=t(41991),y=t(61480),b=t(73616);function x(){var e=(0,h._)(["\n  fragment FigmaImportFlowRepl on Repl {\n    id\n    config {\n      figmaUrl\n      figmaImportStatus\n    }\n    slug\n    title\n    layoutState\n    description\n    rootOriginReplUrl\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    ...PageTitleRepl\n  }\n  ","\n  ","\n  ","\n"]);return x=function(){return e},e}function _(){var e=(0,h._)(["\n  query FigmaImportFlow($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...FigmaImportFlowRepl\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}function Y(){var e=(0,h._)(["\n  mutation UpdateReplForFigmaImport($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          figmaUrl\n          figmaImportStatus\n        }\n        isRenamed\n        title\n      }\n    }\n  }\n"]);return Y=function(){return e},e}function S(){var e=(0,h._)(["\n  mutation GetFigmaIntermediateToken($input: GetFigmaIntermediateTokenInput!) {\n    getFigmaIntermediateToken(input: $input) {\n      ... on FigmaImportIntermediateToken {\n        token\n      }\n      ... on NoOAuthFoundError {\n        message\n      }\n      ... on InvalidFigmaUrlError {\n        message\n      }\n      ... on FigmaRateLimitError {\n        message\n      }\n    }\n  }\n"]);return S=function(){return e},e}var A={},I=(0,g.J1)(x(),w.c,b.c,y.b),k=(0,g.J1)(_(),I),E=(0,g.J1)(Y()),C=(0,g.J1)(S()),D=t(29005),R=t(47378),F=t(63949);function U(){var e=(0,h._)(["\n  query ReplEnvironmentDesktop(\n    $replId: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n        ...HandleReplRedirectionRepl\n        ...FigmaImportFlowRepl\n      }\n      ... on ReplRedirect {\n        ...HandleReplRedirectionReplRedirect\n      }\n      ... on ReplSubscriptionExpired {\n        ...HandleReplRedirectionSubscriptionExpired\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      id\n      isVerified\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return U=function(){return e},e}var P={},O=(0,g.J1)(U(),R.cL,D.I,F.VU,I,F.V4,F.aU,R.dL),T=t(22618),L=t(86103),M=t(72058),G=t(33375),N=t(7343);function z(){var e=(0,h._)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return z=function(){return e},e}var H={},W=(0,g.J1)(z()),B=t(65660);function j(e){return!e.origin&&"/@replit/Blank-Repl"===e.rootOriginReplUrl}var $=t(47676),q=t(860),V=t(47737),K=t(26279),Z=t(40872),J=t(69948),Q=t(45725);function X(){var e=(0,h._)(["\n  fragment AgentLayoutReplConfig on ReplConfig {\n    isInPlanningPhase\n    isAgentRepl\n  }\n"]);return X=function(){return e},e}function ee(){var e=(0,h._)(["\n  query CenteredAgentPresentationDuringInitialPlanning($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          id\n        }\n        config {\n          ...AgentLayoutReplConfig\n        }\n      }\n    }\n  }\n  ","\n"]);return ee=function(){return e},e}var en={},et=(0,g.J1)(X()),er=(0,g.J1)(ee(),et),ei=t(61125),eo=t(76957),ea=t(96907),el=t.n(ea),eu=t(86035),ec=t(69216),es=t(69832),ed=t(74651),ep=ed.ZU.String();ed.ZU.String();var ef=ed.ZU.Object({width:ed.ZU.Number(),height:ed.ZU.Number()}),eh=ed.ZU.Object({x:ed.ZU.Number(),y:ed.ZU.Number()}),eg=ed.ZU.Intersect([eh,ef]),em=ed.ZU.Object({top:ed.ZU.Number(),bottom:ed.ZU.Number(),left:ed.ZU.Number(),right:ed.ZU.Number()}),ev=ed.ZU.Object({id:ed.ZU.String(),type:ed.ZU.Literal("paneGroup"),panes:ed.ZU.Array(ep),percent:ed.ZU.Number(),activeIndex:ed.ZU.Number()}),ew=ed.ZU.Object({id:ed.ZU.String(),type:ed.ZU.Literal("floatingPaneGroup"),panes:ed.ZU.Array(ep),activeIndex:ed.ZU.Number(),rect:eg}),ey=ed.ZU.Recursive(function(e){return ed.ZU.Object({type:ed.ZU.Literal("split"),stacked:ed.ZU.Boolean(),children:ed.ZU.Array(ed.ZU.Union([ev,e])),percent:ed.ZU.Number()})});ed.ZU.Union([ev,ey]);var eb=ed.ZU.Object({tiling:ed.ZU.Union([ey,ev,ed.ZU.Null()]),floating:ed.ZU.Array(ew)});ed.ZU.Union([ed.ZU.Literal("left"),ed.ZU.Literal("right")]),ed.ZU.Object({inset:ed.ZU.Optional(em),size:ef,gap:ed.ZU.Number(),headerHeight:ed.ZU.Number()});var ex=ed.ZU.Union([ed.ZU.Literal("above"),ed.ZU.Literal("below"),ed.ZU.Literal("leftOf"),ed.ZU.Literal("rightOf")]);function e_(e,n){var t,r,i,o,a={width:t=.5*n.width,height:r=.5*n.height,x:n.x+(n.width-t)/2,y:n.y+(n.height-r)/2};if(i=e.x,o=e.y,i>a.x&&i<a.x+a.width&&o>a.y&&o<a.y+a.height)return{dropLocation:"middle",previewRect:n};var l={x:n.x+n.width/2,y:n.y+n.height/2},u=.3*n.width,c=l.x-u/2;if(e.x>=c&&e.x<=c+u){var s=e.y<=l.y?"above":"below",d=n.height/2;return{dropLocation:s,previewRect:{x:n.x,y:"above"===s?n.y:n.y+d,width:n.width,height:d}}}var p=e.x<=l.x?"leftOf":"rightOf",f=n.width/2;return{dropLocation:p,previewRect:{x:"leftOf"===p?n.x:n.x+f,y:n.y,width:f,height:n.height}}}ed.ZU.Union([ex,ed.ZU.Literal("replace")]),ed.ZU.Union([ed.ZU.Literal("up"),ed.ZU.Literal("left"),ed.ZU.Literal("right"),ed.ZU.Literal("down")]);var eY={height:0,width:0};function eS(e){if(e.length<1)throw Error("Expected a path with a parent");return e.slice(0,-1)}function eA(e){return"floatingPaneGroup"!==e.type}var eI=t(56902),ek=t(86105),eE=t(22531);function eC(e,n){var t=(0,eI._)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!=typeof o)throw Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw Error("Expected paneGroup");return a}if("tiling"!==r)throw Error("Expected tiling path");var l=e.tiling;if(!l)return null;var u=l,c=i.length,s=0,d=!0,p=!1,f=void 0;try{for(var h,g=i[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;if("paneGroup"===u.type)break;if("number"!=typeof m)throw Error("Expected number");s++,u=u.children[m]}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return c===s?u:null}function eD(e,n){var t=e.floating.find(function(e){return e.panes.includes(n)});if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,u=void 0;try{for(var c,s=o.node.children[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,ek._)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function eR(e,n){var t=e.tiling;return t?function e(n,t,r){if("paneGroup"===n.type)return{paneGroup:n,path:r};var i=0,o=n.children.length-1;return"topRight"!==t||n.stacked?"bottomRight"===t?i=o:"bottomLeft"===t&&n.stacked&&(i=o):i=o,e(n.children[i],t,(0,ek._)(r).concat([i]))}(t,n,["tiling"]):null}function eF(e,n){var t=e.tiling,r=e.floating,i=(0,ek._)(r);for(t&&i.push(t);i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.type)i.push.apply(i,(0,ek._)(o.children));else if(o.id===n)return o}return null}function eU(e,n){var t=e.tiling;if(null===t)return null;for(var r=[[t,["tiling"]]];r.length;){var i=function(){var e=r.shift();if(!e)throw Error("Expected item");var t=(0,c._)(e,2),i=t[0],o=t[1];return"split"!==i.type?"continue":i.children.some(function(e){return"paneGroup"===e.type&&e.id===n})?{v:{node:i,path:o}}:void i.children.forEach(function(e,n){r.push([e,(0,ek._)(o).concat([n])])})}();if("object"===(0,eE._)(i))return i.v}return null}function eP(e,n){var t=eD(e,n);if((null==t?void 0:t.paneGroup.type)==="paneGroup"){var r=eU(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function eO(e){var n=e.relativeTo,t=e.rects,r=e.direction,i=t.get(n);if(!i)throw Error("Expected relativeTo rect to be included in rects");var o=null,a=!0,l=!1,u=void 0;try{for(var s,d=t[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var p=(0,c._)(s.value,2),f=p[0],h=p[1];if(f===n)continue;var g=function(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}({from:i,other:h,direction:r});if(("leftOf"!==r&&"above"!==r||!(g<=0))&&("rightOf"!==r&&"below"!==r||!(g<0))){var m=function(e,n,t){var r=(0,c._)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),i=r[0],o=r[1],a=Math.max(i[0],o[0]);return Math.min(i[1],o[1])-a}(i,h,"leftOf"===r||"rightOf"===r?"y":"x");!(m<=0)&&(!o||o.distance>g||o.distance===g&&o.overlap<m)&&(o={key:f,rect:h,distance:g,overlap:m})}}}catch(e){l=!0,u=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw u}}return(null==o?void 0:o.key)||null}var eT={top:0,bottom:0,left:0,right:0};function eL(e,n){var t=n.inside,r=n.minVisibleX,i=n.minVisibleY,o=-e.width+r,a=t.width-r,l=t.height-i;return{x:Math.min(Math.max(o,e.x),a),y:Math.min(Math.max(0,e.y),l)}}function eM(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating)return void e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=eD(e,n.relativeTo);if(!i)throw Error("Expected pane");r=i.paneGroupPath}if(null===r)throw Error("Expected relativeTo");if("tiling"!==r[0])throw Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,u="above"===o||"below"===o,c="rightOf"===o||"below"===o;if(!e.tiling&&1===r.length){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(!e.tiling)throw Error("Expected tiling");var s=eC(e,r);if(!s||!eA(s))throw Error("Expected tiled node");if(1===r.length&&"replace"===o){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];e.tiling={type:"split",percent:100,stacked:u,children:d},eG({id:n.id,insertIndex:+!!c,panes:a,children:d,percent:l,activeIndex:t});return}if(1===r.length&&"split"===e.tiling.type){if(!!e.tiling.stacked==!!u)return void eG({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:c?e.tiling.children.length:0,children:e.tiling.children});var p={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},f=c?[s,p]:[p,s];return s.percent=100-p.percent,void(e.tiling={type:"split",stacked:u,children:f,percent:100})}if(0===r.length)throw Error("Expected relativeTo length");var h=eC(e,eS(r));if((null==h?void 0:h.type)!=="split")throw Error("Expected split parent");if("replace"===o){var g=h.children.indexOf(s);h.children.splice(g,1,{id:n.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:t});return}if(!!h.stacked==!!u){var m=h.children.indexOf(s);eG({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:c?m+1:m,children:h.children});return}if(!!h.stacked!=!!u){var v={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},w=c?[s,v]:[v,s],y=s.percent;s.percent=100-v.percent;var b=h.children.indexOf(s);h.children[b]={type:"split",stacked:u,children:w,percent:y};return}}function eG(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0!==t){var l=(100-t)/100;r.forEach(function(e){e.percent=e.percent*l}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a});return}var u=r.reduce(function(e,n){return e+n.percent},0)/r.length,c=100/(100+u);r.forEach(function(e){e.percent=e.percent*c}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:u*c,activeIndex:a})}function eN(e,n){var t=eF(e,n.paneGroupId);if(!t)throw Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate;if(void 0!==r&&r>e.panes.length)throw Error("Invalid index");var a=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[a,0].concat((0,ek._)(i))),(void 0===o||o)&&(e.activeIndex=a)}(t,n)}function ez(e,n){e.panes.splice(n,1),0!==e.activeIndex&&(n>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function eH(e,n){var t=eD(e,n);if(!t)throw Error("Expected pane");if(t.floating){if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!=typeof r)throw Error("Expected floatingIndex");eW(e,["floating",r])}else ez(t.paneGroup,t.index);return}var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw Error("Expected paneIndex");if(!a&&1===i.panes.length){e.tiling=null;return}if(i.panes.length>1)return void ez(i,l);eW(e,o)}function eW(e,n){var t=(0,eI._)(n),r=t[0],i=t.slice(1);if("tiling"===r&&0===i.length){e.tiling=null;return}if("floating"===r&&0===i.length){e.floating=[];return}var o=eC(e,n);if(!o)throw Error("Expected node");if("floatingPaneGroup"===o.type){var a=e.floating.indexOf(o);if(-1===a)throw Error("Expected paneGroupIndex");e.floating.splice(a,1);return}var l=eS(n),u=eC(e,l);if((null==u?void 0:u.type)!=="split")throw Error("Expected split");var s=u.children.indexOf(o);if(-1===s)throw Error("Expected paneGroupIndex");var d=u.children;if(d.splice(s,1),d.length>1){var p=100/d.reduce(function(e,n){return e+n.percent},0);d.forEach(function(e){e.percent=e.percent*p});return}var f=(0,c._)(d,1)[0],h=l.length>1?eC(e,eS(l)):null;if(!h){f.percent=100,e.tiling=f;return}if("split"!==h.type)throw Error("Expected split");var g=h.children.indexOf(u);if(-1===g)throw Error("Expected parentIndex");f.percent=u.percent,h.children[g]=f}function eB(e,n){var t=n.paneGroupPath,r=n.rect,i=eC(e,t);if((null==i?void 0:i.type)!=="paneGroup")throw Error("Expected paneGroup");eW(e,t),eM(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}function ej(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:eC(e,n.paneGroupPath);if(!t||!("panes"in t))throw Error("Expected paneGroup");eH(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}function e$(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=eC(e,t);if(!a||!eA(a))throw Error("Expected leftNode");var l=eC(e,eS(t));if((null==l?void 0:l.type)!=="split")throw Error("Expected splitNode");var u=l.children.indexOf(a);if(-1===u)throw Error("Expected leftNodeIndex");var c=u+1,s=l.children[c];if(!s)throw Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&u>0)for(var d=Math.abs(r),p=u-1;d>0;){var f=l.children[p];if(f.percent>d){f.percent-=d;break}if(d-=f.percent,f.percent=0,0===p)break;p--}var h=l.children.reduce(function(e,n){return n===s?e:e+n.percent},0);s.percent=100-h;return}var g=a.percent+s.percent,m=l.children.slice(u).reduce(function(e,n){return e+n.percent},0);if(r>g-o){if(a.percent=Math.min(m,Math.max(g,r)),s.percent=0,r>g&&c<l.children.length-1)for(var v=r-g,w=c+1;v>0;){var y=l.children[w];if(y.percent>v){y.percent-=v;break}if(v-=y.percent,y.percent=0,w===l.children.length-1)break;w++}return}var b=a.percent-r;s.percent=s.percent+b,a.percent=r}var eq=t(35992),eV=t(69737),eK=(0,eo.eU)(!1),eZ=(0,eo.eU)([]),eJ=(0,eo.eU)([]),eQ=(0,eo.eU)([]),eX={x:0,y:0,width:0,height:0},e0={type:"commands",data:{autoFocus:!1}},e1=(0,eV.Iz)(function(e){return(0,eo.eU)({paneId:e,type:"tile",rectAtom:(0,eo.eU)((0,f._)({},eX)),dataAtom:(0,eo.eU)((0,f._)({},e0)),isHidden:!1,isCommitted:!1,highlight:!1})}),e2=(0,eo.eU)(function(e){return e(eZ).map(function(n){return e(e1(n))})}),e4=(0,eo.eU)(function(e){return e(e2).filter(function(e){return!e.isHidden})}),e5=(0,eo.eU)(function(e){return e(e2).filter(function(e){return e.isHidden})}),e3=(0,eo.eU)(function(e){return e(eQ).map(function(n){return e(e7(n))})}),e8=(0,eV.Iz)(function(e){return(0,eo.eU)({handleId:e,rect:eX,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]})}),e7=(0,eV.Iz)(function(e){return(0,eo.eU)({id:e,rectAtom:(0,eo.eU)((0,f._)({},eX)),panes:[],path:["tiling"],activeIndex:0})}),e6=(0,eo.eU)(function(e){return e(eK)?34:32}),e9=(0,eo.eU)({x:0,y:0,width:0,height:0}),ne=t(62246),nn=(0,eo.eU)(null),nt=(0,eo.eU)(null,function(e,n,t){t!==e(nn)&&n(nn,t)}),nr=(0,eo.eU)(null,function(e,n,t){var r=e1(t);e(r).isCommitted||n(r,function(e){return(0,eq.jM)(e,function(e){e.isCommitted=!0})})}),ni=(0,eo.eU)(function(e){var n=e(nn);if(!n)return null;var t=e(e1(n)),r=e(t.dataAtom);return"markdown"===r.type?r.data.path:(0,ne.xS)(r)&&r.data.path||null}),no=(0,eo.eU)(null),na=t(23099),nl=t.n(na),nu=t(6983),nc=ed.ZU.Object({width:ed.ZU.Number({minimum:0}),isOpen:ed.ZU.Boolean()}),ns=(0,eo.eU)({width:180,isOpen:!1}),nd=(0,eo.eU)(function(e){return e(ns).isOpen}),np=(0,eo.eU)(function(e){var n=e(ns);return n.isOpen?n.width:0}),nf=(0,eo.eU)(!0),nh=(0,eo.eU)(!1),ng=(0,eo.eU)({tiling:null,floating:[]}),nm=(0,eo.eU)(function(e){return e(e2).filter(function(n){return(0,ne.xS)(e(n.dataAtom))})}),nv=(0,eo.eU)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(e2)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&(0,ne.xS)(e(a.dataAtom)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),nw=(0,eo.eU)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(e2)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&!(0,ne.xS)(e(a.dataAtom)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),ny=(0,eo.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e4)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),nb=(0,eo.eU)([]),nx=(0,eo.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e5)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),n_=(0,eo.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e2)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),nY=(0,eo.eU)(function(e){return e(n_).length}),nS=(0,eo.eU)(function(e){var n=e(e9);return!!(n.width&&n.height)}),nA=(0,eo.eU)(null),nI=(0,eo.eU)(null,function(e,n,t){var r=e(e2).find(function(n){var r=e(n.dataAtom);return(0,ne.xS)(r)?t===(0,ne.Vj)(r):"markdown"===r.type&&t===r.data.path});r&&(n(nt,r.paneId),n(nr,r.paneId))}),nk=(0,eo.eU)(null);function nE(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function nC(e,n){var t,r,i,o,a,l,u,c,s,d=(r=(t={point:e,rect:n}).rect,i=t.point,o=r.height>r.width?r.width/r.height:1,a=r.width>r.height?r.height/r.width:1,l=(i.x-r.x)*a,(s=Math.min(l,u=(r.x+r.width-i.x)*a,c=(i.y-r.y)*o,(r.y+r.height-i.y)*o))===l?"left":s===u?"right":s===c?"top":"bottom"),p={x:n.x,y:n.y,width:n.width,height:n.height},f="below";return"top"===d?(p.height=n.height/2,f="above"):"bottom"===d?(p.height=n.height/2,p.y=n.y+n.height/2,f="below"):"left"===d?(p.width=n.width/2,p.x=n.x,f="leftOf"):"right"===d&&(p.width=n.width/2,p.x=n.x+n.width/2,f="rightOf"),{placement:f,rect:p}}function nD(e){return"handle:"+e.leftPath.join(":")}function nR(e){return(0,q.A)(function(){return(0,eV.mg)(e,function(e){return{width:e.width,height:e.height}},function(e,n){return e.height===n.height&&e.width===n.width})},[e])}function nF(e){return(0,q.A)(function(){return(0,eV.mg)(e,function(e){return{x:e.x,y:e.y}},function(e,n){return e.x===n.x&&e.y===n.y})},[e])}var nU=ed.ZU.Object({type:ed.ZU.Literal("centered")}),nP=ed.ZU.Object({type:ed.ZU.Literal("sidebar"),width:ed.ZU.Number({minimum:300})}),nO=(0,eV.tG)("agent-filetree-order-2",null,void 0,{getOnInit:!0});ed.ZU.Union([nP,nU]);var nT=(0,eo.eU)(null),nL=(0,eV.mg)(nT,function(e){return null!==e}),nM=(0,eo.eU)(!0),nG=(0,eo.eU)(function(e){return e(nh)?16:6}),nN=(0,eo.eU)(0),nz=(0,eo.eU)(function(e){var n=e(e6),t=e(nM),r=e(ns),i=r.isOpen?r.width:0,o=e(e9),a=e(nG),l=i+(t?48:a);i>0&&(l+=a);var u=e(nN),c=a+2,s=a+2;if(e(eK)){u=a;var d=e(nO),p=e(nT);if(p){var f="sidebar"===p.type?p.width:450;switch(d){case"filetree-agent":l=r.isOpen?r.width+2*a:a,c=a+f+a;break;case"agent-filetree":c=r.isOpen?r.width+2*a:a,l=a+f+a}}else l=r.isOpen?r.width+a:a,c=a;s=a}return{headerHeight:n,inset:{top:u,bottom:s,left:l,right:c},gap:a,size:{width:o.width,height:o.height}}}),nH=(0,eo.eU)(null,function(e,n,t){n(e9,t),n(nB,e(ng))});function nW(e,n){return nl()(e,n)}var nB=(0,eo.eU)(null,function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var u=e1(r),c=e(u);nW(e(c.rectAtom),i)||n(c.rectAtom,i);var s=(0,eq.jM)(c,function(e){e.paneId=r,e.type=o,e.isHidden=a});nW(c,s)||n(u,s)},i=e(eZ),o=e(eJ),a=e(eQ),l=new Set(i),u=new Set(o),c=new Set(a),s=function(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?eT:o,l=[],u=[],c=[],s=[],d=null,p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},f=e.tiling;if((null==f?void 0:f.type)==="paneGroup"){var h={x:p.x,y:p.y+i,width:p.width,height:p.height-i},g={x:h.x,y:h.y-i,width:h.width,height:i};s.push({id:f.id,rect:g,panes:f.panes,activeIndex:f.activeIndex,path:["tiling"]}),u.push.apply(u,(0,ek._)(f.panes.map(function(e,n){return{paneId:e,rect:h,active:n===f.activeIndex}})))}else f&&f.children.forEach(function(n,t){return function n(t,o,a,l){var p,f,h,g=o.children.indexOf(t),m=o.children.length,v=o.stacked?a.height:a.width,w=(p=a.width,f=a.height,h=t.percent/100,o.stacked?f=(v-(r*(m-1)+i*m))*h+i:p=(v-r*(m-1))*h,{width:p,height:f}),y=w.width,b=w.height,x=function(){var e=a.x,n=a.y;if(0===g)return{x:e,y:n};if(!d)throw Error("Expected previousRect");return o.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),_={x:x.x,y:x.y,height:b,width:y};if(d=_,"paneGroup"===t.type){var Y={x:_.x,y:_.y+i,width:_.width,height:_.height-i},S={x:Y.x,y:Y.y-i,width:Y.width,height:i};s.push({id:t.id,rect:S,panes:t.panes,activeIndex:t.activeIndex,path:l}),u.push.apply(u,(0,ek._)(t.panes.map(function(e,n){return{paneId:e,rect:Y,active:n===t.activeIndex}})))}else t.children.forEach(function(e,r){return n(e,t,_,(0,ek._)(l).concat([r]))});if(0!==g){var A={x:_.x-(o.stacked?0:r),y:_.y-(o.stacked?r:0),width:o.stacked?_.width:r,height:o.stacked?r:_.height},I=eS(l),k=(0,ek._)(I).concat([g-1]),E=eC(e,k);if(!E||!eA(E))throw Error("Expected leftNode");var C=void 0;0===E.percent?C="left":0===t.percent&&(C="right"),c.push({parentPath:I,leftPath:k,rightPath:l,stacked:o.stacked,rect:A,snapped:C})}}(n,f,p,["tiling",t])});var m={x:p.x-a.left,y:p.y-a.top,width:p.width+a.left+a.right,height:p.height+a.top+a.bottom};return e.floating.forEach(function(e,n){var t=eL(e.rect,{inside:m,minVisibleX:2*i,minVisibleY:i}),r={height:i,width:e.rect.width,x:t.x,y:t.y},o={x:t.x,y:t.y+i,width:e.rect.width,height:Math.max(e.rect.height-i,0)};s.push({id:e.id,rect:r,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),l.push.apply(l,(0,ek._)(e.panes.map(function(n,t){return{paneId:n,rect:o,active:t===e.activeIndex}})))}),{tiles:u,gutters:c,headers:s,floating:l}}(t,e(nz)),d=s.tiles,p=s.floating,f=s.gutters,h=s.headers,g=f.map(nD);nW(o,g)||n(eJ,g);var m=(0,ek._)(d).concat((0,ek._)(p)).map(function(e){return e.paneId});nW(i,m)||n(eZ,(0,nu.A)(m,{existing:i,getKey:function(e){return e}}));var v=[];h.forEach(function(t){c.delete(t.id);var r=e7(t.id),i=e(r);v.push(t.id),nW(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,eq.jM)(i,function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path});nW(i,o)||n(r,o)}),nW(a,v)||n(eQ,v),d.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"tile"})}),p.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"floating"})}),f.forEach(function(t){var r={handleId:nD(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};u.delete(r.handleId);var i=e8(r.handleId);nW(e(i),r)||n(i,r)}),l.forEach(e1.remove),u.forEach(e8.remove),c.forEach(e7.remove);var w=e(nn);w&&l.has(w)&&n(nn,null),n(ng,t)}),nj=ed.ZU.Object({type:ed.ZU.String()}),n$=ed.ZU.Object({visible:ed.ZU.Boolean(),primaryTools:ed.ZU.Array(nj),secondaryTools:ed.ZU.Array(nj)}),nq=(0,eo.eU)({visible:!0,primaryTools:[{type:"agentChat"},{type:"ghostwriterChat"}],secondaryTools:[{type:"agentProgress"},{type:"webview"},{type:"runnerOutput"},{type:"neon"},{type:"deployments"}]});(0,eo.eU)(null,function(e,n){n(nq,(0,eq.jM)(e(nq),function(e){e.visible=!1})),n(nM,!1),n(nB,e(ng))}),(0,eo.eU)(null,function(e,n){n(nq,(0,eq.jM)(e(nq),function(e){e.visible=!0})),n(nM,!0),n(nB,e(ng))});var nV=(0,eo.eU)(null,function(e,n,t){var r=e(nq),i=r.secondaryTools.findIndex(function(e){return e.type===t});-1!==i&&n(nq,(0,eq.jM)(r,function(e){e.secondaryTools.splice(i,1)}))}),nK=(0,eo.eU)(null,function(e,n,t){var r=e(nq);r.secondaryTools.some(function(e){return e.type===t.pane.type})||n(nq,(0,eq.jM)(r,function(e){void 0!==t.atIndex?e.secondaryTools.splice(t.atIndex,0,t.pane):e.secondaryTools.push(t.pane)}))});function nZ(e){return"extension"===e.type?e.data.installationId:e.type}var nJ=t(79203),nQ=t(26325),nX=t(83846),n0=t(67201),n1=t(67862),n2=function(){var e=new Map([["agentChat",40],["webview",60]]);if(.4*window.innerWidth>450){var n=Math.round(450/window.innerWidth*100);e.set("agentChat",n),e.set("webview",100-n)}return e},n4=t(29935),n5=t(82643),n3=t(77958),n8=t(58631),n7=(0,eo.eU)(null),n6=(0,eo.eU)(null,function(e,n,t){n8.A.set(tt(t.popupId),Date.now()+6048e5),n8.A.set(tn(t.popupId),t.state);var r=!0,i=!1,o=void 0;try{for(var a,l=n8.A.keys().filter(function(e){return e.startsWith(te)})[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value,c=n8.A.get(u);if("number"==typeof c&&c<Date.now()){var s=u.split(":")[1];n8.A.remove(tt(s)),n8.A.remove(tn(s))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}),n9=(0,eo.eU)(function(e){return!!e(n7)}),te="popup-id-ttl:";function tn(e){return"".concat("popup-id-data:").concat(e)}function tt(e){return"".concat(te).concat(e)}var tr=(0,eo.eU)(function(e){var n=e(ng),t={};return e(e2).forEach(function(n){t[n.paneId]=e(n.dataAtom)}),{layout:n,data:t,sidebar:e(ns),dock:e(nq)}}),ti=(0,eo.eU)(null),to=(0,eo.eU)(null),ta=(0,eo.eU)(null),tl=(0,eo.eU)(null,function(e,n,t){return(0,n4._)(function(){var r,i,o,a,l,u,c;return(0,n5.YH)(this,function(s){switch(s.label){case 0:var d;if((r=e(to))&&!r.retry||r&&Date.now()-r.timestamp<6e4||!e(nS)||(i=e(tr),o=t.replId,a=e(ti),!t.force&&nl()(a,i)))return[2];if(l=e(n7))return n(n6,{popupId:l,state:i}),n(ti,i),[2];return n(ta,u=(0,n0.A)()),[4,(d=i,(0,n4._)(function(){var e,n;return(0,n5.YH)(this,function(t){switch(t.label){case 0:n=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,null===n3.V||void 0===n3.V?void 0:n3.V.mutate({mutation:W,variables:{input:{replId:o,state:d}}})];case 2:return n=t.sent(),[3,4];case 3:return t.sent(),[2,{success:!1,retry:!0}];case 4:if((null==n||null==(e=n.data)?void 0:e.setReplLayoutState.__typename)==="Repl")return[2,{success:!0,retry:void 0}];return[2,{success:!1,retry:!1}]}})})())];case 1:if(c=s.sent(),e(ta)!==u)return[2];if(n(ta,null),c.retry)return n(to,{timestamp:Date.now(),retry:!0}),[2];if(!c.success)return n(to,{timestamp:Date.now(),retry:!1}),[2];return n(ti,i),[2]}})})()}),tu=(0,eo.eU)(null,function(e,n,t){var r=t.data,i=t.layout,o=t.sidebar,a=t.dock,l=t.type;Object.entries(r).forEach(function(t){var r=(0,c._)(t,2),i=r[0],o=r[1],a=e1(i);n(a,(0,eq.jM)(e(a),function(e){e.isCommitted=!0})),n(e(a).dataAtom,o)}),n(ng,i),o&&"saved"===l&&n(ns,o),a&&n(nq,a),n(nB,i),n(nk,l),n(ti,e(tr))}),tc=(0,eo.eU)(!1),ts=(0,eo.eU)(function(e){return e(tc)?e(nn):null}),td=(0,eo.eU)(null,function(e,n,t){n(nt,t),n(tc,!0)}),tp=(0,eo.eU)(null,function(e,n,t){n(tc,!0);var r=eF(e(ng),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(nA,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(nA,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(nt,o)}),tf=(0,eo.eU)(null,function(e,n){e(n9)||n(tc,!1)}),th=(0,eo.eU)(null,function(e,n,t){e(ts)===t?n(tf):n(td,t)}),tg=(0,eo.eU)(null,function(e,n,t){var r=eF(e(ng),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(nA,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(nA,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(th,o)}),tm=(0,eo.eU)(function(e){var n=e(e9),t=n.width+n.x,r=-n.x;if(e(eK)){var i=e(nG);return{x:r,width:t,y:i,height:n.height-i}}return{x:r,width:t,y:-n.y,height:n.height+n.y}}),tv=(0,eo.eU)(function(e){var n=e(e6),t=e(tm);return{x:t.x,y:t.y,width:t.width,height:n}}),tw=(0,eo.eU)(function(e){var n=e(e6),t=e(tm);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}),ty=t(16182),tb=t.n(ty),tx=(0,eo.eU)(null,function(e,n,t){var r=eF(e(ng),t);if(!r)return null;n(nt,r.panes[r.activeIndex])}),t_=(0,eo.eU)(null,function(e,n,t){var r=t.paneId,i=t.activate,o=e(ng);if("tile"===e(e1(r)).type?n(nB,(0,eq.jM)(o,function(e){try{!function(e,n){var t=eD(e,n.paneId);if(t){var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map(function(e,n){return r.slice(0,n+1)}),o=!0,a=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,d=eC(e,s);if(!d)throw Error("Expected node");if("floatingPaneGroup"===d.type)throw Error("Expected tiled pane");if(1!==s.length){var p=s[s.length-1];if("number"!=typeof p)throw Error("Expected number");var f=eC(e,eS(s));if((null==f?void 0:f.type)!=="split")throw Error("Expected split");var h=f.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var g=p===f.children.length-1,m=g?(0,ek._)(s.slice(0,-1)).concat([p-1]):s,v=g?f.children[p-1].percent-(h-d.percent):h;e$(e,{leftPath:m,percent:v})}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(e){throw n(nA,{error:e,origin:"Layout: revealPaneAtom/revealTiledPane"}),e}})):n(nB,(0,eq.jM)(o,function(e){try{!function(e,n){var t=eD(e,n.paneId);if(t){var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}}(e,{paneId:r,minWidth:200,minHeight:140})}catch(e){throw n(nA,{error:e,origin:"Layout: revealPaneAtom/revealFloatingPane"}),e}})),!i){var a=eD(o,r),l=e(nn);if(!a)throw Error("Expected pane");if(!l)return;var u=eD(o,l);if(!u)throw Error("Expected active pane");if(u.paneGroup.id!==a.paneGroup.id)return}n(nt,r)}),tY=(0,eo.eU)(null,function(e,n,t){var r;n(e(e1(t.paneId)).dataAtom,t.pane),(t.makeActive||t.reveal)&&n(t_,{paneId:t.paneId,activate:null!=(r=t.makeActive)&&r}),(t.commit||(0,ne.NM)(t.pane))&&n(nr,t.paneId)}),tS=(0,eo.eU)(null,function(e,n,t){var r,i=e(ng),o=eD(i,t);if(!o)throw Error("Expected pane");if(e(eK)&&(null==(r=i.tiling)?void 0:r.type)==="paneGroup"&&0===i.floating.length&&1===o.paneGroup.panes.length)return n(tY,{paneId:t,pane:{type:"webview"}});var a=!o.paneGroup.panes.some(function(e){return e!==t}),l=t===e(nn),u=eP(i,t),c=(0,eq.jM)(i,function(e){try{eH(e,t)}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});if(n(nB,c),a&&e(tc)&&!e(n9)&&n(tc,!1),l&&(a||n(tx,o.paneGroup.id),a&&u)){do"split"===u.type&&(u=u.children[0]);while("paneGroup"!==u.type);n(tx,u.id)}}),tA=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=eD(r,t),o=null==i?void 0:i.paneGroup.panes.filter(function(e){return e!==t});if(null==o?void 0:o.length){var a=(0,eq.jM)(r,function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var u=a.value;eH(e,u)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});n(nB,a)}}),tI=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=eD(r,t);i&&n(nB,(0,eq.jM)(r,function(e){var n=!1,r=!0,o=!1,a=void 0;try{for(var l,u=i.paneGroup.panes[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;n&&eH(e,c),c===t&&(n=!0)}}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}}))}),tk=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=eF(r,t.paneGroupId);if(!i){var o=Error("Expected pane group");throw n(nA,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,eq.jM)(r,function(e){try{i.panes.forEach(function(n){eH(e,n)})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),e}});e(tc)&&!e(n9)&&n(tc,!1),n(nB,a)}),tE=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=eD(r,t.paneId);if(!i){var o=Error("Expected relativeToPane");throw n(nA,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=(0,n0.A)();n(e(e1(a)).dataAtom,{type:"commands",data:{autoFocus:!!t.autoFocus}});var l=(0,eq.jM)(r,function(e){try{eM(e,{id:(0,n0.A)(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),e}});n(nB,l),n(nt,a)}),tC=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=(0,n0.A)();n(e(e1(i)).dataAtom,t.pane),(0,ne.NM)(t.pane)&&n(nr,i);var o=(0,eq.jM)(r,function(e){try{eM(e,{id:(0,n0.A)(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),e}});return n(nB,o),i}),tD=(0,eo.eU)(null,function(e,n,t){var r=e(ng);n(nB,(0,eq.jM)(r,function(e){e$(e,{leftPath:t.leftPath,percent:t.percent})}))}),tR=t(843),tF=(0,eo.eU)(null,function(e,n,t){if(0===t.panes.length){var r=Error("Expect at least one pane");throw n(nA,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(ng),o=t.panes.map(function(){return(0,n0.A)()}),a=(0,eq.jM)(i,function(e){try{eM(e,{id:(0,n0.A)(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),e}});if(n(nB,a),t.panes.forEach(function(t,r){var i=o[r];n(e(e1(i)).dataAtom,t),(0,ne.NM)(t)&&n(nr,i);var a=(0,ne.gG)(t.type)?e(e2).find(function(n){return e(n.dataAtom).type===t.type&&n.paneId!==i}):null;a&&n(tS,a.paneId)}),t.commit){var l=!0,u=!1,c=void 0;try{for(var s,d=o[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(nr,p)}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}}return t.makeActive&&n(nt,o[0]),o}),tU={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},tP=(0,eo.eU)(null,function(e,n,t){n(tC,{pane:t.pane,relativeTo:["tiling"],placement:tU[t.edge]})}),tO=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=(0,n0.A)(),o=(0,n0.A)(),a=(0,eq.jM)(r,function(e){try{eM(e,{id:o,panes:[i],isFloating:!0,rect:t.rect})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),e}});return n(nB,a),n(e(e1(i)).dataAtom,t.pane),(0,ne.NM)(t.pane)&&n(nr,i),t.makeActive&&(n(nt,i),t.makeModal&&n(tR.LY,o)),i}),tT=(0,eo.eU)(null),tL=(0,eo.eU)(null),tM=(0,eV.mg)(tL,function(e){return null!==e}),tG=(0,eo.eU)(null,function(e,n,t){n(tL,t),requestAnimationFrame(function(){n(tL,null)})}),tN=(0,eo.eU)(null),tz=(0,eV.mg)(tN,Boolean),tH=(0,eo.eU)(null,function(e,n,t){switch(t.type){case"start":var r=e(nT);if((null==r?void 0:r.type)!=="sidebar")return;n(tN,{startWidth:r.width});break;case"update":var i=e(tN);if(!i)return;var o=e(nO),a=i.startWidth+t.moveDelta.x*("filetree-agent"===o?-1:1),l=e(e9).width,u=.6-Math.max(0,l-1e3)/5e3,c=Math.min(l*u,620);n(nT,function(e){return(0,eq.jM)(e,function(e){(null==e?void 0:e.type)==="sidebar"&&(a<300?e.width=300-a>150?32:300:a>c?e.width=c:e.width=a)})}),n(nB,e(ng));break;case"end":var s=e(nT);if((null==s?void 0:s.type)!=="sidebar")return;var d=e(tN);if(n(tN,null),s.width>32&&s.width<300&&d){var p={width:s.width}.width>d.startWidth;n(tW,(0,f._)({type:"sidebar"},p?{width:450}:{width:300}))}}}),tW=(0,eo.eU)(null,function(e,n,t){n(tG,{headers:new Map(e(eQ).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(eZ).map(function(e){return[e,{snappiness:400}]}))}),n(nT,t),n(nB,e(ng))}),tB=(0,eo.eU)(null,function(e,n,t){n(tW,{type:"sidebar",width:t?450:32})}),tj=(0,eo.eU)(null,function(e,n){n(tW,{type:"sidebar",width:450})}),t$=(0,eo.eU)(null,function(e,n,t){if(0===t.panes.length)return[];var r=e(ng),i=t.panes.map(function(){return(0,n0.A)()}),o=(0,eq.jM)(r,function(e){try{eN(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),e}});return n(nB,o),t.panes.forEach(function(r,o){var a=i[o];n(e(e1(a)).dataAtom,r);var l=(0,ne.gG)(r.type)?e(e2).find(function(n){return e(n.dataAtom).type===r.type&&n.paneId!==a}):null;l&&n(tS,l.paneId),(t.commit||(0,ne.NM)(r))&&n(nr,a)}),t.activate&&n(t_,{paneId:(0,c._)(i,1)[0],activate:!0}),i}),tq=(0,eo.eU)(null,function(e,n,t){var r=t.pane,i=t.activate,o=t.commit,a=t.placement;if("agentChat"===r.type&&e(eK)){n(tB,!0);var l,u=e(tT),s=null==(l=r.data)?void 0:l.sessionId;null==u||u.setSessionId(null!=s?s:null),null==u||u.focusInput();return}var d=e(ng);if(!d.tiling){var p=n(tC,{pane:r,relativeTo:["tiling"],placement:"replace"});return i&&n(nt,p),p}if("after"===a.type){var f=eD(d,a.paneId);if(f){var h=(0,c._)(n(t$,{panes:[r],paneGroupId:f.paneGroup.id,index:f.index+1,activate:i}),1)[0];return i&&n(nt,h),h}}if("secondary"===a.type&&a.relativeTo){var g=eP(d,a.relativeTo);if(g){if("paneGroup"===g.type){var m=(0,c._)(n(t$,{panes:[r],paneGroupId:g.id,activate:i}),1)[0];return i&&n(nt,m),m}var v=n(tC,{pane:r,relativeTo:a.relativeTo,placement:"rightOf"});return i&&n(nt,v),v}var w=eD(d,a.relativeTo);if((null==w?void 0:w.paneGroup.type)==="floatingPaneGroup"){var y=e(e1(a.relativeTo)),b=e(y.rectAtom);return n(tO,{rect:{x:b.x+b.width,y:b.y,width:b.width,height:b.height},pane:r,makeActive:i})}}var x=n(tC,{pane:r,relativeTo:["tiling"],placement:"rightOf"});return i&&n(nt,x),o&&n(nr,x),x}),tV=t(49555),tK=function(e){return e.EXACT="EXACT",e.FUZZY="FUZZY",e.NONE="NONE",e}({});function tZ(e,n){return(null==e?void 0:e.ports)||(null==n?void 0:n.ports)?(null==e?void 0:e.ports)&&!(null==n?void 0:n.ports)||!(null==e?void 0:e.ports)&&(null==n?void 0:n.ports)?"FUZZY":(null==e?void 0:e.ports)&&(null==n?void 0:n.ports)&&e.ports.port!==n.ports.port?"NONE":(null==e?void 0:e.ports)&&(null==n?void 0:n.ports)&&e.ports.port===n.ports.port?e.ports.path===n.ports.path?"EXACT":"FUZZY":"NONE":"EXACT"}var tJ=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=eD(r,t);if(!i){var o=Error("Expected selectedPane");throw n(nA,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}n(e7(i.paneGroup.id),function(e){return(0,eq.jM)(e,function(e){e.activeIndex=i.index})});var a=!0,l=!1,u=void 0;try{for(var c,s=i.paneGroup.panes[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value,p=e1(d);n(p,function(e){return(0,eq.jM)(e,function(e){e.isHidden=e.paneId!==t})})}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}n(ng,(0,eq.jM)(r,function(e){try{var r=eD(e,t);if(!(null==r?void 0:r.paneGroup))throw Error("Expected pane group");var i=r.paneGroup,o=i.panes.indexOf(t);if(-1===o)throw Error("Expected index");i.activeIndex=o}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),e}})),0===e(e(e1(t)).rectAtom).width?n(t_,{paneId:t,activate:!0}):n(nt,t)}),tQ=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=eR(r,"topRight"),o=eR(r,"topLeft");if(!i||!o||!r.tiling){var a=n(tC,{pane:t,relativeTo:["tiling"],placement:"replace"});n(nr,a);return}if("paneGroup"===r.tiling.type){var l=n(tC,{pane:t,relativeTo:["tiling"],placement:"rightOf"});n(nr,l);return}if("split"===r.tiling.type&&2===r.tiling.children.length&&"paneGroup"===r.tiling.children[1].type){var u=r.tiling.stacked,c=n(tC,{pane:t,relativeTo:i.path,placement:u?"rightOf":"above"});n(nr,c);return}n(t$,{panes:[t],paneGroupId:i.paneGroup.id,commit:!0})}),tX=(0,eo.eU)(null,function(e,n,t){var r=t.pane,i=t.focusIfExists,o=e(e2).find(function(n){return e(n.dataAtom).type===r.type});if(o){i&&(n(tJ,o.paneId),n(nr,o.paneId));return}n(tQ,r)}),t0=(0,eo.eU)(null,function(e,n,t){if(!e(e2).find(function(n){var r=e(n.dataAtom);return"webview"===r.type&&tZ(t,r.data)!==tK.NONE}))return void n(tQ,{type:"webview",data:t})}),t1=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=(0,eq.jM)(r,function(e){var r=eD(e,t.paneId);if(!r){var i=Error("Expected pane");throw n(nA,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=eF(e,t.toPaneGroupId);if(!o){var a=Error("Expected toPaneGroup");throw n(nA,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,u=!o.panes.includes(t.paneId);if(!l||u)try{eH(e,t.paneId),eN(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),u&&n(nr,t.paneId)}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),e}});n(nB,i)}),t2=(0,eo.eU)(null,function(e,n,t){var r=e(nn);if(r){var i=e(ng),o=eD(i,r);if(o){var a=o.paneGroup,l=eO({relativeTo:r,rects:new Map(e(e2).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t}),u=l?eD(i,l):null;if(u)return void n(t1,{paneId:r,toPaneGroupId:u.paneGroup.id});var c=a.panes.find(function(e){return e!==r});c&&n(nB,(0,eq.jM)(i,function(e){eH(e,r),eM(e,{id:(0,n0.A)(),relativeTo:c,panes:[r],placement:t})}))}}}),t4=(0,eo.eU)(!1),t5=(0,eo.eU)(null,function(e,n,t){var r=e(nm).map(function(n){return{paneId:n.paneId,path:(0,ne.Vj)(e(n.dataAtom))}}).filter(function(e){return t===e.path}),i=[],o=e(ng),a=(0,eq.jM)(o,function(e){var t=!0,o=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(t=(l=u.next()).done);t=!0){var c=l.value.paneId,s=eD(e,c);if(!s){var d=Error("Expected pane");throw n(nA,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}s.floating||1!==s.paneGroup.panes.length?eH(e,c):i.push(c)}}catch(e){o=!0,a=e}finally{try{t||null==u.return||u.return()}finally{if(o)throw a}}}),l=!0,u=!1,c=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(tY,{paneId:p,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}n(nB,a)}),t3=(0,eo.eU)(null,function(e,n,t){var r=t.node.path;if(t.eventType===tV.dV.Delete)return void n(t5,r);var i=e(nm).filter(function(n){return(0,ne.Vj)(e(n.dataAtom))===r}),o={type:(0,ne.QY)({path:t.to}),data:{path:t.to}},a=!0,l=!1,u=void 0;try{for(var c,s=i[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value.paneId;n(tY,{paneId:d,pane:o})}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}}),t8=(0,eo.eU)(null,function(e,n,t){var r=e(nn),i=e(ng);if(r){var o=eD(i,r);if(o)return void n(t$,{panes:t,paneGroupId:null==o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length})}var a=eR(i,"topLeft");if(a)return void n(t$,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});var l=i.floating.length?i.floating[0]:null;if(l)return void n(t$,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t});n(tF,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),t7=(0,eo.eU)(null,function(e,n){n(t8,[{type:"commands",data:{autoFocus:!0}}])}),t6=(0,eo.eU)(null,function(e,n){var t=e(nn);return!!t&&(n(tS,t),!0)}),t9=(0,eo.eU)(null,function(e,n,t){var r=e(nn);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=eD(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(ng),{paneId:r,dir:t});i&&n(tJ,i)}}),re=(0,eo.eU)(null,function(e,n,t){var r=t.paneId,i=t.pane;n(tY,{paneId:r,pane:i});var o=(0,ne.gG)(i.type)?e(e2).find(function(n){return e(n.dataAtom).type===i.type&&n.paneId!==r}):null;if(o){var a=eD(e(ng),o.paneId);if(!(null==a?void 0:a.floating)&&(null==a?void 0:a.paneGroup.panes.length)===1)return void n(tY,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}});n(tS,o.paneId)}}),rn=(0,eo.eU)(null,function(e,n,t){var r=e(e(e1(t.b)).dataAtom);n(tY,{paneId:t.a,pane:r});var i=eD(e(ng),t.b);if(!(null==i?void 0:i.floating)&&(null==i?void 0:i.paneGroup.panes.length)===1)return void n(re,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}});n(tS,t.b)}),rt=(0,eo.eU)(null,function(e,n,t){if(e(eK)){var r=e1(t);n(r,function(e){return(0,eq.jM)(e,function(e){e.highlight=!0})}),setTimeout(function(){n(r,function(e){return(0,eq.jM)(e,function(e){e.highlight=!1})})},200)}}),rr=(0,eo.eU)(null,function(e,n,t){var r,i,o=e(ng),a=t.activate,l=void 0===a||a,u=t.update,c=void 0===u||u,s=function(r){return r.paneId===e(nn)&&n(rt,r.paneId),n(tJ,r.paneId),c&&n(tY,{paneId:r.paneId,pane:t.pane,makeActive:l,reveal:t.reveal}),r.paneId};if("diff"===t.pane.type){var d=e(e2).find(function(n){var r=e(n.dataAtom);return tb()(r,t.pane)});if(d)return s(d)}if("webview"===t.pane.type){var p=e(e2).filter(function(n){return"webview"===e(n.dataAtom).type}),f=p.find(function(n){var r=e(n.dataAtom);return"webview"===r.type&&"webview"===t.pane.type&&tZ(r.data,t.pane.data)!==tK.NONE});if(f)return s(f);if(p.length>0)return s(p[0])}var h=e(e2).find(function(n){return e(n.dataAtom).type===t.pane.type});if((0,ne.gG)(t.pane.type)&&h)return s(h);var g=eR(o,"topRight"),m=eR(o,"topLeft"),v=g,w="rightOf";if("agentChat"===t.pane.type||"ghostwriterChat"===t.pane.type?(null==(i=o.tiling)?void 0:i.type)==="paneGroup"?(v=null,w="leftOf"):v=m:(null==(r=o.tiling)?void 0:r.type)!=="paneGroup"||e(nL)||(v=null,w="rightOf"),!v)return n(tF,{panes:[t.pane],placement:w,relativeTo:["tiling"],makeActive:l,commit:t.commit,percent:n2().get(t.pane.type)})[0];var y=v.paneGroup.panes.find(function(n){var t=e(e1(n));if(t.isHidden)return!1;var r=e(t.dataAtom);return!t.isCommitted&&!(0,ne.Dx)(r.type)});if(y)return n(tY,{paneId:y,pane:t.pane,makeActive:l,reveal:t.reveal}),y;var b=n(t$,{panes:[t.pane],paneGroupId:v.paneGroup.id,activate:l,commit:t.commit});return t.reveal&&n(t_,{paneId:b[0],activate:l}),b[0]}),ri=t(11257),ro=t(8928),ra=t(52424),rl=(0,eo.eU)(!1),ru=(0,p.createContext)(null);function rc(e){var n,t,r,i=e.children,o=e.savedLayoutState,a=e.isExtension,l=void 0!==a&&a,u=e.isBlankRepl,f=e.popupId,h=e.initialPane,g=e.agentCenteredLayout,m=void 0!==g&&g,v=e.agentLayoutVariation,w=(0,ro.p)(),y=(0,ri.E)(),b=(n=(0,d.useRouter)(),t=(0,V.Po)(n),r=(0,V.ME)(n,"workspace2"),t&&!r?6:ra.uF),x=(0,c._)((0,p.useState)(function(){var e,n,t,r,i,a,c,s,d,p,g,x,_,Y,S=(0,eo.y$)();if(S.set(eK,w),w){var A=S.get(nO);switch(A){case"filetree-agent":case"agent-filetree":S.set(nO,A);break;default:S.set(nO,"agent-filetree")}}S.set(rl,y),S.set(nN,w?0:b);var I=null!=o?o:(n=(e={isExtension:l,isInPopup:!!f,showAssistantChat:null==h,isBlankRepl:u}).codeEditorPath,t=e.isExtension,{data:(a=(i={isExtension:t,isInPopup:e.isInPopup,codeEditorPath:n,showAssistantChat:void 0!==(r=e.showAssistantChat)&&r,isBlankRepl:e.isBlankRepl}).isExtension,c=i.isInPopup,d=void 0===(s=i.codeEditorPath)?"":s,p=i.showAssistantChat,g=i.isBlankRepl,x={config:{paneId:(0,n0.A)(),pane:{type:"config",flow:"incompleteConfig"}},codeEditor:{paneId:(0,n0.A)(),pane:{type:d.toLowerCase().endsWith(".md")?"markdown":"codeEditor",data:{path:d}}},output:{paneId:(0,n0.A)(),pane:{type:"runnerOutput"}},shell:{paneId:(0,n0.A)(),pane:{type:"shell"}},commands:{paneId:(0,n0.A)(),pane:{type:"commands",data:{autoFocus:!1}}},ghostwriter:{paneId:(0,n0.A)(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:(0,n0.A)(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:(0,n0.A)(),pane:{type:"docs",data:{url:n1.ik.EXTENSIONS}}}},_={},Object.values(x).forEach(function(e){var n=e.paneId,t=e.pane;_[n]=t}),Y={layout:function(e){var n=e.configId,t=e.codeEditorId,r=e.outputId,i=e.shellId,o=e.extensionDevtoolsId,a=e.extensionDocsId,l=e.ghostwriterId,u=e.isExtension,c=e.isInPopup,s=e.showAssistantChat,d=e.isBlankRepl;if(c)return{floating:[],tiling:null};var p=d?[n]:[t],f=[r,i];s&&f.unshift(l);var h={type:"split",stacked:!1,percent:100,children:[{id:(0,n0.A)(),percent:55,type:"paneGroup",panes:p,activeIndex:0},{id:(0,n0.A)(),percent:45,type:"paneGroup",panes:f,activeIndex:0}]};return u&&(h={type:"split",stacked:!1,percent:100,children:[{id:(0,n0.A)(),percent:55,type:"paneGroup",panes:p,activeIndex:0},{id:(0,n0.A)(),percent:45,type:"paneGroup",panes:[o,a,i],activeIndex:0}]}),d||(h={type:"split",stacked:!1,percent:100,children:[{id:(0,n0.A)(),percent:40,type:"paneGroup",panes:[l],activeIndex:0},{id:(0,n0.A)(),percent:60,type:"paneGroup",panes:[t],activeIndex:0}]}),{floating:[],tiling:h}}({configId:x.config.paneId,codeEditorId:x.codeEditor.paneId,outputId:x.output.paneId,shellId:x.shell.paneId,commandsId:x.commands.paneId,extensionDevtoolsId:x.extensionDevtools.paneId,extensionDocsId:x.extensionDocs.paneId,ghostwriterId:x.ghostwriter.paneId,isExtension:a,isInPopup:c,showAssistantChat:p,isBlankRepl:g}),data:_}).data,layout:Y.layout,type:"default"});return f&&(S.set(n7,f),S.set(tc,!0)),(m||"split-with-webview"===v||"split-with-console"===v)&&(I=function(e){var n,t,r=e.wsUiSimplification,i=e.variation,o=(0,n0.A)(),a=(0,n0.A)(),l={type:"split-with-console"===i?"runnerOutput":"webview"},u=null!=(n=n2().get("agentChat"))?n:40;if(r)return{data:(0,nX._)({},a,l),layout:{floating:[],tiling:{type:"paneGroup",panes:[a],activeIndex:0,id:(0,n0.A)(),percent:100}},type:"default"};var c={tiling:{type:"split",stacked:!1,percent:100,children:[{id:(0,n0.A)(),percent:u,type:"paneGroup",panes:[o],activeIndex:0},{id:(0,n0.A)(),percent:100-u,type:"paneGroup",panes:[a],activeIndex:0}]},floating:[]};return{data:(t={},(0,nX._)(t,o,{type:"agentChat"}),(0,nX._)(t,a,l),t),layout:c,type:"default"}}({wsUiSimplification:w,variation:v})),S.set(tu,I),void 0!==v&&(S.set(no,"tilingLayout"),S.set(nT,{type:"sidebar",width:450})),m&&(S.set(no,"centeredVisualPlanner"),S.set(nT,{type:"centered"})),null!=h&&(S.get(e4).some(function(e){return S.get(e.dataAtom).type===(null==h?void 0:h.type)})||S.set(rr,{pane:h,commit:!0})),S}),1)[0];return(0,s.Y)(ru.Provider,{value:x,children:i})}function rs(){var e=(0,p.useContext)(ru);if(!e)throw Error("Expected store in context");return e}function rd(e){return(0,nJ.md)(e,{store:rs()})}function rp(e){return(0,es._)(e,rs())}var rf=function(e){return(0,nJ.Xr)(e,{store:rs()})};function rh(e){return(0,nQ.yF)((0,p.useCallback)(function(n){return n(e)},[e]),{store:rs()})}var rg=(0,eo.eU)(null),rm=(0,eo.eU)(null,function(e,n){var t=e(ns);n(rg,{startWidth:t.width,startIsOpen:t.isOpen})}),rv=(0,eo.eU)(function(e){return!!e(rg)}),rw=(0,eo.eU)(null,function(e,n,t){var r=e(rg);if(r){var i=t*("agent-filetree"===e(nO)&&e(eK)?-1:1),o=.6*e(e9).width,a=Math.min(Math.max(r.startWidth+i,0),o),l=i>0;0===a&&l?a=140:!l&&a<140&&140-a>20&&(a=0),n(ns,function(e){return(0,eq.jM)(e,function(e){e.width=a,0===a?e.isOpen=!1:e.isOpen=r.startIsOpen})}),r.startIsOpen&&n(nB,e(ng))}}),ry=(0,eo.eU)(null,function(e,n){var t=e(ns),r=e(rg);t.isOpen||n(ns,function(e){return(0,eq.jM)(e,function(e){var n;e.width=null!=(n=null==r?void 0:r.startWidth)?n:140})}),n(rg,null)}),rb=(0,eo.eU)(function(e){var n=e(ns),t=e(e9),r=e(nG),i=e(eK),o=i?e(e6)+r:e(nN),a=n.width,l=n.isOpen;if(i){var u=e(nT),c={y:o,width:a,isOpen:l,height:t.height-o},s=e(nO);return u&&"agent-filetree"===s?(0,f._)({x:l?t.width-a-r:t.width},c):(0,f._)({x:l?r:-(a+r)},c)}return{isOpen:l,width:a,height:t.height-r-o-2,x:l?48:-a,y:o}}),rx=(0,eo.eU)(function(e){var n=e(ns),t=e(nG);return n.isOpen?{isOpen:!0,width:t}:{isOpen:!1,width:t}}),r_=t(14229),rY=t(35275),rS=t(39534),rA=t(70764),rI=t(19944),rk=(0,eo.eU)(null),rE=(0,rI.v)(["backgroundColor","borderRadius","zIndex","border","opacity","visibility","width","height","x","y","innerScale","innerOpacity"]),rC=rE.cssVars,rD=rE.styleTokens,rR=(0,eV.mg)(rk,function(e){return(0,nX._)({},rC.border,(null==e?void 0:e.type)==="detachPreview"&&e.progress<.98?"1px dashed ".concat(rS.LU.foregroundDefault):"1px solid ".concat(rS.LU.accentPrimaryDefault))},nl()),rF=(0,eV.mg)(rk,function(e){return null==e?void 0:e.rect},nl()),rU=(0,eV.mg)(rF,function(e){var n;return e?(n={},(0,nX._)(n,rC.width,e.width+"px"),(0,nX._)(n,rC.height,e.height+"px"),n):null},nl()),rP=(0,eV.mg)(rF,function(e){var n;return e?(n={},(0,nX._)(n,rC.x,e.x+"px"),(0,nX._)(n,rC.y,e.y+"px"),n):null},nl()),rO=(0,eV.mg)(rk,function(e){var n,t;return e?"detachPreview"===e.type?(n={},(0,nX._)(n,rC.zIndex,rY.W.detachPreview.toString()),(0,nX._)(n,rC.borderRadius,"100%"),(0,nX._)(n,rC.backgroundColor,"transparent"),n):(t={},(0,nX._)(t,rC.zIndex,rY.W.dropPreview.toString()),(0,nX._)(t,rC.borderRadius,"8px"),(0,nX._)(t,rC.backgroundColor,rS.LU.accentPrimaryDimmer),t):null},nl()),rT=(0,eV.mg)(rk,function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,nX._)(t,rC.opacity,(.5*e.progress).toString()),(0,nX._)(t,rC.visibility,"visible"),t):(r={},(0,nX._)(r,rC.opacity,"0.2"),(0,nX._)(r,rC.visibility,"visible"),r):(n={},(0,nX._)(n,rC.opacity,"0"),(0,nX._)(n,rC.visibility,"hidden"),n)},nl()),rL=(0,eV.mg)(rk,function(e){return(0,nX._)({},rC.innerOpacity,(null==e?void 0:e.type)==="detachPreview"?"0.5":"0")},nl()),rM=(0,eV.mg)(rk,function(e){return(0,nX._)({},rC.innerScale,(null==e?void 0:e.type)==="detachPreview"?e.progress.toString():"1")},nl()),rG=(0,rA.x)({root:[{position:"absolute",pointerEvents:"none",opacity:rD.opacity,width:rD.width,height:rD.height,transform:"translate(".concat(rD.x,", ").concat(rD.y,")"),backgroundColor:rD.backgroundColor,borderRadius:rD.borderRadius,border:rD.border,zIndex:rD.zIndex,visibility:rD.visibility,transition:"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 200ms","@media (prefers-reduced-motion: reduce)":{transitionDuration:"0ms"}}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(rS.LU.backgroundHighest,")"),opacity:rD.innerOpacity,transform:"scale(".concat(rD.innerScale,")")}]}),rN=(0,p.memo)(function(){var e=(0,p.useRef)(null);(0,r_.d)(e,rp(rP)),(0,r_.d)(e,rp(rU)),(0,r_.d)(e,rp(rR)),(0,r_.d)(e,rp(rO)),(0,r_.d)(e,rp(rT));var n=(0,p.useRef)(null);return(0,r_.d)(n,rp(rL)),(0,r_.d)(n,rp(rM)),(0,s.Y)("div",{ref:e,css:rG.root,children:(0,s.Y)("div",{ref:n,css:rG.inner})})}),rz=(0,eo.eU)(function(e){var n=e(rb),t=e(nO),r=e(nT),i=e(nG);if(r){var o="sidebar"===r.type?r.width:450;switch(t){case"filetree-agent":return{left:n.isOpen?n.width+2*i:i,right:i+o+i};case"agent-filetree":return{right:n.isOpen?n.width+2*i:i,left:i+o+i}}}return{right:i,left:n.isOpen?n.width+i:i}}),rH=(0,eo.eU)(null,function(e,n){n(rk,{type:"dropPreview",rect:e(rB)})}),rW=(0,eo.eU)(null,function(e,n,t){n(rk,null),n(t4,!1),n(tF,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),rB=(0,eo.eU)(function(e){if(e(n9))return e(tm);var n=e(nN),t=e(e9),r=e(ns),i=r.isOpen?r.width:0,o=e(nG);if(e(eK)){var a=e(e6),l=e(rz),u=a+n+o;return{x:l.left,y:u,width:t.width-l.left-l.right,height:t.height-u-o}}var c=Math.round(i+o)+48-o,s=t.width-i-2*o-48;return i>0?c+=o:s+=o,{x:c,y:n,width:s,height:t.height-n-o}});function rj(){var e=(0,h._)(["\n  query FiletypeAssociations {\n    currentUser {\n      id\n      filetypeAssociations\n    }\n  }\n"]);return rj=function(){return e},e}function r$(){var e=(0,h._)(["\n  mutation SetFiletypeAssociation($input: FiletypeAssociationInput!) {\n    setFiletypeAssociation(input: $input) {\n      ... on UserFiletypeAssociations {\n        associations\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return r$=function(){return e},e}var rq={},rV=(0,g.J1)(rj()),rK=(0,g.J1)(r$()),rZ=(0,eo.eU)({}),rJ=(0,eo.eU)(null),rQ=(0,eo.eU)(null,function(e,n,t){return(0,n4._)(function(){var r,i,o,a,l,u;return(0,n5.YH)(this,function(c){switch(c.label){case 0:r=e(rZ),n(rZ,(0,eq.jM)(r,function(e){if(!t.newAssociation)return void delete e[t.fileExtension];e[t.fileExtension]={extensionId:t.newAssociation.extensionId,fileHandlerId:t.newAssociation.fileHandlerId}})),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,null===n3.V||void 0===n3.V?void 0:n3.V.mutate({mutation:rK,variables:{input:t}})];case 2:if((null==(a=c.sent())||null==(o=a.data)||null==(i=o.setFiletypeAssociation)?void 0:i.__typename)!=="UserFiletypeAssociations")throw Error("Failed to set Filetype Association: "+(null==a||null==(u=a.data)||null==(l=u.setFiletypeAssociation)?void 0:l.message));return[3,4];case 3:return c.sent(),n(rZ,r),[3,4];case 4:return[2]}})})()}),rX=1920/1020,r0=(0,eo.eU)(null,function(e,n,t){var r,i,o,a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{location:"bottomRight"},u=e(e2).find(function(n){return e(n.dataAtom).type===t.type});if(u){n(tY,{paneId:u.paneId,pane:t}),l.commit&&n(nr,u.paneId);return}var c=e(e9),s=e(e6),d=n(tO,{pane:t,rect:"bottomRight"===l.location?{width:r=Math.min(600,c.width),height:i=Math.min(600/rX+s,c.height),x:c.width-r,y:c.height-i}:(a=Math.min((o=Math.min(600,c.width))/rX+s,c.height),{width:o,height:a,x:(c.width-o)/2,y:(c.height-a)/2})});l.commit&&n(nr,d)}),r1=(0,eo.eU)(null,function(e,n,t){e(e2).filter(function(n){return e(n.dataAtom).type===t}).forEach(function(e){return n(tS,e.paneId)})}),r2=(0,eo.eU)(null),r4=(0,eo.eU)(null,function(e,n,t){if("end"===t.type)return void n(r2,null);if("update"===t.type){var r=e(r2);if(!r){var i=Error("Expected tilingResize");throw n(nA,{error:i,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),i}var o=r.stacked,a=r.leftPath,l=r.startPercent,u=r.resizeDistance,c=r.initialLayout,s=r.snapPercent,d=l+(o?t.moveDelta.y:t.moveDelta.x)/u*100;if(e(eK)){var p=e(e9);d/100*p.width<240&&(d=240/p.width*100)}n(nB,(0,eq.jM)(c,function(e){e$(e,{leftPath:a,percent:d,snapPercent:s})}));return}var f=e(ng),h=t.stacked?window.innerHeight:window.innerWidth,g=eC(f,t.leftPath);if(!g||!eA(g)){var m=Error("Expected left node");throw n(nA,{error:m,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),m}var v=eS(t.leftPath),w=g.percent,y=null;try{y=function(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=eC(e,t);if(!r||"split"!==r.type)throw Error("Expected split node");for(var i=100,o=eS(t);o.length;){var a=eC(e,o);if(!a)break;o=eS(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=eC(n,t);if((null==o?void 0:o.type)!=="split")throw Error("Expected split node");var a=r.size,l=r.gap,u=r.headerHeight,c=r.inset,s=void 0===c?{top:0,bottom:0,left:0,right:0}:c,d=o.children.length,p=o.stacked?l*(d-1)+u*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-p)}({splitPath:v,layout:f,tilingOptions:e(nz)})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),e}if(null===y)throw Error("Expected resizeDistance");n(r2,{stacked:t.stacked,leftPath:t.leftPath,startPercent:w,resizeDistance:y,snapPercent:30/h*100,initialLayout:f})});function r5(e){return(0,q.A)(function(){return e8(e)},[e])}function r3(e){var n=r5(e);return(0,q.A)(function(){return(0,eV.mg)(n,function(e){return e.rect})},[n])}function r8(e){return(0,q.A)(function(){return(0,eo.eU)(function(n){var t=n(r2);return!!t&&e===nD({leftPath:t.leftPath})})},[e])}function r7(e){var n=r5(e);return(0,q.A)(function(){return(0,eV.mg)(n,function(e){return e.stacked})},[n])}var r6=t(93629),r9={width:100,height:200},ie={width:200,height:100},it=function(e){var n=e.container,t=e.sidebarWidths,r=e.gap,i=n.width-t.left-t.right,o=n.width-ie.width/2-i/2,a=(n.height-r)/2-r9.height/2;return{middle:{rect:{x:0,y:0,width:0,height:0},paneId:null,visible:!1},above:{visible:!1,rect:{x:o,y:0,width:ie.width,height:ie.height}},below:{visible:!1,rect:{x:o,y:n.height-ie.height-r,width:ie.width,height:ie.height}},leftOf:{visible:!1,rect:{x:t.left+r,y:a,width:r9.width,height:r9.height}},rightOf:{visible:!1,rect:{x:n.width-r9.width-r,y:a,width:r9.width,height:r9.height}}}},ir=["above","rightOf","leftOf","below","middle"],ii=(0,eo.eU)(null),io=(0,eo.eU)(function(e){var n=e(ii);if(!n)return null;var t=eF(e(ng),n.paneGroupId);return t&&t.panes[t.activeIndex]||null}),ia=(0,eV.mg)(ii,function(e){return null==e?void 0:e.dropPoints}),il=(0,eo.eU)(null,function(e,n,t){if(!e(tc)){var r=e(e9),i=eF(e(ng),t.paneGroupId);if(!i){var o=Error("Expected paneGroup");throw n(nA,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(e1(i.panes[i.activeIndex])),l=e(a.rectAtom),u=e(e6),c={x:l.x,y:l.y-u,width:l.width,height:l.height+u},s=t.mouse.x-(r.x+l.x),d=e(nG),p=new Map(e(eQ).filter(function(e){return e!==i.id}).map(function(e){return[e,{snappiness:400}]}));n(tG,{panes:new Map(e(eZ).filter(function(e){return e!==a.paneId}).map(function(e){return[e,{snappiness:400}]})),headers:p}),n(ii,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:c,movedAtAll:!1,dropPoints:"floating"===a.type?it({container:r,sidebarWidths:e(rz),gap:d}):null})}}),iu=(0,eo.eU)(null,function(e,n,t){if(!e(tc)){var r=e(ii);if(!r)return void n(rk,null);var i=t.delta,o=r.paneGroupId,a=r.fromRect,l=e(ng),u=eF(e(ng),o);if(!u){var s=Error("Expected paneGroup");throw n(nA,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),s}var d=u.panes[u.activeIndex],p=eD(l,d);if(!p){var f=Error("Expected pane");throw n(nA,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),f}var h=e1(d),g=e7(p.paneGroup.id),m=e(e6),v=Math.max(Math.abs(i.x),Math.abs(i.y)),w=v>=50,y=v>0;if(w&&!p.floating){var b=e(h).rectAtom,x=e(b),_=(0,eq.jM)(l,function(e){try{eB(e,{paneGroupPath:p.paneGroupPath,rect:{x:x.x+i.x,y:x.y-m+i.y,width:x.width,height:x.height+m}})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),e}});n(tG,{headers:new Map(e(eQ).filter(function(e){return e!==p.paneGroup.id}).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(eZ).filter(function(e){return e!==d}).map(function(e){return[e,{snappiness:400}]}))}),n(nB,_),n(is,t.mouse);return}var Y=e(g),S=e(h);u.id===e(tR.LY)&&n(tR.LY,null);var A="floating"===r.startType?eL({x:a.x+i.x,y:a.y+i.y,width:a.width,height:a.height},{inside:e(e9),minVisibleX:2*m,minVisibleY:m}):{x:a.x+i.x,y:a.y+i.y},I=A.x,k=A.y;if(n(Y.rectAtom,function(e){return(0,eq.jM)(e,function(e){e.x=I,e.y=k})}),n(S.rectAtom,function(e){return(0,eq.jM)(e,function(e){e.x=I,e.y=k+m})}),!w&&!p.floating){var E=r.startPoint,C=1-.7*(1-Math.sqrt(1-Math.pow(v/50,2)));n(rk,{type:"detachPreview",rect:{x:E.x-50,y:E.y-50,width:100,height:100},progress:v/50}),n(ii,(0,eq.jM)(r,function(e){e.scale=C,e.movedAtAll=e.movedAtAll||y}));return}var D=e(nG);if(r.dropPoints)return void n(ii,function(n){return(0,eq.jM)(n,function(n){(null==n?void 0:n.dropPoints)&&function(e,n){var t=n.container,r=n.gap,i=n.sidebarWidths,o=n.headerHeight,a=n.paneRects,l=n.mouse,u={x:l.x-t.x,y:l.y-t.y},s=null,d=null;if(a.length){var p=!0,f=!1,h=void 0;try{for(var g,m=a[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=(0,c._)(g.value,2),w=v[0],y=v[1],b={x:y.x-r/2,y:y.y-r/2-o,width:y.width+r,height:y.height+r+o};if(nE(l,b)){s=w,d=y;break}}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}if(e.middle.visible=!!d,d){var x={width:Math.min(100,d.width),height:Math.min(100,d.height)};e.middle.paneId=s,e.middle.rect={x:d.x+d.width/2-x.width/2,y:d.y-o+(d.height+o)/2-x.height/2-r,width:x.width,height:x.height+o/2}}}else{var _={x:t.x+i.left+r,y:t.y,width:t.width-r-i.left-i.right-r,height:t.height},Y={width:Math.min(100,_.width),height:Math.min(100,_.height)};e.middle.rect={x:_.x+_.width/2-Y.width/2,y:_.height/2-Y.height/2,width:Y.width,height:Y.height},e.middle.visible=!0}var S=null,A=!0,I=!1,k=void 0;try{for(var E,C=ir[Symbol.iterator]();!(A=(E=C.next()).done);A=!0){var D=E.value,R=e[D].rect;if(nE(u,R)){S=D;break}}}catch(e){I=!0,k=e}finally{try{A||null==C.return||C.return()}finally{if(I)throw k}}var F=!0,U=!1,P=void 0;try{for(var O,T=ir[Symbol.iterator]();!(F=(O=T.next()).done);F=!0){var L=O.value;e[L].visible=!S||L===S}}catch(e){U=!0,P=e}finally{try{F||null==T.return||T.return()}finally{if(U)throw P}}}(n.dropPoints,{paneRects:e(ic),container:e(e9),sidebarWidths:e(rz),headerHeight:e(e6),gap:D,mouse:t.mouse})})});if(!p.floating)throw Error("Expected floating pane");n(is,t.mouse)}}),ic=(0,eo.eU)(function(e){return e(e2).filter(function(e){return"tile"===e.type&&!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})}),is=(0,eo.eU)(null,function(e,n,t){var r=e(e6),i=e(e9),o=e(ic),a=e(nG),l=function(e){var n=e.views,t=e.mouse,r=e.container,i=e.headerHeight,o=e.sidebarWidths,a=e.gap,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},u=!0,s=!1,d=void 0;try{for(var p,f=n[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=(0,c._)(p.value,2),g=h[0],m=h[1],v={x:m.x,y:m.y-i,width:m.width,height:i},w={x:v.x-a/2,y:v.y-a/2,width:v.width+a,height:i+a/2};if(nE(l,w))return{dropPreview:v,drop:{type:"insert",paneId:g}};var y={x:m.x,y:m.y-i,width:m.width,height:m.height+i},b={x:y.x-a/2,y:y.y-a/2,width:y.width+a,height:y.height+a};if(nE(l,b)){var x=nC(l,y);return{dropPreview:x.rect,drop:{type:"split",relativeTo:g,placement:x.placement}}}}}catch(e){s=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw d}}var _=nC(l,{x:o.left,y:0,width:r.width-o.left-o.right,height:r.height});return{dropPreview:_.rect,drop:{type:"split",relativeTo:["tiling"],placement:_.placement}}}({views:o,container:i,mouse:t,headerHeight:r,sidebarWidths:e(rz),gap:a}),u=l.drop;n(rk,{type:"dropPreview",rect:l.dropPreview}),n(ii,function(e){return(0,eq.jM)(e,function(e){e&&(e.drop=u,e.movedAtAll=!0)})})}),id=(0,eo.eU)(null,function(e,n,t){var r=t.delta;if(!e(tc)){n(rk,null);var i=e(ii);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,u=e(ng),c=eF(e(ng),o);if(!c){var s=Error("Expected paneGroup");throw n(nA,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=c.panes[c.activeIndex],p=eD(u,d);if(!p){var f=Error("Expected pane");throw n(nA,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),f}var h=(0,eq.jM)(u,function(t){if(!a&&p.floating&&"floating"===i.startType){var o=eC(t,p.paneGroupPath);if((null==o?void 0:o.type)!=="floatingPaneGroup")return;var u=e(e6),c=eL({x:l.x+r.x,y:l.y+r.y,width:l.width,height:l.height},{inside:e(e9),minVisibleX:2*u,minVisibleY:u}),s=c.x,f=c.y;o.rect.x=s,o.rect.y=f;return}if(a){if(p.paneGroup.panes.forEach(function(e){n(nr,e)}),"split"===a.type){if(null===t.tiling){var h=(0,n0.A)();try{eM(t,{id:(0,n0.A)(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=eD(e,t);if(!o)throw Error("Expected fromPane");var a=o.paneGroup,l=a.panes,u=a.activeIndex;eW(e,o.paneGroupPath),eM(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:u})}(t,{from:d,to:a.relativeTo,placement:a.placement})}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}return}var g=eD(t,a.paneId);p.paneGroup.panes.forEach(function(e){ej(t,{paneId:e,paneGroupPath:(null==g?void 0:g.paneGroupPath)||["tiling"],activate:!1})})}});n(ii,null),n(nB,h),(null==a?void 0:a.type)==="insert"&&n(tJ,d)}}}),ip=(0,eo.eU)(function(e){var n=e(nT);if(!n)return!0;switch(n.type){case"sidebar":return 32===n.width;case"centered":return!1}}),ih=(0,eo.eU)(function(e){var n=e(nT);if(!n)return null;switch(n.type){case"sidebar":return e(ip)?"collapsed":"sidebar";case"centered":return n.type}}),ig=(0,eo.eU)(function(e){var n=e(nT);if(!n)return{x:0,y:0,width:0,height:0};var t=e(e6),r=e(e9),i=e(nO),o=t+e(nG),a=r.height-o;switch(n.type){case"sidebar":var l=e(nG),u={width:n.width,height:a,y:o};switch(i){case"filetree-agent":return(0,f._)({x:r.width-n.width-l},u);case"agent-filetree":return(0,f._)({x:l},u);default:return{x:0,y:0,width:0,height:0}}case"centered":return{x:0,y:o,width:r.width,height:a}}});function im(e){var n=e.rect,t=e.insets,r=e.agentFiltreeOrder,i=e.gap,o=e.paneGroupId,a=e.topLeftPaneGroup,l=e.topRightPaneGroup,u=e.sidebar,c=e.agent,s=e.agentRect,d=e.container,p=n.x,f=n.width;if(t.left>0&&(null==a?void 0:a.id)===o&&(p=t.left,"filetree-agent"===r?u.isOpen&&u.x+u.width+i>=t.left&&(p=n.x):"agent-filetree"===r&&(null==c?void 0:c.type)==="sidebar"&&s.x+s.width>t.left&&(p=n.x),f=n.width-(p-n.x)),t.right>0&&(null==l?void 0:l.id)===o){if("agent-filetree"===r){var h=d.width-(u.x+u.width),g=u.isOpen?h+u.width+i:0;g<=t.right&&(f-=t.right-(g-i))}else if("filetree-agent"===r&&(null==c?void 0:c.type)==="sidebar"){var m=c.width+i+i;m<=t.right&&(f-=t.right-m)}}return{x:p,width:f}}var iv=(0,eo.eU)({left:0,right:0}),iw=(0,eo.eU)(null,function(e,n,t,r){n(iv,function(e){return(0,r6._)((0,f._)({},e),(0,nX._)({},t,r))}),n(nB,e(ng))}),iy=(0,eo.eU)(function(e){var n,t,r=e(ng),i=e(tp),o={topLeft:null==(n=eR(r,"topLeft"))?void 0:n.paneGroup,topRight:null==(t=eR(r,"topRight"))?void 0:t.paneGroup};if(!o.topLeft||!o.topRight)return{left:0,right:0,leftPaneWidth:0,rightPaneWidth:0};if(i===o.topLeft||i===o.topRight){var a=e(tw).width;return{left:a,right:a,leftPaneWidth:a,rightPaneWidth:a}}var l={left:e(e7(o.topLeft.id)),right:e(e7(o.topRight.id))},u={left:e(l.left.rectAtom),right:e(l.right.rectAtom)},c={insets:e(iv),agentFiltreeOrder:e(nO),gap:e(nG),topLeftPaneGroup:o.topLeft,topRightPaneGroup:o.topRight,sidebar:e(rb),agent:e(nT),agentRect:e(ig),container:e(e9)},s={left:im((0,r6._)((0,f._)({},c),{rect:u.left,paneGroupId:o.topLeft.id})),right:im((0,r6._)((0,f._)({},c),{rect:u.right,paneGroupId:o.topRight.id}))};return{leftPaneWidth:u.left.width,left:s.left.width,rightPaneWidth:u.right.width,right:s.right.width}});function ib(e){var n=iA(e);return(0,q.A)(function(){return(0,eo.eU)(function(t){if(t(n))return t(tv);var r,i,o=t(ng),a=t(e7(e)),l=t(a.rectAtom);if(!t(eK))return l;var u={topLeft:null==(r=eR(o,"topLeft"))?void 0:r.paneGroup,topRight:null==(i=eR(o,"topRight"))?void 0:i.paneGroup},c=t(nG),s=im({rect:l,insets:t(iv),agentFiltreeOrder:t(nO),gap:c,paneGroupId:e,topLeftPaneGroup:u.topLeft||null,topRightPaneGroup:u.topRight||null,sidebar:t(rb),agent:t(nT),agentRect:t(ig),container:t(e9)});if("floating"===a.path[0]){var d=l.y-c,p=l.height+c+1;return(0,r6._)((0,f._)({},l,s),{y:d,height:p})}return(0,f._)({},l,s)})},[n,e])}function ix(e){var n=i_(e),t=ib(e);return(0,q.A)(function(){var r=(0,eo.eU)(function(r){var i,o,a,l=r(t),u=r(n)||(null==(a=r(tL))||null==(o=a.headers)||null==(i=o.get(e))?void 0:i.dropState)?"transform":"top-left";return{x:l.x,y:l.y,positioning:u}});return(0,eV.mg)(r,function(e){return e},nl())},[n,e,t])}function i_(e){return(0,q.A)(function(){return(0,eo.eU)(function(n){var t=n(ii);return t&&e===t.paneGroupId?t:null})},[e])}function iY(e){var n=i_(e);return(0,q.A)(function(){return(0,eV.mg)(n,function(e){var n;return null!=(n=null==e?void 0:e.scale)?n:1})},[n])}function iS(e){return(0,q.A)(function(){return(0,eV.mg)(ng,function(n){return eF(n,e)})},[e])}function iA(e){var n=iS(e);return(0,q.A)(function(){return(0,eo.eU)(function(e){if(e(n9))return!0;if(!e(tc))return!1;var t=e(n);if(!t)return!1;var r=e(nn);return!!r&&t.panes.includes(r)})},[n])}function iI(e){var n=e7(e);return(0,q.A)(function(){return(0,eV.mg)(n,function(e){return"floating"===e.path[0]})},[n])}var ik=t(59270),iE=t(81515),iC=(0,eo.eU)(null,function(e,n,t){var r,i=t.path,o=e(ng),a=(0,f._)({},t);if(!a.opener){var l=e(rZ),u=(0,iE.QC)(i);if(u){var c=l[u];if(c){var s=e(nb).find(function(e){return e.extension.extensionId===c.extensionId});s&&(a.opener={paneType:"extension",extensionFileHandler:s,supports:function(){return!0}})}}}if(a.newPane)return void n(tP,{pane:iD(a),edge:null!=(r=a.newPaneEdge)?r:"left"});var d=eR(o,"topLeft");if(!d)return void n(tC,{pane:iD(a),relativeTo:["tiling"],placement:"replace"});var p=e(e2).find(function(n){var t,r=e(n.dataAtom);return(0,ne.xS)(r)?i===(0,ne.Vj)(r):!!((null==(t=a.opener)?void 0:t.paneType)==="extension"&&(0,ne.En)(r))&&r.data.filePath===i&&a.opener.extensionFileHandler.extension.installationId===r.data.installationId||"markdown"===r.type&&i===r.data.path});if(p&&!a.newTab){var h=e(p.dataAtom);if((0,ne.xS)(h)||"markdown"===h.type){n(tJ,p.paneId),n(tY,{paneId:p.paneId,pane:iD((0,f._)({opener:{paneType:h.type}},a))});return}if((0,ne.En)(h))return void n(tJ,p.paneId)}var g=d.paneGroup;if(e(eK)){var m=eR(o,"topRight");m&&(g=m.paneGroup)}if(a.newTab)return void n(t$,{panes:[iD(a)],paneGroupId:g.id,activate:!0,commit:!0,index:g.activeIndex+1});var v=e(e2).find(function(n){return!n.isCommitted&&((0,ne.xS)(e(n.dataAtom))||"markdown"===e(n.dataAtom).type)});if(v){n(tY,{paneId:v.paneId,pane:iD(a)}),n(tJ,v.paneId);return}var w=e(nm).find(function(n){var t=e(n.dataAtom);return"codeEditor"===t.type&&""===(0,ne.Vj)(t)});if(w){n(tY,{paneId:w.paneId,pane:iD(a)}),n(tJ,w.paneId);return}var y=g.panes.find(function(n){var t=e(e1(n));return"commands"===e(t.dataAtom).type});if(y){n(tY,{paneId:y,pane:iD(a)}),n(e1(y),function(e){return(0,eq.jM)(e,function(e){e.isCommitted=!1})}),n(tJ,y);return}n(t$,{panes:[iD(a)],paneGroupId:g.id,activate:!0})});function iD(e){var n=e.path,t=e.col,r=e.line,i=e.opener;if(!(null==i?void 0:i.paneType)&&(0,ik.e$)(n.toLowerCase()))return{type:"markdown",data:{path:n}};if(!(null==i?void 0:i.paneType)&&(0,ik.Zy)(n.toLowerCase()))return{type:"csvPreview",data:{path:n}};var o=(null==i?void 0:i.paneType)||(0,ne.QY)({path:n});if("codeEditor"===o)return{type:"codeEditor",data:{path:n,col:t,line:r}};if("extension"===o){var a=i.extensionFileHandler;return{type:"extension",data:{filePath:n,extensionId:a.extension.extensionId,installationId:a.extension.installationId,name:a.extension.manifest.name,baseUrl:a.extension.baseUrl,path:a.handler}}}return"markdown"===o?{type:"markdown",data:{path:n}}:{type:o,data:{path:n}}}var iR=(0,eo.eU)(null,function(e,n,t){var r=t.paths.map(function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,ne.QY)({path:r}),data:{path:r,line:i,col:o}}}).filter(Boolean),i=r.length-1,o=e(nn);r.forEach(function(e,t){return(0,n4._)(function(){return(0,n5.YH)(this,function(r){return n(tq,{pane:e,activate:i===t,placement:{type:"secondary",relativeTo:o}}),[2]})})()})}),iF=(0,eo.eU)(null,function(e,n,t){var r=t.urls.map(function(e){var n;try{n=new URL(e)}catch(e){return!1}return"0.0.0.0"===n.hostname||"localhost"===n.hostname?{ports:{type:"local",path:n.pathname,port:parseInt(n.port,10)}}:(window.open(e,"_blank"),!1)}).filter(Boolean);if(0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;n(t0,c)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}}),iU=(0,eo.eU)(null,function(e,n,t){if(!e(tc)){var r=e(e9),i=t.pageX,o=t.pageY,a=e(e1(t.over)),l=e_({x:i-r.x,y:o-r.y},e(a.rectAtom)).previewRect;n(t4,!0),n(rk,{type:"dropPreview",rect:l})}}),iP=(0,eo.eU)(null,function(e,n,t){if(!e(tc)){var r=e(e9),i=t.pageX,o=t.pageY,a=t.over,l=e(e1(a)),u=e_({x:i-r.x,y:o-r.y},e(l.rectAtom)).dropLocation;n(rk,null),n(t4,!1);var c=e(ng);if("newPaneGroup"===t.type){if("middle"===u){var s=eD(c,l.paneId);if(!s)return;n(t$,{panes:t.panes,paneGroupId:s.paneGroup.id,activate:!0,index:s.index+1});return}n(tF,{panes:t.panes,placement:u,makeActive:!0,relativeTo:l.paneId});return}var d=a;if("middle"===u){if(d===t.paneId)return;var p=eD(c,l.paneId);if(!p)return;n(t1,{paneId:t.paneId,toPaneGroupId:p.paneGroup.id,index:p.index+1});return}if(d===t.paneId){var f=eD(c,t.paneId);if(!f){var h=Error("Expected pane");throw n(nA,{error:h,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),h}if(f.floating)throw Error("Expected paneGroup");var g=f.paneGroup.panes.find(function(e){return e!==t.paneId});if(!g)return;d=g}var m=(0,eq.jM)(c,function(e){try{eH(e,t.paneId),eM(e,{id:(0,n0.A)(),panes:[t.paneId],relativeTo:d,placement:u}),n(nr,t.paneId)}catch(e){throw n(nA,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),e}});n(nB,m)}}),iO=(0,eo.eU)(null,function(e,n,t){var r=e(n_).find(function(e){var n=(0,c._)(e,2);return"agentChat"===(n[0],n[1]).type}),i=new Map(e(eZ).map(function(e){return[e,{snappiness:60,delay:r&&e===r[0]?0:400}]})),o=new Map(e(eQ).map(function(e){return[e,{snappiness:60,delay:400}]}));n(iT,!0),n(tG,{panes:i,headers:o}),setTimeout(function(){n(iT,!1)},400),n(no,t),e(eK)&&n(tj)}),iT=(0,eo.eU)(!1);function iL(e){var n=(0,q.A)(function(){return(0,eo.eU)(function(n){return!!n(n9)||!!n(tc)&&n(nn)===e})},[e]);return(0,q.A)(function(){return(0,eo.eU)(function(t){if(t(n))return t(tw);var r=t(e1(e));if("agentChat"===t(r.dataAtom).type){var i=t(e9),o=t(no),a=Math.min("centeredVisualPlanner"===o?1/0:600,i.width-32);if("centeredVisualPlanner"===o){var l=t(nN);return{x:i.width/2-a/2,y:l,width:a,height:i.height-l}}}return t(r.rectAtom)})},[e,n])}function iM(e){return(0,q.A)(function(){return(0,eo.eU)(function(n){var t=n(ii);return t&&e===n(io)?t:null})},[e])}function iG(e){var n=iM(e);return(0,q.A)(function(){return(0,eV.mg)(n,function(e){var n;return null!=(n=null==e?void 0:e.scale)?n:1})},[n])}function iN(e){return(0,q.A)(function(){return(0,eo.eU)(function(n){return n(n(e1(e)).dataAtom)})},[e])}function iz(e){return(0,q.A)(function(){return(0,eo.eU)(function(n){var t=n(e1(e));return"centeredVisualPlanner"===n(no)?"agentChat"!==n(t.dataAtom).type:t.isHidden})},[e])}function iH(e){return(0,q.A)(function(){return(0,eV.mg)(e1(e),function(e){return"floating"===e.type})},[e])}var iW=(0,eo.eU)(null),iB=(0,eo.eU)(function(e){var n=e(iW);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=eD(e(ng),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map(function(n){var t=e(e1(n));return[t.paneId,e(t.dataAtom)]})}}),ij=(0,eo.eU)(function(e){var n=e(iB);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}}),i$=(0,eo.eU)(function(e){var n=e(iW);if(!n||"sidebar"===n.target)return null;if(e(ts)===n.paneId)return e(tw);var t=e(e1(n.paneId)),r=e(t.rectAtom),i=e(e6);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}}),iq=(0,eo.eU)(null,function(e,n,t){var r=e(nn),i=null!=t?t:r;if(i){n(iW,{target:"pane",paneId:i}),i!==r&&n(nt,i);return}var o=eR(e(ng),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;if(a)return void n(iW,{target:"pane",paneId:a})}),iV=(0,eo.eU)(null,function(e,n){var t=e(iW);t&&(n(iW,null),"sidebar"!==t.target&&n(t_,{paneId:t.paneId,activate:!0}))}),iK=(0,eo.eU)(null,function(e,n){if(e(iB))return void n(iV);var t=e(nn);if(t)return void n(iq,t);var r=eR(e(ng),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;if(i)return void n(iq,i)}),iZ=(0,eo.eU)(function(e){return null!==e(iW)}),iJ=(0,eo.eU)(null,function(e,n){n(iW,null)}),iQ=(0,eo.eU)(null,function(e,n,t){var r=e(nn);if(!(!r||e(ts))){var i=eO({relativeTo:r,rects:new Map(e(e2).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t});i&&(n(nn,i),e(iW)&&n(iW,{target:"pane",paneId:i}))}}),iX=(0,eo.eU)(null,function(e,n,t){var r=e(iB);null!==r&&"sidebar"!==r.target&&n(nB,(0,eq.jM)(e(ng),function(e){!function(e,n){var t=n.paneGroupId,r=n.direction,i=eF(e,t),o=eU(e,t);if((null==i?void 0:i.type)==="paneGroup"&&o){var a=o.node.children.indexOf(i);if(-1===a)throw Error("Expected index");var l=(0,ek._)(o.path).concat([a]),u="down"===r||"right"===r,c=0===a,s=a===o.node.children.length-1,d=o.node.stacked===("up"===r||"down"===r),p=o.path.length>2;if(d&&!((s&&u||c&&!u)&&p))return function(e,n,t){var r=e.indexOf(n);if(-1===r)throw Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1;if("forward"===t&&i){e.pop(),e.unshift(n);return}if("back"===t&&0===r){e.shift(),e.push(n);return}var o="forward"===t?1:-1;e[r]=e[r+o],e[r+o]=n}}(o.node.children,i,u?"forward":"back");var f=(v=eU(e,i.id))?function e(n,t){var r=t.path,i=t.forwards,o=t.vertical,a=eC(n,r);if((null==a?void 0:a.type)!=="split")return null;var l=eS(r);if(0===l.length)return null;var u=eC(n,l);if((null==u?void 0:u.type)!=="split")return null;if(u.stacked!==o)return e(n,{path:l,forwards:i,vertical:o});var c=u.children.indexOf(a),s=0===c;if(!(c===u.children.length-1&&i||s&&!i)){var d=c+(i?1:-1),p=u.children[d],f=u.children[c];return p?{other:f,node:p,parent:u,path:(0,ek._)(l).concat([d])}:null}if(1===l.length){var h=s&&!i?u.children.length-1:0;return{parent:u,other:u.children[c],path:(0,ek._)(l).concat([h]),node:u.children[h]}}return e(n,{path:l,forwards:i,vertical:o})}(e,{path:v.path,forwards:"down"===r||"right"===r,vertical:"up"===r||"down"===r}):null;if(f){var h=l.slice(0,f.path.length+("paneGroup"===f.node.type?2:1));if("tiling"!==h[0])throw Error("Expected tiling path");var g=eC(e,h);if(!g||"floatingPaneGroup"===g.type)throw Error("Expected adjacentNode");if("split"!==f.other.type)throw Error("Expected split");var m=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,u=e.slice(0,t)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value.percent;r+=c}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(f.other.children,g);if("paneGroup"===f.node.type){var v,w,y,b=(w={start:0,end:100},y=!f.parent.stacked,m.start-w.start<w.end-m.end?y?"above":"rightOf":y?"below":"leftOf");eW(e,(0,ek._)(o.path).concat([a])),eM(e,{placement:b,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:f.path});return}var x=function(e,n){var t=e.children,r=e.stacked,i="above",o=0,a=0,l=0,u=0,c=!0,s=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value,g={start:l,end:l+h.percent},m=Math.max(0,Math.min(n.end,g.end)-Math.max(n.start,g.start));m>u&&(u=m,o=a,i=n.start-g.start<g.end-n.end?r?"above":"rightOf":r?"below":"leftOf"),l+=h.percent,a++}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}return{placement:i,index:o}}(f.node,m),_=x.index,Y=x.placement;eW(e,(0,ek._)(o.path).concat([a])),eM(e,{placement:Y,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,ek._)(f.path).concat([_])})}}}(e,{paneGroupId:r.paneGroupId,direction:t.direction})}))}),i0={width:120,height:120},i1=(0,eo.eU)(null),i2=(0,eo.eU)(null,function(e,n,t){var r=e(ng);if("end"===t.type){n(i1,null),n(nB,r);return}if("update"===t.type){var i=e(i1);if(!i){var o=Error("Expected floatingResizeState");throw n(nA,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}var a=e(e6),l=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?eY:i,a=(0,f._)({},e),l=o.height,u=o.width;if("top"===t||"topLeft"===t||"topRight"===t){var c=e.height-r.y;a.height=Math.max(c,l),c<l?a.y=e.y+e.height-l:a.y=e.y+r.y}else("bottom"===t||"bottomLeft"===t||"bottomRight"===t)&&(a.height=Math.max(e.height+r.y,l));if("right"===t||"bottomRight"===t||"topRight"===t)a.width=Math.max(e.width+r.x,u);else if("left"===t||"bottomLeft"===t||"topLeft"===t){var s=e.width-r.x;a.width=Math.max(s,u),s<u?a.x=e.x+e.width-u:a.x=e.x+r.x}return a}(i.rectStart,{delta:t.moveDelta,edge:i.edge,minSize:i0}),u=i.paneId,c=(0,eq.jM)(r,function(e){var t=e.floating.find(function(e){return e.panes.includes(u)});if(!t){var r=Error("Expected floating");throw n(nA,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=l.x,i.y=l.y-a,i.width=l.width,i.height=l.height+a});n(nB,c);return}var s=e(e2).find(function(e){return e.paneId===t.paneId});if(!s){var d=Error("Expected pane");throw n(nA,{error:d,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),d}n(nt,t.paneId),n(i1,{paneId:t.paneId,edge:t.edge,rectStart:e(s.rectAtom)})}),i4=(0,eo.eU)(null,function(e,n,t){var r=e(ng),i=e(e1(t)),o=i.rectAtom,a=i.type,l=e(o),u=eD(r,t);if(!u){var c=Error("Expected pane");throw n(nA,{error:c,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),c}if("tile"===a)return void n(nB,(0,eq.jM)(r,function(e){eB(e,{paneGroupPath:u.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})}));u.paneGroup.id===e(tR.LY)&&n(tR.LY,null);var s=e(e2).filter(function(e){return"tile"===e.type&&!e.isHidden}),d=e(e6),p={x:l.x+l.width/2,y:l.y+l.height/2},f=s.find(function(n){var t=e(n.rectAtom);return nE(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})});if(!f)return void n(nB,(0,eq.jM)(r,function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=eC(e,t);if((null==o?void 0:o.type)!=="floatingPaneGroup")throw Error("Expected floatingPaneGroup");if(eW(e,t),null===i){e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex};return}eM(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r})}(e,{paneGroupPath:u.paneGroupPath,to:["tiling"],placement:"leftOf"})}));n(nB,(0,eq.jM)(r,function(e){var n=eD(e,f.paneId);u.paneGroup.panes.forEach(function(t){ej(e,{paneId:t,paneGroupPath:(null==n?void 0:n.paneGroupPath)||["tiling"],activate:!1})})})),n(tJ,u.paneGroup.panes[u.paneGroup.activeIndex])}),i5=(0,eo.eU)(null),i3=(0,eo.eU)(function(e){var n=e(i5);return n&&e(e2).find(function(t){var r=e(t.dataAtom);return"videoPlayer"===r.type&&r.data.embedUrl===(null==n?void 0:n.embedUrl)})||null}),i8=(0,eo.eU)(function(e){var n=e(i3);return n&&!n.isHidden?n:null}),i7=(0,eo.eU)(null,function(e,n,t){n(i5,t);var r,i="videoPlayer";if(!t)return void n(r1,i);n(r0,{type:i,data:{title:null!=(r=t.title)?r:"Tutorial",embedUrl:t.embedUrl}},{commit:!0,location:"center"})}),i6=(0,eo.eU)(null,function(e,n){var t=e(i3);if(null==t?void 0:t.isHidden){n(tJ,t.paneId),n(nr,t.paneId);return}var r=e(i5);r&&n(i7,r)}),i9=(0,eo.eU)(function(e){return e(e2).find(function(n){return"tutorial"===e(n.dataAtom).type})||null}),oe=(0,eo.eU)(null,function(e,n){var t=e(i9);if(null==t?void 0:t.isHidden)return void n(tJ,t.paneId);n(tF,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1,commit:!0})}),on=(0,eo.eU)(function(e){return!!(e(ii)||e(i1)||e(r2)||e(t4)||e(rv)||e(tz))}),ot=(0,eo.eU)(null,function(e,n,t){n(nO,t),n(nB,e(ng))}),or=(0,eo.eU)(null,function(e,n,t){e(eK)&&n(tG,{headers:new Map(e(eQ).map(function(e){return[e,{snappiness:400}]})),panes:new Map(e(eZ).map(function(e){return[e,{snappiness:400}]}))}),n(ns,function(e){return(0,eq.jM)(e,function(e){e.isOpen=null!=t?t:!e.isOpen,t&&0===e.width&&(e.width=180)})}),n(nB,e(ng))}),oi=(0,eo.eU)(null,function(e,n,t){if(n(eK,t),n(or,!1),t){n(nN,0),null!==e(no)&&n(nT,{type:"sidebar",width:450});var r=e(n_).find(function(e){var n=(0,c._)(e,2);return"agentChat"===(n[0],n[1]).type});r&&n(tS,r[0])}else n(nT,null),n(nN,ra.uF),n(rr,{pane:{type:"agentChat"}});n(nB,e(ng))}),oo=t(39938),oa=t(47993),ol=(0,eo.eU)(!1),ou=(0,eo.eU)(null,function(e,n,t){if(e(ol))return void(0,oa.flushSync)(function(){n(oc,null),n(ol,!1)});t&&n(oc,t),n(ol,!0)}),oc=(0,eo.eU)(null),os=(0,eo.eU)([]),od=(0,eo.eU)(function(e){if(e(iZ)||e(ol))return null;var n=e(nn);if(!n)return null;var t=e(e1(n)),r=e(t.dataAtom),i=t.paneId+r.type;return(0,ne.xS)(r)&&(i+=r.data.path),i}),op=t(18712),of=t(25227),oh=t(25590);function og(e){return(0,s.FD)(oh.Ay,(0,r6._)((0,f._)({},e),{children:[(0,s.Y)("path",{fillRule:"evenodd",d:"M2 6.75A4.75 4.75 0 0 1 6.75 2h10a4.75 4.75 0 0 1 4.75 4.75v10a4.75 4.75 0 0 1-4.75 4.75h-10A4.75 4.75 0 0 1 2 16.75v-10ZM6.75 3.5A3.25 3.25 0 0 0 3.5 6.75v10A3.25 3.25 0 0 0 6.75 20h10A3.25 3.25 0 0 0 20 16.75v-10a3.25 3.25 0 0 0-3.25-3.25h-10Z",clipRule:"evenodd"}),(0,s.Y)("path",{d:"M5.25 8.398a3.167 3.167 0 0 1 3.167-3.167h6.666a3.167 3.167 0 0 1 3.167 3.167v6.667a3.167 3.167 0 0 1-3.167 3.166H8.417a3.167 3.167 0 0 1-3.167-3.166V8.398Z"})]}))}function om(e){return(0,s.Y)(oh.Ay,(0,r6._)((0,f._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M17 21.75A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10ZM20.25 12H3.75V7A3.25 3.25 0 0 1 7 3.75h10A3.25 3.25 0 0 1 20.25 7v5Z",clipRule:"evenodd"})}))}function ov(e){return(0,s.Y)(oh.Ay,(0,r6._)((0,f._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM12 3.75v16.5h5A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-5Z",clipRule:"evenodd"})}))}function ow(e){return(0,s.Y)(oh.Ay,(0,r6._)((0,f._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M21.75 7A4.75 4.75 0 0 0 17 2.25H7A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10A4.75 4.75 0 0 0 21.75 17V7ZM12 3.75v16.5H7A3.25 3.25 0 0 1 3.75 17V7A3.25 3.25 0 0 1 7 3.75h5Z",clipRule:"evenodd"})}))}function oy(e){return(0,s.Y)(oh.Ay,(0,r6._)((0,f._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M7 2.25A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7ZM3.75 12h16.5v5A3.25 3.25 0 0 1 17 20.25H7A3.25 3.25 0 0 1 3.75 17v-5Z",clipRule:"evenodd"})}))}var ob=(0,eo.eU)(null,function(e,n,t){if(null===t){n(rk,null),n(ii,function(e){return e?(0,eq.jM)(e,function(e){e.drop=null}):e});return}n(ii,function(e){return e?(0,eq.jM)(e,function(e){!function(e,n){if("edge"===n.type||"emptyLayout"===n.type){e.drop={type:"split",relativeTo:["tiling"],placement:"edge"===n.type?n.position:"replace"};return}var t=n.paneId;if("middle"===n.position){e.drop={type:"insert",paneId:t};return}e.drop={type:"split",relativeTo:t,placement:n.position}}(e,t)}):e});var r=e(e9),i=e(e6),o=e(np),a=e(nG);if("pane"===t.type){var l=e(e1(t.paneId)),u=e(l.rectAtom);n(rk,{type:"dropPreview",rect:{x:u.x,y:u.y-i,width:u.width,height:u.height+i}});return}if("emptyLayout"===t.type)return void n(rk,{type:"dropPreview",rect:function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=e.location,o={x:t+r,y:0,width:n.width-t-2*r,height:n.height-r},a=o.x,l=o.y,u=o.width,c=o.height;switch(i){case"middle":return o;case"leftOf":return{x:a,y:l,width:u/2,height:c};case"rightOf":return{x:a+u/2,y:l,width:u/2,height:c};case"above":return{x:a,y:l,width:u,height:c/2};case"below":return{x:a,y:l+c/2,width:u,height:c/2}}}({container:r,sidebarWidth:o,location:t.position,gap:a})});n(rk,{type:"dropPreview",rect:function(e,n){var t=n.container,r=n.sidebarWidth,i=n.position,o=n.gap,a={x:r+o,y:0,width:t.width-r-2*o,height:t.height-o};if((null==e?void 0:e.type)!=="split"){switch(i){case"above":case"below":a.height=a.height/2,"below"===i&&(a.y+=a.height);break;case"rightOf":case"leftOf":a.width=a.width/2,"rightOf"===i&&(a.x+=a.width)}return a}if(e.stacked){switch(i){case"above":a.height=a.height*(e.children[0].percent/100)/2;break;case"below":a.height=a.height*(e.children[e.children.length-1].percent/100)/2,a.y=t.height-a.height;break;case"leftOf":a.width=a.width/2;break;case"rightOf":a.width=a.width/2,a.x=t.width-a.width-o}return a}switch(i){case"above":a.height=a.height/2;break;case"below":a.height=a.height/2,a.y=t.height-a.height-o;break;case"leftOf":a.width=a.width*(e.children[0].percent/100)/2;break;case"rightOf":a.width=a.width*(e.children[e.children.length-1].percent/100)/2,a.x=t.width-a.width}return a}(e(ng).tiling,{container:r,sidebarWidth:o,position:t.position,gap:a})})}),ox=(0,rI.v)(["opacity","width","height","transform","pointerEvents"]),o_=ox.cssVars,oY=ox.styleTokens,oS=(0,rA.x)({dropPoint:[op.wp.center,op.wp.top(0),op.wp.left(0),op.wp.position.absolute,{zIndex:rY.W.overlay,cursor:"grabbing",width:oY.width,height:oY.height,transform:oY.transform,opacity:"var(".concat(o_.opacity,", 0)"),pointerEvents:oY.pointerEvents,transition:"opacity 200ms ease-out 200ms","&:hover":{color:rS.LU.accentPrimaryStronger}}]}),oA={above:(0,s.Y)(oy,{}),below:(0,s.Y)(om,{}),leftOf:(0,s.Y)(ov,{}),rightOf:(0,s.Y)(ow,{}),middle:(0,s.Y)(og,{})};function oI(e){var n=(0,p.useRef)(null),t=(0,p.useMemo)(function(){return(0,eV.mg)(ia,function(n){return null==n?void 0:n[e]})},[e]),r=(0,p.useMemo)(function(){return(0,eV.mg)(t,function(e){return e?(0,nX._)({},o_.transform,"translate(".concat(e.rect.x,"px, ").concat(e.rect.y,"px)")):null},nl())},[t]);(0,r_.d)(n,rp(r));var i=(0,p.useMemo)(function(){return(0,eV.mg)(t,function(e){var n;return e?(n={},(0,nX._)(n,o_.width,e.rect.width+"px"),(0,nX._)(n,o_.height,e.rect.height+"px"),n):null},nl())},[t]);(0,r_.d)(n,rp(i));var o=(0,p.useMemo)(function(){return(0,eV.mg)(t,function(e){var n;return n={},(0,nX._)(n,o_.opacity,(null==e?void 0:e.visible)?"1":"0"),(0,nX._)(n,o_.pointerEvents,(null==e?void 0:e.visible)?"all":"none"),n},nl())},[t]);return(0,r_.d)(n,rp(o)),n}function ok(){var e=oI("middle"),n=rf(ob),t=rh((0,p.useMemo)(function(){return(0,eV.mg)(ia,function(e){var n;return null!=(n=null==e?void 0:e.middle.paneId)?n:null})},[]));return(0,s.Y)(of.S,{css:oS.dropPoint,innerRef:e,onMouseEnter:function(){var e=t(),r="middle";n(e?{type:"pane",position:r,paneId:e}:{type:"emptyLayout",position:r})},onMouseLeave:function(){return n(null)},children:(0,s.Y)(og,{size:32})})}function oE(e){var n=e.position,t=oI(n),r=rf(ob);return(0,s.Y)(of.S,{css:oS.dropPoint,innerRef:t,onMouseEnter:function(){return r({type:"edge",position:n})},onMouseLeave:function(){return r(null)},children:(0,p.cloneElement)(oA[n],{size:32})})}var oC=(0,p.memo)(function(){return(0,s.FD)(s.FK,{children:[(0,s.Y)(oE,{position:"above"}),(0,s.Y)(oE,{position:"below"}),(0,s.Y)(oE,{position:"leftOf"}),(0,s.Y)(oE,{position:"rightOf"}),(0,s.Y)(ok,{})]})}),oD=(0,eo.eU)(null);function oR(e){return rd((0,q.A)(function(){return(0,eo.eU)(function(n){var t=n(e1(e));return n(t.dataAtom)})},[e]))}function oF(){var e=rs();return(0,p.useCallback)(function(n){var t=e.get(e1(n));return{pane:e.get(t.dataAtom),isCommitted:t.isCommitted}},[e])}function oU(e){var n=e.paneId;return rd((0,q.A)(function(){return(0,eo.eU)(function(e){return e(nn)===n})},[n]))}function oP(){var e=rf(nt),n=rf(nr);return(0,q.A)(function(){return function(t,r){(null==r?void 0:r.commit)&&n(t),e(t)}},[n,e])}function oO(){return rf(rr)}var oT=(0,eo.eU)(null,function(e,n){n(t4,!1)});function oL(e){var n=e.paneGroupId,t=rf(il),r=rf(iu),i=rf(id),o=(0,q.A)(function(){return{start:function(e){t({paneGroupId:n,mouse:e.mouse})},update:function(e){r(e)},end:function(e){i(e)}}},[n,t,r,i]);return{isDragging:rd((0,q.A)(function(){return(0,eo.eU)(function(e){var t;return n===(null==(t=e(ii))?void 0:t.paneGroupId)})},[n])),dnd:o}}function oM(){return rf(iC)}function oG(){return{maximizePane:rf(td),maximizePaneGroup:rf(tp),restoreMaximizedPaneGroup:rf(tf),toggleMaximizePane:rf(th),toggleMaximizedPaneGroup:rf(tg)}}function oN(e){var n,t,r=(n=e7(e),{activeIndexAtom:(0,q.A)(function(){return(0,eo.eU)(function(e){return e(n).activeIndex})},[n]),pathAtom:(0,q.A)(function(){return(0,eV.mg)(n,function(e){return e.path},nl())},[n]),panesAtom:(0,q.A)(function(){return(0,eV.mg)(n,function(e){return e.panes},nl())},[n]),activeFileAtom:(0,q.A)(function(){return(0,eo.eU)(function(e){var t=e(n),r=e(e1(t.panes[t.activeIndex])),i=e(r.dataAtom);return(0,ne.xS)(i)?(0,ne.Vj)(i):null})},[n])}),i=r.activeIndexAtom,o=r.pathAtom,a=r.panesAtom;return{activeIndex:rp(i),path:rp(o),panes:rp(a),activeTabPaneId:rp((t=e7(e),(0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(t);return e(e1(n.panes[n.activeIndex])).paneId})},[t])))}}function oz(e){var n,t,r,i,o,a,l,u,c,s,d=iL(e),p=nR(d),h=nF(d),g=iG(e),m=(n=iM(e),(0,q.A)(function(){return(0,eo.eU)(function(t){var r,i,o,a,l,u=t(n);if(u)return null!=(a=u.transformOriginX)?a:"0px";var c=null==(o=t(tL))||null==(i=o.panes)||null==(r=i.get(e))?void 0:r.dropState;return null!=(l=null==c?void 0:c.transformOrginX)?l:"0x"})},[n,e])),v=(t=iL(e),(0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(t),r=e(e9);return{x:Math.round(r.x+n.x),y:Math.round(r.y+n.y)}})},[t])),w=iz(e),y=(0,q.A)(function(){return(0,eo.eU)(function(n){var t,r,i,o=n(e1(e));if(o.isHidden)return rY.W.hiddenPane;var a=e===n(nn);return n(ts)===e?rY.W.maximizedPane:e===n(io)||(null==(i=n(tL))||null==(r=i.panes)||null==(t=r.get(e))?void 0:t.dropState)?rY.W.draggingPane:"floating"===o.type?a?rY.W.floatingPaneActive:rY.W.floatingPane:"agentChat"===n(o.dataAtom).type&&"centeredVisualPlanner"===n(no)||n(iT)||a?rY.W.tiledPaneActive:rY.W.tiledPane})},[e]),b=(0,q.A)(function(){return(0,eo.eU)(function(n){var t,r,i=n(tL);return null!=(r=null==i||null==(t=i.panes)?void 0:t.get(e))&&r})},[e]),x=(r=iN(e),(0,q.A)(function(){return(0,eV.mg)(r,function(e){return e.type})},[r])),_=iH(e),Y=(0,q.A)(function(){return(0,eo.eU)(function(n){var t,r=null==(t=eD(n(ng),e))?void 0:t.paneGroup;return!!r&&r.id===n(tR.LY)})},[e]),S=(0,q.A)(function(){return(0,eo.eU)(function(n){return n(nn)===e})},[e]),A=(0,q.A)(function(){return(0,eo.eU)(function(n){return n(nn)===e})},[e]),I=(0,q.A)(function(){return(0,eV.mg)(e1(e),function(e){return e.isCommitted})},[e]),k=iN(e),E=(i=iH(e),o=iM(e),(0,q.A)(function(){return(0,eo.eU)(function(e){return e(tc)?null:e(o)?"dragging":e(i)?"floating":"tiled"})},[i,o])),C=(a=iM(e),(0,q.A)(function(){return(0,eo.eU)(function(n){var t,r,i;return!!n(a)||!!(null==(i=n(tL))||null==(r=i.panes)||null==(t=r.get(e))?void 0:t.dropState)})},[a,e])),D=(l=iM(e),(0,q.A)(function(){return(0,eV.mg)(l,function(e){var n;return null!=(n=null==e?void 0:e.movedAtAll)&&n})},[l])),R=(0,q.A)(function(){return(0,eo.eU)(function(n){if((null==(t=n(ng).tiling)?void 0:t.type)!=="paneGroup")return!1;var t,r,i=null==(r=eD(n(ng),e))?void 0:r.paneGroup;return!!i&&1===i.panes.length})},[e]),F=(u=iL(e),c=iG(e),s=iz(e),(0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(s);return(0,r6._)((0,f._)({},e(u)),{scale:e(c),opacity:+!n})})},[u,c,s])),U=(0,q.A)(function(){return(0,eo.eU)(function(n){return n(ts)===e})},[e]);return{properties:rp(F),size:rp(p),position:rp(h),scale:rp(g),paneType:rp(x),transformOriginXAtom:rp(m),viewportInset:rp(v),zIndex:rp(y),disableInteractions:rp(on),getTransitionEnabled:rh(b),data:rp(k),isFloating:rp(_),isModal:rp(Y),isActive:rp(S),isActivePane:rp(A),isCommitted:rp(I),isHidden:rp(w),isBeingDragged:rp(C),hasMovedWhileDragging:rp(D),headerHeight:rp(e6),border:rp(E),isOnlyPane:rp(R),isMaximized:rp(U)}}function oH(e){var n,t,r,i,o,a,l,u,c,s=nR(ib(e)),d=ix(e),p=iY(e),h=(t=i_(e),(0,q.A)(function(){return(0,eo.eU)(function(n){var r,i,o,a,l,u=n(t);if(u)return null!=(a=u.transformOriginX)?a:"0px";var c=null==(o=n(tL))||null==(i=o.headers)||null==(r=i.get(e))?void 0:r.dropState;return null!=(l=null==c?void 0:c.transformOrginX)?l:"0x"})},[t,e])),g=(r=i_(e),i=iA(e),o=iI(e),n=iS(e),a=(0,q.A)(function(){return(0,eo.eU)(function(e){var t=e(nn);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)})},[n]),(0,q.A)(function(){return(0,eo.eU)(function(n){var t,l,u;return n(i)?rY.W.maximizedHeader:n(r)||(null==(u=n(tL))||null==(l=u.headers)||null==(t=l.get(e))?void 0:t.dropState)?rY.W.draggingHeader:n(o)?n(a)?rY.W.floatingHeaderActive:rY.W.floatingHeader:rY.W.tiledHeader})},[r,i,o,a,e])),m=(0,q.A)(function(){return(0,eo.eU)(function(n){var t,r,i=n(tL);return null!=(r=null==i||null==(t=i.headers)?void 0:t.get(e))&&r})},[e]),v=iA(e),w=iI(e),y=(0,q.A)(function(){return(0,eo.eU)(function(n){return n(tR.LY)===e})},[e]),b=(0,q.A)(function(){return(0,eo.eU)(function(n){var t;return(null==(t=n(ii))?void 0:t.paneGroupId)===e})},[e]);return{properties:rp((l=ib(e),u=iY(e),c=ix(e),(0,q.A)(function(){return(0,eo.eU)(function(e){var n="centeredVisualPlanner"===e(no);return(0,r6._)((0,f._)({},e(l)),{scale:e(u),positioning:e(c).positioning,opacity:+!n})})},[l,u,c]))),size:rp(s),position:rp(d),scale:rp(p),transformOriginX:rp(h),zIndex:rp(g),getTransitionEnabled:rh(m),isMaximized:rp(v),isFloating:rp(w),isModal:rp(y),isBeingDragged:rp(b)}}function oW(){return rd(no)}function oB(){return{view:rp(rb),resizeHandleView:rp(rx),isOpen:rp(nd),toggle:rf(or),resize:{start:rf(rm),update:rf(rw),end:rf(ry)},getTransitionEnabled:rh(tM)}}function oj(e){var n=rd(nq),t=(0,B.NC)(),r=(0,es.Rj)(function(){return t.sessions.query({types:[eu.dF3.CHAT]}).map.select(function(e){return e.size>0})},[t],{default:!1});return(0,p.useMemo)(function(){var t=n.primaryTools.filter(function(n){return e.has(n.type)});return t.some(function(e){return"agentChat"===e.type})&&!r&&(t=t.filter(function(e){return"ghostwriterChat"!==e.type})),{visible:n.visible,primaryTools:t,secondaryTools:n.secondaryTools.filter(function(n){return e.has(n.type)})}},[n,e,r])}function o$(){var e=rp(ig),n=rp(nG),t=rp(ih),r=rf(tH),i=rf(tB);return{rect:e,gutter:n,displayState:t,collapsedWidth:32,getTransitionEnabled:rh(tM),resizeSidebar:r,toggle:i,setChatRef:rf(tT),agentFiletreeOrder:rp(nO),setAgentFiletreeOrder:rf(ot),headerHeight:rp(e6)}}var oq=t(18374),oV=t(49803),oK=t(32543);function oZ(){var e,n,t,r,i,o,a,l,u,s,d,h,g,v;return t=(0,ei.A)(),r=oW(),i=rf(iO),o=(0,B.Ik)(),a=(0,oq.Y)(),l=(0,p.useRef)(!1),u=(0,c._)((0,Q.V)(),1)[0],h=(s={variables:{replId:t}},d=(0,f._)({},en,s),m.I(er,d)).data,g=null,v=!1,(null==h||null==(e=h.getRepl)?void 0:e.__typename)==="Repl"&&(g=h.getRepl.config,v=(null==(n=h.getRepl.origin)?void 0:n.id)!=null),(0,p.useEffect)(function(){(null==g?void 0:g.isAgentRepl)&&!v&&a&&null!=o&&!l.current&&("approved"===o?("centeredVisualPlanner"===r&&i("tilingLayout"),(null==g?void 0:g.isInPlanningPhase)!==!1&&u({variables:{input:{id:t,isInPlanningPhase:!1}}})):("centeredVisualPlanner"!==r&&i("centeredVisualPlanner"),(null==g?void 0:g.isInPlanningPhase)!==!0&&u({variables:{input:{id:t,isInPlanningPhase:!0}}})),l.current=!0)},[r,t,i,u,o,a,g,v]),(0,oK.g)(),(0,oV.c)(),null}var oJ=t(34778),oQ=t(98565),oX=t(1224),o0=t(72643),o1=t(43585);function o2(e){var n=(0,B.dm)().setAssistantMode,t=(0,B.NC)(),r=(0,p.useCallback)(function(r){return(0,n4._)(function(){var i,o;return(0,n5.YH)(this,function(a){switch(a.label){case 0:return[4,t.sessions.create({sessionType:eu.dF3.CHAT})];case 1:if(!(i=a.sent()).ok)return[2];return e({pane:{type:"ghostwriterChat",data:{sessionId:(o=i.payload).id}}}),n("basic"),[4,o.appendEvent({kind:"message",message:r,intent:eu.qRv.NONE,modelType:eu.e3q.BASIC})];case 2:return a.sent(),(0,oJ.u4)(oJ.AZ.ASSISTANT_USED,{action:"message_sent",intent_type:"explain",model:"basic",user_model_selection:"basic",message_content:r,message_source:"ask_ai_command_bar"}),[2]}})})()},[t,e,n]);return(0,q.A)(function(){return{data:{type:"context",label:"Assistant",icon:(0,s.Y)(o1.A,{size:16}),key:"assistant"},commands:function(e){var n=e.searchQuery;return n?[{match:(0,oX.u4)({defaultScore:o0.q.askAssistant,matchScoreMultiplier:o0.B.askAssistant,filterLowMatchScores:!1}),data:{type:"action",label:"Ask Assistant: ".concat(n),icon:(0,s.Y)(o1.A,{size:16}),run:function(){return r(n)}}}]:[]}}},[r])}var o4=t(90173);function o5(e){var n=(0,ne.Vv)();return(0,q.A)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,s.Y)(o4.A,{}),key:"codeSearch"},commands:function(t){var r=t.searchQuery;if(!r)return[];var i={type:"searchReplace",data:{initialQuery:r}};return[{match:(0,oX.u4)({defaultScore:o0.q.codeSearch,matchScoreMultiplier:o0.B.codeSearch,filterLowMatchScores:!1}),data:{type:"action",label:n.getTitle(i),icon:n.Icon({pane:i}),run:function(){e({pane:i})}}}]}}},[n,e])}var o3=t(40115),o8=t(17370),o7=t(44642),o6=t(69010),o9=t(52260),ae=t(87773),an=t(67312),at=t(99708),ar=t(98927),ai=t(32289),ao=t(94144),aa=t(55929),al=t(48707);function au(e){var n=e.currentPaneId,t=e.type,r=(0,ne.Vv)(),i=rf(rn),o=rf(tJ),a=(0,tR.t3)(),l=(0,at.gB)(),u=n?"Move existing tab here":"Jump to existing tab";return(0,p.useCallback)(function(e){var d=e.searchQuery;return(0,n4._)(function(){var e,p,f,h,g,m,v,w,y,b,x,_,Y,S,A,I,k,E,C,D,R,F,U,P,O;return(0,n5.YH)(this,function(T){switch(T.label){case 0:if(e=a(),!(p=n?e.filter(function(e){return(0,c._)(e,1)[0]!==n}):e).length||!d&&"files"===t)return[2,[]];f=new Map,h=[],g=!0,m=!1,v=void 0;try{for(w=p[Symbol.iterator]();!(g=(y=w.next()).done);g=!0)(b=(0,c._)(y.value,2))[0],x=b[1],(0,ne.xS)(x)&&x.data.path&&h.push(x.data.path)}catch(e){m=!0,v=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw v}}return[4,(0,o6.UI)(d,h)];case 1:_=T.sent(),Y=!0,S=!1,A=void 0;try{for(I=_[Symbol.iterator]();!(Y=(k=I.next()).done);Y=!0)E=k.value,f.set(E.path,{score:E.score,ranges:E.ranges})}catch(e){S=!0,A=e}finally{try{Y||null==I.return||I.return()}finally{if(S)throw A}}C=[],D=!0,R=!1,F=void 0;try{for(U=function(){var e=(0,c._)(O.value,2),a=e[0],d=e[1],p=(0,ne.NM)(d);if("tools"===t&&!p||"tools"===t&&"commands"===d.type||"files"===t&&p)return"continue";var h=(0,ne.xS)(d)?d.data.path:null,g=h?f.get(h):null;if("deployments"===d.type){var m=l(a);if((null==m?void 0:m.type)==="deployments"){var v=m.getTabs();if(v)return C.push({match:oX.KK,data:{type:"context",label:r.getTitle(d),icon:(0,s.Y)(r.Icon,{pane:d})},commands:function(){return v.map(function(e){return{match:oX.KK,data:{key:a+e.id,type:"action",label:e.label,icon:(0,s.Y)(e.Icon,{size:16}),run:function(){o(a),m.setTab(e.id)}}}})}}),"continue"}}var w=h&&g?function(){return{score:g.score,render:(0,o6.SS)({path:h,ranges:g.ranges,description:u})}}:oX.KK,y=r.getTitle(d),b=r.Icon({pane:d});C.push({match:w,data:{key:a,type:"action",label:y,icon:b,run:function(){return n?i({a:n,b:a}):o(a)},description:u}})},P=p[Symbol.iterator]();!(D=(O=P.next()).done);D=!0)U()}catch(e){R=!0,F=e}finally{try{D||null==P.return||P.return()}finally{if(R)throw F}}return[2,C]}})})()},[n,a,r,o,i,l,u,t])}function ac(e){var n=(0,ne.Vv)(),t=(0,ar.Tb)(),r=(0,tR.t3)();return(0,p.useCallback)(function(){var i=r().map(function(e){var n=(0,c._)(e,2);return(n[0],n[1]).type}),o=[],a=!0,l=!1,u=void 0;try{for(var s,d=t[Symbol.iterator]();!(a=(s=d.next()).done);a=!0)!function(){var t=s.value;if(!((0,ne.gG)(t.type)&&i.includes(t.type))){var r=n.getTitle(t),a=n.Icon({pane:t});o.push({match:(0,o9.T)({pane:t,aliases:ae.f.get(t.type)}),data:{key:"extension"===t.type?"extension-".concat(t.data.installationId,"-").concat(t.data.path):void 0,type:"action",label:r,description:n.getDescription(t,{short:!0}),icon:a,run:function(){e({pane:t})}}})}}()}catch(e){l=!0,u=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw u}}return o},[t,e,r,n])}function as(e){var n=e.currentPaneId,t=e.openPane,r=(0,o3.A)(),i=r.fs,o=r.container,a=ac(t),l=(0,B.jt)(),u=au({currentPaneId:n,type:"tools"}),c=au({currentPaneId:n,type:"files"}),d=(0,p.useCallback)(function(e){var n=e.path;t({pane:{type:(0,ne.QY)({path:n}),data:{path:n}}})},[t]),f=(0,tR.Sx)(),h=(0,an.J)(),g=o5(t),m=o2(t);return(0,q.A)(function(){var e,n,t,r=(0,o8.g)({openFile:d,fs:i,shouldHideFile:h,getRecentFiles:f,getCurrentlyOpenFilePanesCommands:c}),p=(0,o7.Y)({container:o,openFile:d}),v={data:{type:"context",label:ao.Ve,icon:(0,s.Y)(al.A,{})},commands:function(e){var n=e.searchQuery;return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,u({searchQuery:n})];case 1:return[2,ek._.apply(void 0,[e.sent()]).concat((0,ek._)(a()))]}})})()}},w=(n=(e={fs:i,openFile:d}).openFile,t=e.fs,{match:oX.KK,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,s.Y)(aa.A,{})},commands:function(e){var r=e.searchQuery,i=e.active;return r&&i?[{match:oX.G2,data:{type:"action",description:"Create a new file",label:r,icon:(0,s.Y)(ai.A,{path:r}),run:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,t.stat(r)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(r,'" already exists')}];return[4,t.writeFile(r,oQ.A.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+r+'"'}];return n({path:r}),[2]}})})()}}}]:[]}});return{data:{type:"group",key:"root",description:"Search for files & toolsâ€¦"},commands:function(){return[w,r,v,g,p].concat((0,ek._)(l?[]:[m]))}}},[o,i,f,a,u,c,h,d,g,m,l])}var ad=t(99365),ap=t(18663),af="Searchâ€¦";function ah(){var e=(0,nJ.Xr)(ou);return(0,p.useCallback)(function(n){e(n)},[e])}var ag=t(9092),am=t(70251),av=t(3937),aw=t(95391),ay={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,ag.FM)({cmdOrCtrl:!0,key:"k"})};function ab(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,nJ.Xr)(os);(0,p.useEffect)(function(){if(n)return t(function(n){return(0,ek._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t,e,n])}var ax=(0,rA.x)({surface:[op.wp.maxHeight("70vh"),op.wp.borderRadius(8)]});let a_=(0,p.memo)(function(){var e,n,t,r,i,o,a,l=(0,nJ.md)(ol),u=ah(),c=(e=oO(),n=ac((0,p.useCallback)(function(n){(0,oJ.u4)(oJ.AZ.TOOL_OPENED,{source:"Command Bar",tool:n.pane.type}),e(n)},[e])),t=au({type:"tools"}),r=(0,ad.Jn)("toggleGlobalCommandBarCommand"),i=(0,q.A)(function(){return{type:"context",icon:(0,s.Y)(ap.A,{}),label:"",description:af,keyboardShortcut:r}},[r]),o=(0,q.A)(function(){return(0,eo.eU)(function(e){var r=e(os),o={data:{type:"context",label:ao.Ve,icon:(0,s.Y)(al.A,{})},commands:function(e){var r=e.searchQuery;return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,t({searchQuery:r})];case 1:return[2,ek._.apply(void 0,[e.sent()]).concat((0,ek._)(n()))]}})})()}};return{data:i,commands:function(){return(0,ek._)(r).concat([o])}}})},[n,i,t]),a=(0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(o),t=e(oc);return t?[n,t]:n})},[o]),(0,nJ.md)(a)),d=(0,ad.Jn)(ay.id);return(0,s.Y)(am.a,{hideCloseButton:!0,isOpen:l,onRequestClose:u,noPadding:!0,skipTransition:!0,topPadding:8,children:(0,s.Y)(av.ui,{css:ax.surface,children:(0,s.Y)(aw.r,{keyboardShortcut:d,onAction:function(){return u()},command:c,autoFocus:!0})})})});var aY=t(6723);function aS(){var e=(0,h._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return aS=function(){return e},e}var aA=(0,g.J1)(aS(),aY.Fz,aY.Tu),aI=t(22585),ak=t(24270),aE=t(40756),aC=t(91953),aD=(0,rA.x)({container:op.wp.colWithGap(24)});function aR(e){var n=e.fileExtension,t=e.onCancel,r=e.onConfirm;return(0,s.FD)(of.S,{css:aD.container,children:[(0,s.Y)(aC.Y9,{level:1,variant:"headerDefault",children:"Make this extension default?"}),(0,s.FD)(aC.EY,{children:["Do you want to use this extension to open ",n," files by default? You can always use another file opener by right clicking on the file and opening it with something else"]}),(0,s.FD)(of.S,{row:!0,gap:12,justify:"end",children:[(0,s.Y)(aE.$n,{onClick:function(){return t()},text:"Cancel"}),(0,s.Y)(aE.$n,{colorway:"positive",onClick:function(){return r()},text:"Yes, use this extension by default"})]})]})}var aF=t(35897);function aU(){var e=(0,tR.RG)(),n=rh(ny),t=rh(nx),r=rh(tr),i=rf(tq),o=rf(t_),a=rf(tY),l=rh(nv),u=rh(nw),s=rh(tc);return(0,p.useCallback)(function(d){var p=d.pane,f=d.activate,h=d.updateOnReveal,g=e(),m=(0,ne.xS)(p)?l():u();m||(m=function(e){var n,t,r=e.panes,i=e.pane;if((0,ne.xS)(i)){var o,a,l=i.data.path;return null!=(a=null==(o=r.find(function(e){var n=(0,c._)(e,2)[1];return(0,ne.xS)(n)&&n.data.path===l}))?void 0:o[0])?a:null}if((0,ne.En)(i))return null!=(s=null==(u=r.find(function(e){var n=(0,c._)(e,2)[1];return!!(0,ne.En)(n)&&n.data.installationId===i.data.installationId&&n.data.path===i.data.path&&n.data.filePath===i.data.filePath}))?void 0:u[0])?s:null;if("diff"===i.type){var u,s,d,p=r.find(function(e){var n=(0,c._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&nl()(t.data,i.data)});return null!=(d=null==p?void 0:p[0])?d:null}return(0,ne.gG)(i.type)&&null!=(t=null==(n=r.find(function(e){return(0,c._)(e,2)[1].type===i.type}))?void 0:n[0])?t:null}({panes:(0,ek._)(n()).concat((0,ek._)(t())),pane:p}));var v=s();if(m&&g){var w,y,b=r().layout,x=null==(w=eD(b,g))?void 0:w.paneGroup,_=null==(y=eD(b,m))?void 0:y.paneGroup;if(!v||(null==x?void 0:x.id)===(null==_?void 0:_.id))return(void 0===h||h)&&a({paneId:m,pane:p}),o({paneId:m,activate:f}),m}var Y=d.placement;return v&&null!=g?Y={type:"after",paneId:g}:(null==Y?void 0:Y.type)!=="secondary"||Y.relativeTo||(Y={type:"secondary",relativeTo:g}),i({pane:p,activate:f,placement:Y})},[e,l,u,i,n,t,r,s,o,a])}var aP=t(45261);function aO(){var e,n=oM(),t=(0,tR.T_)(),r=(e=(0,tR.dm)(),(0,q.A)(function(){return function(n){return e.subscribe(n)}},[e])),i=(0,tR.w1)(),o=(0,aF.A)(),a=aU(),l=(0,tR.RG)(),u=rh(tr),c=rf(tu),s=(0,aP.A)(),d=(0,oo.A)(s),f=(0,p.useCallback)(function(e){a({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:l()}})},[a,l]);return(0,q.A)(function(){return{openFile:n,watchActiveFile:r,getActiveFile:i,activatePane:t,toasts:o,revealOrInsertTool:f,getLayoutState:u,setLayoutState:c,getSshConfig:function(){return d.current}}},[n,r,i,t,o,f,u,c,d])}var aT=t(85689),aL=t(45380),aM=t(13421),aG=t(31736),aN=t(35862),az=t(57068),aH=t(77135),aW=t(42008),aB=t(1114),aj=t(53847),a$=function(e){return e.RAW="RAW",e.PROXY="PROXY",e.THROW="THROW",e.HANDLER="HANDLER",e}({}),aq=function(e){return e.GET="GET",e.SET="SET",e.APPLY="APPLY",e.CONSTRUCT="CONSTRUCT",e.ENDPOINT="ENDPOINT",e.RELEASE="RELEASE",e}({}),aV=Symbol("Comlink.proxy"),aK=Symbol("Comlink.endpoint"),aZ=Symbol("Comlink.releaseProxy"),aJ=Symbol("Comlink.thrown"),aQ=function(e){return(void 0===e?"undefined":(0,eE._)(e))==="object"&&null!==e||"function"==typeof e},aX=new Map([["proxy",{canHandle:function(e){return aQ(e)&&e[aV]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return a0(e,t),[r,[r]]},deserialize:function(e){var n;return e.start(),function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o=new Proxy(r,{get:function(r,a){if(a2(i),a===aZ)return function(){return a6(n,{type:aq.RELEASE,path:t.map(function(e){return e.toString()})}).then(function(){a1(n),i=!0})};if("then"===a){if(0===t.length)return{then:function(){return o}};var l=a6(n,{type:aq.GET,path:t.map(function(e){return e.toString()})}).then(a7);return l.then.bind(l)}return e(n,(0,ek._)(t).concat([a]))},set:function(e,r,o){a2(i);var a=(0,c._)(a8(o),2),l=a[0],u=a[1];return a6(n,{type:aq.SET,path:(0,ek._)(t).concat([r]).map(function(e){return e.toString()}),value:l},u).then(a7)},apply:function(r,o,a){a2(i);var l=t[t.length-1];if(l===aK)return a6(n,{type:aq.ENDPOINT}).then(a7);if("bind"===l)return e(n,t.slice(0,-1));var u=(0,c._)(a4(a),2),s=u[0],d=u[1];return a6(n,{type:aq.APPLY,path:t.map(function(e){return e.toString()}),argumentList:s},d).then(a7)},construct:function(e,r){a2(i);var o=(0,c._)(a4(r),2),a=o[0],l=o[1];return a6(n,{type:aq.CONSTRUCT,path:t.map(function(e){return e.toString()}),argumentList:a},l).then(a7)}});return o}(e,[],n)}}],["throw",{canHandle:function(e){return aQ(e)&&aJ in e},serialize:function(e){var n=e.value;return[(0,aj._)(n,Error)?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function a0(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!t||i.origin===t.origin&&i.source===t.source)){var o,a=(0,f._)({path:[]},i.data),l=a.id,u=a.type,s=a.path,d=(i.data.argumentList||[]).map(a7);try{var p=s.slice(0,-1).reduce(function(e,n){return e[n]},e),h=s.reduce(function(e,n){return e[n]},e);switch(u){case aq.GET:o=h;break;case aq.SET:p[s.slice(-1)[0]]=a7(i.data.value),o=!0;break;case aq.APPLY:o=h.apply(p,d);break;case aq.CONSTRUCT:var g=(0,aB._)(h,(0,ek._)(d));o=a3(g);break;case aq.ENDPOINT:var m,v,w=new MessageChannel,y=w.port1,b=w.port2;a0(e,b),m=y,v=[y],a5.set(m,v),o=m;break;case aq.RELEASE:o=void 0;break;default:return}}catch(e){o=(0,nX._)({value:e},aJ,0)}Promise.resolve(o).catch(function(e){return(0,nX._)({value:e},aJ,0)}).then(function(e){var t=(0,c._)(a8(e),2),i=t[0],o=t[1];n.postMessage((0,r6._)((0,f._)({},i),{id:l}),o),u===aq.RELEASE&&(n.removeEventListener("message",r),a1(n))})}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),a1(n)}}function a1(e){"MessagePort"===e.constructor.name&&e.close()}function a2(e){if(e)throw Error("Proxy has been released and is not useable")}function a4(e){var n,t=e.map(a8);return[t.map(function(e){return e[0]}),(n=t.map(function(e){return e[1]}),Array.prototype.concat.apply([],n))]}var a5=new WeakMap;function a3(e){return Object.assign(e,(0,nX._)({},aV,!0))}function a8(e){var n=!0,t=!1,r=void 0;try{for(var i,o=aX[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,c._)(i.value,2),l=a[0],u=a[1];if(u.canHandle(e)){var s=(0,c._)(u.serialize(e),2),d=s[0],p=s[1];return[{type:a$.HANDLER,name:l,value:d},p]}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return[{type:a$.RAW,value:e},a5.get(e)||[]]}function a7(e){switch(e.type){case a$.HANDLER:return aX.get(e.name).deserialize(e.value);case a$.RAW:return e.value}}function a6(e,n,t){return new Promise(function(r){var i=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function n(t){t.data&&t.data.id&&t.data.id===i&&(e.removeEventListener("message",n),r(t.data))}),e.start&&e.start(),e.postMessage((0,f._)({id:i},n),t)})}var a9=t(29705),le=t(43517),ln=Symbol("timeout"),lt=t(20671);function lr(){var e=(0,h._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return lr=function(){return e},e}function li(){var e=(0,h._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return li=function(){return e},e}function lo(){var e=(0,h._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return lo=function(){return e},e}function la(){var e=(0,h._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    ...CoreSubscriptionPlanStatus\n  }\n  ","\n"]);return la=function(){return e},e}function ll(){var e=(0,h._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return ll=function(){return e},e}function lu(){var e=(0,h._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return lu=function(){return e},e}function lc(){var e=(0,h._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return lc=function(){return e},e}function ls(){var e=(0,h._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return ls=function(){return e},e}function ld(){var e=(0,h._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    iconUrl\n    imageUrl\n  }\n"]);return ld=function(){return e},e}function lp(){var e=(0,h._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return lp=function(){return e},e}function lf(){var e=(0,h._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return lf=function(){return e},e}function lh(){var e=(0,h._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return lh=function(){return e},e}function lg(){var e=(0,h._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return lg=function(){return e},e}function lm(){var e=(0,h._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return lm=function(){return e},e}function lv(){var e=(0,h._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return lv=function(){return e},e}function lw(){var e=(0,h._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      workspacePreferences\n    }\n  }\n"]);return lw=function(){return e},e}function ly(){var e=(0,h._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return ly=function(){return e},e}function lb(){var e=(0,h._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    getRepl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return lb=function(){return e},e}var lx=(0,g.J1)(lr()),l_=(0,g.J1)(li()),lY=(0,g.J1)(lo()),lS=(0,g.J1)(la(),lt.y),lA=(0,g.J1)(ll()),lI=(0,g.J1)(lu()),lk=(0,g.J1)(lc()),lE=(0,g.J1)(ls()),lC=(0,g.J1)(ld()),lD=(0,g.J1)(lp()),lR=(0,g.J1)(lf(),lD),lF=(0,g.J1)(lh(),lD),lU=(0,g.J1)(lg(),lx,l_,lY,lS),lP=(0,g.J1)(lm(),lD,lA,lI,lk),lO=(0,g.J1)(lv(),lD,lA,lI,lk),lT=(0,g.J1)(lw()),lL=(0,g.J1)(ly(),lE,lC,lR,lF),lM=(0,g.J1)(lb(),lE,lC,lR,lF);function lG(e){return function(n){return(0,n4._)(function(){var t,r;return(0,n5.YH)(this,function(i){switch(i.label){case 0:return[4,null===n3.V||void 0===n3.V?void 0:n3.V.query({query:e,variables:n||void 0})];case 1:if(null==(t=i.sent())?void 0:t.data)return[2,t.data];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})})()}}var lN=t(97858);function lz(e,n){var t={};for(var r in n)"function"==typeof n[r]&&(t[r]=function(e,n){return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=!0,a=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)(0,u.value)()}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return n.apply(void 0,(0,ek._)(r))}}(e,n[r]));return t}function lH(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(!t.scopes.has(u)){var c="Scope not declared in extension.json: ".concat(u);e.logger.warn("".concat(c,". In the future this will throw an error"))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}}var lW=ed.ZU.Record(ed.ZU.String(),ed.ZU.String({minLength:1})),lB=t(44626);function lj(){var e=(0,h._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return lj=function(){return e},e}var l$=(0,g.J1)(lj());function lq(e){return{registerCommand:function(n,t){return(0,n4._)(function(){var r,i,o;return(0,n5.YH)(this,function(a){switch(a.label){case 0:if(t)return[3,2];return e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,[4,(0,aM.c)(r,e)];case 1:if(!(o=a.sent()).data.id)throw Error("Command: expected id to be defined");if(!("contributions"in o.data))throw Error("Command: In ".concat(o.data.id,", contributions should be an array"));return 0===o.data.contributions.length&&e.logger.warn("Command: ".concat(o.data.id," has no contributions")),(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,4];case 2:return i=n,r=t,[4,(0,aM.c)(r,e)];case 3:o=a.sent(),a.label=4;case 4:return e.store.set(a9.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:(0,aI.eb)(i.commandId),contributions:i.contributions,create:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){return[2,o]})})()}}}),[2]}})})()},registerCreateCommand:function(n,t){return(0,n4._)(function(){var r,i;return(0,n5.YH)(this,function(o){if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in le.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(le.P))),i={id:(0,aI.eb)(n.commandId),contributions:n.contributions,create:function(n){var r=n.path;return(0,n4._)(function(){var n;return(0,n5.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:r}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(n=i.sent()))return[2,null];return[2,(0,aM.c)(n,e)]}})})()}},e.store.set(a9.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})})()}}}function lV(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var lK=t(1874);function lZ(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var lJ=t(92972),lQ=t(76903),lX=t(69071),l0=function(e,n){var t=e.extension,r=n.showMessage,i=n.hideMessage,o=n.hideAllMessages,a=function(e){return function(n){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,a=arguments.length>2?arguments[2]:void 0,c=Date.now();c-u>=6e4&&(u=c,l=0);var d=null!=(i=t.manifest.name.trim())?i:"Unknown Extension";l<10?(r({content:(0,s.FD)(s.FK,{children:[n,(0,s.Y)("div",{children:(0,s.Y)(aC.EY,{variant:"small",children:d})})]}),type:e,time:o>1e4?1e4:o,style:a}),l++):lX.vF.error("Extension reached showMessage throttle limit",{extensionId:t.extensionId,extensionName:t.manifest.name,content:n})}},l=0,u=Date.now();return{showConfirm:a("confirm"),showError:a("error"),showNotice:a("notice"),showWarning:a("warning"),hideMessage:i,hideAllMessages:o}},l1=t(67333),l2=t(73712);function l4(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,l=(0,p.useRef)(null),u=(0,ei.A)(),s=(0,ak.T)(),d=(0,o3.A)(),h=(0,p.useRef)(),g=(0,l1.p9)(),m=(0,aL.X_)(null==n?void 0:n.installationId),v=(0,l2.D)(),w=(0,p.useRef)(v),y=(0,p.useRef)([]);w.current=v;var b=(0,q.A)(function(){return{}},[]),x=(0,aW.A)(d.container),_=(0,c._)((0,p.useState)(!1),2),Y=_[0],S=_[1];(0,p.useEffect)(function(){x===aN.KN.CONNECTED&&S(!0)},[x]),(0,p.useEffect)(function(){y.current.forEach(function(e){return e(v.theme)})},[v.theme]),(0,p.useEffect)(function(){return function(){h.current&&h.current()}},[]);var A=(0,p.useCallback)(function(){try{var e=new URL(t);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[t]),I=(0,p.useCallback)(function(){l.current&&A()&&n&&m&&s&&(h.current&&h.current(),h.current=function(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=function(e){var n,t,r,i,o,a,l,u,c,s,d,p=e.filePath,h=e.replId,g=e.environmentAPIs,m=e.logger.createLogger({api:"debug"});return(0,r6._)((0,f._)({filePath:p},(n=e.services.fs,t=e.logger.createLogger({api:"fs"}),lz([lH(e,["read"])],(0,f._)({readFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return(0,n4._)(function(){var r,i;return(0,n5.YH)(this,function(o){switch(o.label){case 0:return r=(0,lK.Fd)(e),[4,n.readFile(r)];case 1:var a;if((i=o.sent()).error)return[2,{error:i.error,content:null}];return[2,{error:null,content:(a=i.content,"utf8"===t?a.toString():"binary"===t?a.toBuffer():a)}]}})})()},readDir:function(e){return(0,n4._)(function(){var t,r;return(0,n5.YH)(this,function(i){switch(i.label){case 0:return t=(0,lK.Fd)(e),[4,n.readDir(t)];case 1:if((r=i.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})()},watchFile:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,lK.Fd)(e);(0,ik.m6)(o)&&t.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=n.watchFile(o,{onChange:function(e){if("utf8"===i)return void r.onChange(e.toString("utf8"));r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return a3(function(){a()})},watchDir:function(e,t){var r=(0,lK.Fd)(e),i=n.watchDir(r,{onChange:function(n){t.onChange(n.map(function(n){return{path:(0,lK.me)(e)+n.filename,type:n.type}}))},onError:function(e){t.onError(e)},onMoveOrDelete:function(e){t.onMoveOrDelete(e)}});return a3(function(){i()})}},lz([lH(e,["write-exec"])],{createDir:function(e){return(0,n4._)(function(){var t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:return t=(0,lK.Fd)(e),[4,n.createDir(t)];case 1:return[2,lZ(r.sent())]}})})()},deleteDir:function(e){return(0,n4._)(function(){var t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:return t=(0,lK.Fd)(e),[4,n.deleteDir(t)];case 1:return[2,lZ(r.sent())]}})})()},writeFile:function(e,t){return(0,n4._)(function(){var r,i,o;return(0,n5.YH)(this,function(a){switch(a.label){case 0:if(r=(0,lK.Fd)(e),"string"!=typeof t)return[3,1];return i=t,[3,4];case 1:if(!(0,aj._)(t,Blob))return[3,3];return o=oQ.A.from,[4,t.arrayBuffer()];case 2:return i=o.apply(oQ.A,[a.sent()]),[3,4];case 3:i=oQ.A.from(t),a.label=4;case 4:return[4,n.writeFile(r,i)];case 5:return[2,lZ(a.sent())]}})})()},deleteFile:function(e){return(0,n4._)(function(){var t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:return t=(0,lK.Fd)(e),[4,n.deleteFile(t)];case 1:return[2,lZ(r.sent())]}})})()},copyFile:function(e,t){return(0,n4._)(function(){var r;return(0,n5.YH)(this,function(i){switch(i.label){case 0:return r=(0,lK.Fd)(e),[4,n.copyFile(r,t)];case 1:return[2,lZ(i.sent())]}})})()},move:function(e,t){return(0,n4._)(function(){var r,i,o;return(0,n5.YH)(this,function(a){switch(a.label){case 0:return r=(0,lK.Fd)(e),[4,n.stat(r)];case 1:if(!(i=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(i.type!==tV.pt.File)return[3,3];return[4,n.moveFile(r,t)];case 2:return o=a.sent(),[3,5];case 3:return[4,n.moveDir(r,t)];case 4:o=a.sent(),a.label=5;case 5:return[2,lZ(o)]}})})()},watchTextFile:function(e,r){(0,ik.m6)(e)||t.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i=n.watchTextFile(e,{onReady:function(e){var n=e.fetchChanges,t=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;r.onReady(a3({writeChange:l,fetchChanges:n,initialContent:t,version:a,transformSelection:i,updateSelections:o}))},onChange:function(e){var n=e.latestContent,t=e.changeSource,i=e.changes,o=e.version;return(0,n4._)(function(){return(0,n5.YH)(this,function(e){return r.onChange({latestContent:n.toString(),version:o,changeSource:t,changes:i.toJSON()}),[2]})})()},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return a3(function(){i()})}})))),function(e){var n=e.services.container,t=null;function r(){return(0,n4._)(function(){var e;return(0,n5.YH)(this,function(r){switch(r.label){case 0:if(t)return[2];return[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}})})()}return lz([lH(e,["repldb:read"])],(0,f._)({getReplDbValue:function(e){return(0,n4._)(function(){return(0,n5.YH)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,i.sent().output]}})})()},listReplDbKeys:function(e){return(0,n4._)(function(){var i;return(0,n5.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})()}},lz([lH(e,["repldb:write"])],{setReplDbValue:function(e,i){return(0,n4._)(function(){return(0,n5.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}})})()},deleteReplDbKey:function(e){return(0,n4._)(function(){var i;return(0,n5.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})()}})))}(e),{watchActiveFile:function(e){return a3(r.environmentAPIs.watchActiveFile(e))},openFile:(r=e).environmentAPIs.openFile,getActiveFile:function(){return r.environmentAPIs.getActiveFile()}},(i=e.getThemeContext,o=e.onThemeChange,{getCurrentTheme:function(){return i().theme},getCurrentThemeValues:function(){return i().theme.values.global},onThemeChange:function(e){var n=o(e);return a3(function(){n()})},onThemeChangeValues:function(e){var n=o(function(n){return e(n.values.global)});return a3(function(){n()})}}),l0(e,g.toasts),{currentUser:lG(lU),userById:lG(lO),userByUsername:lG(lP),currentRepl:function(e){return lG(lL)((0,f._)({id:h},e))},replById:lG(lL),replByUrl:lG(lM)},(a=e.services.container.client(),l=e.logger.createLogger({api:"exec"}),(0,f._)({},lz([lH(e,["write-exec"])],{exec:function(e){return(0,n4._)(function(){var n,t,r,i;return(0,n5.YH)(this,function(o){switch(o.label){case 0:return[4,e.args];case 1:return n=o.sent(),[4,e.env];case 2:if(t=o.sent(),l.info("exec: [".concat(n.join(", "),"]"),{environmentVariables:t}),!lN.J(lW,t))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return r=o.sent(),i=function(){},[2,a3({dispose:function(){i()},promise:new Promise(function(o){i=a.openChannel({service:"exec"},function(a){var u=a.channel;u.onCommand(function(n){r?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)}),u.request({exec:{args:n,env:t,splitStderr:!!r}}).then(function(n){if(n.ok)return void o({exitCode:0,error:null});if(n.channelClosed){var t="Channel closed before command's execution finished";e.onError(t),o({exitCode:null,error:t});return}if("open"===u.status&&i(),n.error){var r,a,l=Number(null==(a=n.error)||null==(r=a.match(/-?[0-9]+/g))?void 0:r[0]);o({exitCode:"number"==typeof l?l:null,error:n.error});return}throw Error("Unknown error")}).catch(function(n){l.error("exec: threw crosis error:\n".concat(String(n||"")));var t="exec() failed due to internal error. See console for details.";e.onError(t),o({error:t,exitCode:null})})})})})]}})})()}}))),(u=e.extension,c=e.paneId,s=e.environmentAPIs,d=!1,{activatePane:function(){c&&(s.activatePane(c),d||(d=!0,(0,oJ.u4)(oJ.AZ.EXTENSION_USED,{extensionId:u.extensionId,extensionName:u.manifest.name})))}})),{commands:{registerCommand:function(n,t){return(0,n4._)(function(){var r;return(0,n5.YH)(this,function(i){switch(i.label){case 0:if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),[4,(0,aM.c)(t,e)];case 1:return r=i.sent(),e.store.set(a9.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){return[2,r]})})()}}}),[2]}})})()},registerCreateCommand:function(n,t){return(0,n4._)(function(){var r,i;return(0,n5.YH)(this,function(o){if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in le.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(le.P))),i={id:n.commandId,contributions:n.contributions,create:function(n){var r=n.path;return(0,n4._)(function(){var n;return(0,n5.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:r}),new Promise(function(e){return setTimeout(function(){return e(ln)},50)})])];case 1:if(null===(n=i.sent()))return[2,null];if(n===ln)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,aM.c)(n,e)]}})})()}},e.store.set(a9.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})})()}},experimental:(0,r6._)((0,f._)({},lz([lV(e)],{hasExperimentalApi:function(){return!0}})),{editor:lz([lV(e)],(0,f._)({},{getPreferences:function(){return(0,n4._)(function(){var e,n,t,r;return(0,n5.YH)(this,function(i){switch(i.label){case 0:return[4,null===n3.V||void 0===n3.V?void 0:n3.V.query({query:lT})];case 1:if(null==(t=i.sent())||null==(n=t.data)||null==(e=n.currentUser)?void 0:e.workspacePreferences)return[2,(0,lB.o)(t.data.currentUser.workspacePreferences)];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})})()}})),commands:lz([lV(e)],(0,f._)({},lq(e))),auth:lz([lV(e)],(0,f._)({},{getAuthToken:function(){return(0,n4._)(function(){var n,t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===n3.V||void 0===n3.V?void 0:n3.V.query({query:l$,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(n=r.sent())?void 0:n.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(t=n.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==t.__typename||!t.token)throw Error("Failed to authenticate: something went wrong");return[2,t.token]}})})()}})),internal:lz([lV(e)],(0,f._)({},lq(e)))}),internal:function(e){var n,t,r;return e.store.get(e.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},container:(n=e.services.container,{getConnectionState:function(){return n.getConnectionState()},onConnectionStateChanged:function(e){var t=n.onConnectionStateChanged(e);return a3(function(){t()})}}),layout:{revealOrInsertTool:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e.logger.createLogger({api:"revealOrInsertTool"});if(!e.extension.manifest.tools)return void t.warn("No tools defined in extension manifest");if(e.extension.manifest.tools.length<n+1)return void t.warn("Tool index out of bounds");var r=e.extension.manifest.tools[n],i=r.name||e.extension.manifest.name,o=r.handler;e.environmentAPIs.revealOrInsertTool({extensionId:e.extension.extensionId,installationId:e.extension.installationId,baseUrl:e.extension.baseUrl,path:o,name:i})},getLayoutState:function(){return e.environmentAPIs.getLayoutState()},setLayoutState:function(n){return e.environmentAPIs.setLayoutState(n)}},secrets:(t=e.services.secrets,{setSecret:function(e){return(0,n4._)(function(e){var n,r;return(0,n5.YH)(this,function(i){switch(i.label){case 0:return n=e.key,r=e.value,[4,t.addEntries([{key:n,value:r}])];case 1:return i.sent(),[2,(0,lJ.Ok)(!0)]}})}).apply(this,arguments)},getSecret:function(e){return(0,n4._)(function(){var n;return(0,n5.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.read()];case 1:return[2,lJ.Ok.apply(void 0,[r.sent().get(e.key)])];case 2:return n=r.sent(),[2,(0,lJ._)(n)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,n4._)(function(){return(0,n5.YH)(this,function(n){return[2,(0,lQ.M)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(r=e.services.dotReplit).getConfig,update:r.updateDotReplit},ssh:{getSshConfig:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(n){return[2,e.environmentAPIs.getSshConfig()]})})()}},commands:lq(e)}:null}(e),debug:{info:function(e,n){return m.info(e,n)},warn:function(e,n){return m.warn(e,n)},error:function(e,n){return m.error(e,n)}},handshake:function(n){return(0,n4._)(function(){var t,r,i,o;return(0,n5.YH)(this,function(a){switch(a.label){case 0:return[4,null==n?void 0:n.clientName];case 1:return r=null!=(t=a.sent())?t:"(unset)",[4,null==n?void 0:n.clientVersion];case 2:return o=null!=(i=a.sent())?i:"(unset)",(0,oJ.u4)(oJ.AZ.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,n4._)(function(){var n,t,i;return(0,n5.YH)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw Error("No output from npm");if((i=JSON.parse(null==(n=t.output)?void 0:n.trim()))===o)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}})})(),[2,{success:!0}]}})})()}})}(e);if(!n.contentWindow)throw Error("No contentWindow");var i=a0(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),o=function(r){if(r.origin===t&&n.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}({extension:n,extensionIframe:l.current,services:d,paneId:i,replId:u,getThemeContext:function(){return w.current},onThemeChange:function(e){return y.current.push(e),function(){y.current.splice(y.current.indexOf(e),1)}},store:g,extensionStateAtom:m,environmentAPIs:o,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:s,ghostwriter:b}))},[s,w,d,A,i,g,m,o,u,a,n,t,r,b]);return{isValidExtensionPaneUrl:A,didConnectOnce:Y,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r6._)((0,f._)({title:r,src:t},az.A,e),{ref:(0,aH.P)([l,e.ref],{breadcrumb:"client/workspace/extensions/sandbox/useExtensionSandbox.tsx:191"}),onLoad:function(n){I(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:(0,p.useCallback)(function(){if(l.current){var e=l.current.src;l.current.src=e}},[])}}function l5(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,aL.X_)(n.installationId),i=l4({extension:n,sandboxUrl:(0,aG.sU)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),o=i.didConnectOnce,a=i.isValidExtensionPaneUrl,l=i.getIframeProps;return a()&&o&&r?(0,s.Y)("iframe",(0,f._)({},l({css:{width:"0px",height:"0px",border:"none"}}))):null}var l3=t(11082),l8=t(75538),l7=t(29576),l6=t(2142),l9=t(12785);function ue(){var e,n,t,r=(0,ei.A)(),i=(0,ak.T)(),o=(0,o3.A)().container,a=(0,aT.A)(o).url,l=(0,l3.oR)(),u=(0,aL.Sc)(),d=oO(),h=(0,l8.yb)(),g=(0,aL.hS)(),v=(0,l8.iD)();(0,l3.Ju)();var w=(0,aL.Ot)(),y=aO(),b=(0,c._)((0,p.useState)(!1),2),x=b[0],_=b[1];(0,p.useEffect)(function(){r&&i&&v({replId:r,userId:i})},[r,i,v]);var Y=(0,a9.xx)(),S=rf(nb);(0,p.useEffect)(function(){S(Y)},[Y,S]);var A=rf(rQ);n=(e=(0,f._)({},rq,void 0),m.I(rV,e)).data,t=rf(rZ),(0,p.useEffect)(function(){var e;(null==n||null==(e=n.currentUser)?void 0:e.filetypeAssociations)&&t(n.currentUser.filetypeAssociations)},[n,t]);var I=rd(rJ),k=rf(rJ),E=function(e){var n=e.filterUser;return function(e){var t=e.active;return(0,n4._)(function(){var e,o;return(0,n5.YH)(this,function(a){switch(a.label){case 0:if(!t)return[2,[]];return[4,null===n3.V||void 0===n3.V?void 0:n3.V.query({query:aA,variables:{replId:r,userId:n?i:void 0}})];case 1:if(!(e=a.sent())||e.error||!(o=e.data.extensionList))return[2,[]];return[2,o.map(function(e){var n;return{match:oX.G2,data:{type:"action",label:e.name,icon:(0,s.Y)(l9.A,{}),description:null!=(n=e.description)?n:"",run:function(){e.url&&(e.installation?g({installationId:(0,aI.qq)(e.installation.id)}):u({replId:r,extensionId:(0,aI.PM)(e.id)}))}}}})]}})})()}},C=(0,a9.Zp)(le.P.CommandBar);return ab({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:function(){return(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:return e=[{data:{}}],[4,Promise.all(C.map(function(n){return(0,n4._)(function(){var t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,aM.l)(t,{path:e})]}})})()}))];case 1:return[2,n.sent().filter(Boolean)]}})})()}},{enabled:!0}),ab({match:oX.G2,commands:function(e){return e.active||""!==e.searchQuery?[{match:oX.G2,data:{type:"action",label:"Extension Devtools",icon:(0,s.Y)(aa.A,{}),description:"Manage and deploy this Repl as an extension",run:function(){d({pane:{type:"extensionDevtools"}})}}},{match:oX.G2,data:{type:"action",label:"URL",icon:(0,s.Y)(aa.A,{}),description:"Add an extension by URL",run:function(){_(!0)}}},{match:oX.G2,data:{type:"action",label:"From this Repl",icon:(0,s.Y)(aa.A,{}),description:"Load this Repl as an extension",run:function(){a&&h(a)}}},{match:oX.G2,data:{type:"context",label:"My Extensions",icon:(0,s.Y)(l9.A,{}),description:"Browse extensions you have created"},commands:E({filterUser:!0})},{match:oX.G2,data:{type:"action",label:"Docs",icon:(0,s.Y)(l6.A,{}),description:"Read the Extensions docs",run:function(){d({pane:{type:"docs",data:{url:n1.ik.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,s.Y)(l9.A,{}),description:"Manage extensions"}},{enabled:l}),(0,s.FD)(s.FK,{children:[(0,s.Y)(am.a,{isOpen:x,onRequestClose:function(){return _(!1)},children:(0,s.Y)(l7.A,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return _(!1)},onConfirm:function(e){h(e)}})}),(0,s.Y)(am.a,{isOpen:!!I,onRequestClose:function(){return k(null)},children:I?(0,s.Y)(aR,{fileExtension:I.fileExtension,extensionId:I.extensionId,fileHandlerId:I.fileHandlerId,onCancel:function(){return k(null)},onConfirm:function(){return(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:return e=I.fileExtension,[4,A({fileExtension:e,newAssociation:{extensionId:I.extensionId,fileHandlerId:I.fileHandlerId}})];case 1:return n.sent(),k(null),[2]}})})()}}):null}),w.map(function(e){return e.manifest.background?(0,s.Y)(l5,{environmentAPIs:y,extension:e},e.installationId):null})]})}var un=t(69029),ut=t(21550),ur=t(55247);function ui(){var e=(0,o3.A)().fs,n=(0,c._)((0,p.useState)(!1),2),t=n[0],r=n[1],i=(0,c._)((0,p.useState)(!1),2),o=i[0],a=i[1],l=(0,p.useId)();(0,p.useEffect)(function(){if(!o)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,o]);var u=(0,p.useCallback)(function(){r(!1)},[r]);return(0,s.Y)(am.a,{isOpen:t,onRequestClose:u,children:(0,s.Y)(of.S,{gap:24,children:(0,s.FD)(of.S,{gap:24,children:[(0,s.FD)(aC.Y9,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,s.Y)(ut.A,{color:rS.LU.accentNegativeDefault,size:20})]}),(0,s.FD)(aC.EY,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,s.Y)(ur.A,{})," icon on the left."]}),(0,s.Y)(aC.EY,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,s.FD)(of.S,{row:!0,gap:8,tag:"label",children:[(0,s.Y)(un.S,{id:l,checked:o,onChange:a}),(0,s.Y)(aC.EY,{variant:"small",children:"Do not show this message again for this session."})]}),(0,s.Y)(aE.$n,{onClick:u,text:"Close"})]})})})}var uo=t(29544),ua=t(21365),ul=t(78574),uu=t(46680);function uc(){var e=rf(t3),n=(0,ua.A)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,i=n.showMoreDetail,o=n.failedFiles,a=n.failedFilesOptions,l=n.selectedFile,u=n.setSelectedFile,c=n.reviewingPrompt,d=n.onChoice,p=n.local,f=n.remote,h=[op.wp.minHeight("7em"),op.wp.maxHeight("50vh"),op.wp.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,s.Y)(am.a,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,s.FD)(of.S,{gap:24,children:[(0,s.Y)(aC.Y9,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,s.FD)(aC.EY,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,s.FD)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),t?(0,s.Y)(uu.A,{}):(0,s.FD)(s.FK,{children:[a.length?(0,s.Y)(ul.l,{initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===l}),items:a,onChange:function(e){u(e.path)}}):null,i?(0,s.FD)(of.S,{css:[op.wp.backgroundColor.redDimmest,op.wp.font.code],pt:16,p:8,row:!0,gap:16,justify:"start",align:"center",children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,s.FD)(aC.EY,{multiline:!1,children:["Divergence type: ",null==c?void 0:c.case]})]}):null,(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.FD)(of.S,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,s.Y)(av.ui,{elevated:!0,grow:!0,shrink:!0,py:8,children:(0,s.Y)(of.S,{css:h,children:(0,s.Y)(uo.N,{diffViewer:p})})}),(0,s.FD)(of.S,{pt:16,children:[(0,s.Y)(aC.EY,{css:[op.wp.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,s.Y)(aE.$n,{onClick:function(){d("local")},text:"Reset to Mine"})]})]}),(0,s.FD)(of.S,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,s.Y)(av.ui,{elevated:!0,grow:!0,shrink:!0,py:8,children:(0,s.Y)(of.S,{css:h,children:(0,s.Y)(uo.N,{diffViewer:f})})}),(0,s.FD)(of.S,{pt:16,justify:"end",children:[(0,s.Y)(aC.EY,{css:[op.wp.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,s.Y)(aE.$n,{onClick:function(){d("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var us=t(62760),ud=t(46855),up=t(33052),uf=t(46138),uh=t(36448),ug=t(84194),um=t(42793),uv=t(90233),uw=t(86868),uy=t(89204);function ub(e){return(0,s.Y)(oh.Ay,(0,r6._)((0,f._)({},e),{children:(0,s.Y)("path",{d:"M2.47 5.53a.75.75 0 0 1 1.06-1.06l16 16a.75.75 0 1 1-1.06 1.06l-16-16ZM1.291 11.215a7.593 7.593 0 0 1 1.42-3.675l1.077 1.077a6.024 6.024 0 0 0-.376 6.128 6.352 6.352 0 0 0 2.402 2.554 6.73 6.73 0 0 0 3.462.951h4.146l1.5 1.5H9.277a8.23 8.23 0 0 1-4.234-1.164 7.852 7.852 0 0 1-2.967-3.16 7.524 7.524 0 0 1-.785-4.211ZM5.828 5l1.15 1.15.02-.008a6.787 6.787 0 0 1 3.593-.263 6.62 6.62 0 0 1 3.185 1.603 6.2 6.2 0 0 1 1.81 2.962.75.75 0 0 0 .725.556h1.145c1.015 0 1.983.389 2.693 1.072a3.544 3.544 0 0 1 1.101 2.553c0 .952-.393 1.871-1.101 2.553a3.817 3.817 0 0 1-1.317.825l1.134 1.134a5.286 5.286 0 0 0 1.223-.878 5.044 5.044 0 0 0 1.561-3.634 5.044 5.044 0 0 0-1.56-3.634A5.385 5.385 0 0 0 17.455 9.5h-.593a7.725 7.725 0 0 0-2.074-3.124 8.118 8.118 0 0 0-3.907-1.968A8.287 8.287 0 0 0 5.828 5Z"})}))}var ux=(0,um.i7)("0%,100%{opacity:1;}50%{opacity:0.25;}"),u_=(0,rA.x)({root:[op.wp.height(20),op.wp.width(20),op.wp.center]}),uY=(0,rA.x)({root:[u_.root],pulseRoot:[u_.root,{animation:"".concat(ux," 2s infinite")}]});function uS(){var e=(0,ug.A)(),n=e.isSaving;return e.isOffline?(0,s.Y)(uv.m_,{tooltip:"Reconnecting, changes will be synced when youâ€™re online",placement:"right",children:(0,s.Y)(of.S,{css:uY.root,children:(0,s.Y)(ub,{size:16,color:rS.LU.redDefault})})}):n?(0,s.Y)(uv.m_,{tooltip:"Saving",placement:"right",children:(0,s.Y)(of.S,{css:uY.pulseRoot,children:(0,s.Y)(uw.A,{size:16,color:rS.LU.foregroundDimmest})})}):(0,s.Y)(uv.m_,{tooltip:"Saved",placement:"right",children:(0,s.Y)(of.S,{css:uY.root,children:(0,s.Y)(uy.A,{size:16,color:rS.LU.foregroundDimmest})})})}var uA=t(24739),uI=t(55126),uk=t(2152),uE=t(48373),uC=t(59547),uD=t(80667),uR=t.n(uD),uF=(0,rS.CK)("ResizeHandle.module.css",["--width","--grip-height","--grip-opacity","--grip-color"]);function uU(){var e,n=oB(),t=(0,ro.p)(),r=o$(),i=(0,uE.A)(r.agentFiletreeOrder),o=(0,p.useRef)(null);(0,r_.d)(o,n.resizeHandleView,function(e){var n;return n={},(0,nX._)(n,uF.gripOpacity,e.isOpen?"1":"0"),(0,nX._)(n,uF.gripColor,rS.LU.outlineDimmest),(0,nX._)(n,uF.width,e.width+"px"),(0,nX._)(n,uF.gripHeight,"24px"),n});var a=(0,p.useRef)(null);return(0,s.Y)(of.S,{clsx:[uR().root,(e={},(0,nX._)(e,uR().left,"agent-filetree"===i&&t),(0,nX._)(e,uR().right,"filetree-agent"===i||!t),e)],innerRef:o,onPointerDown:function(e){(0,uC.j)(e,{start:function(){(0,aj._)(document.activeElement,HTMLElement)&&(a.current=document.activeElement),n.resize.start()},move:function(e){var t=e.delta;n.resize.update(t.x)},end:function(){var e,t;n.resize.end(),null==(t=a.current)||null==(e=t.focus)||e.call(t),a.current=null}})},align:"center",justify:"center",children:t?null:(0,s.Y)(of.S,{clsx:uR().grip})})}var uP=t(65169),uO=t.n(uP),uT=(0,rS.CK)("Search.module.css",["--background-color","--input-height"]),uL={type:"context",icon:(0,s.Y)(o4.A,{}),label:"",description:"Search"};function uM(){var e,n=(0,o3.A)().fs,t=(0,tR.Sx)(),r=oM(),i=(0,an.J)(),o=(0,p.useMemo)(function(){var e=(0,o8.g)({openFile:r,fs:n,shouldHideFile:i,getRecentFiles:t});return e.data=uL,delete e.match,e},[r,n,i,t]),a=(0,ro.p)();return(0,s.Y)(of.S,{clsx:uO().root,style:(e={padding:a?0:void 0},(0,nX._)(e,uT.backgroundColor,a?rS.LU.surfaceBackground:uI.s),(0,nX._)(e,uT.inputHeight,"32px"),e),children:(0,s.Y)(aw.r,{fullWidth:!0,command:o,openOnInput:!0,compact:!0})})}var uG=t(26737),uN=t(60910),uz=t(20907),uH=t(36163),uW=t(50916),uB=t(80023),uj=t(31185),u$=t(81920),uq=t(47841),uV=t(9797),uK=t(79690),uZ=t(88976),uJ=t(13315),uQ=t(52389),uX=t(43193);function u0(e){var n=e.size,t=e.iconUrl,r=e.name;return(0,s.Y)(uV.A,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(r)})}var u1=/[*]{2}\/[*]\.([a-z0-9.]+)/,u2=t(71132),u4=t(62721),u5=t(11148),u3=t(44237);function u8(){var e,n,t,r,i,o,a,l,u,d,f,h,g,m,v,w,y=(0,ei.A)(),b=(0,c._)((0,p.useState)(null),2),x=b[0],_=b[1],Y=oM(),S=(0,u5.v)(),A=(0,an.J)(!0),I=(0,p.useCallback)(function(e){return!A(e.filename)},[A]),k=(0,o3.A)().fs,E=(0,uG.g)("multiselectModifierKey").preferences,C=rf(nI),D="cmdOrCtrlKey"===E.multiselectModifierKey?"cmdOrCtrlKey":"altKey",R=(0,tR.Sx)(),F=(0,p.useCallback)(function(e){return(0,u3.J9)(e,R)},[R]),U=(0,u2.EF)().onContextMenu,P=(e=(0,ei.A)(),n=(0,o3.A)().fs,t=oM(),r=rf(tP),i=rd(nb),o=(0,a9.Zp)(le.P.FiletreeContextMenu),a=rd(rZ),l=rf(rQ),u=(0,L._P)({controlName:"flag-folder-downloads"}),d=(0,L._P)({controlName:"flag-direct-file-downloads"}),f=rf(rJ),h=(0,p.useCallback)(function(e){var n=e.extensionId,t=e.fileExtension,r=e.fileHandlerId,i=a[t];i&&i.extensionId===n&&i.fileHandlerId===r||f(e)},[f,a]),g=(0,p.useCallback)(function(r,u){var p=r.path,f=[{data:{type:"group",key:"rename"},commands:function(){return[(0,uj.ep)(function(){return u.rename(p)})]}}];(0,ik.m6)(p)&&f.push({data:{type:"group",key:"saveFile"},commands:function(){return[(0,uj.tH)(function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,n.flush(new Set([p]),tV.sT.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()})]}}),f.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,r=e.openFile,i=[{type:tV.pt.File,path:n}],o=!0,a=!1,l=void 0;try{for(var u,d=t()[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=(0,c._)(u.value,2),f=p[0],h=p[1];h!==tV.pt.Directory&&f!==n&&i.push({path:f,type:h})}}catch(e){a=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(a)throw l}}var g=i.length,m=1===g?"Open":"Open ".concat(g," files");return[{label:m,icon:(0,s.Y)(uZ.A,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;r({path:l.path,newTab:!0})}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:m+" in split",icon:(0,s.Y)(ov,{}),run:function(){var e=(0,eI._)(i),n=e[0],t=e.slice(1);r({path:n.path,newPane:!0});var o=!0,a=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;r({path:s.path,newTab:!0})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:oX.G2,data:{type:"action",label:n,icon:t,run:r}}})}({path:p,getSelectedNodes:u.getSelectedNodes,openFile:t})}});var g=function(e){var n=function(e){var n=r[e],i=(0,uz.tL)(n.glob);if(!i||!i.exec(t))return"continue";var l=u1.exec(n.glob),u=n.icon?n.icon:n.extension.manifest.icon,c=n.name?n.name:n.extension.manifest.name,p=u?(0,aG.sU)(n.extension.baseUrl,u):null;d.push({match:oX.G2,data:{type:"action",icon:p?(0,s.Y)(u0,{size:16,name:c,iconUrl:p}):(0,s.Y)(uZ.A,{}),label:"Open with "+c,run:function(){l&&a({extensionId:n.extension.extensionId,fileHandlerId:e,fileExtension:l[1]}),o({path:t,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})},t=e.path,r=e.handlers,i=e.filetypeAssociations,o=e.openFile,a=e.requestAssociateFiletype,l=e.associateFiletype,u=(0,iE.QC)(t),c=u?i[u]:null,d=[];for(var p in r)n(p);return c&&u&&d.length&&d.push({match:oX.G2,data:{icon:(0,s.Y)(uX.A,{}),type:"action",label:"Use default opener",run:function(){l({fileExtension:u,newAssociation:null})}}}),d}({path:p,handlers:i,filetypeAssociations:a,requestAssociateFiletype:h,associateFiletype:l,openFile:t});return g.length&&f.push({data:{type:"group",key:"extensions"},commands:function(){return g}}),f.push({data:{type:"group",key:"copy"},commands:function(){return(0,uj.kx)(p)}}),f.push((0,uj.Z4)(function(){return(0,n4._)(function(){var t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:t=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,uW.A)(p,n)];case 2:return t=r.sent(),[3,4];case 3:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,u$.A)({replId:e,action:"duplicated",fileType:tV.pt.File}),u.rename(t),[2]}})})()})),f.push((0,uB.Gp)(p,n,d)),f.push({data:{type:"group",key:"deleteFile"},commands:function(){return[(0,uj.tE)(function(){return u.deleteNodes(r)})]}}),f.push({data:{type:"group",key:"extensions"},commands:function(){return(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:return e=[{data:{filePath:p,fileType:tV.pt.File}}],[4,Promise.all(o.map(function(n){return(0,n4._)(function(){var t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,aM.l)(t,{path:e})]}})})()}))];case 1:return[2,n.sent().filter(Boolean)]}})})()}}),f},[i,a,h,l,t,n,d,e,o]),m=(0,uq.xu)(),v=(0,uq.xi)(),w=(0,p.useCallback)(function(e,n){var t=e.path,i=t===uH.Dl,a=i?[]:[{data:{type:"group",key:"rename"},commands:function(){return[(0,uj.ep)(function(){return n.rename(e.path)})]}}];return a.push({data:{type:"group",key:"search"},commands:function(){var n;return[(n=e.path,{match:oX.G2,data:{type:"action",icon:(0,s.Y)(o4.A,{}),label:"Search this directory",run:function(){r({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(n,"/**")}},edge:"right"})}}})]}}),a.push.apply(a,(0,ek._)((0,uj.DN)(function(t){return n.create(t,e.path)}))),a.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:oX.G2,data:{type:"action",label:"Open shell here",icon:(0,s.Y)(uQ.A,{}),run:function(){r({pane:{type:"shell",data:{initialPwd:t}},edge:"left"})}}}]}}),i||a.push({data:{type:"group",key:"copy"},commands:function(){return(0,uj.kx)(t)}}),n.getExpandedDirs()&&a.push({match:oX.G2,data:{icon:(0,s.Y)(uK.A,{}),type:"action",label:"Collapse "+(i?"all":"child folders"),run:function(){var e=n.getExpandedDirs(t);e&&n.collapse((0,ek._)(e))}}}),!i&&u&&a.push({data:{type:"group",key:"downloadFolder"},commands:function(){return[(0,uB.QW)(t)]}}),i||a.push({data:{type:"group",key:"deleteFile"},commands:function(){return[(0,uj.tE)(function(){return n.deleteNodes(e)})]}}),i&&a.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:oX.G2,data:{type:"action",label:(v?"Hide":"Show")+" hidden files",icon:v?(0,s.Y)(uJ.A,{}):(0,s.Y)(uZ.A,{}),run:function(){m(!v)}}}]}}),a.push({data:{type:"group",key:"extensions"},commands:function(){return(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:return e=[{data:{dirPath:t,fileType:tV.pt.Directory}}],[4,Promise.all(o.map(function(n){return(0,n4._)(function(){var t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,aM.l)(t,{path:e})]}})})()}))];case 1:return[2,n.sent().filter(Boolean)]}})})()}}),a},[v,m,o,r,u]),(0,p.useCallback)(function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,s.Y)(o4.A,{})},commands:function(){return e.type===tV.pt.Directory?w(e,n):g(e,n)}}},[g,w])),O=(0,uq.Qd)(),T=(0,uf.u)({fs:k,filter:I,fontSize:13,onFileDoubleClick:function(e,n){C(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,i="click"===t&&"altKey"===D?(0,uN.T$)(r):r.altKey;Y({path:n,newTab:i}),S(n,{newTab:i})},onCreate:function(e){e.type===tV.pt.File&&Y({opener:{paneType:(0,ne.QY)({path:e.path})},path:e.path})},multiselectModifierKey:D,onConflicts:function(e){return _({type:"conflicts",data:e})},onDeleteNodes:function(e){return _({type:"deleteNode",data:e})},onContextMenu:function(e,n){return U(e,{command:P(n,T)})},autocomplete:F,localCacheKey:y+":sidebar",onFileRenameStart:O,onFileRenameEnd:function(){return O(null)}}),M=(0,u4._)();(0,p.useEffect)(function(){return T.setFileStatus(M)},[T,M]);var G=(0,tR.dm)();(0,p.useEffect)(function(){var e=function(e){return(0,n4._)(function(){return(0,n5.YH)(this,function(n){switch(n.label){case 0:if(null===e)return T.select(null),[2];return[4,T.select({path:e,type:tV.pt.File})];case 1:if(n.sent(),G.current!==e)return[2];return T.scrollToPath(e),[2]}})})()};return e(G.current),G.subscribe(e)},[G,T]);var N=oB(),z=(0,tR.Mg)(),H=(0,tR.JZ)();return(0,p.useEffect)(function(){var e=function(e){return(0,n4._)(function(){return(0,n5.YH)(this,function(n){switch(n.label){case 0:if(null===e)return[2];return N.isOpen.current||N.toggle(),[4,T.select({path:e,type:tV.pt.File})];case 1:return n.sent(),T.scrollToPath(e),H(null),[2]}})})()};return e(z.current),z.subscribe(e)},[z,H,T,N]),{filetree:T,activeModal:x,closeModal:function(){return _(null)}}}var u7=t(84014),u6=t(59260),u9=t(1698),ce=t(30799),cn=t.n(ce),ct={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,ag.FM)({cmdOrCtrl:!0,shift:!0,key:"b"})},cr=(0,rS.CK)("index.module.css",["--width","--height","--transform","--border-color","--background-color","--display","--z-index"]),ci=(0,p.memo)(function(){var e=(0,p.useRef)(null),n=oB().view;(0,r_.d)(e,n,function(e){var n,t=uI.s,r=e.isOpen?t:"transparent";return n={},(0,nX._)(n,cr.width,e.width+"px"),(0,nX._)(n,cr.height,e.height+"px"),(0,nX._)(n,cr.transform,"translate(".concat(e.x,"px, ").concat(e.y,"px)")),(0,nX._)(n,cr.display,e.isOpen?"flex":"none"),(0,nX._)(n,cr.borderColor,r),(0,nX._)(n,cr.backgroundColor,t),(0,nX._)(n,cr.zIndex,rY.W.filetreeDragLayer.toString()),n});var t=u8(),r=t.filetree,i=t.activeModal,o=t.closeModal;return(0,s.FD)(s.FK,{children:[(0,s.FD)(av.ui,{clsx:cn().root,innerRef:e,children:[(0,s.Y)(co,{filetree:r}),(0,s.FD)(of.S,{clsx:cn().content,grow:!0,shrink:!0,children:[(0,s.Y)(uM,{}),(0,s.Y)(of.S,{grow:!0,shrink:!0,dataCy:"sidebar-filetree-section",children:(0,s.Y)(uf.J,{store:r.store})}),(0,s.FD)(of.S,{clsx:cn().footerButtons,p:4,row:!0,gap:4,justify:"end",align:"center",children:[(0,s.Y)(aE.$n,{dataCy:"filetree-add-file",size:"small",variant:"outlined",iconLeft:(0,s.Y)(u6.A,{}),text:"File",onClick:function(){r.create(tV.pt.File)}}),(0,s.Y)(aE.$n,{size:"small",variant:"outlined",iconLeft:(0,s.Y)(u9.A,{}),text:"Folder",onClick:function(){r.create(tV.pt.Directory)}})]})]}),(0,s.Y)(uU,{})]}),(0,s.FD)(am.a,{isOpen:!!i,onRequestClose:o,children:[(null==i?void 0:i.type)==="conflicts"?(0,s.Y)(uh.A,{paths:i.data.conflicts.map(function(e){return e.path}),onCancel:o,onConfirm:function(){var e=i.data;"move"===e.type?r.move({nodes:e.nodes,to:e.to,overwrite:!0}):r.upload({files:e.files,parentPath:e.to,overwrite:!0}),o()}}):null,(null==i?void 0:i.type)==="deleteNode"?(0,s.Y)(u7.A,(0,r6._)((0,f._)({},(0,uA.D)(i.data.nodes)),{delete:function(){return i.data.confirm()},hideModal:o})):null]})]})});function co(e){var n=e.filetree,t=oB().toggle,r=(0,p.useCallback)(function(){return t(!1)},[t]);return(0,s.FD)(of.S,{clsx:cn().header,row:!0,gap:4,align:"center",pl:6,pr:4,children:[(0,s.FD)(of.S,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:[(0,s.Y)(aC.EY,{css:cn().title,children:"Files"}),(0,s.Y)(uS,{})]}),(0,s.Y)(of.S,{row:!0,gap:0,align:"center",children:(0,s.Y)(uk.U,{closeFiletree:r,filetree:n})})]})}var ca=t(69945),cl=t.n(ca),cu=t(33747),cc=t(52963),cs=t(26575),cd=t(19786),cp=t(72096),cf=t.n(cp);function ch(){var e=(0,h._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n"]);return ch=function(){return e},e}function cg(){var e=(0,h._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return cg=function(){return e},e}var cm=(0,g.J1)(ch()),cv=(0,g.J1)(cg(),cm),cw=t(83045),cy=t(3383),cb=t(12466),cx=t(88589),c_=t(24529),cY=(0,rA.x)({root:[op.wp.viewStyle,op.wp.rowWithGap(8),op.wp.align.center,op.wp.px(8),{textDecoration:"none"}],meta:{fontSize:10}});function cS(e){var n=e.repl,t=e.height,r=e.isActive,i=e.searchQuery,o=n.title,a=(0,p.useMemo)(function(){return i?cw.A.match(i,o):null},[i,o]);return(0,s.FD)(cf(),{href:n.url,passHref:!0,style:{height:t},css:cY.root,children:[(0,s.Y)(cb.Ay,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:2,children:[(0,s.Y)(cx.e,{text:n.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,s.FD)(aC.EY,{css:cY.meta,color:"dimmest",multiline:!1,children:[n.owner.username," â€¢ edited ",(0,cy.K)(n.timeUpdated)]})]})]})}var cA=t(52712),cI=t(53153),ck=t(13298),cE=t(45206),cC=t(94686),cD=["fontSize","wrapping","minimapDisplay","indentDetection","indentFormatPastes","indentIsSpaces","keyboardHandler","showFileTreeGitStatus","codeIntelligence","shellBellAudio","accessibleTerminal","webviewAutoOpenOnPortOpened","forwardPortsAutomatically","multiselectModifierKey","codeSuggestion","chatEngine","ghostwriterModelSelection"],cR=t(41608),cF=t(71234),cU=t(41572),cP=t(1453),cO=t(15392),cT=t(49402),cL=t(63591),cM=t(10795),cG={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,nX._)({},cM._9Z.DesktopApp,(0,ag.FM)({cmdOrCtrl:!0,shift:!0,key:"]"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,nX._)({},cM._9Z.DesktopApp,(0,ag.FM)({cmdOrCtrl:!0,shift:!0,key:"["}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,nX._)({},cM._9Z.DesktopApp,(0,ag.FM)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,nX._)({},cM._9Z.DesktopApp,(0,ag.FM)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,nX._)({},cM._9Z.DesktopApp,(0,ag.FM)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,ag.FM)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:o7.G},run:{id:"repl.run",name:"Run Repl",default:(0,ag.FM)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,ag.FM)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,ag.FM)({ctrl:!0,key:"`"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showReplitAi:{id:"repl.showGhostwriter",name:"Show Replit AI",description:"Opens or reveals Replit AI in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,nX._)({},cM._9Z.DesktopApp,(0,ag.FM)({cmdOrCtrl:!0,key:","}))},saveAllFiles:{id:"repl.saveAllFiles",name:"Save all files",description:"Forces all changes to be flushed to disk",default:void 0},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh the webview",default:(0,ag.FM)({alt:!0,key:"r"})},keepTab:{id:"tab.keep",name:"Keep tab",description:"Converts a preview tab to a persisted tab",default:void 0}},cN=t(79190),cz=t(33759),cH=t(93019),cW=t(17682),cB=t(29274),cj=t(64424),c$=t(6525),cq=t(63704),cV=t(90991),cK=t(26796),cZ=t(54139),cJ=t(51481),cQ=t(96617),cX=t(95780),c0=Object.values(cG);let c1=(0,p.memo)(function(e){var n,t,r,i,o,a,l,u,d,f,h,g,m,v,w,y,b,x,_,Y,S,A=e.isAdmin,I=e.isSubscribed,k=ah(),E=(0,tR.Sx)(),C=(0,o3.A)(),D=C.fs,R=C.container,F=(0,cW.Z)(),U=F.fork,P=F.isForking,O=(0,cL.lO)(),T=O.isOffline,M=O.isWorkflowsLoading,G=O.isRunning,N=(0,cL.qP)(),z=(0,an.J)(),H=oM(),W=rf(t7),j=rf(t6),$=rf(t2),V=rf((n=(0,tR.Ru)(),(0,q.A)(function(){return(0,eo.eU)(null,function(e,t){var r=n();if(r){t(t8,[r.pane]);var i=e(nn);i&&t(nr,i)}})},[n]))),Z=rf(iQ),J=rf(t9),Q=rf(nr),X=rd(nn),ee=rd((0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(nn);if(!n)return null;var t=eD(e(ng),n);return t?t.paneGroup.id:null})},[])),en=rf(i4),et=oG().toggleMaximizePane,er=rf(tk),ea=rf(tA),el=rf(iJ),eu=rf(tE),ec=(0,at.eq)(X),es=(0,K.pE)("replUrl","string"),ed=(0,ei.A)(),ep=(0,cs.A)(),ef=rh(nY),eh=oO(),eg=(0,aP.A)(),em=(0,cU.A)(),ev=(0,aT.A)(R).url,ew=(0,aF.A)().showNotice,ey=(0,cP.A)("vscode"),eb=ey.openEditor,ex=ey.onConfirmConfig,e_=ey.isConfigModalOpen,eY=ey.closeConfigModal,eS=(0,B.jt)(),eA=cl()(function(e){return(0,oJ.u4)(oJ.AZ.PROJECT_RAN,{replId:ed,placement:e})},500);(0,ad.SJ)(function(){return[cG.saveAllFiles.id,function(){D.flush(void 0,tV.sT.MANUAL_SAVE)}]},[D]),(0,ad.SJ)(function(){return[cG.newTab.id,function(){return W()}]},[W]),(0,ad.SJ)(function(){return[cG.nextTab.id,function(){return J("next")}]},[J]),(0,ad.SJ)(function(){return[cG.previousTab.id,function(){return J("previous")}]},[J]),(0,ad.SJ)(function(){return[cG.closeTab.id,function(){var e=j();return e||ef()>0}]},[j,ef]),(0,ad.SJ)(function(){return[cG.reopenClosedTab.id,function(){return V()}]},[V]),(0,ad.SJ)(function(){return[cG.moveTabUpGroup.id,function(){return $("above")}]},[$]),(0,ad.SJ)(function(){return[cG.moveTabRightGroup.id,function(){return $("rightOf")}]},[$]),(0,ad.SJ)(function(){return[cG.moveTabLeftGroup.id,function(){return $("leftOf")}]},[$]),(0,ad.SJ)(function(){return[cG.moveTabDownGroup.id,function(){return $("below")}]},[$]),(0,ad.SJ)(function(){return X?[cG.keepTab.id,function(){return Q(X)}]:void 0},[X,Q]),(0,ad.SJ)(function(){return X?[cG.insertPaneGroupUp.id,function(){return eu({paneId:X,placement:"above",autoFocus:!0})}]:void 0},[X]),(0,ad.SJ)(function(){return X?[cG.insertPaneGroupRight.id,function(){return eu({paneId:X,placement:"rightOf",autoFocus:!0})}]:void 0},[X]),(0,ad.SJ)(function(){return X?[cG.insertPaneGroupLeft.id,function(){return eu({paneId:X,placement:"leftOf",autoFocus:!0})}]:void 0},[X]),(0,ad.SJ)(function(){return X?[cG.insertPaneGroupDown.id,function(){return eu({paneId:X,placement:"below",autoFocus:!0})}]:void 0},[X]),(0,ad.SJ)(function(){return[ay.id,function(){return k()}]},[k]);var eI=(0,ad.Jn)(cG.findFile.id),eE=(0,ro.p)();(0,ad.SJ)(function(){return[cG.findFile.id,function(){return k(o8.g({openFile:H,fs:D,shouldHideFile:z,getRecentFiles:E,keyboardShortcut:eI}))}]},[k]);var eC=au({type:"files"});ab(o8.g({openFile:H,fs:D,shouldHideFile:z,getRecentFiles:E,getCurrentlyOpenFilePanesCommands:eC,keyboardShortcut:eI,lazyLoad:!!eE}));var eR=(0,ad.Jn)(cG.searchFileContents.id),eF=oO();(0,ad.SJ)(function(){return[cG.searchFileContents.id,function(){(0,oJ.u4)(oJ.AZ.SEARCH_PANE_USED,{action:"opened_via_shortcut"});var e,n=void 0;(null==ec?void 0:ec.type)==="codeEditor"&&(n=null==(e=ec.getCurrentSelectionText)?void 0:e.call(ec)),eF({pane:{type:"searchReplace",data:{initialQuery:n}}})}]},[ec,eF]),(0,ad.SJ)(function(){return X?[cG.toggleFloatPaneGroup.id,function(){return en(X)}]:void 0},[X]),(0,ad.SJ)(function(){return X?[cG.toggleMaximizePaneGroup.id,function(){return et(X)}]:void 0},[X]),(0,ad.SJ)(function(){return ee?[cG.removePaneGroup.id,function(){er({paneGroupId:ee}),el()}]:void 0},[ee]),(0,ad.SJ)(function(){return X?[cG.removeOthersInPaneGroup.id,function(){ea(X)}]:void 0},[X]),(0,ad.SJ)(function(){return[cG.moveFocusUp.id,function(){return Z("above")}]},[]),(0,ad.SJ)(function(){return[cG.moveFocusDown.id,function(){return Z("below")}]},[]),(0,ad.SJ)(function(){return[cG.moveFocusRight.id,function(){return Z("rightOf")}]},[]),(0,ad.SJ)(function(){return[cG.moveFocusLeft.id,function(){return Z("leftOf")}]},[]),ab(o5(eh)),ab(o2(eh),{enabled:!eS&&!eE}),ab(o7.Y({container:R,activeOnly:!0,keyboardShortcut:eR,openFile:H})),(0,ad.SJ)(function(){if(!T&&!M)return[cG.run.id,function(){N(cR.QG.KEYBOARD_SHORTCUT),eA("shortcut_cmd_enter")}]},[N]);var eU=(0,ad.Jn)(cG.run.id);ab({match:oX.KK,data:{type:"action",icon:(0,s.Y)(cq.A,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){cc.M.openNewWindow()}}},{enabled:ep}),ab({match:oX.KK,data:{type:"action",icon:(0,s.Y)(cV.A,{}),label:"Run",description:"Run Repl",run:function(){N(cR.QG.KEYBOARD_SHORTCUT)},keyboardShortcut:eU}},{enabled:!G}),ab({match:oX.KK,data:{type:"action",icon:(0,s.Y)(cQ.A,{}),label:"Stop",description:"Stop Repl",run:function(){N(cR.QG.KEYBOARD_SHORTCUT)}}},{enabled:G}),ab({match:oX.KK,data:{type:"action",icon:(0,s.Y)(cK.A,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){R.exec("kill","1")}}},{enabled:A}),ab({match:oX.KK,data:{type:"action",icon:(0,s.Y)(cj.A,{}),label:"Open development URL",run:function(){if(!ev)throw Error("Expected dotdevUrl");window.open(ev,"_blank","noopener")}}}),ab({match:oX.KK,data:{type:"action",icon:(0,s.Y)(c$.A,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!es)throw Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(es);window.open(e,"_blank")}}},{enabled:!ep}),ab({match:oX.KK,data:{type:"action",icon:(0,s.Y)(cX.A,{}),label:"Open in VS Code",description:"Connect to this Repl in VS Code via SSH",run:function(){(0,oJ.u4)(oJ.AZ.OPEN_IN_VSCODE_CLICKED,{source:"command_bar",editor:"vscode"}),eb()}}},{enabled:!!eg&&I}),ab({match:oX.KK,data:{type:"action",icon:(0,s.Y)(cB.A,{}),label:"Copy SSH Command",description:"Copy a shell command to connect to this Repl via SSH",run:function(){if(!eg)throw Error("Expected sshConfig");var e=eg.sshPort,n=eg.sshUser,t=eg.sshHostname,r="ssh -i ".concat(em,"/.ssh/replit -p ").concat(e," ").concat(n,"@").concat(t);(0,oJ.u4)(oJ.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"command_bar"}),(0,cd.default)(r),ew("Copied SSH command")}}},{enabled:!!eg&&I}),ab((r=(t={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,i=t.onRun,o=(0,oo.A)(i),(0,q.A)(function(){return{match:(0,oX.u4)({defaultScore:o0.q.myRepls}),data:{type:"context",label:"My Apps",icon:(0,s.Y)(c_.A,{}),description:r},commands:function(e){return(0,n4._)(function(e){var n;return(0,n5.YH)(this,function(t){switch(t.label){case 0:var r;if(n=e.searchQuery,!e.active)return[2,[]];return[4,(r={query:n,count:50},(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:if(!n3.V)throw Error("Expected apolloClient");return[4,n3.V.query({query:cv,variables:r})];case 1:return[2,(null==(e=n.sent().data.currentUser)?void 0:e.search.repls.filter(function(e){return!!e.owner}))||[]]}})})())];case 1:return[2,t.sent().map(function(e){var t,r,i,a;return r=(t={repl:e,searchQuery:n,run:function(){return o.current(e)}}).repl,i=t.searchQuery,a=t.run,{match:function(){return{score:1,render:{height:44,content:(0,s.Y)(cS,{repl:r,height:44,searchQuery:i})}}},data:{type:"action",label:r.title,icon:(0,s.Y)(cb.Ay,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return a(r)}}}})]}})}).apply(this,arguments)}}},[r,o]))),ab({match:(0,oX.u4)({defaultScore:o0.q.fork}),data:{type:"action",label:"Remix",icon:(0,s.Y)(cZ.A,{}),description:"Remix App",run:function(){P||U()}}}),l=(a=uG.g.apply(void 0,(0,ek._)(cD))).preferences,u=a.update,d=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,oJ.u4)(oJ.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t,isCommandBar:!0})}),u(e)},h=(f=(0,l2.D)()).setActiveTheme,g=f.theme,ab({match:(0,oX.u4)({defaultScore:o0.q.settings,matchScoreMultiplier:o0.B.settings}),data:{type:"context",label:"Settings",description:"Change Replit Settings",icon:(0,s.Y)(cC.A,{})},commands:function(e){var n=e.active,t=e.searchQuery;if(!n&&!t)return[];var r={match:(0,oX.u4)({defaultScore:o0.q.settings,matchScoreMultiplier:o0.B.settings}),data:{type:"context",label:"Theme",icon:(0,s.Y)(cE.A,{}),description:"Change Replit Theme"},commands:function(){return cI.U.map(function(e){return{match:(0,oX.u4)({defaultScore:o0.q.settings,matchScoreMultiplier:o0.B.settings}),data:{type:"action",label:e.title,icon:g.id===e.id?(0,s.Y)(ck.A,{}):(0,s.Y)(cC.A,{opacity:0}),description:"Use "+e.title+" theme "+(g.id===e.id?" (current)":""),run:function(){h(e.id)}}}})}},i=Object.values(cA.KY).filter(function(e){return -1!==cD.indexOf(e.editorPreferencesKey)}).map(function(e){return{match:(0,oX.u4)({defaultScore:o0.q.settings,matchScoreMultiplier:o0.B.settings}),data:{type:"context",label:e.name,icon:(0,s.Y)(cC.A,{}),description:e.description},commands:function(){return e.options.map(function(n){var t=l[e.editorPreferencesKey],r=!!e.editorPreferencesKey&&n.editorPreferencesValue===t;return{match:(0,oX.u4)({defaultScore:o0.q.settings,matchScoreMultiplier:o0.B.settings}),data:{type:"action",label:n.title,icon:r?(0,s.Y)(ck.A,{}):(0,s.Y)(cC.A,{opacity:0}),description:n.description,run:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(t){switch(t.label){case 0:if(!e.editorPreferencesKey)throw Error("editorPreferencesKey is not defined");return[4,d((0,nX._)({},e.editorPreferencesKey,n.editorPreferencesValue))];case 1:return t.sent(),[2]}})})()}}}})}}});return(0,ek._)(i).concat([r])}},{enabled:!0}),ab((m=(0,p.useCallback)(function(e){eF({pane:{type:"developer",data:{tab:e}}})},[eF]),(0,p.useMemo)(function(){var e=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return Object.entries(n).forEach(function(n){var i,o=(0,c._)(n,2),a=o[0],l=o[1],u=(0,ek._)(t).concat([a]);if(l.children){var d,p=e(l.children,u);r.push({match:oX.G2,data:{type:"context",label:l.label,icon:null!=(d=l.icon)?d:(0,s.Y)(s.FK,{})},commands:function(){return p}})}else l.component&&r.push({match:oX.G2,data:{type:"action",label:l.label,icon:null!=(i=l.icon)?i:(0,s.Y)(s.FK,{}),run:function(){return m(u)}}})}),r},n=e(cO.N);return{data:{type:"context",label:"Developer",icon:(0,s.Y)(cT.A,{})},commands:function(e){return e.active||""!==e.searchQuery?n:[]}}},[m])),{enabled:(0,L._P)({controlName:"flag-dev-pane-chronograph"})});var eP=(0,B.Wq)();return ab({match:oX.KK,data:{type:"action",label:"[Admin] Enable ".concat(cu.g$),icon:(0,s.Y)(cJ.A,{}),run:function(){eP()}}},{enabled:A&&!eS}),ab((v=(0,ro.p)(),w=(0,ro.$)(),y=o$(),b=rf(oi),x=(0,uE.A)(y.agentFiletreeOrder),_=y.setAgentFiletreeOrder,Y=(0,cN.Jk)(),S=(0,cN.t2)(),(0,p.useMemo)(function(){var e=[];return v&&e.push({match:oX.G2,data:{type:"action",label:"filetree-agent"===x?"Move Agent to left":"Move Agent to right",icon:"filetree-agent"===x?(0,s.Y)(cz.A,{}):(0,s.Y)(ck.A,{}),run:function(){_("filetree-agent"===x?"agent-filetree":"filetree-agent")}}}),e.push({match:oX.G2,data:{type:"action",label:(v?"Disable":"Enable")+" simplified layout",icon:v?(0,s.Y)(uJ.A,{}):(0,s.Y)(s.FK,{children:"\uD83D\uDC86"}),run:function(){b(!v),w(!v)}}}),e.push({match:oX.G2,data:{type:"action",label:"Internal only: "+(Y?"Hide":"Show")+" connector setup",icon:Y?(0,s.Y)(uJ.A,{}):(0,s.Y)(s.FK,{children:"âš™ï¸"}),run:function(){S(!Y)}}}),{match:oX.G2,data:{icon:(0,s.Y)(cH.A,{}),label:"Layout",type:"context",description:"[Admin] Manage layout settings"},commands:function(){return e}}},[v,Y,x,_,b,w,S])),{enabled:A}),(0,s.Y)(s.FK,{children:(0,s.Y)(am.a,{isOpen:e_,onRequestClose:eY,centered:!0,children:(0,s.Y)(cF.A,{onConfirm:ex})})})});var c2=t(73321),c4=t(18558),c5=t(41833),c3=t(14420),c8=t(71687),c7=(0,um.i7)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),c6=(0,rA.x)({root:[op.wp.color.foregroundDimmest,op.wp.position.relative,op.wp.width("100%"),op.wp.height("100%"),{overflow:"hidden"}],arrows:[op.wp.position.absolute,op.wp.top(0),op.wp.left(0),op.wp.flex.row,op.wp.flex.wrap,op.wp.width("200%"),op.wp.height("200%"),{animationName:c7,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[op.wp.width("50%"),op.wp.height("50%"),op.wp.center]});function c9(e){var n=e.delay,t=e.duration;return(0,s.Y)(of.S,{css:c6.root,children:(0,s.FD)(of.S,{css:c6.arrows,style:{animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,s.Y)(of.S,{css:c6.arrow,children:(0,s.Y)(c3.A,{size:12})}),(0,s.Y)(of.S,{css:c6.arrow,children:(0,s.Y)(cz.A,{size:12})}),(0,s.Y)(of.S,{css:c6.arrow,children:(0,s.Y)(ck.A,{size:12})}),(0,s.Y)(of.S,{css:c6.arrow,children:(0,s.Y)(c8.A,{size:12})})]})})}var se=t(17459),sn=t(70399),st=(0,rA.x)({root:[op.wp.position.relative],circle:[op.wp.top(-6),op.wp.right(-6),op.wp.minWidth(12),op.wp.borderRadius(8),op.wp.position.absolute,op.wp.backgroundColor.backgroundHighest,op.wp.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:rS.LU.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function sr(e){var n=e.count,t=(0,se._)(e,["count"]);return(0,s.FD)(of.S,{css:st.root,children:[(0,s.Y)(sn.A,(0,f._)({},t)),(0,s.Y)(of.S,{css:[st.circle,st.count],children:n})]})}function si(){return(0,s.FD)(of.S,{css:st.root,children:[(0,s.Y)(sn.A,{}),(0,s.Y)(of.S,{css:st.circle,children:(0,s.Y)(ck.A,{size:6})})]})}function so(e){var n,t=e.paneId,r=e.paneGroupId,i=(0,ne.Vv)(),o=oR(t),a=rf(tS),l=rf(tI),u=rf(tA),c=rd((0,q.A)(function(){return(0,eo.eU)(function(e){var n=eD(e(ng),t);return n?n.paneGroup.panes.findIndex(function(e){return e===t}):null})},[t])),d=rd((n=({paneGroupId:({paneGroupId:r}).paneGroupId}).paneGroupId,(0,q.A)(function(){return(0,eo.eU)(function(e){var t=eF(e(ng),n);return t?t.panes.length:null})},[n])));return(0,q.A)(function(){var e=i.getTitle(o),n=[{match:oX.G2,data:{type:"action",label:"Close "+e,icon:(0,s.Y)(sn.A,{}),run:function(){a(t)}}}];return d&&d>1&&(null!==c&&c<d-1&&n.push({match:oX.G2,data:{type:"action",label:"Close to the right",icon:(0,s.Y)(si,{}),run:function(){l(t)}}}),n.push({match:oX.G2,data:{type:"action",label:"Close all other tabs",icon:(0,s.Y)(sr,{count:d-1}),run:function(){u(t)}}})),n},[i,o,d,c,a,t,l,u])}function sa(){var e=oF(),n=rf(nr);return(0,p.useCallback)(function(t){var r=e(t),i=r.isCommitted,o=r.pane;return!i&&(0,ne.xS)(o)?{match:oX.G2,data:{type:"action",label:"Keep open",icon:(0,s.Y)(ur.A,{}),run:function(){return n(t)}}}:null},[e,n])}var sl=t(3552),su=new Map([["left",{label:"Move Left",icon:(0,s.Y)(cz.A,{})}],["right",{label:"Move Right",icon:(0,s.Y)(ck.A,{})}],["up",{label:"Move Up",icon:(0,s.Y)(c8.A,{})}],["down",{label:"Move Down",icon:(0,s.Y)(c3.A,{})}]]),sc=new Map([["leftOf",{label:"Move Left",icon:(0,s.Y)(cz.A,{})}],["rightOf",{label:"Move Right",icon:(0,s.Y)(ck.A,{})}],["above",{label:"Move Up",icon:(0,s.Y)(c8.A,{})}],["below",{label:"Move Down",icon:(0,s.Y)(c3.A,{})}]]),ss=t(51940);function sd(e){return(0,s.Y)(oh.Ay,(0,r6._)((0,f._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM7 3.75A3.25 3.25 0 0 0 3.75 7v10A3.25 3.25 0 0 0 7 20.25h4.25V3.75H7Zm5.75 0v16.5H17A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-4.25Z",clipRule:"evenodd"})}))}var sp=new Map([["leftOf",{commandId:cG.insertPaneGroupUp.id,label:"Insert Left",icon:(0,s.Y)(ov,{})}],["rightOf",{commandId:cG.insertPaneGroupRight.id,label:"Insert Right",icon:(0,s.Y)(ow,{})}],["above",{commandId:cG.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,s.Y)(oy,{})}],["below",{commandId:cG.insertPaneGroupDown.id,label:"Insert Down",icon:(0,s.Y)(om,{})}]]),sf=t(93403),sh=t(17761);function sg(e){return(0,s.Y)(oh.Ay,(0,r6._)((0,f._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M20.483 14.37v2.871a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276a4.259 4.259 0 0 1 4.259-4.259h2.87A3.059 3.059 0 0 1 13.007 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437c0 1.324-.84 2.45-2.017 2.876ZM9.948 5.362h-2.69a2.914 2.914 0 0 0-2.913 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914v-2.69h-6.132a3.057 3.057 0 0 1-3.058-3.057V5.362ZM17 4.75a.75.75 0 0 0-1.5 0V7.5h-2.75a.75.75 0 0 0 0 1.5h2.75v2.75a.75.75 0 0 0 1.5 0V9h2.75a.75.75 0 0 0 0-1.5H17V4.75Z",clipRule:"evenodd"})}))}function sm(e){var n,t,r,i,o,a,l,u,d,p,h,g,m,v,w,y,b,x,_,Y,S,A,I,k,E,C,D,R,F,U,P,O,T,L,M,G,N=e.paneGroupId,z=e.paneId,H=function(e){var n,t,r=e.paneId,i=oH(e.paneGroupId),o=(0,uE.A)(i.isMaximized),a=(0,uE.A)(i.isFloating),l=!o&&!a,u=(n=(0,ss.RI)(),t=rf(tE),(0,q.A)(function(){return(0,ek._)(sp.entries()).map(function(e){var i,o,a=(0,c._)(e,2),l=a[0],u=a[1],s=u.commandId,d=u.label,p=u.icon;return{match:oX.G2,data:{label:d,icon:p,type:"action",keyboardShortcut:null!=(o=null==(i=n.get(s))?void 0:i.shortcut)?o:void 0,run:function(){t({placement:l,paneId:r,autoFocus:!0}),(0,oJ.u4)(oJ.AZ.WS_SPLIT_USED,{action:"opened",placement:l})}}}})},[n,t,r]));return(0,q.A)(function(){return l?[{match:oX.G2,data:{type:"context",label:"Add pane",icon:(0,s.Y)(sd,{})},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?u:[]}}]:[]},[l,u])}({paneId:z,paneGroupId:N}),W=(n=oz(z),t=rd(tc),r=(0,uE.A)(n.isFloating),i=!t&&!r,o=rf(t2),(0,q.A)(function(){var e=(0,ek._)(sc.entries()).map(function(e){var n=(0,c._)(e,2),t=n[0],r=n[1],i=r.label,a=r.icon;return{match:oX.G2,data:{label:i,icon:a,type:"action",run:function(){o(t)}}}});return i?[{match:oX.G2,data:{type:"context",label:"Move tab",icon:(0,s.Y)(cH.A,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[i,o])),B=(a=oH(N),l=(0,uE.A)(a.isMaximized),u=(0,uE.A)(a.isFloating),d=!l&&!u,p=rf(iX),(0,q.A)(function(){var e=(0,ek._)(su.entries()).map(function(e){var n=(0,c._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:oX.G2,data:{label:i,icon:o,type:"action",run:function(){p({direction:t})}}}});return d?[{match:oX.G2,data:{type:"context",label:"Move group",icon:(0,s.Y)(sl.A,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[d,p])),j=(g=(h=oG()).maximizePaneGroup,m=h.restoreMaximizedPaneGroup,v=oH(N),w=(0,uE.A)(v.isMaximized),y=rd(n9),b=(0,ad.Jn)(cG.toggleMaximizePaneGroup.id),(0,q.A)(function(){return w?y?[]:[{match:oX.G2,data:{type:"action",label:"Restore",icon:(0,s.Y)(sh.A,{}),run:function(){return m()},keyboardShortcut:b}}]:[{match:oX.G2,data:{type:"action",label:"Maximize",icon:(0,s.Y)(sf.A,{}),run:function(){return g({paneGroupId:N})},keyboardShortcut:b}}]},[w,b,y,m,g,N])),$=(x=rf(tk),_=rf(iJ),Y=rd(n9),S=(0,ad.Jn)(cG.removePaneGroup.id),(0,q.A)(function(){return Y?[]:[{match:oX.G2,data:{type:"action",label:"Close",icon:(0,s.Y)(sn.A,{}),run:function(){_(),x({paneGroupId:N})},keyboardShortcut:S}}]},[_,x,Y,S,N])),V=(I=(A={paneId:z,paneGroupId:N}).paneId,k=A.paneGroupId,E=rf(i4),C=oH(k),D=(0,uE.A)(C.isMaximized),R=(0,uE.A)(C.isFloating),F=(0,ad.Jn)(cG.toggleFloatPaneGroup.id),(0,q.A)(function(){return D?[]:[{match:oX.G2,data:{type:"action",label:R?"Unfloat":"Float",icon:R?(0,s.Y)(og,{}):(0,s.Y)(cq.A,{}),keyboardShortcut:F,run:function(){E(I)}}}]},[I,E,F,R,D])),K=(P=oH((U={paneId:z,paneGroupId:N}).paneGroupId),O=oz(U.paneId),T=oN(U.paneGroupId),L=rh(n_),M=rf(n6),G=(0,uE.A)(P.isMaximized),(0,q.A)(function(){return G?[]:[{match:oX.G2,data:{type:"action",label:"New window",icon:(0,s.Y)(sg,{}),run:function(){var e=(0,n0.A)(),n=L().filter(function(e){var n=(0,c._)(e,1)[0];return T.panes.current.includes(n)});M({popupId:e,state:{type:"saved",layout:{floating:[],tiling:{id:(0,n0.A)(),type:"paneGroup",percent:100,activeIndex:T.activeIndex.current,panes:T.panes.current}},data:n.reduce(function(e,n){var t=(0,c._)(n,2),r=t[0],i=t[1];return(0,r6._)((0,f._)({},e),(0,nX._)({},r,i))},{})}}),window.open("".concat(window.location.origin+window.location.pathname,"?popupId=").concat(e),"_blank","popup=1,height=".concat(O.size.current.height,"px,width=").concat(O.size.current.width,"px")),(0,oJ.u4)(oJ.AZ.WS_POPOUT_OPENED,{ai:n.some(function(e){var n=(0,c._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type}),console:n.some(function(e){var n=(0,c._)(e,2);return"runnerOutput"===(n[0],n[1]).type}),editor:n.some(function(e){var n=(0,c._)(e,2);return"codeEditor"===(n[0],n[1]).type}),shell:n.some(function(e){var n=(0,c._)(e,2);return"shell"===(n[0],n[1]).type}),paneData:n})}}}]},[G,T.activeIndex,T.panes,L,M,O.size]));return(0,q.A)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,ek._)(H).concat((0,ek._)(W),(0,ek._)(B),(0,ek._)(j),(0,ek._)(V),(0,ek._)(K),(0,ek._)($))}}]},[H,W,B,j,V,K,$])}var sv=t(11901),sw=t(49999),sy=t(71291),sb=t(30705);function sx(e){return(0,s.Y)(oh.Ay,(0,r6._)((0,f._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M16.47.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H7A3.25 3.25 0 0 0 3.75 9v2a.75.75 0 0 1-1.5 0V9A4.75 4.75 0 0 1 7 4.25h12.19l-2.72-2.72a.75.75 0 0 1 0-1.06ZM20.25 15v-2a.75.75 0 0 1 1.5 0v2A4.75 4.75 0 0 1 17 19.75H4.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-2.72 2.72H17A3.25 3.25 0 0 0 20.25 15Z",clipRule:"evenodd"})}))}function s_(e){var n,t,r,i,o,a,l,u,c=e.paneId,d=(n=(0,ne.Vv)(),t=(0,ar.N0)(),r=rf(re),(0,p.useCallback)(function(){return{data:{type:"context",label:ao.Ve,icon:(0,s.Y)(al.A,{})},commands:function(){return t().map(function(e){return{match:oX.G2,data:{type:"action",label:n.getTitle(e),icon:n.Icon({pane:e}),run:function(){(0,oJ.u4)(oJ.AZ.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:c,pane:e})}}}})}}},[t,n,r,c])),f=(i=(0,tR.Sx)(),o=(0,tR.L4)(),a=rf(re),(0,p.useCallback)(function(){var e=o(),n=i().filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recent",icon:(0,s.Y)(sb.A,{})},commands:function(e){var t=e.searchQuery;return(0,o8.h)({paths:n,searchQuery:t,run:function(e){a({paneId:c,pane:{type:(0,ne.QY)({path:e}),data:{path:e}}})}})}}},[i,a,c,o])),h=(l=(0,o3.A)().fs,u=rf(re),(0,q.A)(function(){return{match:oX.G2,data:{type:"context",label:"Files",icon:(0,s.Y)(ur.A,{})},commands:function(e){return(0,n4._)(function(e){var n,t,r;return(0,n5.YH)(this,function(i){switch(i.label){case 0:if(n=e.searchQuery,t=e.active,!n&&!t)return[2,[]];return[4,l.listFiles()];case 1:if((r=i.sent()).error)return[2,[]];if(!r.files)throw Error("Expected files");return[2,(0,o8.h)({paths:r.files,searchQuery:n,run:function(e){u({paneId:c,pane:{type:(0,ne.QY)({path:e}),data:{path:e}}})}})]}})}).apply(this,arguments)}}},[l,u,c]));return(0,q.A)(function(){return{match:oX.G2,data:{type:"context",label:"Change tab",icon:(0,s.Y)(sx,{})},commands:function(e){var n=e.searchQuery,t=e.active;return n||t?[f(),h,d()]:[]}}},[f,d,h])}function sY(e){var n,t,r,i,o,a,l=e.paneId,u=e.paneGroupId,c=(0,at.gB)(),d=oF(),f=s_({paneId:l}),h=so({paneId:l,paneGroupId:u}),g=(n=oF(),t=rf(nK),r=rf(nV),i=rh(nq),o=(0,p.useCallback)(function(e){var n,t,r;return n=i(),t=n.primaryTools,r=n.secondaryTools,t.some(function(n){return nZ(n)===nZ(e)})||(0,ne.xS)(e)||"commands"===e.type?"notAllowed":r.some(function(n){return nZ(n)===nZ(e)})?"remove":"add"},[i]),a=(0,ro.p)(),(0,p.useCallback)(function(){var e=n(l).pane,i=o(e);if(a)return null;switch(i){case"notAllowed":return null;case"add":return{match:oX.G2,data:{label:"Add to dock",type:"action",icon:(0,s.Y)(aa.A,{}),run:function(){t({pane:e})}}};case"remove":return{match:oX.G2,data:{label:"Remove from dock",type:"action",icon:(0,s.Y)(sy.A,{}),run:function(){r(e.type)}}};default:(0,sw.A)(i)}},[l,o,n,t,r,a])),m=sa(),v=(0,ne.Vv)();return(0,p.useCallback)(function(){var e=d(l).pane,n=c(l),t=function(e){return!!e&&(void 0===e?"undefined":(0,eE._)(e))==="object"&&"data"in e};return{data:{type:"context",label:"Search actions",icon:(0,s.Y)(v.Icon,{pane:e})},commands:function(){return[{data:{type:"group",key:"pane-actions"},commands:function(){var e,r;return(null!=(r=null==n||null==(e=n.commands)?void 0:e.flatMap(function(e){return e.commands}))?r:[]).filter(t)}},{data:{type:"group",key:"secondary"},commands:function(){return[g(),m(l),f].concat((0,ek._)(h)).filter(t)}}]}}},[c,v,d,l,f,h,g,m])}var sS=(0,um.AH)(op.wp.center,{fontSize:rS.LU.fontSizeSmall,border:"1px solid",borderColor:rS.LU.outlineDefault,width:20,height:20,marginTop:-2,marginLeft:-2},op.wp.borderRadius(8));function sA(e){return(0,s.Y)(of.S,{css:sS,children:(0,s.Y)(of.S,{css:{lineHeight:1},children:e.count})})}var sI=t(27608),sk=(0,eo.eU)([]);function sE(e,n){var t=n.run,r=n.enabled,i=void 0===r||r,o=(0,nJ.Xr)(sk);(0,p.useEffect)(function(){if(i){var n=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:t}});return o(function(e){return(0,ek._)(e).concat((0,ek._)(n))}),function(){o(function(e){return e.filter(function(e){return!n.includes(e)})})}}},[e,t,o,i])}function sC(){var e=(0,nJ.md)(sk);return(0,p.useEffect)(function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,u=o.value,c=u.shortcut,s=u.run;!!c.cmdOrCtrlKey==!!(0,uN.T$)(n)&&!!c.altKey==!!n.altKey&&!!c.shiftKey==!!n.shiftKey&&(null==(l=c.key)?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),s(c))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}var sD=t(44879),sR=(0,rA.x)({overlay:[op.wp.position.absolute,op.wp.overflow("hidden"),op.wp.zIndex(rY.W.overlay)],surface:[op.wp.position.relative,op.wp.borderRadius(8),op.wp.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:rS.LU.outlineDefault,opacity:0},op.wp.shadow(3)],innerSurface:[op.wp.borderRadius(8)]}),sF=(0,rA.x)({root:[{borderTop:"1px solid",borderColor:rS.LU.outlineDimmer}],row:[op.wp.rowWithGap(2),op.wp.align.center,op.wp.justify.spaceBetween]});function sU(){var e=(0,ag.Kg)();return(0,s.FD)(of.S,{css:sF.root,p:8,gap:8,children:[(0,s.FD)(of.S,{css:sF.row,children:[(0,s.Y)(aC.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,s.FD)(of.S,{row:!0,gap:4,children:[(0,s.Y)(ad._y,{keyCombo:"".concat(e),small:!0}),(0,s.Y)(sI.Js,{text:(0,s.Y)(c9,{duration:6e3,delay:6e3})})]})]}),(0,s.FD)(of.S,{css:sF.row,children:[(0,s.Y)(aC.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,s.FD)(of.S,{row:!0,gap:4,children:[(0,s.Y)(ad._y,{keyCombo:"".concat(e,"Shift-"),small:!0}),(0,s.Y)(sI.Js,{text:(0,s.Y)(c9,{duration:6e3,delay:1500})})]})]})]})}var sP=(0,p.memo)(function(){var e=function(){var e=rd(tc),n=rd(i$);if(n){var t={width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},r=t.width,i=t.height,o=t.transform,a={border:"1px solid",borderColor:rS.LU.accentPrimaryStronger,borderRadius:rS.LU.borderRadius6,boxShadow:rS.LU.shadow3,transitionProperty:"transform, height, width",transitionDuration:sD.Ds.duration,transitionTimingFunction:sD.Ds.timingFunction};return(0,f._)({width:r,height:i,transform:o},e?void 0:a)}}(),n=rf(iJ),t=(0,c4.A)(n,[]);return(0,p.useEffect)(function(){var e=setTimeout(function(){(0,c5.U)(t,"opacity","1")});return function(){clearTimeout(e)}},[t]),(0,s.Y)(c2.n1,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,s.Y)(of.S,{style:e,css:sR.overlay,p:16,align:"end",children:(0,s.Y)(av.ui,{innerRef:t,elevated:!0,css:sR.surface,children:(0,s.Y)(av.ui,{css:sR.innerSurface,grow:!0,shrink:!0,elevated:!0,children:(0,s.Y)(sM,{})})})})})}),sO={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},sT={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},sL=Object.keys(sO),sM=(0,p.memo)(function(){var e=rf(iQ),n=rf(iX),t=rf(iV),r=rd(tc);sE({key:"Escape"},{run:function(){t()}}),sE(sL.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(n){e(sO[n.key])},enabled:!r}),sE(sL.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){n({direction:sT[e.key]})},enabled:!r});var i=rd(ij);return i&&"sidebar"!==i.target?(0,s.Y)(sG,{paneGroupId:i.paneGroupId,paneId:i.paneId}):null});function sG(e){var n,t,r,i,o,a,l,u,d,p,f,h,g,m,v,w,y,b,x,_,Y,S=rd(tc),A=rf(iJ),I=rf(iV),k=(n=e.paneGroupId,i=(r={paneId:t=e.paneId,paneGroupId:n}).paneId,o=r.paneGroupId,a=(0,ne.Vv)(),l=oR(i),u=(0,at.eq)(i),d=sa(),p=so({paneId:i,paneGroupId:o}),f=(0,q.A)(function(){var e=a.getTitle(l),n=function(e){return!!e&&(void 0===e?"undefined":(0,eE._)(e))==="object"&&"data"in e},t=[{data:{type:"group",key:"pane-actions"},commands:function(){var e,t;return(null!=(t=null==u||null==(e=u.commands)?void 0:e.flatMap(function(e){return e.commands}))?t:[]).filter(n)}},{data:{type:"group",key:"pane-close"},commands:function(){return[d(i)].concat((0,ek._)(p)).filter(n)}}];return{match:oX.G2,data:{type:"context",label:e,icon:(0,s.Y)(a.Icon,{pane:l})},commands:function(e){var n=e.active,r=e.searchQuery;return n||r?t:[]}}},[l,u,a,i,p,d]),g=(h={paneId:t,paneGroupId:n}).paneGroupId,m=h.paneId,v=rd((0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(e3),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,s=c.panes.map(function(n){return[n,e(e(e1(n)).dataAtom)]}),d="floating"===c.path[0];(d?t:r).push({activeIndex:c.activeIndex,paneGroupId:c.id,isFloating:d,panes:s})}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{floating:t,tiling:r}})},[])),w=(0,ne.Vv)(),y=rf(t_),b=rf(t$),x=s_({paneId:m}),_=(0,q.A)(function(){var e=v.tiling,n=v.floating,t=e.reduce(function(e,n){return e+n.panes.length},0)+n.reduce(function(e,n){return e+n.panes.length},0),r={match:oX.G2,data:{type:"action",label:"New tab",icon:(0,s.Y)(aa.A,{}),run:function(){b({paneGroupId:g,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return t?[x,{match:oX.G2,data:{type:"context",label:(0,sv.A)("Tab",t),icon:(0,s.Y)(sA,{count:t})},commands:function(t){var i=t.active,o=t.searchQuery;if(!(i||o))return[];var a=(0,ek._)(e).concat((0,ek._)(n)).map(function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map(function(e){var n=(0,c._)(e,2),t=n[0],r=n[1];return{match:oX.G2,data:{type:"action",label:w.getTitle(r),icon:(0,s.Y)(w.Icon,{pane:r}),run:function(){y({paneId:t,activate:!0})}}}})}}});return a.unshift(r),a}}]:[x,r]},[v,w,y,b,g,x]),Y=sm({paneGroupId:n,paneId:t}),(0,q.A)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[f].concat((0,ek._)(_),(0,ek._)(Y))}}},[f,_,Y]));return(0,s.Y)(aw.r,{iconBreadcrumbs:!0,command:k,onAction:function(){return A()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r){e.preventDefault(),I();return}(0,uN.T$)(e)&&e.preventDefault()},footer:S?null:(0,s.Y)(sU,{}),compact:!0})}var sN={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,ag.FM)({cmdOrCtrl:!0,key:"j"})};function sz(){var e=rf(iK),n=rd(iZ);return((0,ad.SJ)(function(){return[sN.id,function(){return e()}]},[e]),n)?(0,s.Y)(sP,{}):null}var sH=t(23585),sW=t(46909),sB=t(75640),sj=t(56624),s$=[ct,ay,sN].concat((0,ek._)(c0),(0,ek._)(up.ke),(0,ek._)(sW.$f),[sj.B,sH.G,sB.Ws]),sq=t(91616);function sV(e){var n=(0,sq.O)();return(0,s.Y)(ad.jM,{commands:s$,onChange:n,keybindings:e.keybindings,children:e.children})}var sK=t(63083),sZ=t(93783);function sJ(e){var n=e.children,t=(0,q.A)(function(){return new us.Y(n8.A.get("stateCache","object"))},[]);return(0,s.Y)(us.H.Provider,{value:t,children:n})}function sQ(e){var n,t=e.ui,r=e.repl,i=e.services,o=e.userKeybindings,a=e.children;return(0,s.Y)(sV,{keybindings:o,children:(0,s.Y)(ne.lQ,{value:t,children:(0,s.Y)(sJ,{children:(0,s.Y)(sK.A.Provider,{value:i,children:(0,s.Y)(ud.F,{replId:r.id,orgId:null==(n=r.org)?void 0:n.id,container:i.container,fs:i.fs,dotReplit:i.dotReplit,ports:i.ports,secrets:i.secrets,children:(0,s.Y)(cW.B,{repl:r,forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},children:(0,s.Y)(l1.Ey,{children:(0,s.Y)(sZ.A,{children:a})})})})})})})})}var sX=t(792),s0=t(22227),s1=function(e){return(0,n4._)(function(){var n,t,r,i;return(0,n5.YH)(this,function(o){switch(o.label){case 0:if(!(0,s0.Fp)())return[2,null];return[4,(0,s0.Eb)(e)];case 1:if(t=(n=o.sent()).path,r=n.line,i=n.col,!t)return[2,null];return[2,{path:t,line:r,col:i}]}})})()};function s2(e){var n,t,r,i,o,a,l,u,s,d,h,g,m,v,w,y=e.repl;return t=(n=(0,o3.A)()).fs,r=n.dotReplit,i=rd(ni),o=(0,oo.A)(i),l=(a=(0,c._)((0,p.useState)(!1),2))[0],u=a[1],s=oM(),d=(0,p.useCallback)(function(e){var n;(0,ik.e$)(e.path.toLowerCase())?n={paneType:"markdown"}:(0,ik.Zy)(e.path.toLowerCase())&&(n={paneType:"csvPreview"}),s((0,r6._)((0,f._)({},e),{opener:n}))},[s]),h=j(y),g=rd(nk),m=rd(n9),v=(0,B.jt)(),w=(0,p.useRef)(!1),(0,p.useEffect)(function(){if(l&&!w.current){if(!i){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,r6._)((0,f._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,s0.cg)({path:i}),t=window.location.hash;if(!(t.slice(1)===i||t.startsWith(n+":"))){var r=new URL(window.location.href);r.hash=n,window.history.pushState((0,r6._)((0,f._)({},history.state),{as:r.pathname+r.hash}),"",r)}}},[l,i]),(0,p.useEffect)(function(){if(!l){var e=!1;return(0,n4._)(function(){var n,i;return(0,n5.YH)(this,function(a){switch(a.label){case 0:if(!g)return[2];if(o.current)return u(!0),[2];return[4,s1(t)];case 1:if(n=a.sent(),e)return[2];if(n)return d(n),u(!0),[2];if(o.current||"saved"===g||m||v)return u(!0),[2];return[4,(0,sX.o)({fs:t,dotReplit:r})];case 2:return i=a.sent().entrypoint,e||!i||h||d({path:i}),u(!0),[2]}})})(),function(){e=!0}}},[t,d,r,o,g,l,m,h,v]),(0,p.useEffect)(function(){if(g){var e=function(){return(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:return w.current=!0,[4,s1(t)];case 1:return(e=n.sent())&&d(e),w.current=!1,[2]}})})()};return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}},[g,t,d]),null}function s4(){var e=(0,uq.W9)(),n=(0,uq.gi)(),t=(0,o3.A)().fs,r=function(){n(null)};return(0,s.Y)(am.a,{isOpen:!!e,onRequestClose:r,children:e?(0,s.Y)(u7.A,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var s5=t(18454),s3=t(57282),s8=t(25396);function s7(){var e,n,t=(0,d.useRouter)(),r=(0,V.ME)(t,"mobileBridge"),i=oB(),o=(0,ug.A)(),a=o.isSaving,l=o.isOffline,u=(0,p.useRef)(null),c=(0,s8.d)(),s=oO(),f=ah(),h=(e=(0,cL.g3)(),n=(0,cL.qP)(),{runState:(0,p.useMemo)(function(){return e?e.step:cR.ll.OFFLINE},[e]),toggleRunState:(0,p.useCallback)(function(){n()},[n])}),g=h.runState,m=h.toggleRunState,v=(0,p.useCallback)(function(e){var n=function(e){switch(e){case s5.TK.OPEN_FILETREE:i.toggle();break;case s5.TK.TOGGLE_RUN_STATE:m();break;case s5.TK.TOGGLE_ALLPANES:f();break;case s5.TK.OPEN_NEW_PANE:case s5.TK.TOGGLE_DRAWER:break;default:(0,sw.A)(e)}},t=function(e){c(e)},r=function(e){var n=e.type,t=e.messageId;try{s({pane:{type:n}})}catch(e){(0,s3.Cf)(t)}};(0,s3.E6)(e,function(e){var i=e.type;switch(i){case s5.tF.SET_KEYBOARD_STATE:t(e.keyboardState);break;case s5.tF.WORKSPACE_REQUEST_ACTION:n(e.action);break;case s5.tF.WORKSPACE_REQUEST_OPEN_PANE:r({messageId:e.id,type:e.paneType});break;default:(0,sw.A)(i)}})},[m,c,s,f,i]);return(0,p.useEffect)(function(){if(r){var e={messageType:s5.tF.WORKSPACE_STATE,isDrawerOpen:!1,isShowingAllPanes:!0,isSaving:a,isOffline:l,runState:g,activePaneType:null,activePaneFilePath:null,isInAgentMode:!1,insets:{top:0,bottom:0}},n=u.current;return(null==n||JSON.stringify(e)!==JSON.stringify(n))&&((0,s3._z)(e,(0,n0.A)()),u.current=e),window.addEventListener("message",v),function(){window.removeEventListener("message",v)}}},[r,v,g,a,l,u]),null}var s6=t(7368),s9=t(46941),de=t(46434),dn=t(90629),dt=t(44744),dr=t(45620);function di(){var e=oM(),n=oO();return(0,p.useCallback)(function(t){return(0,ne.xS)(t)&&t.data.path?e((0,r6._)((0,f._)({},t.data),{path:t.data.path})):n({pane:t})},[n,e])}var da=t(36946),dl=t(7922),du=t(33683),dc=t(86296),ds=t.n(dc);function dd(e){var n=e.text,t=Math.floor(100*e.progress);return(0,s.FD)(s.FK,{children:[(0,s.FD)(of.S,{row:!0,align:"center",justify:"center",gap:8,style:{cursor:"not-allowed"},children:[(0,s.Y)(du.A,{}),(0,s.Y)(aC.EY,{children:n})]}),(0,s.Y)(of.S,{clsx:ds().progressBarContainer,children:(0,s.Y)(of.S,{clsx:ds().progressBarTrack,children:(0,s.Y)(of.S,{clsx:ds().progressBarFill,style:{width:"".concat(t,"%")}})})}),(0,s.Y)(of.S,{justify:"center",align:"center",children:(0,s.FD)(aC.EY,{variant:"small",color:"dimmer",children:[t,"%"]})})]})}function dp(e){var n=e.errorMessage;return(0,s.FD)(of.S,{align:"center",gap:8,children:[(0,s.Y)(aC.EY,{children:n}),(0,s.Y)(aC.EY,{children:"Please try again or contact support"}),(0,s.Y)(cf(),{href:"/~",children:(0,s.Y)(aC.EY,{children:"Return to Home"})})]})}function df(e){var n=e.onClick;return(0,s.FD)(of.S,{align:"center",gap:16,children:[(0,s.Y)(aC.EY,{children:"You must login again to continue importing"}),(0,s.Y)(aE.$n,{text:"Reconnect to Figma",onClick:n,colorway:"primary",iconRight:(0,s.Y)(ck.A,{})})]})}function dh(){var e,n,t,r,i,o,a,l,u,d,h,g,w,y,b,x,_,Y,S,I,D,R,F=(e=(0,ei.A)(),t=(0,c._)((n=(0,f._)({},A,void 0),v.n(E,n)),1)[0],i=(0,c._)((r=(0,f._)({},A,void 0),v.n(C,r)),1)[0],a=(o=(0,c._)((0,p.useState)({status:"not_started"}),2))[0],l=o[1],u=di(),d=(0,B.NC)(),h=(0,p.useRef)(!1),g=(0,p.useCallback)(function(){return(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:if(h.current)return[2];return h.current=!0,[4,d.sessions.create({sessionType:eu.dF3.AGENT_SESSION})];case 1:if(!(e=n.sent()).ok)throw Error("Failed to create Agent session");return u({type:"agentChat",data:{sessionId:e.payload.id}}),[4,e.payload.appendEvent({kind:"setupImportedProject",importSource:eu.aJd.PROJECT_IMPORT_SOURCE_FIGMA})];case 2:return n.sent(),[2]}})})()},[d,u]),y=(w=(0,c._)((0,p.useState)(0),2))[0],b=w[1],S=(x={variables:{replId:e}},_=(0,f._)({},A,x),Y=m.I(k,_)).data,I=!Y.loading&&S&&"Repl"===S.getRepl.__typename&&S.getRepl.config.figmaImportStatus===cM.u4D.Started?S.getRepl.config.figmaUrl:null,D=(0,p.useCallback)(function(n){var r=n.errorMessage;return(0,n4._)(function(){return(0,n5.YH)(this,function(n){switch(n.label){case 0:return l({status:"error",errorMessage:r}),[4,t({variables:{input:{id:e,figmaImportStatus:cM.u4D.Failed}}})];case 1:return n.sent(),[2]}})})()},[e,t]),((0,dr.b)(function(n,r){var o=r.signal;return(0,n4._)(function(){var r,a,u,c,s,d,p,f,h,m,v,w,y,x,_,Y;return(0,n5.YH)(this,function(S){switch(S.label){case 0:if(!I)return[2];return[4,i({variables:{input:{figmaUrl:I}}})];case 1:if((null==(r=S.sent().data)?void 0:r.getFigmaIntermediateToken.__typename)==="NoOAuthFoundError")return l({status:"needs_auth",retryAuth:function(){return b(function(e){return e+1})}}),[2];if((null==r?void 0:r.getFigmaIntermediateToken.__typename)==="InvalidFigmaUrlError"||(null==r?void 0:r.getFigmaIntermediateToken.__typename)==="FigmaRateLimitError")return dn.Cp(r.getFigmaIntermediateToken,{extra:{replId:e,figmaUrl:I}}),lX.vF.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:I,payload:r.getFigmaIntermediateToken}),D({errorMessage:r.getFigmaIntermediateToken.message}),[2];if(!(a=null==r?void 0:r.getFigmaIntermediateToken)||"FigmaImportIntermediateToken"!==a.__typename)return lX.vF.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:I,payload:r}),D({errorMessage:"Something went wrong while importing. Please try again."}),[2];return u=a.token,l(function(e){return"in_progress"===e.status?e:{status:"in_progress",progress:0,text:"Preparing Figma import..."}}),[4,n.figmaImport.startImport.rpc({intermediateToken:u},{signal:o})];case 2:if(!(c=S.sent()).ok)switch(s=c.payload.code){case"INVALID_REQUEST":case"UNCAUGHT_ERROR":return D({errorMessage:"Something went wrong while importing. Please try again."}),[2];case"UNEXPECTED_DISCONNECT":case"CANCEL":return[2];default:(0,sw.A)(s)}d=n.figmaImport.status.subscribe({},{signal:o}).resReadable,p=void 0,f=!1,h=!1,S.label=3;case 3:S.trys.push([3,8,9,14]),v=function(){var n=y.value;if(!n.ok){var t=n.payload.code;switch(t){case"FIGMA_TOKEN_EXPIRED":case"FIGMA_INVALID_TOKEN":return l({status:"needs_auth",retryAuth:function(){return b(function(e){return e+1})}}),{v:void 0};case"FIGMA_NODE_NOT_FOUND":return D({errorMessage:"The selected Figma component could not be found, please ensure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_FILE_NOT_FOUND":return D({errorMessage:"The Figma file could not be accessed, please ensure you have copied the link to the file."}),{v:void 0};case"FIGMA_SELECTION_TOO_LARGE":return D({errorMessage:"Your Figma selection is too large to process, please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_RATE_LIMIT_EXCEEDED":return D({errorMessage:"Too many requests. Please wait a moment and try again."}),{v:void 0};case"NO_CODE_GENERATED":return D({errorMessage:"No code could be generated from your frame. Please try a different link."}),{v:void 0};case"TIMEOUT":return D({errorMessage:"The import took too long. Please try again, or try a different component."}),{v:void 0};case"FIGMA_NODE_NOT_SUPPORTED":return D({errorMessage:"The selected Figma component is not supported. Please make sure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_PAGE_WITH_MULTIPLE_CHILDREN":return D({errorMessage:"The selected Figma page has multiple children. Please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_PAGE_WITH_NO_VALID_CHILDREN":return D({errorMessage:"The selected Figma page doesn't have any content we can convert to code. Please make sure you've selected a page with visible designs then try again."}),{v:void 0};case"INVALID_REQUEST":case"UNKNOWN":case"UNCAUGHT_ERROR":return D({errorMessage:"Something went wrong while importing. Please try again."}),{v:void 0};case"NOT_STARTED":return lX.vF.error("Figma Import: Failed to import from Figma",{repl:e,figmaUrl:I,payload:n.payload}),dn.Cp(Error("Figma import: not started"),{extra:{replId:e,figmaUrl:I,payload:n.payload}}),D({errorMessage:"Something went wrong while importing. Please try again."}),{v:void 0};case"READABLE_BROKEN":case"CANCEL":case"UNEXPECTED_DISCONNECT":return{v:void 0};default:(0,sw.A)(t)}}var r=n.payload;"progress"===r.kind?l(function(e){return"in_progress"===e.status&&e.progress>=r.number?e:{status:"in_progress",progress:r.number,text:r.statusText}}):"success"===r.kind&&(p=function(e){var n=e.file,t=e.frame,r="".concat(n," (").concat(t,")");if(r.length<=dt.z)return r;var i=dt.z-3;if(n.length<=i-1){var o=i-n.length,a=t.length>o?t.substring(0,o-1)+"â€¦":t;return"".concat(n," (").concat(a,")")}var l=i-Math.min(t.length,10),u=n,c=t;n.length>l&&(u=n.substring(0,l-1)+"â€¦");var s=i-u.length;return t.length>s&&(c=t.substring(0,s-1)+"â€¦"),"".concat(u," (").concat(c,")")}({file:r.figmaFileName,frame:r.figmaSelectedFrameName}))},w=(0,de._)(d),S.label=4;case 4:return[4,w.next()];case 5:if(!(f=!(y=S.sent()).done))return[3,7];if(x=v(),"object"===(0,eE._)(x))return[2,x.v];S.label=6;case 6:return f=!1,[3,4];case 7:return[3,14];case 8:return _=S.sent(),h=!0,m=_,[3,14];case 9:if(S.trys.push([9,,12,13]),!(f&&null!=w.return))return[3,11];return[4,w.return()];case 10:S.sent(),S.label=11;case 11:return[3,13];case 12:if(h)throw m;return[7];case 13:return[7];case 14:return l({status:"in_progress",progress:1,text:"Creating checkpoint"}),[4,n.git.init.rpc({initialCommit:!0,includeAllInitialFiles:!0},{signal:o})];case 15:if(!(Y=S.sent()).ok)switch(Y.payload.code){case"ALREADY_INITIALIZED":break;case"CANCEL":case"UNEXPECTED_DISCONNECT":return[2];default:dn.v4(function(e){e.setExtra("gitInitError",Y.payload),dn.Cp(Error("figma import: git init failed"))})}return l({status:"in_progress",progress:1,text:"Handing off to Agent"}),[4,g()];case 16:return S.sent(),[4,t({variables:{input:{id:e,title:p,makeTitleUnique:!0,figmaImportStatus:cM.u4D.Completed}}})];case 17:return S.sent(),(0,oJ.u4)(oJ.AZ.FIGMA_IMPORT_USED,{action:"completed"}),l({status:"success"}),[2]}})})()},[I,e,t,g,y,i,D]),S&&"Repl"===S.getRepl.__typename&&S.getRepl.config.figmaImportStatus===cM.u4D.Failed)?{status:"error",errorMessage:"Something went wrong"}:a),U=(0,s9.m)({onAuth:function(){"needs_auth"===F.status&&F.retryAuth(),(0,oJ.u4)(oJ.AZ.FIGMA_AUTH_COMPLETE,{source:"workspace"})}});return"not_started"===F.status||"success"===F.status?null:("in_progress"===F.status?R=(0,s.Y)(dd,{text:F.text,progress:F.progress}):"error"===F.status?R=(0,s.Y)(dp,{errorMessage:F.errorMessage}):"needs_auth"===F.status&&(R=(0,s.Y)(df,{onClick:U})),(0,s.Y)(da.Z,{children:(0,s.Y)(of.S,{clsx:ds().overlay,style:{cursor:"in_progress"===F.status?"wait":"default"},children:(0,s.Y)(s6.Ay,{children:(0,s.FD)(of.S,{clsx:ds().animationWrapper,tabIndex:-1,children:[(0,s.FD)(of.S,{align:"center",gap:16,children:[(0,s.Y)(dl.H,{}),(0,s.Y)(aC.EY,{multiline:!1,variant:"subheadBig",dataCy:"figma-lock-screen",children:"Importing from Figma..."})]}),(0,s.Y)(of.S,{pt:16,px:16,gap:4,children:R})]})})})}))}var dg=t(59864),dm=t(95043);function dv(){var e=(0,o3.A)().replspaceApi,n=(0,c._)((0,p.useState)(!1),2),t=n[0],r=n[1],i=rf(tX),o=oM(),a=di();return(0,dg.D)({insertConfigPlugin:function(){return i({pane:{type:"config",flow:"githubImport"},focusIfExists:!0})},setConfigScreenLockIsOpen:r,openFile:o,openPane:a}),(0,p.useEffect)(function(){if(t)return e.onConfirmSendToken(function(e){e&&e(!0,!1)})},[t,e]),t?(0,s.Y)(dm.A,{reason:"Importingâ€¦"}):null}var dw=t(25189),dy=t(42811),db=(0,um.AH)([op.wp.dragRegion,op.wp.flex.growAndShrink(1),op.wp.height(32)]);function dx(){return(0,s.Y)(of.S,{css:db})}var d_=t(64957),dY=t(44411),dS=t(48125),dA=t(56988),dI=t(87087),dk=t(9844),dE=t(94356),dC=t(84e3);function dD(e){var n=e.title,t=e.current,r=e.max,i=e.unit,o=e.isUbbV2,a=e.shouldShowImprovedPaywallUpsell,l=function(e){return i?"".concat(i).concat(e):e.toString()},u=r>0?t/r:0,c=a?rS.LU.accentPrimaryDimmer:(0,dE.d8)({decimal:u});return(0,s.FD)(of.S,{gap:6,children:[(0,s.FD)(of.S,{css:dR.usageMeterAndTitle,children:[(0,s.Y)(of.S,{row:!0,align:"center",gap:4,children:(0,s.Y)(aC.EY,{height:"singleLine",children:n})}),(0,s.Y)(aC.EY,{height:"singleLine",color:"dimmer",children:void 0!==o&&o?"".concat(Math.floor(100*u),"%"):"".concat(l(t),"/").concat(l(r))})]}),(0,s.Y)("div",{children:(0,s.Y)(dI.W,{css:dR.measureBar,total:r,current:t,color:c,tooltipHidden:!0})})]})}var dR=(0,rA.x)({measureBar:[op.wp.height(8),{pointerEvents:"none"}],usageMeterAndTitle:[op.wp.display.flex,op.wp.flex.row,op.wp.justify.spaceBetween,op.wp.align.center]});function dF(e){var n=e.limit,t=e.usage,r=e.shouldShowImprovedPaywallUpsell;if(!n||void 0===t)return(0,s.Y)(du.A,{});var i=100*Math.min(1,t/n),o="",a="primary";return i>dA.Kd?(o="You've exceeded the ".concat(dY.Lm," plan usage limit."),a="negative"):i===dA.Kd?(o="You've reached the ".concat(dY.Lm," plan usage limit."),a="negative"):i>=dA.a6?(o="You're nearing the ".concat(dY.Lm," plan usage limit."),a="orange"):i>=dA.s7&&(o="You're approaching the ".concat(dY.Lm," plan usage limit."),a="yellow"),(0,s.FD)(s.FK,{children:[(0,s.Y)(of.S,{gap:4,children:(0,s.Y)(dD,{title:"Usage",current:t,max:n,unit:"$",isUbbV2:!0,shouldShowImprovedPaywallUpsell:r})}),o&&(r?(0,s.Y)(aC.EY,{children:o}):(0,s.Y)(dk.N,{text:o,colorway:a})),(0,s.Y)(dS.A,{text:r?"Upgrade to continue using agent":"Upgrade for more",colorway:"primary",variant:r?"default":"outlined",context:r?"agent_freemium_quota_v2":"agent_freemium_quota",highlightUpsell:"agent",iconLeft:r?void 0:(0,s.Y)(dC.A,{}),hideCoreIcon:r})]})}var dU=t(92775),dP=t(51292),dO=t(28611),dT=(0,rA.x)({root:[op.wp.px(8),dP.b.nofill,op.wp.height(32),op.wp.align.center,op.wp.rowWithGap(4),op.wp.px(6),op.wp.borderRadius(),op.wp.color.foregroundDefault],measureBar:[op.wp.width(50),op.wp.height(8),{pointerEvents:"none"}],popoverWrapper:[op.wp.width(280)],header:[op.wp.fontWeight.bold]});function dL(e){var n,t,r=e.shouldShowImprovedPaywallUpsell,i=(0,c._)((0,p.useState)(!1),2),o=i[0],a=i[1],l=(0,dU.i)().agentUsage;(0,dA.Nk)({usage:null==l?void 0:l.usage,limit:null==l?void 0:l.limit,percentThreshold:dA.s7,onHitThreshold:function(){a(!0)}}),(0,dA.Nk)({usage:null==l?void 0:l.usage,limit:null==l?void 0:l.limit,percentThreshold:dA.a6,onHitThreshold:function(){a(!0)}}),(0,dA.Nk)({usage:null==l?void 0:l.usage,limit:null==l?void 0:l.limit,percentThreshold:dA.Kd,onHitThreshold:function(){a(!0),(0,oJ.u4)(oJ.AZ.AGENT_USED,{action:"hit_freemium_quota"})}});var u=(0,p.useMemo)(function(){return(null==l?void 0:l.usage)&&(null==l?void 0:l.limit)?Math.min(1,l.usage/l.limit):0},[null==l?void 0:l.usage,null==l?void 0:l.limit]),d=(0,p.useMemo)(function(){return(0,dE.d8)({decimal:u})},[u]),f=r?rS.LU.accentPrimaryDimmer:d;return(0,s.FD)(dO.Wv,{isOpen:o,onOpenChange:function(e){a(e)},label:"Agent Usage",placement:"bottom start",children:[(0,s.Y)(aE.SC,{css:dT.root,children:(0,s.FD)(of.S,{row:!0,align:"center",gap:8,children:[(0,s.Y)(dI.W,{css:dT.measureBar,total:null!=(n=null==l?void 0:l.limit)?n:0,current:null!=(t=null==l?void 0:l.usage)?t:0,color:f,tooltipHidden:!0}),!r&&(0,s.FD)(aC.EY,{color:"dimmer",variant:"small",children:[Math.floor(100*u),"% used"]})]})}),(0,s.Y)(of.S,{css:dT.popoverWrapper,p:8,children:(0,s.FD)(of.S,{gap:12,children:[(0,s.FD)(aC.EY,{css:dT.header,children:[cu.g$," usage"]}),(0,s.Y)(dF,{limit:null==l?void 0:l.limit,usage:null==l?void 0:l.usage,shouldShowImprovedPaywallUpsell:r})]})})]})}var dM=t(6876),dG=t(70197);function dN(){var e=(0,h._)(["\n  query ProjectHeaderMenu($id: String!, $input: ProjectReplsInput!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        title\n        ...CreateProjectForkRepl\n        project {\n          id\n          mainRepl {\n            id\n            title\n            ...CreateProjectForkRepl\n          }\n          repls(input: $input) {\n            items {\n              id\n              title\n              ...ReplLinkRepl\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return dN=function(){return e},e}var dz={},dH=(0,g.J1)(dN(),dG.T,dM.r),dW=t(82207),dB=t(14524),dj=t(43162),d$=t(62058),dq=t(94280),dV=t(7503),dK=t(93868),dZ=t(16653),dJ=t(37379),dQ=t(99933),dX=t(35751),d0=t(2400),d1=t(70598),d2=t(14385),d4=t(73635),d5=(0,rA.x)({self:[op.wp.display.grid,op.wp.p(4),{gap:4,alignItems:"stretch"}],list:[op.wp.maxHeight(640)],listItem:[dJ.iF.item,op.wp.px(8),op.wp.height(28),{span:op.wp.color.foregroundDefault}],listItemLabel:{flex:1},listButtonLink:[op.wp.height(28),op.wp.px(6),op.wp.transition.none],currentReplIcon:[op.wp.color.foregroundDimmer],tourWrapper:[op.wp.p(8)]});function d3(e){var n=e.label,t=e.icon,r=(0,se._)(e,["label","icon"]);return(0,s.FD)(dJ.if,(0,r6._)((0,f._)({css:d5.listItem},r),{textValue:n,children:[(0,s.Y)(dJ.PX,{css:d5.listItemLabel,children:n}),(0,s.Y)(oh.Z_,{size:16,children:t})]}))}var d8=(0,p.forwardRef)(function(e,n){var t,r,i,o,a,l,u,d,h,g,v,w,y=(0,ei.A)(),b=(0,c._)((0,p.useState)(""),2),x=b[0],_=b[1],Y=(0,dV.Os)(dq.X.id,dq.F.Forks),S=(t={variables:{id:y,input:{}},notifyOnNetworkStatusChange:!0},r=(0,f._)({},dz,t),m.I(dH,r)),A=S.refetch,I=(0,aF.A)(),k=I.showConfirm,E=I.showError,C=(0,c._)((0,d$.B)({onFork:function(){k("App forked, redirecting...")},onError:function(){E("Error creating fork - please try again")}}),2),D=C[0],R=C[1].loading;(0,dW.A)(function(){A({input:{filters:{title:{search:x}}},id:y})},[x],300);var F=(null==(i=S.data)?void 0:i.getRepl.__typename)==="Repl"?S.data.getRepl.project:null,U=(null==(o=S.previousData)?void 0:o.getRepl.__typename)==="Repl"?null==(a=S.previousData.getRepl.project)?void 0:a.repls.items:null,P=null!=(g=null==F?void 0:F.mainRepl)?g:(null==(l=S.previousData)?void 0:l.getRepl.__typename)==="Repl"&&null!=(h=null==(u=S.previousData.getRepl.project)?void 0:u.mainRepl)?h:null,O=(null==(d=S.data)?void 0:d.getRepl.__typename)==="Repl"?S.data.getRepl:null,T=(0,dB.Si)({orgId:e.org.id,projectId:e.projectId}),L=(0,dV.mR)();return(0,s.FD)("div",{css:d5.self,ref:n,children:[(0,s.FD)(dX.U,{children:[(0,s.Y)(d0.L,{"aria-label":"Search Apps in Project",placeholder:"Search by App title...",onChange:_,isLoading:S.loading,autoFocus:!0}),(0,s.Y)(dJ.qF,{isLoading:S.loading,items:null!=(w=null!=(v=null==F?void 0:F.repls.items)?v:U)?w:[],css:d5.list,children:function(e){var n;return(0,s.Y)(d3,(0,r6._)((0,f._)({icon:e.id===y?(0,s.Y)(uv.m_,{tooltip:"You are here",placement:"right",children:(0,s.Y)(d4.A,{css:d5.currentReplIcon})}):void 0,isDisabled:e.id===y,id:e.id,label:e.title},(0,d2.q1)(e)),{sessions:null!=(n=T[e.id])?n:[]}),e.id)}})]}),(0,s.Y)(dZ.a,{}),(0,s.FD)(of.S,{children:[(0,s.Y)(dK.v,(0,r6._)((0,f._)({alignment:"start"},(0,dj.gm)({org:e.org,projectId:e.projectId})),{target:"_blank",iconLeft:(0,s.Y)(cj.A,{}),text:"Project dashboard",variant:"nofill",css:d5.listButtonLink})),(0,s.FD)(dQ.in,{elevated:!1,placement:"right top",trigger:(0,s.Y)(aE.$n,{alignment:"start",variant:"nofill",text:"New fork",iconLeft:R?(0,s.Y)(du.A,{}):(0,s.Y)(aa.A,{}),loading:R,css:d5.listButtonLink}),children:[O?(0,s.Y)(dQ.Dr,{label:"From here (".concat(O.title,")"),isDisabled:R,onAction:function(){D({forkSource:"projectHeaderMenu",orgId:e.org.id,repl:O})}}):null,O&&P&&O.id!==P.id?(0,s.Y)(dQ.Dr,{label:"From main App (".concat(P.title,")"),isDisabled:!P||R,onAction:function(){P&&D({orgId:e.org.id,repl:P,forkSource:"projectHeaderMenu"})}}):null]}),Y.isActive&&L?(0,s.Y)("div",{css:d5.tourWrapper,children:(0,s.Y)(d1.p,{content:L.content,title:L.title,onDismiss:Y.next,onCurrentStepChange:Y.goto,currentStepIndex:dq.X.steps.findIndex(function(e){return e.id===dq.F.Forks}),totalSteps:dq.X.steps.length})}):null]})]})}),d7=t(22290),d6=t(24499),d9=(0,rA.x)({container:[op.wp.position.relative],loadingGeneratedIcon:[d6.S.foregroundPulse(rS.LU.blurpleDimmest,rS.LU.blurpleDefault),op.wp.borderRadius()]});function pe(e){var n=e.replId,t=e.replIconUrl,r=e.size,i=(0,d7.b)({replId:n,replIconUrl:t}),o=i.loading,a=i.generatedIconUrl;return(0,s.Y)(of.S,{css:d9.container,children:(0,s.Y)(of.S,{css:o&&d9.loadingGeneratedIcon,children:(0,s.Y)(cb.Ay,{iconUrl:a||t,size:void 0===r?20:r,alt:""})})})}var pn=t(81512),pt=(0,rA.x)({projectLinkTooltip:[op.wp.maxWidth(400),op.wp.flex.shrink(2)],projectLink:[op.wp.px(6),op.wp.noDragRegion,op.wp.flex.growAndShrink(1)],inheritanceChevron:[op.wp.color.outlineStrongest,{marginInline:-1}]});function pr(e){var n=e.repl,t=(0,c._)((0,p.useState)(!1),2),r=t[0],i=t[1];return n.project&&n.org?(0,s.FD)(s.FK,{children:[(0,s.Y)(uv.m_,{tooltip:"Project forks",css:pt.projectLinkTooltip,isOpen:!r&&void 0,children:(0,s.FD)(dO.Wv,{label:"Project Menu",isOpen:r,onOpenChange:i,placement:"bottom start",children:[(0,s.Y)(aE.$n,{iconLeft:(0,s.Y)(pe,{replId:n.id,replIconUrl:n.iconUrl}),text:n.project.title,variant:"nofill",css:pt.projectLink}),(0,s.Y)(d8,{org:n.org,projectId:n.project.id})]})}),(0,s.Y)(pn.A,{size:12,css:pt.inheritanceChevron})]}):null}var pi=t(90803),po=t.n(pi);function pa(){return(0,s.Y)(av.ui,{background:"higher",clsx:po().root,children:(0,s.Y)(aC.EY,{children:"Planning"})})}var pl=t(55158),pu=t(44495),pc={backgroundDefault:"var(--background-default)",backgroundHigher:"var(--background-higher)"},ps={primary:{strongest:"var(--accent-primary-strongest)",stronger:"var(--accent-primary-stronger)",default:"var(--accent-primary-default)",dimmer:"var(--accent-primary-dimmer)",dimmest:"var(--accent-primary-dimmest)"},positive:{strongest:"var(--accent-positive-strongest)",stronger:"var(--accent-positive-stronger)",default:"var(--accent-positive-default)",dimmer:"var(--accent-positive-dimmer)",dimmest:"var(--accent-positive-dimmest)"},negative:{strongest:"var(--accent-negative-strongest)",stronger:"var(--accent-negative-stronger)",default:"var(--accent-negative-default)",dimmer:"var(--accent-negative-dimmer)",dimmest:"var(--accent-negative-dimmest)"},red:{strongest:"var(--accent-red-strongest)",stronger:"var(--accent-red-stronger)",default:"var(--accent-red-default)",dimmer:"var(--accent-red-dimmer)",dimmest:"var(--accent-red-dimmest)"},orange:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},yellow:{strongest:"var(--accent-yellow-strongest)",stronger:"var(--accent-yellow-stronger)",default:"var(--accent-yellow-default)",dimmer:"var(--accent-yellow-dimmer)",dimmest:"var(--accent-yellow-dimmest)"},lime:{strongest:"var(--accent-lime-strongest)",stronger:"var(--accent-lime-stronger)",default:"var(--accent-lime-default)",dimmer:"var(--accent-lime-dimmer)",dimmest:"var(--accent-lime-dimmest)"},green:{strongest:"var(--accent-green-strongest)",stronger:"var(--accent-green-stronger)",default:"var(--accent-green-default)",dimmer:"var(--accent-green-dimmer)",dimmest:"var(--accent-green-dimmest)"},teal:{strongest:"var(--accent-teal-strongest)",stronger:"var(--accent-teal-stronger)",default:"var(--accent-teal-default)",dimmer:"var(--accent-teal-dimmer)",dimmest:"var(--accent-teal-dimmest)"},blue:{strongest:"var(--accent-blue-strongest)",stronger:"var(--accent-blue-stronger)",default:"var(--accent-blue-default)",dimmer:"var(--accent-blue-dimmer)",dimmest:"var(--accent-blue-dimmest)"},blurple:{strongest:"var(--accent-blurple-strongest)",stronger:"var(--accent-blurple-stronger)",default:"var(--accent-blurple-default)",dimmer:"var(--accent-blurple-dimmer)",dimmest:"var(--accent-blurple-dimmest)"},purple:{strongest:"var(--accent-purple-strongest)",stronger:"var(--accent-purple-stronger)",default:"var(--accent-purple-default)",dimmer:"var(--accent-purple-dimmer)",dimmest:"var(--accent-purple-dimmest)"},magenta:{strongest:"var(--accent-magenta-strongest)",stronger:"var(--accent-magenta-stronger)",default:"var(--accent-magenta-default)",dimmer:"var(--accent-magenta-dimmer)",dimmest:"var(--accent-magenta-dimmest)"},pink:{strongest:"var(--accent-pink-strongest)",stronger:"var(--accent-pink-stronger)",default:"var(--accent-pink-default)",dimmer:"var(--accent-pink-dimmer)",dimmest:"var(--accent-pink-dimmest)"},grey:{strongest:"var(--accent-grey-strongest)",stronger:"var(--accent-grey-stronger)",default:"var(--accent-grey-default)",dimmer:"var(--accent-grey-dimmer)",dimmest:"var(--accent-grey-dimmest)"},brown:{strongest:"var(--accent-brown-strongest)",stronger:"var(--accent-brown-stronger)",default:"var(--accent-brown-default)",dimmer:"var(--accent-brown-dimmer)",dimmest:"var(--accent-brown-dimmest)"},warning:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},brand:{strongest:"var(--brand-accent-strongest)",stronger:"var(--brand-accent-stronger)",default:"var(--brand-accent-default)",dimmer:"var(--brand-accent-dimmer)",dimmest:"var(--brand-accent-dimmest)"}},pd=new Map,pp=new Map,pf=new Map;Object.keys(ps),Object.keys(ps[Object.keys(ps)[0]]);var ph=!0,pg=!1,pm=void 0;try{for(var pv,pw=Object.entries({borderRadius1:"--border-radius-1",borderRadius2:"--border-radius-2",borderRadius4:"--border-radius-4",borderRadius6:"--border-radius-6",borderRadius8:"--border-radius-8",borderRadius12:"--border-radius-12",borderRadius16:"--border-radius-16",borderRadiusDefault:"--border-radius-default",borderRadiusContainer:"--border-radius-container",borderRadiusRound:"--border-radius-round",space1:"--space-1",space2:"--space-2",space4:"--space-4",space6:"--space-6",space8:"--space-8",space12:"--space-12",space16:"--space-16",space24:"--space-24",space32:"--space-32",space40:"--space-40",space48:"--space-48",space56:"--space-56",space64:"--space-64",space80:"--space-80",space96:"--space-96",space128:"--space-128",space256:"--space-256",spaceDefault:"--space-default",shadow1:"--shadow-1",shadow2:"--shadow-2",shadow3:"--shadow-3",shadowDefault:"--shadow-default",fontFamilyDefault:"--font-family-default",fontFamilyCode:"--font-family-code",fontSizeSmall:"--font-size-small",fontSizeDefault:"--font-size-default",fontSizeSubheadDefault:"--font-size-subhead-default",fontSizeSubheadBig:"--font-size-subhead-big",fontSizeHeaderDefault:"--font-size-header-default",fontSizeHeaderBig:"--font-size-header-big",fontWeightRegular:"--font-weight-regular",fontWeightMedium:"--font-weight-medium",fontWeightBold:"--font-weight-bold",lineHeightSmall:"--line-height-small",lineHeightDefault:"--line-height-default",lineHeightSubheadDefault:"--line-height-subhead-default",lineHeightSubheadBig:"--line-height-subhead-big",lineHeightHeaderDefault:"--line-height-header-default",lineHeightHeaderBig:"--line-height-header-big",transitionDurationSnappy:"--transition-duration-snappy",transitionDurationChill:"--transition-duration-chill",transitionTimingFunctionSnappy:"--transition-timing-function-snappy",transitionTimingFunctionChill:"--transition-timing-function-chill",borderWidthDefault:"--border-width-default",singleLine:"--single-line",backgroundRoot:"--background-root",backgroundDefault:"--background-default",backgroundHigher:"--background-higher",backgroundHighest:"--background-highest",backgroundOverlay:"--background-overlay",foregroundDefault:"--foreground-default",foregroundDimmer:"--foreground-dimmer",foregroundDimmest:"--foreground-dimmest",outlineDimmest:"--outline-dimmest",outlineDimmer:"--outline-dimmer",outlineDefault:"--outline-default",outlineStronger:"--outline-stronger",outlineStrongest:"--outline-strongest",accentPrimaryStrongest:"--accent-primary-strongest",accentPrimaryStronger:"--accent-primary-stronger",accentPrimaryDefault:"--accent-primary-default",accentPrimaryDimmer:"--accent-primary-dimmer",accentPrimaryDimmest:"--accent-primary-dimmest",accentPositiveStrongest:"--accent-positive-strongest",accentPositiveStronger:"--accent-positive-stronger",accentPositiveDefault:"--accent-positive-default",accentPositiveDimmer:"--accent-positive-dimmer",accentPositiveDimmest:"--accent-positive-dimmest",accentNegativeStrongest:"--accent-negative-strongest",accentNegativeStronger:"--accent-negative-stronger",accentNegativeDefault:"--accent-negative-default",accentNegativeDimmer:"--accent-negative-dimmer",accentNegativeDimmest:"--accent-negative-dimmest",redStrongest:"--accent-red-strongest",redStronger:"--accent-red-stronger",redDefault:"--accent-red-default",redDimmer:"--accent-red-dimmer",redDimmest:"--accent-red-dimmest",orangeStrongest:"--accent-orange-strongest",orangeStronger:"--accent-orange-stronger",orangeDefault:"--accent-orange-default",orangeDimmer:"--accent-orange-dimmer",orangeDimmest:"--accent-orange-dimmest",yellowStrongest:"--accent-yellow-strongest",yellowStronger:"--accent-yellow-stronger",yellowDefault:"--accent-yellow-default",yellowDimmer:"--accent-yellow-dimmer",yellowDimmest:"--accent-yellow-dimmest",limeStrongest:"--accent-lime-strongest",limeStronger:"--accent-lime-stronger",limeDefault:"--accent-lime-default",limeDimmer:"--accent-lime-dimmer",limeDimmest:"--accent-lime-dimmest",greenStrongest:"--accent-green-strongest",greenStronger:"--accent-green-stronger",greenDefault:"--accent-green-default",greenDimmer:"--accent-green-dimmer",greenDimmest:"--accent-green-dimmest",tealStrongest:"--accent-teal-strongest",tealStronger:"--accent-teal-stronger",tealDefault:"--accent-teal-default",tealDimmer:"--accent-teal-dimmer",tealDimmest:"--accent-teal-dimmest",blueStrongest:"--accent-blue-strongest",blueStronger:"--accent-blue-stronger",blueDefault:"--accent-blue-default",blueDimmer:"--accent-blue-dimmer",blueDimmest:"--accent-blue-dimmest",blurpleStrongest:"--accent-blurple-strongest",blurpleStronger:"--accent-blurple-stronger",blurpleDefault:"--accent-blurple-default",blurpleDimmer:"--accent-blurple-dimmer",blurpleDimmest:"--accent-blurple-dimmest",purpleStrongest:"--accent-purple-strongest",purpleStronger:"--accent-purple-stronger",purpleDefault:"--accent-purple-default",purpleDimmer:"--accent-purple-dimmer",purpleDimmest:"--accent-purple-dimmest",magentaStrongest:"--accent-magenta-strongest",magentaStronger:"--accent-magenta-stronger",magentaDefault:"--accent-magenta-default",magentaDimmer:"--accent-magenta-dimmer",magentaDimmest:"--accent-magenta-dimmest",pinkStrongest:"--accent-pink-strongest",pinkStronger:"--accent-pink-stronger",pinkDefault:"--accent-pink-default",pinkDimmer:"--accent-pink-dimmer",pinkDimmest:"--accent-pink-dimmest",greyStrongest:"--accent-grey-strongest",greyStronger:"--accent-grey-stronger",greyDefault:"--accent-grey-default",greyDimmer:"--accent-grey-dimmer",greyDimmest:"--accent-grey-dimmest",brownStrongest:"--accent-brown-strongest",brownStronger:"--accent-brown-stronger",brownDefault:"--accent-brown-default",brownDimmer:"--accent-brown-dimmer",brownDimmest:"--accent-brown-dimmest",white:"--white",black:"--black",surfaceBackground:"--surface-background",interactiveBackground:"--interactive-background",interactiveBackgroundActive:"--interactive-background--active",interactiveBorder:"--interactive-border",interactiveBorderHover:"--interactive-border--hover",brandText:"--brand-text",brandTextSecondary:"--brand-secondary-text",brandTextLight:"--brand-text-light",brandBackground:"--brand-background",brandBackgroundDarker:"--brand-background-darker",brandBorder:"--brand-border",brandAccentStrongest:"--brand-accent-strongest",brandAccentStronger:"--brand-accent-stronger",brandAccentDefault:"--brand-accent-default",brandAccentDimmer:"--brand-accent-dimmer",brandAccentDimmest:"--brand-accent-dimmest",brandBlack:"--brand-black",fontFamilyBrand:"--font-family-brand",fontFamilyBrandVariable:"--font-family-brand-variable",fontFamilyBrandPixel:"--font-family-brand-pixel",breakpointMobileMin:"--breakpoint-mobile-min",breakpointMobileMax:"--breakpoint-mobile-max",breakpointTabletMin:"--breakpoint-tablet-min",breakpointTabletMax:"--breakpoint-tablet-max"})[Symbol.iterator]();!(ph=(pv=pw.next()).done);ph=!0){var py=(0,c._)(pv.value,2),pb=py[0],px=py[1];pd.set(pb,px),pp.set(px,pb),pf.set(pb,"var(".concat(px,")"))}}catch(e){pg=!0,pm=e}finally{try{ph||null==pw.return||pw.return()}finally{if(pg)throw pm}}var p_=t(8086),pY=t(5857),pS=(0,rA.x)({metadata:[],iconWrapper:[op.wp.position.relative,op.wp.display.none,(0,nX._)({},op.$_.min("tabletMax"),[op.wp.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[op.wp.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[op.wp.flex.shrink(1),op.wp.truncate],placeholderTitle:[op.wp.width(100),op.wp.borderRadius("default"),{alignSelf:"stretch"},d6.S.foregroundPulse(pc.backgroundDefault,pc.backgroundHigher)]});function pA(e){var n,t=e.repl,r=e.hideTitle,i=(0,p_.A)().didDisconnect,o=(0,ro.p)();return(0,s.FD)(of.S,{grow:!0,shrink:!0,row:!0,gap:6,align:"center",children:[(0,s.FD)(of.S,{css:pS.iconWrapper,style:o?{display:"flex"}:void 0,children:[(null==(n=t.project)?void 0:n.id)?null:(0,s.Y)(of.S,{css:i&&pS.dimIcon,children:(0,s.Y)(pe,{replId:t.id,replIconUrl:t.iconUrl,size:o?16:void 0})}),i?(0,s.Y)(uv.m_,{tooltip:"Reconnecting",children:(0,s.Y)(pY.A,{size:16,css:pS.diconnectedIcon})}):null]}),r?null:(0,s.Y)(aC.EY,{multiline:!1,css:pS.title,"data-cy":"header-repl-title",color:i?"dimmer":"default",children:t.title})]})}var pI=(0,rA.x)({popover:[op.wp.maxWidth(460),op.wp.width("100%")],button:[dP.b.nofill,op.wp.height(32),op.wp.flex.growAndShrink(1),op.wp.align.center,op.wp.rowWithGap(4),op.wp.px(6),op.wp.borderRadius(),op.wp.color.foregroundDefault,{'&[aria-expanded="true"]':{backgroundColor:rS.LU.interactiveBackgroundActive}}]});function pk(e){var n=e.repl,t=e.getDesktopLayoutState,r=e.hideTitle,i=(0,c._)((0,p.useState)(!1),2),o=i[0],a=i[1],l=(0,ro.p)();return(0,s.FD)(dO.Wv,{isOpen:o,onOpenChange:function(e){a(e),e&&(0,oJ.u4)(oJ.AZ.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",css:pI.popover,children:[(0,s.Y)(of.D.button,{dataCy:"ws-repl-info-container",css:pI.button,onClick:function(){(0,oJ.u4)(oJ.AZ.REPL_METADATA_OPENED)},"aria-expanded":o,style:l?{height:28}:void 0,children:(0,s.Y)(pA,{repl:n,hideTitle:r})}),(0,s.Y)(pu.A,{getDesktopLayoutState:t,setIsEditing:a})]})}var pE=t(31207),pC=(0,rA.x)({replInfo:[op.wp.maxWidth(530),{"& > span":[op.wp.viewStyle,op.wp.flex.shrink(1)]}]});function pD(e){var n,t=e.repl,r=e.isAgentCentered,i=rh(tr),o=oW(),a=(0,pE.F)().isFreemiumStarterPlanUsersOwnRepl,l=(0,L._P)({controlName:"flag-improved-paywall-upsell"}),u=(0,ro.p)();return(0,s.FD)(of.S,{row:!0,gap:4,align:"center",justify:"start",css:op.wp.noDragRegion,children:[(0,s.Y)(d_.A,{}),(0,s.Y)(pl.C,{org:null!=(n=t.org)?n:void 0}),(0,s.Y)(pr,{repl:t}),(0,s.Y)(of.S,{row:!0,align:"center",justify:"start",children:r?(0,s.Y)(pR,{repl:t}):(0,s.FD)(of.S,{row:!0,gap:4,children:[(0,s.Y)(of.S,{row:!0,align:"center",css:pC.replInfo,shrink:!0,children:(0,s.Y)(pk,{repl:t,getDesktopLayoutState:i})}),"centeredVisualPlanner"===o?(0,s.Y)(pa,{}):null]})}),a?(0,s.FD)(s.FK,{children:[(0,s.Y)(dL,{shouldShowImprovedPaywallUpsell:l}),l?(0,s.Y)(dS.A,{text:"Upgrade",context:"agent_freemium_quota_v2",colorway:"primary",variant:"default",highlightUpsell:"agent",size:u?"small":void 0}):null]}):null,(0,s.Y)(dx,{})]})}function pR(e){var n=e.repl;return(0,s.Y)(of.S,{px:12,children:(0,s.Y)(aC.EY,{children:n.title})})}var pF=t(73215),pU=t(90843),pP=(0,rA.x)({brokenNixButton:[op.wp.noDragRegion,op.wp.backgroundColor.orangeDimmest,op.wp.color.orangeStrongest,op.wp.height(32),op.wp.p(8),op.wp.borderRadius(4),op.wp.cursor.pointer,{border:"1px solid",borderColor:"transparent","&:hover":[op.wp.backgroundColor.orangeDimmer],"&:active":[{borderColor:rS.LU.orangeDefault}]}],brokenNixButtonLabel:[op.wp.display.none,(0,nX._)({},"@media (min-width: ".concat(sD.LO.tabletMax,"px)"),[op.wp.display.block])]});function pO(e){var n=e.nixState,t=(0,c._)((0,p.useState)(!1),2),r=t[0],i=t[1],o=di(),a=(0,p.useCallback)(function(e){o({type:"codeEditor",data:{path:e}})},[o]);return(0,s.FD)(s.FK,{children:[(0,s.FD)(of.S,{align:"center",css:pP.brokenNixButton,row:!0,gap:8,tag:"button",onClick:function(){i(!0)},children:["error"===n.status?(0,s.Y)(pU.A,{}):null,"rebuilding-after-error"===n.status?(0,s.Y)(du.A,{}):null,(0,s.Y)(of.S,{css:pP.brokenNixButtonLabel,children:"App is in recovery mode"})]}),(0,s.Y)(pF.E,{isOpen:r,setIsOpen:i,nixState:n,openFile:a})]})}var pT=t(61226),pL=t(2717),pM=t(97499),pG=t(7909),pN=t.n(pG);function pz(){var e=oW(),n=(rf(iO),(0,L._P)({controlName:"flag-agent-debug-info-button"})),t=(0,B.NC)(),r=(0,es.Rj)(function(){return t.sessions.agent.current},[t.sessions.agent]);return(0,s.FD)(of.S,{row:!0,align:"center",gap:4,children:[(0,s.Y)(pH,{icon:(0,s.Y)(pM.A,{size:12}),text:"Plan",isActive:"centeredVisualPlanner"===e,onClick:void 0}),(0,s.Y)(of.S,{clsx:pN().dividerContainer,children:(0,s.Y)(dZ.a,{clsx:pN().divider})}),(0,s.Y)(pH,{icon:(0,s.Y)(cC.A,{size:12}),text:"Build",isActive:"tilingLayout"===e,onClick:void 0}),n&&r?(0,s.FD)(s.FK,{children:[(0,s.Y)(of.S,{clsx:pN().dividerContainer,children:(0,s.Y)(dZ.a,{clsx:pN().divider})}),(0,s.Y)(pT.O,{sessionId:r.id,sessionType:eu.dF3.AGENT_SESSION})]}):null]})}function pH(e){var n=e.icon,t=e.text,r=e.isActive,i=e.onClick;return(0,s.FD)(of.S,{row:!0,align:"center",gap:4,clsx:[(0,nX._)({},pN().stepInteractive,null!=i)],onClick:i,children:[(0,s.Y)(pL.a,{iconLeft:n,colorway:r?"positive":"grey",clsx:[pN().pill,(0,nX._)({},pN().pillActive,r)]}),(0,s.Y)(aC.EY,{color:r?"default":"dimmer",clsx:pN().text,children:t})]})}var pW=t(78828);function pB(e){var n=(0,o3.A)().presence,t=(0,tR.w1)(),r=(0,oo.A)(e);return(0,p.useCallback)(function(e){var i=e.username,o=e.id,a=n.getFollowedUser();if((null==a?void 0:a.username)===i)return void n.unfollowUser();n.followUser(i);var l=n.getActiveFileForUser(o),u=t();l&&l!==u&&r.current({path:l})},[r,t,n])}var pj=t(97139),p$=t(85024),pq=t(96513),pV=t(97608),pK=t(78627);function pZ(){var e=(0,h._)(["\n  fragment ReplMultiplayerOrg on Org {\n    ...OrgMetadata\n    membersCount\n  }\n  ","\n"]);return pZ=function(){return e},e}function pJ(){var e=(0,h._)(["\n  fragment ReplMultiplayerOrgGroup on OrgGroup {\n    ...OrgGroupsOrgGroup\n  }\n  ","\n"]);return pJ=function(){return e},e}function pQ(){var e=(0,h._)(["\n  fragment ReplMultiplayerGroup on ReplMultiplayerGroupScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return pQ=function(){return e},e}function pX(){var e=(0,h._)(["\n  fragment ReplMultiplayerIndividual on ReplMultiplayerIndividualScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    user {\n      __typename\n      id\n      displayName\n      image\n      username\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return pX=function(){return e},e}function p0(){var e=(0,h._)(["\n  fragment ReplMultiplayerStatus on Repl {\n    id\n    title\n    isPrivate\n    url\n    org {\n      ...ReplMultiplayerOrg\n    }\n    multiplayerStatus {\n      __typename\n      groups {\n        __typename\n        ...ReplMultiplayerGroup\n      }\n      individuals {\n        __typename\n        ...ReplMultiplayerIndividual\n      }\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n        message\n      }\n      editVisibility {\n        isAuthorized\n        message\n      }\n      removeSelf {\n        isAuthorized\n        message\n      }\n      viewPermissions {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return p0=function(){return e},e}function p1(){var e=(0,h._)(["\n  query ReplMultiplayerStatus($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        __typename\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return p1=function(){return e},e}function p2(){var e=(0,h._)(["\n  mutation UpdateOrgReplVisibility($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return p2=function(){return e},e}var p4={},p5=(0,g.J1)(pZ(),pK.wW),p3=(0,g.J1)(pJ(),pV.Um),p8=(0,g.J1)(pQ(),p3),p7=(0,g.J1)(pX(),p3),p6=(0,g.J1)(p0(),p5,p8,p7),p9=(0,g.J1)(p1(),p6),fe=(0,g.J1)(p2(),p6),fn=t(6563),ft=t(28561),fr=t(24759),fi=t(705),fo=t(1220),fa=t(31051),fl=t(85826),fu=t(22440),fc=t(8548),fs=(0,rA.x)({section:[op.wp.colWithGap(12),op.wp.px(12)],sectionWithBorders:[op.wp.colWithGap(12),op.wp.p(12),op.wp.border({direction:"top"}),op.wp.border({direction:"bottom"}),{"&:last-of-type":{borderBottom:0,paddingBottom:0}}],sectionTitle:[op.wp.fontWeight.medium],subtitle:[op.wp.fontWeight.medium],item:[op.wp.rowWithGap(16),op.wp.align.center,op.wp.justify.spaceBetween],groupName:[op.wp.colWithGap(6),op.wp.justify.center],visibilitySelector:[op.wp.position.relative,op.wp.justify.start,op.wp.align.center]}),fd=function(e){var n,t,r,i,o,a,l,u,c,d,p,h=e.replId,g=(0,ak.T)(),v=(0,cs.A)(),w=(n={variables:{replId:h}},t=(0,f._)({},p4,n),m.I(p9,t)),y=w.data,b=w.loading,x=w.error,_=w.refetch,Y=(null==y||null==(r=y.getRepl)?void 0:r.__typename)==="Repl"?y.getRepl:void 0,S=(null!=(c=null==Y||null==(i=Y.multiplayerStatus)?void 0:i.groups)?c:[]).filter(function(e){return"custom"!==e.group.type}),A=(null!=(d=null==Y||null==(o=Y.multiplayerStatus)?void 0:o.groups)?d:[]).filter(function(e){return"custom"===e.group.type}),I=null!=(p=null==Y||null==(a=Y.multiplayerStatus)?void 0:a.individuals)?p:[],k=S.map(function(e){return e.group}).concat(A.map(function(e){return e.group})).concat(I.map(function(e){return e.group})),E=function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,_()];case 1:return e.sent(),[2]}})})()};return(null==x?void 0:x.message)?(0,s.Y)(of.S,{gap:12,children:(0,s.Y)(dk.N,{colorway:"negative",text:x.message})}):b||!Y?(0,s.Y)(of.S,{px:12,align:"center",justify:"center",children:(0,s.Y)(du.A,{})}):(0,s.FD)(of.S,{gap:12,children:[(0,s.FD)(of.S,{tag:"header",px:12,gap:2,children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Share App"}),(0,s.FD)(of.S,{css:fs.subtitle,row:!0,gap:4,children:[Y.org?(0,s.FD)(aC.EY,{variant:"small",color:"dimmer",children:[Y.org.name," /"]}):null,(0,s.Y)(aC.EY,{variant:"small",children:Y.title})]})]}),(null==(l=Y.org)?void 0:l.id)&&Y.authorizations.editPermissions.isAuthorized?(0,s.Y)(of.S,{css:fs.sectionWithBorders,children:(0,s.Y)(fg,{orgId:Y.org.id,selectedGroups:k,repl:Y,onScopeChange:E})}):null,(0,s.FD)(of.S,{css:fs.section,children:[(0,s.Y)(aC.EY,{variant:"small",css:fs.sectionTitle,children:"Groups with access"}),Y.org?(0,s.Y)(fh,{org:Y.org}):null,(0,s.Y)(of.S,{pl:24,gap:12,children:S.map(function(e){var n=e.group,t=e.options;return(0,s.Y)(ff,{repl:Y,group:n,options:t,onScopeChange:E},n.id)})}),A.map(function(e){var n=e.group,t=e.options;return(0,s.Y)(ff,{repl:Y,group:n,options:t,onScopeChange:E},n.id)})]}),I.length>0?(0,s.FD)(of.S,{css:fs.section,children:[(0,s.Y)(aC.EY,{variant:"small",css:fs.sectionTitle,children:"People with access"}),I.map(function(e){var n=e.group,t=e.user,r=e.options;return(0,s.Y)(fp,{currentUserId:g,repl:Y,group:n,user:t,options:r,onScopeChange:E},t.id)})]}):null,(0,s.Y)(of.S,{css:fs.section,children:(0,s.Y)(fi.R,{type:"repl"})}),(null==(u=Y.org)?void 0:u.id)?(0,s.Y)(of.S,{css:fs.sectionWithBorders,children:(0,s.FD)(of.S,{row:!0,justify:"space-between",children:[(0,s.Y)(fm,{repl:Y,org:Y.org}),v?null:(0,s.Y)(dK.v,(0,r6._)((0,f._)({prefetch:!1},(0,d2.z9)(Y)),{iconRight:(0,s.Y)(cj.A,{}),variant:"outlined",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}}))]})}):null]})},fp=function(e){var n=e.user,t=e.currentUserId,r=e.repl,i=e.group,o=e.options,a=e.onScopeChange,l=t===n.id;return(0,s.FD)(of.S,{css:fs.item,children:[(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(fa.e,{src:n.image,username:n.username,fullName:n.displayName,size:24}),(0,s.FD)(of.S,{css:fs.groupName,children:[(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(aC.EY,{height:"singleLine",children:n.username}),l?(0,s.Y)(aC.EY,{height:"singleLine",color:"dimmest",children:"(You)"}):null]}),n.username!==n.displayName?(0,s.Y)(aC.EY,{variant:"small",color:"dimmest",height:"singleLine",children:n.displayName}):null]})]}),(0,s.Y)(of.S,{children:(0,s.Y)(fo.A,{repl:r,group:i,options:o,onScopeChange:a})})]})},ff=function(e){var n=e.repl,t=e.group,r=e.options,i=e.onScopeChange;return(0,s.FD)(of.S,{css:fs.item,children:[(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(ft.A,{group:t}),(0,s.FD)(of.S,{css:fs.groupName,children:[(0,s.Y)(aC.EY,{height:"singleLine",children:t.name}),(0,s.FD)(of.S,{row:!0,gap:8,children:[t.isMember?(0,s.Y)(aC.EY,{variant:"small",color:"dimmest",height:"singleLine",children:"(you)"}):null,null!=t.memberCount?(0,s.Y)(aC.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,sv.A)("member",t.memberCount,!0)}):null]})]})]}),(0,s.Y)(of.S,{children:(0,s.Y)(fo.A,{repl:n,group:t,options:r,onScopeChange:i})})]})},fh=function(e){var n,t=e.org;return(0,s.Y)(of.S,{css:fs.item,children:(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(fa.e,{src:null!=(n=t.image)?n:null,username:t.name,size:32,layout:"responsive",isOrg:!0}),(0,s.FD)(of.S,{css:fs.groupName,children:[(0,s.FD)(aC.EY,{height:"singleLine",children:["Everyone at ",t.name]}),(0,s.Y)(of.S,{children:null!=t.membersCount?(0,s.Y)(aC.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,sv.A)("member",t.membersCount,!0)}):null})]})]})})},fg=function(e){var n,t,r,i,o,a,l,u=e.orgId,d=e.selectedGroups,f=e.repl,h=e.onScopeChange,g="group-search-".concat((0,p.useId)()),m=(0,c._)((0,p.useState)(),2),v=m[0],w=m[1],y=(0,c._)((0,p.useState)(""),2),b=y[0],x=y[1],_=(0,c._)((0,fn.qO)(),2),Y=_[0],S=_[1],A=S.data,I=S.error,k=S.loading,E=A&&(null==(t=A.currentUser)||null==(n=t.org)?void 0:n.__typename)==="Org"&&"OrgGroup"===A.currentUser.org.group.__typename&&(null==(r=A.currentUser.org.group.replScopeOptions)?void 0:r.__typename)==="OrgGroupReplScopeOptions"?A.currentUser.org.group.replScopeOptions.items[0].options:void 0,C=(null==A?void 0:A.currentUser)&&"Org"!==A.currentUser.org.__typename?A.currentUser.org.message:void 0,D=(null==A?void 0:A.currentUser)&&"Org"===A.currentUser.org.__typename&&"OrgGroup"!==A.currentUser.org.group.__typename?A.currentUser.org.group.message:void 0,R=(null==A?void 0:A.currentUser)&&"Org"===A.currentUser.org.__typename&&"OrgGroup"===A.currentUser.org.group.__typename&&(null==(i=A.currentUser.org.group.replScopeOptions)?void 0:i.__typename)!=="OrgGroupReplScopeOptions"?null==(o=A.currentUser.org.group.replScopeOptions)?void 0:o.message:void 0,F=null!=(l=null!=(a=null!=C?C:D)?a:R)?l:null==I?void 0:I.message;return(0,s.FD)(s.FK,{children:[(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(of.S,{grow:!0,shrink:!0,children:(0,s.Y)(fr.A,{inputId:g,orgId:u,types:[pq.Oi9.Custom,pq.Oi9.SystemIndividual],selectedGroups:d,value:b,setValue:x,onSelect:function(e){w(e),x(e.name),Y({variables:{orgId:u,groupId:e.id,input:{replIds:[f.id]}}})},onClear:function(){return w(void 0)},placeholder:"Share with groups or other members"})}),v&&E||k?(0,s.FD)(of.S,{pl:24,row:!0,align:"center",children:[v&&E&&!k?(0,s.Y)(fo.A,{group:v,repl:f,options:E,onScopeChange:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,h()];case 1:return e.sent(),x(""),w(void 0),[2]}})})()}}):null,k?(0,s.Y)(du.A,{size:24}):null]}):null]}),F?(0,s.Y)(dk.N,{colorway:"negative",text:F}):null]})},fm=function(e){var n,t,r,i=e.repl,o=e.org,a=(0,c._)((0,p.useState)(),2),l=a[0],u=a[1],d=(0,c._)((0,p.useState)(),2),h=d[0],g=d[1],m=(0,c._)((n={variables:{input:{id:i.id}},onError:function(e){g(e.message)}},t=(0,f._)({},p4,n),v.n(fe,t)),2),w=m[0],y=m[1].loading,b="repl-visibility-".concat((0,p.useId)()),x=i.authorizations.editVisibility.isAuthorized,_=i.authorizations.editVisibility.message,Y=[{id:"private",icon:(0,s.Y)(fc.A,{}),name:"Internal to ".concat(o.name),selected:i.isPrivate,description:"Only selected organization members can view or edit."},{id:"public",icon:(0,s.Y)(fu.A,{}),name:"Public on Replit",selected:!i.isPrivate,description:"Anyone on Replit can see or fork. You choose who can edit."}],S=Y.find(function(e){return e.selected}),A=S?(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[S.icon," ",S.name]}):void 0;return r=h?(0,s.Y)(uv.m_,{tooltip:h,children:(0,s.Y)(pU.A,{size:24,color:rS.LU.accentNegativeDefault})}):y?(0,s.Y)(du.A,{size:24}):l?(0,s.Y)(d4.A,{size:24,color:rS.LU.accentPositiveDefault}):null,(0,s.FD)(of.S,{css:fs.visibilitySelector,grow:!0,shrink:!0,row:!0,gap:4,children:[(0,s.Y)(uv.m_,{tooltip:_,isDisabled:x,children:(0,s.Y)(dQ.in,{id:b,trigger:(0,s.Y)(aE.$n,{iconRight:(0,s.Y)(fl.A,{}),text:null!=A?A:"Control Repl visibility",disabled:!x}),"aria-label":"Control ".concat(i.title," visibility"),onAction:function(e){var n="private"===e;n!==i.isPrivate&&(g(void 0),w({variables:{input:{id:i.id,isPrivate:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,r6._)((0,f._)({},i),{isPrivate:n})}},onCompleted:function(e){"UpdateReplPayload"===e.updateRepl.__typename&&(u(!0),setTimeout(function(){return u(!1)},2e3))}}))},items:Y,disallowEmptySelection:!0,isDisabled:!x,children:function(e){return(0,s.Y)(dQ.Dr,{id:e.id,label:e.name,description:e.description,icon:e.icon},e.id)}})}),r?(0,s.Y)(of.S,{children:r}):null]})},fv=t(7576),fw=t.n(fv),fy=t(66246);function fb(){var e=(0,h._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          type\n          permission\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n          inviteGuests {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return fb=function(){return e},e}var fx={},f_=(0,g.J1)(fb(),fy._9),fY=t(41287),fS=(0,rA.x)({root:[op.wp.color.foregroundDefault,op.wp.p(24),op.wp.display.grid,{gap:rS.LU.space24}],controls:[op.wp.display.grid,{gap:rS.LU.space8,gridAutoFlow:"column"}],message:[op.wp.pb(16)],textContainer:[op.wp.textAlign.center]});function fA(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,s.FD)("div",{css:fS.root,children:[(0,s.Y)(aC.Y9,{level:3,textAlign:"center",variant:"subheadBig",children:"Are you sure?"}),(0,s.Y)("div",{css:fS.textContainer,children:(0,s.FD)(aC.EY,{variant:"text",children:[(0,s.Y)("p",{css:fS.message,children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,s.Y)("p",{children:n})]})}),(0,s.FD)("div",{css:fS.controls,children:[(0,s.Y)(aE.$n,{onClick:r,text:"Cancel"}),(0,s.Y)(aE.$n,{colorway:"primary",onClick:t,text:"Invite"})]})]})}var fI=t(69522),fk=t(42600),fE=t(59092),fC=t(8440);function fD(e){var n,t,r,i,o,a,l,u,h,g,v,w,y=e.replId,b=(0,d.useRouter)(),x=(0,V.Po)(b),_=(0,uq.Q4)(),Y=(0,c._)((0,p.useState)(null),2),S=Y[0],A=Y[1],I=(n={variables:{replId:y}},t=(0,f._)({},fx,n),m.I(f_,t)),k=I.data,E=I.loading,C=(null==k||null==(r=k.currentUser)?void 0:r.id)||null,D=(null==k?void 0:k.getRepl.__typename)==="Repl"?k.getRepl:null,R=(0,fY.A)({isMobileApp:x,isTeam:!0,replId:y}),F=R.addOrInviteReplMultiplayer,U=R.loadingAddMutation;if(D&&!D.owner)throw Error("Cannot manage members on anon repls");if((null==D?void 0:D.owner)&&(null==D?void 0:D.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var P=(null==D||null==(i=D.owner)?void 0:i.__typename)==="Team"?D.owner:null,O=!(null==P||null==(o=P.capabilities)?void 0:o.hasValidSubscription)&&!(null==P||null==(a=P.capabilities)?void 0:a.isBusinessPlan),T=(null!=(l=null==D?void 0:D.collaborators)?l:[]).reduce(function(e,n){var t=n.user.username;return -1===e.indexOf(t)&&e.push(),e},[]),L=null==D?void 0:D.multiplayerInvites,M=(null!=(u=null==D?void 0:D.collaborators)?u:[]).filter(function(e){return"guest"===e.type}).map(function(e){return e.user}),G=M.length,N=(null!=(h=null==D?void 0:D.collaborators)?h:[]).filter(function(e){return"member"===e.type}).map(function(e){return e.user}),z=(null!=(g=null==D?void 0:D.collaborators)?g:[]).filter(function(e){return"admin"===e.type}).map(function(e){return e.user}),H=z.some(function(e){return e.id===C}),W=N.filter(function(e){return _.some(function(n){return n.id===e.id})}),B=N.filter(function(e){return!_.some(function(n){return n.id===e.id})}),j=null!=(v=null==D?void 0:D.authorizations.editPermissions.isAuthorized)&&v,$=null!=(w=null==D?void 0:D.authorizations.inviteGuests.isAuthorized)&&w;return E?(0,s.Y)(av.ui,{css:[p$.Nx.root],background:"default",children:(0,s.FD)(of.S,{css:p$.Nx.loading,children:[(0,s.Y)(du.A,{color:rS.LU.foregroundDimmer}),(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,s.FD)(av.ui,{css:p$.Nx.root,background:"default",children:[(0,s.Y)(of.S,{css:[p$.Nx.header,x&&p$.Nx.header_mobile],children:(0,s.Y)(of.S,{css:p$.Nx.titleContainer,children:(0,s.Y)(aC.EY,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),$?(0,s.Y)(of.S,{css:p$.Nx.searchContainer,children:(0,s.Y)(fk.A,{existingUsernames:T,onSubmit:function(e){if(!U){if(fw()(e))return void A(e);F({variables:{input:{replId:y,target:{method:pq.LIG.Username,value:e},level:pq.Hy.Rw}}})}},isDisabled:E})}):null,!$&&O?(0,s.Y)(of.S,{px:16,children:(0,s.Y)(fE.d,{iconLeft:(0,s.Y)(fC.A,{}),text:'You can add people to this App by inviting them to the "'.concat(null==P?void 0:P.displayName,'" Friends Team.'),href:"/teams/".concat(null==P?void 0:P.username),target:"_blank"})}):null,(0,s.Y)(am.a,{isOpen:!!S,onRequestClose:function(){return A(null)},children:S?(0,s.Y)(fA,{email:S,onInvite:function(){F({variables:{input:{replId:y,target:{method:pq.LIG.Email,value:S},level:pq.Hy.Rw}}}),A(null)},onCancel:function(){return A(null)}}):null}),(0,s.FD)(av.ui,{css:p$.Nx.userList,children:[(null==L?void 0:L.length)?(0,s.FD)(of.S,{css:p$.Nx.userGroup.root,children:[(0,s.Y)(p$.jl,{title:"Pending Invitations",color:rS.LU.outlineStrongest,count:G}),null==L?void 0:L.map(function(e){return(0,s.Y)(fI.A,{canEditMultiplayers:H||!1,email:e.email,isPendingInvitation:!0,replId:y},e.email)})]}):null,M.length?(0,s.FD)(of.S,{css:p$.Nx.userGroup.root,children:[(0,s.Y)(p$.jl,{title:"External Guests",color:rS.LU.outlineStrongest,count:null==M?void 0:M.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),M.map(function(e){return(0,s.Y)(fI.A,{canEditMultiplayers:H||!1,isPendingInvitation:!1,replId:y,user:e},e.id)})]}):null,W.length?(0,s.FD)(of.S,{css:p$.Nx.userGroup.root,children:[(0,s.Y)(p$.jl,{title:"Online Members",color:rS.LU.greenStrongest,count:null==W?void 0:W.length}),W.map(function(e){return(0,s.Y)(fI.A,{isPendingInvitation:!1,canEditMultiplayers:!!H,replId:y,user:e},e.id)})]}):null,B.length?(0,s.FD)(of.S,{css:p$.Nx.userGroup.root,children:[(0,s.Y)(p$.jl,{title:"Offline Members",color:rS.LU.outlineStrongest,count:null==B?void 0:B.length}),B.map(function(e){return(0,s.Y)(fI.A,{isPendingInvitation:!1,canEditMultiplayers:!!H,replId:y,user:e},e.id)})]}):null,z.length?(0,s.FD)(of.S,{css:p$.Nx.userGroup.root,children:[(0,s.Y)(p$.jl,{title:"Admins",color:rS.LU.accentPrimaryStronger,count:z.length}),z.map(function(e){return(0,s.Y)(fI.A,{canEditMultiplayers:!1,isPendingInvitation:!1,user:e,replId:y},e.id)})]}):null,j||E?null:(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var fR=t(81690),fF=t(68990),fU=function(){var e=(0,fF.A)(),n=e.showPrivateUpsell,t=e.refetch,r=(0,c._)((0,p.useState)(!1),2),i=r[0],o=r[1];return n?(0,s.FD)(of.S,{px:12,children:[(0,s.Y)(of.S,{tag:"button",css:fP.bannerWrapper,onClick:function(){return o(!0)},children:(0,s.Y)(dk.N,{icon:(0,s.Y)(uZ.A,{}),colorway:"yellow",text:"This App is publicly visible. Upgrade for unlimited private Apps, better AI, more storage, speed, and more."})}),(0,s.Y)(fR.default,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,s.FD)(s.FK,{children:[(0,s.Y)(aC.EY,{variant:"subheadBig",children:"Upgrade for private Apps"}),(0,s.Y)(aC.EY,{multiline:!0,children:"Keep your code secure and private"})]}),headingText:"Upgrade for private Apps",subHeadingText:"Keep your code secure and private",analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}},highlightUpsell:"replLimit"})]}):null},fP=(0,rA.x)({bannerWrapper:[op.wp.cursor.pointer,op.wp.borderRadius(),op.wp.textAlign.left]}),fO=(0,rA.x)({self:[op.wp.borderRadius(8),op.wp.align.stretch,op.wp.flex.growAndShrink(1),op.wp.maxHeight("calc(100vh - ".concat(ra.uF+12,"px)")),op.wp.backgroundColor.backgroundDefault]});let fT=function(e){var n,t=e.replId,r=e.handleUpgradeTriggered,i=e.isTeamRepl,o=e.org;return n=o?(0,s.Y)(fd,{replId:t}):i?(0,s.Y)(fD,{replId:t}):(0,s.Y)(p$.Ay,{replId:t,handleUpgradeTriggered:r}),(0,s.FD)(of.S,{css:fO.self,py:12,gap:12,children:[n,o&&"personal"!==o.type?null:(0,s.Y)(fU,{}),o?null:(0,s.FD)(s.FK,{children:[(0,s.Y)(dZ.a,{}),(0,s.Y)(pj.A,{replId:t})]})]})};var fL={owner:"Owner",editor:"Can edit"};function fM(){var e=(0,h._)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return fM=function(){return e},e}function fG(){var e=(0,h._)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return fG=function(){return e},e}var fN={},fz=(0,g.J1)(fM()),fH=(0,g.J1)(fG(),fz),fW=t(169),fB=(0,rA.x)({container:[op.wp.pl(8),op.wp.pr(16),op.wp.py(4),op.wp.flex.row,op.wp.align.center,op.wp.justify.start],button:[op.wp.display.flex,op.wp.align.center],img:[op.wp.width(32),op.wp.height(32),op.wp.borderRadius("full"),op.wp.backgroundColor.white,op.wp.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[op.wp.display.flex,op.wp.flex.column,op.wp.justify.center,op.wp.ml(8),op.wp.flex.growAndShrink(1),op.wp.colWithGap(2)]});let fj=function(e){var n=e.id,t=e.username,r=e.image,i=e.isOwner,o=e.color,a=e.hideModal,l=e.canClickAvatar,u=e.isCurrentUser,c=e.onAvatarClick,d=function(){l&&(c({username:t,id:n}),a())};return(0,s.FD)("div",{css:[fB.container,i&&dP.b.listItem],style:(0,f._)({cursor:l?"pointer":"auto"},l&&dP.b.listItem),role:"button",onClick:d,onKeyDown:d,tabIndex:0,children:[(0,s.FD)("div",{css:fB.button,children:[(0,s.Y)(uV.A,{src:r,alt:"",css:fB.img,style:{borderColor:o},width:32,height:32}),l?(0,s.FD)(fW.s,{children:["Observe ",t]}):null]}),(0,s.FD)("div",{css:fB.usernameContainer,children:[(0,s.FD)(aC.EY,{multiline:!1,children:["@",t,u?" (you)":null]}),(0,s.Y)(aC.EY,{variant:"small",color:"dimmer",multiline:!1,children:i?fL.owner:fL.editor})]})]})};var f$=(0,rA.x)({loaded:[op.wp.maxHeight(330),{overflowY:"auto"}]});let fq=function(e){var n,t,r=e.replId,i=e.activeUsers,o=e.hideModal,a=e.onAvatarClick,l=(n={variables:{replId:r}},t=(0,f._)({},fN,n),m.I(fH,t)),u=l.data,c=l.loading,d=l.error;if(c)return(0,s.Y)(of.S,{p:32,row:!0,justify:"center",children:(0,s.Y)(du.A,{})});if(d)return(0,s.Y)("div",{children:d.message});if((null==u?void 0:u.getRepl.__typename)==="Repl"){var p=u.getRepl,h=u.currentUser,g=p.user,v=g&&i.find(function(e){return e.username===g.username}),w=p.multiplayers.filter(function(e){var n;return e&&(n=e.id,i.some(function(e){return e.id===n}))}).slice(2);return(0,s.Y)(of.S,{css:f$.loaded,py:8,gap:8,children:(0,s.FD)(of.S,{children:[g?(0,s.Y)(fj,(0,r6._)((0,f._)({},g),{color:v?v.color:"transparent",isOwner:!0,hideModal:o,isCurrentUser:g.id===(null==h?void 0:h.id),canClickAvatar:!!v&&g.id!==(null==h?void 0:h.id),onAvatarClick:a})):null,w.map(function(e){if(!e)throw Error("Expected user");var n=i.find(function(n){return n.username===e.username});if(!n)throw Error("Expected user online");var t=e.id!==(null==h?void 0:h.id);return(0,s.Y)(fj,(0,r6._)((0,f._)({isCurrentUser:e.id===(null==h?void 0:h.id)},e),{canClickAvatar:t,color:n.color,hideModal:o,isOwner:!1,onAvatarClick:a}),"chat-user-list-".concat(e.username))})]})})}return(null==u?void 0:u.getRepl.__typename)==="ReplRedirect"?(0,s.FD)("div",{children:["This App has moved to"," ",(0,s.Y)("a",{href:u.getRepl.replUrl,children:u.getRepl.replUrl})]}):(null==u?void 0:u.getRepl.__typename)==="ReplSubscriptionExpired"?(0,s.FD)("div",{children:["Your subscription has expired.",(0,s.Y)("a",{href:"/pricing",children:"Upgrade here"})]}):null};var fV=t(19170),fK=t(28861);let fZ=function(e){var n=e.isOpen,t=e.hideModal,r=e.children,i=e.onAvatarClick,o=(0,ei.A)(),a=(0,fV.Q4)();return(0,s.FD)(fK.A,{isOpen:n,padding:0,onClickOutside:t,children:[r,(0,s.Y)(fq,{replId:o,activeUsers:a,hideModal:t,onAvatarClick:i})]})};var fJ=t(84118),fQ=(0,rA.x)({root:[op.wp.backgroundColor.backgroundDefault],userStack:[(0,nX._)({},op.$_.max(sD.LO.mobileMax+100),[op.wp.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[op.wp.borderRadius("full"),op.wp.minWidth(24),op.wp.height(24),op.wp.fontSize(10),op.wp.border({color:rS.LU.outlineDefault})]});function fX(e){var n=(0,c._)((0,p.useState)(!1),2),t=n[0],r=n[1],i=(0,uq.Q4)();if(0===i.length)return null;var o=i.slice(0,2),a=i.length-2;return(0,s.Y)(of.S,{css:fQ.root,row:!0,align:"center",children:(0,s.FD)(of.S,{tag:"ul",css:fQ.userStack,px:8,py:4,row:!0,gap:4,align:"center","aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[o.map(function(n){return(0,s.Y)("li",{css:fQ.userStackListItem,children:(0,s.Y)(fJ.A,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)}),a>0?(0,s.Y)("li",{css:fQ.userStackListItem,children:(0,s.Y)(of.S,{children:(0,s.Y)(fZ,{isOpen:t,hideModal:function(){return r(!1)},onAvatarClick:e.onAvatarClick,children:(0,s.Y)(av.ui,{background:"root",css:fQ.overflowContainer,children:(0,s.Y)(aE.$n,{size:"small",onClick:function(){return r(!t)},text:a.toString(),css:fQ.overflowButton})})})})}):null]})})}var f0=t(73455);function f1(){var e=ah(),n=(0,ad.Jn)(ay.id),t=(0,ro.p)(),r=n?"".concat(af," (").concat(n,")"):af;return(0,s.Y)(f0.K0,{alt:r,onClick:function(){return e()},size:t?28:32,children:(0,s.Y)(o4.A,{})})}var f2=t(50646),f4=t(50900),f5=t(72885),f3=t(51002),f8=t(24347),f7=t(36456),f6=t(89364),f9=t(51089),he=(0,rA.x)({self:[op.wp.position.relative,op.wp.borderRadius(4,0,0,4)],dotWrapper:[op.wp.position.absolute,op.wp.top("-3px"),op.wp.right("-3px"),op.wp.width("10px"),op.wp.height("10px"),op.wp.borderRadius("full"),op.wp.border({color:rS.LU.backgroundDefault,width:2})],dot:[op.wp.width("100%"),op.wp.height("100%"),op.wp.borderRadius("full")]});function hn(e){var n=e.color;return(0,s.FD)(of.S,{css:he.self,children:[(0,s.Y)(f6.A,{}),(0,s.Y)(of.S,{tag:"span",css:he.dotWrapper,children:(0,s.Y)(of.S,{tag:"span",css:he.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var ht=(0,um.AH)([op.wp.flex.growAndShrink(1),op.wp.borderRadius(4,0,0,4),(r={},(0,nX._)(r,op.$_.max("tabletMin"),{"div span":[op.wp.display.none],"div svg":[op.wp.mr(0)]}),(0,nX._)(r,'&[data-icon-only="true"]',{svg:[op.wp.mr(0)],span:[op.wp.display.none]}),r)]),hr=(0,um.AH)([ht,op.wp.borderRadius()]),hi={base:{self:ht,loading:(0,um.AH)([ht,d6.S.backgroundPulse()])},rounded:{self:hr,loading:(0,um.AH)([hr,d6.S.backgroundPulse()])}};function ho(e){var n=e.text,t=e.icon,r=e.disabled,i=e.rounded,o=e.onClick,a=e.tooltip,l=e.loading,u=e.iconOnly,c=(0,ro.p)(),d=(0,s.Y)(aE.$n,{size:c?"small":void 0,text:n,iconLeft:t,css:hi[i?"rounded":"base"][l?"loading":"self"],disabled:r,onClick:o,"data-icon-only":u});return a?(0,s.Y)(uv.m_,{tooltip:a,children:d}):d}function ha(e){var n,t,r,i,o,a,l=e.iconOnly,u=(0,f5.uS)(),d=(0,f2.j)(),f=!1,h=!1;switch(u){case f3.d.Ready:case f3.d.Suspended:case f3.d.ProcessingLifecycleCommand:o="Deploy",a=(0,s.Y)(f6.A,{});break;case f3.d.Loading:o="Deploy",a=(0,s.Y)(f6.A,{}),f=!0;break;case f3.d.Preparing:o="Preparing",a=(0,s.Y)(f6.A,{}),f=!0,h=!0;break;case f3.d.PreparingDatabase:d?(o="Approve",a=(0,s.Y)(f9.A,{color:rS.LU.orangeStronger}),h=!0,f=!1):(o="Preparing",a=(0,s.Y)(du.A,{}),h=!0,f=!0);break;case f3.d.Deploying:o="Deploying",a=(0,s.Y)(du.A,{}),h=!0;break;default:(0,sw.A)(u)}var g=oO(),m=!!(0,f7.Q)(),v=(n=(0,o3.A)().dotReplit,r=(t=(0,c._)((0,p.useState)(null),2))[0],i=t[1],(0,p.useEffect)(function(){return n.watch(function(e){var n;if(e.error)return i(null);i((null==(n=e.config.deployment)?void 0:n.target)||null)})},[n]),r);return(0,s.Y)(ho,{text:o,icon:a,onClick:function(){u===f3.d.Ready&&(0,oJ.u4)(oJ.AZ.DEPLOY_PROJECT_SELECTED,{source:"deploy_button",has_agent_session:m}),g({pane:{type:"deployments",flow:{skipIntro:null!==v&&m,isAgentDeployment:null!==v&&m}}})},disabled:f,loading:h,rounded:!0,iconOnly:void 0!==l&&l})}var hl={self:op.wp.rowWithGap(1),open:(0,um.AH)([op.wp.borderRadius(0,4,4,0),op.wp.px(4)])};function hu(){var e,n,t=(0,f5.uS)(),r=(0,f4.Jz)(),i=(0,f4.GQ)(),o=oO(),a=(0,f4.Tp)({openDeploymentsPane:function(){o({pane:{type:"deployments"}})}}).redeployWithNoNewOptions,l=(0,aF.A)().showError,u=(0,f2.j)(),d=(0,B.jt)(),f=(0,c._)((0,p.useState)(void 0),2),h=f[0],g=f[1];(0,p.useEffect)(function(){if(i&&"HostingBuildDeployStatusAction"===i.__typename)switch(i.status){case pq.nHS.Success:case pq.nHS.Failed:g(i.status)}},[i]),(0,p.useEffect)(function(){t===f3.d.Deploying&&g(void 0)},[t]);var m=void 0,v=!1,w=!1;switch(t){case f3.d.Ready:e="Redeploy",n=(0,s.Y)(f6.A,{}),h&&(h===pq.nHS.Success?(n=(0,s.Y)(hn,{color:rS.LU.accentPositiveDefault}),m="Success"):(n=(0,s.Y)(hn,{color:rS.LU.accentNegativeDefault}),m="An error occurred"));break;case f3.d.Suspended:e="Redeploy",n=(0,s.Y)(hn,{color:rS.LU.greyDefault}),m="Deployment suspended";break;case f3.d.Loading:e="Redeploy",n=(0,s.Y)(f6.A,{}),v=!0,w=!0;break;case f3.d.ProcessingLifecycleCommand:e="Redeploy",n=(0,s.Y)(hn,{color:rS.LU.orangeStronger}),w=!0,m="Updating deployment";break;case f3.d.Preparing:e="Preparing",n=(0,s.Y)(du.A,{}),w=!0,v=!0;break;case f3.d.PreparingDatabase:u?(e="Approve",n=(0,s.Y)(f9.A,{color:rS.LU.orangeStronger}),w=!0,v=!1):(e="Preparing",n=(0,s.Y)(du.A,{}),w=!0,v=!0);break;case f3.d.Deploying:e="Deploying",n=(0,s.Y)(du.A,{}),w=!0;break;default:(0,sw.A)(t)}r&&(e="Error",n=(0,s.Y)(hn,{color:rS.LU.accentNegativeDefault}),m=r);var y=(0,ro.p)();return(0,s.FD)(of.S,{css:hl.self,children:[(0,s.Y)(ho,{text:e,icon:n,tooltip:m,onClick:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:if(t===f3.d.Deploying||t===f3.d.Suspended||t===f3.d.ProcessingLifecycleCommand||t===f3.d.Preparing||t===f3.d.PreparingDatabase)return o({pane:{type:"deployments"}}),[2];if(h&&(g(void 0),h===pq.nHS.Failed)||r)return o({pane:{type:"deployments",data:{view:f8.P.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a({hasAgentSession:d})];case 2:return e.sent(),[3,4];case 3:return l(e.sent().message),[3,4];case 4:return[2]}})})()},disabled:v,loading:w}),(0,s.Y)(uv.m_,{tooltip:"Open Deployments pane",children:(0,s.Y)(aE.$n,{size:y?"small":void 0,text:"",iconLeft:(0,s.Y)(cq.A,{}),onClick:function(){o({pane:{type:"deployments"}})},css:hl.open})})]})}var hc=function(){var e=oO(),n=(0,ro.p)();return(0,s.Y)(aE.$n,{size:n?"small":void 0,text:"Redeploy",iconLeft:(0,s.Y)(f6.A,{}),onClick:function(){e({pane:{type:"deployments"}})}})};function hs(e){var n=e.iconOnly,t=(0,f4.i$)(),r=(0,f4.cF)(),i=(0,f4.mj)().deployability;return t&&r?i.redeploy.isAuthorized?(0,s.Y)(hu,{}):(0,s.Y)(hc,{}):(0,s.Y)(ha,{iconOnly:n})}var hd=t(63285),hp=t.n(hd),hf=t(55917),hh=t(27600),hg=t(37827),hm=t(63914);function hv(e){var n=e?1560:1400;return(0,rA.x)({desktopButton:(0,nX._)({},op.$_.max(n),[op.wp.display.none]),mobileButton:(0,nX._)({},op.$_.min(n),[op.wp.display.none])})}let hw=function(e){var n=e.lesson,r=(0,aF.A)().showError,i=(0,hg.mO)().fireCircularBurstFrom,o=(0,p.useRef)(null),a=(0,hh.j)(),l=(0,c._)((0,p.useState)(!1),2),u=l[0],d=l[1],f=(0,fF.A)().showPrivateUpsell,h=(0,c._)((0,hf.F8)({onError:function(){return r("Something went wrong")},onCompleted:function(e){var t,l;(null==(t=e.completeUserCourseLesson)?void 0:t.__typename)!=="UpdatedUserCourseLesson"?r((null==(l=e.completeUserCourseLesson)?void 0:l.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===n.id?(o.current&&!a&&i({element:o.current}),d(!0)):r("Something went wrong")}}),2),g=h[0],m=h[1].loading,v="Lesson completed \uD83C\uDF89",w="Mark lesson completed",y=function(){(0,hm._)({action:"completed",lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug}),g({variables:{input:{userLessonId:n.id}}})},b=hp()(function(){return Promise.all([t.e(8441),t.e(2292)]).then(t.bind(t,32292))},{loadableGenerated:{webpack:function(){return[32292]}},ssr:!1});return(0,s.FD)(s.FK,{children:[null!==n.timeCompleted?(0,s.FD)(s.FK,{children:[(0,s.Y)(aE.$n,{ref:o,disabled:!0,text:v,colorway:"primary",css:hv(f).desktopButton}),(0,s.Y)(uv.m_,{tooltip:v,css:hv(f).mobileButton,children:(0,s.Y)(aE.$n,{ref:o,disabled:!0,text:"\uD83C\uDF89",colorway:"primary"})})]}):(0,s.FD)(s.FK,{children:[(0,s.Y)(aE.$n,{onClick:y,text:m?"Verifyingâ€¦":w,colorway:"primary",loading:m,css:hv(f).desktopButton}),(0,s.Y)(uv.m_,{tooltip:w,css:hv(f).mobileButton,children:(0,s.Y)(aE.$n,{iconLeft:(0,s.Y)(d4.A,{}),onClick:y,text:"",colorway:"primary",loading:m})})]}),(0,s.Y)(am.a,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,s.Y)(b,{lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug})})]})};var hy=t(67526);function hb(e){var n,t=e.lesson,r=(n="tutorial",rd((0,q.A)(function(){return(0,eo.eU)(function(e){return e(e2).find(function(t){return!t.isHidden&&e(t.dataAtom).type===n})})},[n]))),i=rf(oe),o=(0,fF.A)().showPrivateUpsell,a="Show tutorial",l=(0,s.Y)(hy.A,{}),u=function(){return i()};return r?(0,s.Y)(hw,{lesson:t}):(0,s.FD)(s.FK,{children:[(0,s.Y)(aE.$n,{colorway:"primary",iconLeft:l,text:a,css:hv(o).desktopButton,onClick:u}),(0,s.Y)(uv.m_,{tooltip:a,css:hv(o).mobileButton,children:(0,s.Y)(aE.$n,{colorway:"primary",iconLeft:l,text:"",onClick:u})})]})}var hx=t(36735),h_=t(36201),hY=t(99229);function hS(e){var n=e.repl,t=e.currentUser,r=e.hideRightActions;return(0,s.FD)(of.S,{row:!0,gap:6,align:"center",justify:"end",css:op.wp.noDragRegion,children:[(0,s.Y)(dx,{}),r?null:(0,s.FD)(s.FK,{children:[(0,s.Y)(f1,{}),(0,s.Y)(hI,{repl:n})]}),(0,s.Y)(hk,{currentUser:t,hideNotifications:r})]})}var hA={socialGroup:(0,um.AH)([op.wp.rowWithGap(1),op.wp.align.stretch,op.wp.borderRadius(),op.wp.overflow("hidden")]),invitePopover:(0,um.AH)([op.wp.width(400)]),inviteButton:(0,um.AH)([dP.b.filled,(i={borderTopLeftRadius:0,borderBottomLeftRadius:0},(0,nX._)(i,op.$_.max("tabletMax"),{svg:[op.wp.mr(0)],span:[op.wp.display.none]}),(0,nX._)(i,'&[aria-expanded="true"]',{backgroundColor:rS.LU.interactiveBackgroundActive}),(0,nX._)(i,'&[data-icon-only="true"]',{svg:[op.wp.mr(0)],span:[op.wp.display.none]}),i)])};function hI(e){var n,t,r,i,o,a=e.repl,l=e.iconOnlyButtons,u=(0,c._)((0,p.useState)(!1),2),d=u[0],f=u[1],h=(0,c._)((0,p.useState)(!1),2),g=h[0],m=h[1],v=oO(),w=pB(oM()),y=(0,l3.oR)(),b=(null==(n=a.owner)?void 0:n.__typename)==="Team",x=a.authorizations.viewPermissions.isAuthorized,_=(null==(t=a.org)?void 0:t.type)==="team"?"Access":"Invite",Y=(null==a||null==(i=a.authorizations)||null==(r=i.viewDeploymentConfig)?void 0:r.isAuthorized)&&!y;(0,ad.SJ)(function(){return[cG.toggleInviteDialog.id,function(){return f(function(e){return!e})}]},[f]);var S=(0,ro.p)();return(0,s.FD)(s.FK,{children:[(null==a?void 0:a.lesson)?(0,s.Y)(hb,{lesson:a.lesson}):null,(0,s.FD)(av.ui,{css:hA.socialGroup,background:"root",children:[(0,s.Y)(fX,{onAvatarClick:w}),x?(0,s.Y)(s.FK,{children:(0,s.Y)(of.S,{css:{"&:only-child .invite-button":[op.wp.borderRadius()]},children:(0,s.FD)(dO.Wv,{isOpen:d,placement:"bottom end",label:_,css:hA.invitePopover,onOpenChange:function(e){if(d&&!g)return void f(!1);e&&(0,oJ.u4)(oJ.AZ.INVITE_MODAL_OPENED,{replId:a.id,source:"replEnvironment"}),f(e)},children:[(0,s.Y)(aE.$n,{iconLeft:(0,s.Y)(hY.A,{}),css:hA.inviteButton,className:"invite-button",text:_,"aria-expanded":d,"data-icon-only":l,size:S?"small":void 0}),(0,s.Y)(fT,{handleUpgradeTriggered:function(e){return m(e)},replId:a.id,isTeamRepl:b,org:null!=(o=a.org)?o:void 0})]})})}):null]}),Y&&a?(0,s.Y)(of.S,{children:(0,s.Y)(hs,{iconOnly:l})}):null,y?(0,s.Y)(aE.$n,{text:"Extension Devtools",iconLeft:(0,s.Y)(l9.A,{}),onClick:function(){v({pane:{type:"extensionDevtools"}})}}):null]})}function hk(e){var n=e.currentUser,t=e.hideNotifications,r=(0,d.useRouter)(),i=(0,cs.A)();return(0,s.Y)(s.FK,{children:i?(0,s.Y)(pW.L,{}):(0,s.FD)(s.FK,{children:[t?null:(0,s.Y)(of.S,{row:!0,children:(0,s.Y)(h_.A,{pathname:r.pathname,showCount:!1})}),(0,s.Y)(hx.Ay,{currentUser:n,hideTeamInHeader:!0})]})})}function hE(){var e=(0,h._)(["\n  query WorkspaceRunButton($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return hE=function(){return e},e}var hC={},hD=(0,g.J1)(hE()),hR=t(57880),hF=t(69272),hU=t(39169),hP=t(77481),hO=t(77898),hT=function(e){return e.Welcome="Welcome",e.AiFirstWorkspace="AiFirstWorkspace",e.Assistant="Assistant",e.Agent="Agent",e.SidebarDock="SidebarDock",e.Run="Run",e.Deploy="Deploy",e}({}),hL=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},hM=(0,rA.x)({tooltipContainer:[op.wp.width("100%"),op.wp.maxWidth(300),op.wp.center,op.wp.position.relative,op.wp.colWithGap(8),op.wp.pb(8)],image:[op.wp.borderRadius(8)],textContent:[op.wp.width("100%")]}),hG={id:"AiFirstWorkspace",title:"Welcome to the Workspace",isModal:!0,content:function(){return(0,s.Y)(of.S,{css:hM.tooltipContainer,"data-cy":"workspace-tour-welcome",children:(0,s.Y)(aC.EY,{css:hM.textContent,children:"This is where all the magic happens. Let's take a look around!"})})}},hN={id:"AiFirstWorkspace",title:"The AI-first Workspace",isModal:!0,content:function(){return(0,s.FD)(of.S,{css:hM.tooltipContainer,"data-cy":"workspace-tour-welcome",children:[(0,s.FD)(aC.EY,{css:hM.textContent,children:["Your workspace has a powerful AI chat called"," ",(0,s.Y)("strong",{children:cu.BP})," which can be used in all your projects."]}),(0,s.Y)(uV.A,{css:hM.image,src:"/public/images/ai/assistant.png",alt:"Assistant available",layout:"fixed",width:300,height:168})]})}},hz={id:"Assistant",title:"".concat(cu.BP,": Chat & quick edits"),icon:function(){return(0,s.Y)(o1.A,{size:16})},content:function(){return(0,s.FD)(of.S,{css:hM.tooltipContainer,children:[(0,s.FD)(aC.EY,{css:hM.textContent,children:[(0,s.Y)("strong",{children:cu.BP})," is a general AI chat for your project."]}),(0,s.Y)(hU.A,{src:hL("assistant-dark"),autoPlay:!0,loop:!0}),(0,s.Y)(hP.s,{css:hM.textContent,children:(0,s.FD)("p",{children:["Use ",(0,s.Y)("strong",{children:cu.BP})," when you want toâ€¦",(0,s.FD)("ul",{children:[(0,s.Y)("li",{children:"Chat with AI about any topic"}),(0,s.Y)("li",{children:"Request quick, one-off edits to code"}),(0,s.Y)("li",{children:"Ask questions about your project"})]})]})}),(0,s.FD)(aC.EY,{color:"dimmer",variant:"small",multiline:!1,children:[hF.a7," cents per ",hF.go]})]})},autoSkipIfNoTarget:!0},hH={id:"Agent",title:"".concat(cu.g$,": Automated developer"),icon:function(){return(0,s.Y)(hO.A,{size:16})},content:function(){return(0,s.FD)(of.S,{css:hM.tooltipContainer,children:[(0,s.FD)(aC.EY,{css:hM.textContent,children:[(0,s.Y)("strong",{children:cu.g$})," is an automated developer that plans and generates entire projects, occasionally pausing to ask you for feedback."]}),(0,s.Y)(hU.A,{src:hL("agent-dark"),autoPlay:!0,loop:!0}),(0,s.Y)(hP.s,{css:hM.textContent,children:(0,s.FD)("p",{children:["Use ",(0,s.Y)("strong",{children:cu.g$})," when you want toâ€¦",(0,s.FD)("ul",{children:[(0,s.Y)("li",{children:"Build a new project from scratch"}),(0,s.Y)("li",{children:"Generate a build plan for your project"}),(0,s.Y)("li",{children:"Make complex, multi-step changes"})]})]})}),(0,s.FD)(aC.EY,{color:"dimmer",variant:"small",multiline:!1,children:["Variable pricing per ",hF.v7]})]})},autoSkipIfNoTarget:!0},hW={id:"SidebarDock",title:"Dock: Open files & tools",icon:function(){return(0,s.Y)(sl.A,{size:16})},content:function(){return(0,s.FD)(of.S,{css:hM.tooltipContainer,children:[(0,s.Y)(aC.EY,{css:hM.textContent,children:"In addition to AI tools, you can access code files and other workspace features via the Dock."}),(0,s.Y)(hU.A,{src:hL("sidebar"),autoPlay:!0,loop:!0}),(0,s.FD)(aC.EY,{css:hM.textContent,children:["Notice that ",(0,s.Y)("strong",{children:"Files"})," has its own button at the top left."]})]})}},hB={id:"Run",title:"Run Button: Preview your App",icon:function(){return(0,s.Y)(cV.A,{size:16})},content:function(){return(0,s.FD)(of.S,{css:hM.tooltipContainer,children:[(0,s.FD)(aC.EY,{css:hM.textContent,children:["Click the ",(0,s.Y)("strong",{children:"Run button"})," at any time to see the output of your app."]}),(0,s.Y)(hU.A,{src:hL("run-button"),autoPlay:!0,loop:!0})]})},advanceOnTargetClick:!0},hj="workspace-desktop-tour-2024",h$=(o={},(0,nX._)(o,cR.ll.IDLE,"Run"),(0,nX._)(o,cR.ll.RUNNING,"Stop"),(0,nX._)(o,cR.ll.STOPPING,"Stopping"),(0,nX._)(o,cR.ll.OFFLINE,"Working"),(0,nX._)(o,cR.ll.BEFORE_RUN,"Working"),o),hq=t(39030),hV=t(70111),hK=t(77901),hZ=[op.wp.rowWithGap(4),op.wp.justify.center,op.wp.align.center,op.wp.height(32),op.wp.minWidth(48),op.wp.px(8),op.wp.borderRadius(4),op.wp.cursor.pointer,op.wp.position.relative,op.wp.fontWeight.medium,op.wp.zIndex(1)],hJ=(0,rA.x)({wrapper:[op.wp.noDragRegion,op.wp.position.relative,op.wp.borderRadius("default")],runButtonLabel:[op.wp.display.none,(0,nX._)({},"@media (min-width: ".concat(sD.LO.tabletMax,"px)"),[op.wp.display.block])],runButtonIdle:(0,ek._)(hZ).concat([op.wp.color.accentPositiveStrongest,op.wp.backgroundColor.accentPositiveDimmer,{border:"1px solid",borderColor:"transparent","&:disabled":[op.wp.color.foregroundDimmer,op.wp.backgroundColor.backgroundHighest,op.wp.cursor.default],"&:hover:not(:disabled)":[{color:"white"},op.wp.backgroundColor.accentPositiveDefault],":focus-visible":{outlineColor:"".concat(rS.LU.accentPositiveStrongest)}}]),runButtonRunning:(0,ek._)(hZ).concat([op.wp.color.foregroundDimmer,op.wp.backgroundColor.backgroundHighest,{border:"1px solid",borderColor:"transparent","&:hover":[op.wp.color.foregroundDefault,op.wp.backgroundColor.greyDimmest],"&:active":[{borderColor:rS.LU.accentPrimaryDefault}]}]),runButtonRunByAgent:(0,ek._)(hZ).concat([op.wp.color.foregroundDefault,op.wp.backgroundColor.blurpleDimmer,op.wp.maxWidth(68),{border:"1px solid",borderColor:"transparent","&:before":[{content:'"Running"'}],"&:hover":[op.wp.color.foregroundDimmer,op.wp.backgroundColor.blurpleDimmest,op.wp.minWidth(68),{"&::before":[{content:'"Stop"'}]}],"&:active":[{borderColor:rS.LU.accentPrimaryDefault}]}]),agentBanner:[op.wp.colorMixBg(rS.LU.blurpleDimmest,"transparent",.6),op.wp.borderRadius("default",0,0,"default"),{'&[data-visible="false"]':{visibility:"hidden",transform:"translateX(30px)",position:"absolute",maxWidth:0,opacity:0},'&[data-visible="true"]':{transform:"translateX(4px)",opacity:1,visibility:"visible",justifyContent:"center",height:"32px",maxWidth:"32px",paddingY:"4px",padding:"4px 8px 4px 6px"},transition:"\ntransform 0.2s linear,\nopacity 0.2s linear\n"}]});function hQ(e){var n=e.isOffline,t=e.isAgentRunningWorkflow,r=e.isDisabled,i=e.isRunning,o=e.runButtonName,a=e.shortcut,l=e.isAgentRunButtonNotConfigured,u=e.isStatusButton;if(n)return"Connecting to the workspace";if(t)return u?"Stop App (Agent is running it)":"Agent is running your App";if(l)return"Agent hasn't configured the run button yet";if(r)return"Run button is not configured";var c=(0,cR.y$)(o);return(0,s.FD)(of.S,{px:4,gap:4,justify:"center",align:"center",children:[o?(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",children:i?h$[cR.ll.RUNNING]+" all workflows":h$[cR.ll.IDLE]+" ".concat(c)}):null,a?(0,s.Y)(ad._y,{keyCombo:a,fontSize:12}):null]})}function hX(e){var n=e.stop,t=e.cancel;return(0,s.FD)(of.S,{children:[(0,s.Y)(aC.EY,{children:"Stopping your project while the agent is working can lead to unexpected interruptions that incur additional costs. Are you sure you want to stop?"}),(0,s.FD)(of.S,{pt:12,row:!0,gap:12,justify:"end",children:[(0,s.Y)(aE.$n,{text:"Cancel",onClick:t}),(0,s.Y)(aE.$n,{iconLeft:(0,s.Y)(hK.A,{}),text:"Stop",onClick:function(){n(),t()},colorway:"negative"})]})]})}function h0(e){var n=e.isRunning,t=e.isAgentRunningWorkflow,r=e.isDisabled,i=e.isAgentRunButtonNotConfigured,o=e.handleRunButtonClick,a=(0,c._)((0,p.useState)(!1),2),l=a[0],u=a[1];return t?(0,s.FD)(s.FK,{children:[(0,s.Y)(am.a,{isOpen:l,onRequestClose:function(){return u(!1)},children:(0,s.Y)(hX,{stop:o,cancel:function(){return u(!1)}})}),(0,s.Y)(of.S,{tag:"button",css:hJ.runButtonRunByAgent,onClick:function(){return u(!0)}})]}):n?(0,s.FD)(of.S,{tag:"button",css:hJ.runButtonRunning,onClick:o,children:[(0,s.Y)(hK.A,{size:16}),(0,s.Y)(aC.EY,{multiline:!1,css:hJ.runButtonLabel,children:h$[cR.ll.RUNNING]})]}):(0,s.FD)(of.S,{tag:"button",disabled:r||i,css:hJ.runButtonIdle,onClick:o,children:[(0,s.Y)(hV.A,{size:16}),(0,s.Y)(aC.EY,{multiline:!1,css:hJ.runButtonLabel,children:h$[cR.ll.IDLE]})]})}function h1(){var e,n,t,r,i,o=(r={variables:{id:(0,ei.A)()}},i=(0,f._)({},hC,r),m.I(hD,i)).data,a=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl:null,l=(n=null==(e=(0,dV.Os)(hj,hT.Run))?void 0:e.isActive,{tourRefs:e.tourRef,isAnyTourStepActive:n}).tourRefs,u=(0,ad.Jn)(cG.run.id),s=(0,c._)((0,p.useState)(!1),2),d=s[0],h=s[1],g=(0,cL.g3)(),v=null!=(t=null==g?void 0:g.workflowId)?t:cR.Ov,w=(0,cL.lO)(),y=w.isRunning,b=w.isAgentRunningWorkflow,x=w.isOffline,_=w.isWorkflowsLoading,Y=w.isDisabled,S=(0,p.useMemo)(function(){return x||_},[x,_]),A=(0,hR.F)(),I=(0,cL.qP)();return(0,p.useEffect)(function(){b&&d&&h(!1)},[b,d]),{tourRefs:l,isAgentRunningWorkflow:b,isOffline:x,isOfflineOrLoading:S,isWorkflowsLoading:_,runButtonName:v,runShortcut:u,isRunning:y,isDisabled:Y,handleRunButtonClick:(0,p.useCallback)(function(){if(a){var e,n,t,r,i,o,l;(0,oJ.u4)(oJ.AZ.PROJECT_RAN,{placement:"primary_btn",replId:a.id,replTitle:a.title,rootOriginReplUrl:a.rootOriginReplUrl,templateTitle:null==(t=a.source)||null==(n=t.release)||null==(e=n.repl)?void 0:e.title,templateOwner:null==(l=a.source)||null==(o=l.release)||null==(i=o.repl)||null==(r=i.owner)?void 0:r.username})}(0,oJ.u4)(oJ.AZ.RUN_BUTTON_CLICKED,{source:"header",runner:"workflows"}),I()},[a,I]),dropdownEnabled:!S&&!A,isAgentRunButtonNotConfigured:A}}function h2(e){var n=e.attachTourRefs,t=h1(),r=t.tourRefs,i=t.isAgentRunningWorkflow,o=t.isOffline,a=t.isOfflineOrLoading,l=t.runButtonName,u=t.runShortcut,c=t.isRunning,d=t.isDisabled,p=t.handleRunButtonClick,f=t.dropdownEnabled,h=t.isAgentRunButtonNotConfigured,g=di();return(0,s.FD)(of.S,{innerRef:void 0!==n&&n?r:void 0,css:hJ.wrapper,row:!0,align:"center",children:[(0,s.Y)(of.S,{css:hJ.agentBanner,"data-visible":i&&!o?"true":"false",children:(0,s.Y)(hO.A,{})}),(0,s.Y)(uv.m_,{placement:"bottom",tooltip:hQ({isRunning:c,isAgentRunningWorkflow:i,isDisabled:d,isOffline:a,runButtonName:l,shortcut:u,isAgentRunButtonNotConfigured:h}),children:a?(0,s.FD)(of.S,{tag:"button",disabled:!0,css:hJ.runButtonRunning,children:[(0,s.Y)(du.A,{size:16}),(0,s.Y)(aC.EY,{multiline:!1,css:hJ.runButtonLabel,children:"Loading"})]}):(0,s.Y)(of.S,{dataCy:"ws-run-btn",children:(0,s.Y)(h0,{isRunning:c,isAgentRunningWorkflow:i,isDisabled:d,isAgentRunButtonNotConfigured:h,handleRunButtonClick:p})})}),f?(0,s.Y)(hq.A,{openPane:g,isVisible:!i}):null]})}var h4=t(69490),h5=t.n(h4),h3=(0,rS.CK)("index.module.css",["--height"]);let h8=(0,p.memo)(function(e){var n,t=e.repl,r=e.currentUser,i=(0,cs.A)(),o=(0,dw.d0)(),a="centeredVisualPlanner"===oW(),l=(0,B.jt)()&&(null==t||null==(n=t.config)?void 0:n.isInPlanningPhase)===!0;return(0,s.Y)(av.ui,{tag:"header",px:12,pl:8,style:(0,nX._)({backgroundColor:"transparent"},h3.height,ra.uF+"px"),clsx:[h5().root,(0,nX._)({},h5().desktopAppWindowsOs,i&&o)],children:t&&r?(0,s.FD)(s.FK,{children:[(0,s.Y)("div",{clsx:(0,nX._)({},h5().opaqueOnHover,a),children:(0,s.Y)(pD,{repl:t,isAgentCentered:a})}),(0,s.Y)(h7,{isAgentCentered:a,isVisualPlanningLayout:l}),(0,s.Y)("div",{clsx:(0,nX._)({},h5().opaqueOnHover,a),children:(0,s.Y)(hS,{repl:t,currentUser:r,hideRightActions:a||l})})]}):null})});function h7(e){var n=e.isAgentCentered,t=e.isVisualPlanningLayout,r=(0,dy.A)();return t?(0,s.Y)(pz,{}):n?(0,s.Y)(of.S,{}):(null==r?void 0:r.status)==="error"||(null==r?void 0:r.status)==="rebuilding-after-error"?(0,s.Y)(pO,{nixState:r}):(0,s.Y)(h2,{attachTourRefs:!0})}var h6=(0,rI.v)(["opacity","pointerEvents"]),h9=h6.cssVars,ge=h6.styleTokens,gn=(0,um.i7)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),gt=(0,um.i7)({from:{opacity:0},to:{opacity:1}}),gr={root:(0,um.AH)([op.wp.width("100%"),op.wp.top(0),op.wp.left(0),op.wp.px(12),op.wp.pl(8),op.wp.pt(4),op.wp.position.absolute,op.wp.dragRegion,op.wp.noSelect,op.wp.flex.row,op.wp.justify.spaceBetween,{alignItems:"center",pointerEvents:ge.pointerEvents,opacity:ge.opacity},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(gn," 0.2s ease-in-out, ").concat(gt," 0.2s ease-in-out")},animation:"".concat(gt," 0.2s ease-in-out")}]),left:(0,um.AH)([op.wp.minWidth(100),op.wp.align.start]),right:(0,um.AH)([op.wp.minWidth(100),op.wp.align.end])};let gi=(0,p.memo)(function(e){var n,t=e.doesBonsaiSupportWorkspace2,r="centeredVisualPlanner"===oW();return t?(0,s.FD)(of.S,{style:(n={},(0,nX._)(n,h9.opacity,r?.5:1),(0,nX._)(n,h9.pointerEvents,r?"none":"all"),n),tag:"header",css:gr.root,children:[(0,s.Y)(of.S,{css:gr.left}),r?(0,s.Y)(of.S,{}):(0,s.Y)(h2,{attachTourRefs:!0}),(0,s.Y)(of.S,{css:gr.right,children:r?null:(0,s.Y)(f1,{})})]}):null});var go=t(21727),ga=t(99874),gl=t.n(ga);function gu(e){var n,t={running:e.isAgentRunningWorkflow?(0,s.Y)(cQ.A,{color:rS.LU.blurpleDefault}):(0,s.Y)(hK.A,{color:rS.LU.foregroundDimmest}),stopped:(0,s.Y)(hV.A,{color:e.disabled?rS.LU.foregroundDimmest:rS.LU.accentPositiveStronger}),loading:(0,s.Y)(du.A,{color:rS.LU.foregroundDimmest})}[e.status];return(0,s.FD)(av.ui,{elevated:e.elevated,clsx:[gl().root,(n={},(0,nX._)(n,gl().running,"running"===e.status),(0,nX._)(n,gl().agent,e.isAgentRunningWorkflow),n)],children:[(0,s.Y)(f0.K0,{disabled:e.disabled,dataCy:"ws-run-btn",alt:"Run or stop the app",tooltipContents:e.tooltip,onClick:e.onClick,size:28,children:t}),e.isAgentRunningWorkflow?(0,s.Y)(of.S,{clsx:gl().agentStatusIcon,align:"center",justify:"center",children:(0,s.Y)(hK.A,{size:12,color:rS.LU.foregroundDimmest})}):null]})}function gc(){var e=h1(),n=e.isOfflineOrLoading,t=e.isRunning,r=e.handleRunButtonClick,i=e.isAgentRunningWorkflow,o=e.isDisabled,a=e.runButtonName,l=e.runShortcut,u=e.isAgentRunButtonNotConfigured,d=(0,c._)((0,p.useState)(!1),2),f=d[0],h=d[1],g=t?"running":"stopped";n&&(g="loading");var m=i?function(){return h(!0)}:r;return(0,s.FD)(s.FK,{children:[(0,s.Y)(gu,{disabled:o||u,status:g,isAgentRunningWorkflow:i,onClick:m,tooltip:hQ({isRunning:t,isAgentRunningWorkflow:i,isDisabled:o,isOffline:n,runButtonName:a,shortcut:l,isAgentRunButtonNotConfigured:u,isStatusButton:!0})}),(0,s.Y)(am.a,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,s.Y)(hX,{stop:r,cancel:function(){return h(!1)}})})]})}function gs(e){return(0,s.FD)(oh.Ay,(0,r6._)((0,f._)({},e),{children:[(0,s.Y)("path",{fillRule:"evenodd",d:"M2 4.8A2.8 2.8 0 0 1 4.8 2h13.9a2.8 2.8 0 0 1 2.8 2.8v13.9a2.8 2.8 0 0 1-2.8 2.8H4.8A2.8 2.8 0 0 1 2 18.7V4.8Zm9.25-.3a1 1 0 0 1 1-1h6.45A1.3 1.3 0 0 1 20 4.8v13.9a1.3 1.3 0 0 1-1.3 1.3h-6.45a1 1 0 0 1-1-1V4.5Zm-1.5 0a1 1 0 0 0-1-1H4.8a1.3 1.3 0 0 0-1.3 1.3v13.9A1.3 1.3 0 0 0 4.8 20h3.95a1 1 0 0 0 1-1V4.5Z",clipRule:"evenodd"}),(0,s.Y)("path",{d:"M4.125 4.85a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z"})]}))}function gd(e){return(0,s.Y)(oh.Ay,(0,r6._)((0,f._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M2 4.8A2.8 2.8 0 0 1 4.8 2h13.9a2.8 2.8 0 0 1 2.8 2.8v13.9a2.8 2.8 0 0 1-2.8 2.8H4.8A2.8 2.8 0 0 1 2 18.7V4.8Zm9.25-.3a1 1 0 0 1 1-1h6.45A1.3 1.3 0 0 1 20 4.8v13.9a1.3 1.3 0 0 1-1.3 1.3h-6.45a1 1 0 0 1-1-1V4.5Z",clipRule:"evenodd"})}))}var gp=t(92059),gf=t.n(gp);function gh(e){var n=e.flipped,t=oB(),r=(0,uE.A)(t.isOpen),i=(0,ad.Jn)(ct.id),o=t.toggle;return(0,ad.SJ)(function(){return[ct.id,function(){return o()}]},[o]),(0,s.Y)(f0.K0,{onClick:function(){return o()},alt:"Toggle files",tooltipContents:(0,s.Y)(gg,{isOpen:r,shortcut:i}),size:28,children:(0,s.Y)(r?gd:gs,{clsx:(0,nX._)({},gf().flipped,n)})})}function gg(e){var n=e.shortcut,t=e.isOpen;return(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(aC.EY,{multiline:!1,variant:"small",children:(t?"Close":"Open")+" files"}),n?(0,s.Y)(ad._y,{fontSize:10,keyCombo:n}):null]})}var gm=t(3171),gv=t.n(gm);function gw(e){var n,t,r,i=e.users,o=void 0===i?[]:i,a=e.onAvatarClick,l=e.repl,u=(null==(n=l.owner)?void 0:n.__typename)==="Team",d=(0,c._)((0,p.useState)(!1),2),f=d[0],h=d[1];return(0,s.FD)(of.S,{row:!0,align:"center",gap:4,children:[o.length?(0,s.Y)(gy,{users:o,onAvatarClick:a}):null,(0,s.FD)(dO.Wv,{isOpen:f,onOpenChange:h,label:"Home",placement:"bottom start",children:[(null==(t=l.org)?void 0:t.type)==="team"?(0,s.Y)(aE.$n,{size:"small",iconLeft:(0,s.Y)(hY.A,{}),text:"Access"}):(0,s.Y)(f0.K0,{alt:"Invite collaborator",size:28,children:(0,s.Y)(hY.A,{})}),(0,s.Y)(of.S,{clsx:gv().inviteDialog,children:(0,s.Y)(fT,{replId:l.id,isTeamRepl:u,org:null!=(r=l.org)?r:void 0,handleUpgradeTriggered:function(){}})})]})]})}function gy(e){var n=e.users,t=e.onAvatarClick,r=n.slice(0,2),i=n.length-2,o=(0,c._)((0,p.useState)(!1),2),a=o[0],l=o[1];return(0,s.FD)(of.S,{row:!0,gap:4,children:[r.map(function(e,n){return(0,s.Y)(gb,{onClick:function(){return t(e)},user:e,stacked:n>0},e.username)}),i>0?(0,s.FD)(dO.Wv,{isOpen:a,onOpenChange:l,label:"Home",placement:"bottom start",children:[(0,s.Y)(aE.$n,{size:"small",text:"+".concat(i),clsx:[gv().stacked,gv().remainingCountButton]}),(0,s.FD)(dQ.W1,{children:[(0,s.Y)(dQ.j,{text:"Observe..."}),n.slice(2).map(function(e){return(0,s.Y)(dQ.Dr,{onAction:function(){return t(e)},icon:(0,s.Y)(fa.e,{size:24,src:e.image||null,username:e.username,ringColor:e.color}),label:e.username},e.username)})]})]}):null]})}function gb(e){var n=e.user,t=e.stacked,r=e.onClick;return(0,s.Y)(f0.K0,{alt:"Observe ".concat(n.username),onClick:r,clsx:[gv().avatar,(0,nX._)({},gv().stacked,t)],children:(0,s.Y)(fa.e,{size:24,src:n.image||null,username:n.username,ringColor:n.color})})}var gx=t(9965),g_=t(38328),gY=t(30284),gS=t(71738),gA=t(34305),gI=t(32186),gk=t(33095),gE=t(88067),gC=t(4039),gD=t(40153),gR=t(8058),gF=t(48473),gU=t(32197),gP=t(54766),gO=t(31700),gT=t(88337),gL=t(25326),gM=t(38808),gG=t(95182);t(64053);var gN=t(78745),gz=t(7595),gH=t(68800),gW=t(26454),gB=t(76297),gj=t(84549),g$=t(49941),gq=t(55224),gV=t(53432),gK=t(75429),gZ=t.n(gK);function gJ(e){var n,t,r,i,o,a,l,u,d,h,g,m,v,w,y=(0,c._)((0,p.useState)(null),2),b=y[0],x=y[1],_=(0,c._)((0,p.useState)(!1),2),Y=_[0],S=_[1],A=(0,gE.i)(),I=A.replitStatus,k=A.isOperational,E=(n=e.repl,d={ssr:!1,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"},h=gO.i9,g=(0,gU.Rw)((0,f._)({variables:{count:h},skip:!!(null==(t=n.org)?void 0:t.id)},d)),m=(0,gU.ZO)((0,f._)({variables:{count:h,orgId:null==(r=n.org)?void 0:r.id},skip:!(null==(i=n.org)?void 0:i.id)},d)),v=[],((null==(l=m.data)||null==(a=l.currentUser)||null==(o=a.org)?void 0:o.__typename)==="Org"?v=m.data.currentUser.org.recentRepls.items:(null==(u=g.data)?void 0:u.allRecentRepls)&&(v=g.data.allRecentRepls),(v=v.filter(function(e){return e.id!==n.id}).slice(0,gP.G)).length)?v:null),C=(0,gD.A)().count;return(0,s.FD)(of.S,{clsx:gZ().container,children:[(0,s.Y)(gA.h8,{children:(0,s.FD)(dO.Wv,{isOpen:Y,onOpenChange:S,label:"Home",placement:"bottom start",children:[(0,s.Y)(aE.$n,{variant:"nofill",clsx:gZ().button,text:"",iconLeft:(0,s.Y)(gH.A,{}),iconRight:(0,s.Y)(fl.A,{size:12})}),(0,s.Y)(gX,{activeModal:b,setActiveModal:x,replitStatus:I,orgSlug:null==(w=e.repl.org)?void 0:w.slug,recentRepls:E,currentUser:e.currentUser,notificationCount:C})]})}),C>0?(0,s.Y)(of.S,{clsx:gZ().notificationIndicator}):null,"loading"===I||k||Y?null:(0,s.Y)(of.S,{clsx:[gZ().statusIndicator,(0,nX._)({},gZ().bottom,C)],children:(0,s.Y)(gL.kx,{isOperational:!1,size:8})}),(0,s.FD)(am.a,{isOpen:null!==b,onRequestClose:function(){return x(null)},children:["support"===b?(0,s.Y)(gM.A,{onRequestClose:function(){return x(null)}}):null,"notifications"===b?(0,s.Y)(gQ,{}):null,"referral"===b?(0,s.Y)(gS.Wx,{trackingContext:"workspace-nav-menu"}):null]})]})}function gQ(){return(0,s.FD)(of.S,{gap:12,children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Notifications"}),(0,s.Y)(gC.A,{count:10,loadMore:!0,markAsSeen:!0})]})}function gX(e){var n=e.orgSlug,t=e.activeModal,r=e.setActiveModal,i=e.replitStatus,o=e.recentRepls,a=e.currentUser,l=e.notificationCount,u=n?(0,dj.EG)({slug:n}).home:{href:"/home",as:"/~"};return(0,s.Y)(of.S,{py:6,clsx:gZ().popover,children:(0,s.FD)(dQ.W1,{clsx:gZ().menu,"aria-label":"Navigation menu",children:[(0,s.Y)(dQ.Dr,{icon:(0,s.Y)(fc.A,{}),label:"Home",href:u.href,as:u.as}),o?(0,s.Y)(g0,{repls:o}):null,"error"===i?(0,s.Y)(g2,{replitStatus:i}):null,(0,s.Y)(g5,{setActiveModal:r,currentUser:a,notificationCount:l}),l>0?(0,s.Y)(g3,{count:l,onAction:function(){return r("notifications")}}):null,a.isMemberOfAnyOrg?(0,s.Y)(g8,{currentUser:a}):null,(0,s.Y)(dQ.wv,{}),(0,s.Y)(g7,{}),(0,s.Y)(g4,{activeModal:t,setActiveModal:r,replitStatus:i})]})})}function g0(e){var n=e.repls;return(0,s.FD)(gx.H9,{children:[(0,s.Y)(dQ.j,{text:"Recent"}),n.map(function(e){return(0,s.Y)(g1,{repl:e},e.id)})]})}function g1(e){var n=e.repl,t=(0,gk.k)(n);return(0,s.FD)(dQ.iy,(0,r6._)((0,f._)({textValue:n.title,clsx:gZ().repl},(0,d2.q1)(n)),{children:[(0,s.FD)(of.S,{align:"center",row:!0,gap:6,grow:!0,shrink:!0,pl:0,children:[(0,s.Y)(cb.Ay,{size:20,alt:n.title,iconUrl:n.iconUrl}),(0,s.Y)(aC.EY,{children:n.title})]}),t&&"Paused"!==t.label?(0,s.Y)(aC.EY,{variant:"small",color:"dimmer",children:t.label}):null]}),n.id)}function g2(e){var n=e.replitStatus;return(0,s.Y)(dQ.iy,{textValue:"Status",children:(0,s.Y)(of.S,{row:!0,align:"center",tag:"a",href:"https://status.replit.com",target:"_blank",gap:6,clsx:gZ().link,children:(0,s.Y)(gL.b$,{status:n})})})}function g4(e){var n=e.activeModal,t=e.setActiveModal,r=e.replitStatus;return(0,s.Y)(s.FK,{children:(0,s.FD)(gx.kM,{children:[(0,s.Y)(dQ.iy,{textValue:"Help",children:(0,s.FD)(of.S,{align:"center",row:!0,gap:6,justify:"space-between",grow:!0,shrink:!0,children:[(0,s.FD)(of.S,{align:"center",grow:!0,shrink:!0,row:!0,gap:6,children:[(0,s.Y)(gB.A,{}),(0,s.Y)(aC.EY,{children:"Help"})]}),(0,s.Y)(pn.A,{size:12})]})}),(0,s.Y)(dO.g_,{offset:4,children:(0,s.Y)(of.S,{py:6,children:(0,s.FD)(dQ.W1,{clsx:gZ().menu,children:["error"!==r?(0,s.Y)(g2,{replitStatus:r}):null,(0,s.Y)(dQ.Dr,{label:"Get help",icon:(0,s.Y)(gB.A,{size:16}),onAction:function(){"support"!==n?(t("support"),(0,oJ.u4)(gY.AZ.HELP_FORM_OPENED,{type:"New Help Form"})):t(null)}}),(0,s.Y)(dQ.Dr,{icon:(0,s.Y)(fu.A,{}),label:"Community Hub",href:n1.WA}),(0,s.Y)(dQ.Dr,{icon:(0,s.Y)(cJ.A,{}),label:"View updates",href:n1.ik.CHANGELOG,onAction:function(){(0,oJ.u4)(gY.AZ.CHANGELOG_OPENED)}}),(0,s.Y)(dQ.Dr,{icon:(0,s.Y)(l6.A,{}),label:"Read the docs",href:n1.ik.HOME,onAction:function(){(0,oJ.u4)(gY.AZ.DOCS_OPENED,{source:"help_menu"})}})]})})})]})})}function g5(e){var n=e.currentUser,t=e.setActiveModal,r=e.notificationCount;(0,aF.A)().showConfirm;var i=(0,gF.M)(n),o=(0,gI.ET)().orgId;return(0,s.FD)(gx.kM,{children:[(0,s.Y)(dQ.iy,{textValue:"Help",children:(0,s.FD)(of.S,{align:"center",row:!0,gap:6,justify:"space-between",grow:!0,shrink:!0,children:[(0,s.FD)(of.S,{align:"center",grow:!0,shrink:!0,row:!0,gap:6,children:[(0,s.Y)(fa.e,{size:16,src:n.image,username:n.username}),(0,s.Y)(aC.EY,{multiline:!1,children:n.username})]}),n.userSubscriptionType===pq.Ohf.HackerPro?(0,s.Y)(gT.Jj,{}):null,(0,s.Y)(pn.A,{size:12})]})}),(0,s.Y)(dO.g_,{offset:4,children:(0,s.Y)(of.S,{py:6,children:(0,s.FD)(dQ.W1,{clsx:gZ().menu,children:[null,(0,s.Y)(dQ.Dr,{label:"Profile",as:i.as,href:i.href,dataCy:"avatar-dropdown-account-link",icon:(0,s.Y)(gV.A,{})}),(0,s.Y)(dQ.Dr,{label:"Account",as:"/account",href:"/account",dataCy:"avatar-dropdown-account-link",icon:(0,s.Y)(cC.A,{})}),r?null:(0,s.Y)(g3,{onAction:function(){t("notifications")}}),(0,s.Y)(dQ.wv,{}),(0,s.Y)(dQ.Dr,{label:"Create Team",href:dj.NI.href,icon:(0,s.Y)(fC.A,{})}),(0,s.Y)(dQ.Dr,{label:"CLUI",as:"/~/cli",href:"/~/cli",icon:(0,s.Y)(g$.A,{})}),void 0===o?(0,s.Y)(dQ.Dr,{label:"Refer and earn",onAction:function(){t("referral")},icon:(0,s.Y)(gz.A,{})}):null,(0,s.Y)(dQ.wv,{}),(0,s.Y)(dQ.Dr,{label:"Log out",href:"/logout",icon:(0,s.Y)(gN.A,{})})]})})})]})}function g3(e){var n=e.count,t=e.onAction;return(0,s.Y)(dQ.iy,{textValue:"Help",onAction:t,children:(0,s.FD)(of.S,{align:"center",row:!0,gap:6,justify:"space-between",grow:!0,shrink:!0,children:[(0,s.FD)(of.S,{align:"center",grow:!0,shrink:!0,row:!0,gap:6,children:[(0,s.Y)(gG.A,{}),(0,s.Y)(aC.EY,{children:"Notifications"})]}),n?(0,s.Y)(of.S,{clsx:gZ().notificationCount,align:"center",justify:"center",children:(0,s.Y)(aC.EY,{variant:"small",children:n})}):null]})})}function g8(e){var n,t,r=e.currentUser,i=null==r?void 0:r.orgs,o=(0,gI.ET)(),a=o.orgId,l=o.switchOrg,u=o.loading,c=(null==i?void 0:i.__typename)==="CurrentUserOrganizationConnection"?null==(n=i.items.find(function(e){var n;return(null==(n=e.org)?void 0:n.id)===a}))?void 0:n.org:null,p="CurrentUserOrganizationConnection"===r.orgs.__typename?r.orgs.items:null,f=(0,aF.A)().showError,h=(0,d.useRouter)();if(!(null==p?void 0:p.length)||u)return null;var g=function(e){if(!e.currentUserRole)return void f("Something went wrong, please try again.");l({type:cM.tWI.Team,id:e.id,slug:e.slug,orgRole:e.currentUserRole,orgDealContext:e.dealContext});var n=(0,dj.EG)({slug:e.slug}).home;h.push(n.href,n.as)};return(0,s.FD)(gx.H9,{children:[(0,s.Y)(dQ.j,{text:"Workspace"}),(0,s.FD)(gx.kM,{children:[(0,s.Y)(dQ.iy,{textValue:"Current context",children:(0,s.FD)(of.S,{align:"center",row:!0,gap:6,justify:"space-between",grow:!0,shrink:!0,children:[(0,s.Y)(of.S,{align:"center",grow:!0,shrink:!0,row:!0,gap:6,children:c?(0,s.FD)(s.FK,{children:[(0,s.Y)(fa.e,{size:16,src:null!=(t=c.image)?t:null,username:c.name,fullName:c.name}),(0,s.Y)(aC.EY,{children:c.name})]}):(0,s.FD)(s.FK,{children:[(0,s.Y)(gq.A,{}),(0,s.Y)(aC.EY,{children:"Personal"})]})}),(0,s.Y)(pn.A,{size:12})]})}),(0,s.Y)(dO.g_,{offset:4,children:(0,s.Y)(of.S,{py:6,children:(0,s.FD)(dQ.W1,{clsx:gZ().menu,children:[(0,s.Y)(dQ.j,{text:"Switch to..."}),(0,s.Y)(dQ.iy,{textValue:"Personal",onAction:function(){o.switchOrg({type:cM.tWI.Personal}),h.push("/home","/~",{shallow:!1})},children:(0,s.FD)(of.S,{row:!0,gap:6,align:"center",children:[(0,s.Y)(fa.e,{src:r.image,username:r.username,fullName:r.username,size:20}),(0,s.Y)(aC.EY,{children:"Personal"}),void 0===o.orgId?(0,s.Y)(d4.A,{}):null]})}),p.map(function(e){var n,t=e.org,r=e.type;return(0,s.Y)(dQ.iy,{textValue:t.name,onAction:function(){return g(t)},children:(0,s.FD)(of.S,{row:!0,gap:6,align:"center",children:[(0,s.Y)(fa.e,{src:null!=(n=t.image)?n:null,username:t.name,fullName:t.name,size:20}),(0,s.Y)(aC.EY,{children:t.name}),r?(0,s.Y)(aC.EY,{variant:"small",color:"dimmest",children:(0,gR.ep)(r)}):null,t.id===o.orgId?(0,s.Y)(d4.A,{}):null]})},t.id)})]})})})]})]})}function g7(){var e,n,t,r,i=(0,l2.D)(),o=i.theme,a=i.setActiveTheme,l=(0,g_.tS)({variables:{input:{}}}).data,u=(0,g_.Np)({variables:{input:{}}}).data,c=(null==l||null==(n=l.currentUser)||null==(e=n.installedThemes)?void 0:e.__typename)==="InstalledThemeConnection"?l.currentUser.installedThemes.items.map(function(e){return e.customTheme}):[],d=(null==u||null==(r=u.currentUser)||null==(t=r.authoredThemes)?void 0:t.__typename)==="CustomThemeConnection"?u.currentUser.authoredThemes.items:[],p=function(e){("number"==typeof e||"replitSpooky"===e)&&a(e)};return"replitSpooky"!==o.id&&"number"!=typeof o.id?(0,s.Y)(dQ.iy,{style:{backgroundColor:"transparent"},textValue:"Themes",onAction:function(){return a("replitDark"===o.id?"replitLight":"replitDark")},children:(0,s.FD)(of.S,{align:"center",row:!0,gap:6,justify:"space-between",grow:!0,shrink:!0,children:[(0,s.FD)(of.S,{align:"center",row:!0,gap:6,grow:!0,shrink:!0,children:[(0,s.Y)(cE.A,{}),(0,s.Y)(aC.EY,{multiline:!1,children:"Theme"})]}),(0,s.FD)(of.S,{row:!0,gap:4,children:[(0,s.Y)(av.ui,{align:"center",justify:"center",elevated:"replitDark"===o.id,clsx:gZ().themeIcon,children:(0,s.Y)(gW.A,{})}),(0,s.Y)(av.ui,{elevated:"replitLight"===o.id,clsx:gZ().themeIcon,justify:"center",align:"center",children:(0,s.Y)(gj.A,{})})]})]})}):(0,s.FD)(gx.kM,{children:[(0,s.Y)(dQ.iy,{textValue:"Themes",children:(0,s.FD)(of.S,{align:"center",row:!0,gap:6,justify:"space-between",grow:!0,shrink:!0,children:[(0,s.FD)(of.S,{align:"center",row:!0,gap:6,grow:!0,shrink:!0,children:[(0,s.Y)(cE.A,{}),(0,s.Y)(aC.EY,{multiline:!1,children:"Themes"})]}),(0,s.Y)(pn.A,{size:12})]})}),(0,s.Y)(dO.g_,{offset:4,children:(0,s.Y)(of.S,{py:6,children:(0,s.FD)(dQ.W1,{clsx:gZ().menu,children:[(0,s.Y)(g6,{icon:(0,s.Y)(gj.A,{}),label:"Light",onAction:function(){return a("replitLight")},right:"replitLight"===o.id?(0,s.Y)(d4.A,{}):void 0}),(0,s.Y)(g6,{icon:(0,s.Y)(gW.A,{}),label:"Dark",onAction:function(){return a("replitDark")},right:"replitDark"===o.id?(0,s.Y)(d4.A,{}):void 0}),(0,s.Y)(g6,{label:"Spooky",onAction:function(){return a("replitSpooky")},right:"replitSpooky"===o.id?(0,s.Y)(d4.A,{}):void 0}),d.map(function(e){return(0,s.Y)(g6,{label:e.title,onAction:function(){return p(e.id)},right:o.id===e.id?(0,s.Y)(d4.A,{}):void 0},e.id)}),c.map(function(e){return(0,s.Y)(g6,{label:e.title,onAction:function(){return p(e.id)},right:o.id===e.id?(0,s.Y)(d4.A,{}):void 0},e.id)})]})})})]})}function g6(e){var n;return(0,s.FD)(dQ.iy,{textValue:e.label,onAction:e.onAction,children:[(0,s.Y)(oh.Z_,{size:16,children:e.icon}),(0,s.Y)(dQ.Vk,{children:e.label}),null!=(n=e.right)?n:null]})}function g9(e){var n,t=(n=rp(iy),(0,p.useMemo)(function(){return new ec.V_(function(e){return e.next(n.current),n.subscribe(function(n){return e.next(n)})})},[n])),r=(0,es._)(iv,rs()),i=(0,es._)(rz,rs());return(0,p.useMemo)(function(){var n,o,a;return n={headerWidth:ec.cP.from(r).select(function(n){return n[e]}),tabHeaderWidth:t.select(function(n){return n[e]}),sidebarWidth:ec.cP.from(i).select(function(n){return n[e]})},o=null,a=null,new ec.V_(function(e){return ec.cP.combine(n.headerWidth,n.tabHeaderWidth,n.sidebarWidth).subscribe(function(n){var t=(0,c._)(n,3),r=t[0],i=t[1],l=t[2];if(null!==r){var u=null===a?null:a-r+10;if(null!==a&&l>a){"large"!==o&&(o="large",e.next("large"));return}if(i<=200&&"small"!==o){o="small",a=r,e.next("small");return}i>200&&"large"!==o&&(null===u||i>200+u)&&(o="large",e.next("large"))}})})},[t,r,i,e])}var me=t(40607),mn=t.n(me),mt=(0,rS.CK)("index.module.css",["--z-index"]);function mr(e){var n=rf(iw);return(0,go.A)(function(t){return n(e,t.width)})}function mi(){return(0,nX._)({},mt.zIndex,rY.W.tiledPane.toString())}function mo(e){var n=e.repl,t=e.currentUser,r=oW();return(0,s.FD)(s.FK,{children:[(0,s.Y)(ma,{repl:n,currentUser:t}),(0,s.Y)(ml,{repl:n}),"centeredVisualPlanner"===r?(0,s.Y)(mu,{repl:n,currentUser:t}):null]})}function ma(e){var n=e.repl,t=e.currentUser,r=o$(),i=(0,uE.A)(r.agentFiletreeOrder),o=mi(),a=rh(tr),l=mr("left"),u=(0,es.J2)(g9("left"));return(0,s.Y)(of.S,{row:!0,align:"center",innerRef:l,style:o,clsx:mn().left,children:(0,s.FD)(of.S,{px:6,row:!0,align:"center",children:[(0,s.Y)(d_.A,{}),"agent-filetree"!==i?(0,s.Y)(gh,{}):null,(0,s.Y)(gJ,{currentUser:t,repl:n}),(0,s.Y)(pk,{repl:n,getDesktopLayoutState:a,hideTitle:"small"===u}),(0,s.Y)(gc,{})]})})}function ml(e){var n,t,r=e.repl,i=mr("right"),o=mi(),a=o$(),l=(0,uE.A)(a.agentFiletreeOrder),u=(0,es.J2)(g9("right")),c=r.authorizations.viewPermissions.isAuthorized,d=null==(t=r.authorizations)||null==(n=t.viewDeploymentConfig)?void 0:n.isAuthorized,p=(0,uq.Q4)(),f=pB(oM());return(0,s.Y)(of.S,{row:!0,align:"center",style:o,clsx:mn().right,innerRef:i,children:(0,s.FD)(of.S,{px:6,row:!0,gap:4,align:"center",children:[(0,s.Y)(f1,{}),c?(0,s.Y)(gw,{repl:r,users:p,onAvatarClick:f}):null,d?(0,s.Y)(hs,{iconOnly:"small"===u}):null,"agent-filetree"===l?(0,s.Y)(gh,{flipped:!0}):null]})})}function mu(e){var n=e.currentUser,t=e.repl,r=mi();return(0,s.FD)(av.ui,{row:!0,clsx:mn().planningHeader,justify:"space-between",align:"center",px:6,style:r,children:[(0,s.FD)(of.S,{px:6,row:!0,align:"center",children:[(0,s.Y)(d_.A,{}),(0,s.Y)(gJ,{currentUser:n,repl:t}),(0,s.Y)(aC.EY,{children:t.title})]}),(0,s.Y)(pz,{}),(0,s.Y)(of.S,{})]})}function mc(){var e=(0,h._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return mc=function(){return e},e}var ms=(0,g.J1)(mc());function md(){return"Notification"in window?"true"===n8.A.get(mp,"string")?"dismissed":window.Notification.permission:"denied"}var mp="notifications/dismissedModal";function mf(e){n8.A.set(mp,String(e))}var mh={};function mg(e){return(0,n4._)(function(e){var n,t,r,i,o,a,l,u,c,s,d;return(0,n5.YH)(this,function(p){switch(p.label){case 0:if(n=e.title,t=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,l=e.onClick,c=void 0===(u=e.cacheDuration)?0:u,!document.hidden&&document.hasFocus()||"granted"!==md()||(s=Date.now(),a in mh&&mh[a]+c>s))return[2];if(!o)return[3,2];return[4,(0,n4._)(function(){var e,n;return(0,n5.YH)(this,function(t){switch(t.label){case 0:if(null===n3.V)return[2];return[4,n3.V.query({query:ms,variables:{username:o}})];case 1:return[2,null==(n=t.sent().data)||null==(e=n.user)?void 0:e.image]}})})()];case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),l&&d.addEventListener("click",l),mh[a]=s,[2]}})}).apply(this,arguments)}var mm=t(10947),mv=t(1989);function mw(e,n){var t=(0,oo.A)(n);return(0,p.useMemo)(function(){var n,r;return n="current"in e?new ec.V_(function(n){return n.next(e.current),e.subscribe(function(e){return n.next(e)})}):e,r=function(){return t.current()},new ec.V_(function(e){var t=null,i=null,o=null,a=null,l=n.subscribe(function(n){null==t||t.stop(),i&&(clearTimeout(i),i=null);var l=r();if(!l&&a&&(l=a),!1===l){o=n,e.next(n);return}a=l;var u=!0===l?{}:l,c=u.snappiness,s=void 0===c?400:c,d=u.ramp,p=u.delay,h=void 0===p?0:p,g=0,m={};for(var v in n)m[v]=o&&v in o?o[v]:n[v];t=new uz.F3(function(t,r){for(var i in g+=t,n){if("number"!=typeof m[i]||"number"!=typeof n[i]){m[i]=n[i];continue}var l=m[i],u=n[i],c=l>=0&&l<=1&&u>=0&&u<=1?.001:void 0;m[i]=(0,mv.L)({current:l,target:u,elapsed:g,delta:t,snappiness:s,ramp:d,minStepSize:c})}e.next((0,f._)({},m)),nl()(m,n)&&(a=null,o=n,r())}),h>0?i=setTimeout(function(){i=null,null==t||t.start()},h):t.start()});return function(){null==t||t.stop(),i&&clearTimeout(i),l()}})},[e,t])}var my=t(43722),mb=t(13040),mx=t(23680),m_=t.n(mx),mY=(0,rS.CK)("Border.module.css",["--header-height","--border-color","--box-shadow","--y-offset"]);let mS=(0,p.memo)(function(e){var n,t=e.paneId,r=(0,se._)(e,["paneId"]),i=oz(t),o=(0,uE.A)(i.paneType),a=(0,uE.A)(i.border),l=(0,uE.A)(i.isMaximized),u=(0,my.A)(),d=(0,ro.p)(),f=d?rS.LU.outlineDefault:"transparent",h="none",g=d?0:r.headerHeight,m=0;switch(a){case"dragging":f=rS.LU.outlineDefault,h=rS.LU.shadow3,d&&(g=r.headerHeight,m=6);break;case"floating":f=rS.LU.outlineDefault,h=rS.LU.shadow2,d&&(g=r.headerHeight,m=6)}var v=oU({paneId:t});u&&v&&(f=u.color,h="0 0 0 3px ".concat(u.color));var w=(0,c._)((0,p.useState)(!1),2),y=w[0],b=w[1];return((0,es.q3)((0,mb.S)(),{next:"webview"===o?b:void 0}),l)?null:(0,s.Y)(of.S,{style:(n={},(0,nX._)(n,mY.headerHeight,"".concat(g,"px")),(0,nX._)(n,mY.borderColor,f),(0,nX._)(n,mY.boxShadow,h),(0,nX._)(n,mY.yOffset,m+"px"),n),clsx:[m_().root,(0,nX._)({},m_().pulse,y)]})});var mA=of.D.div,mI=(0,um.AH)([op.wp.width("100%"),op.wp.position.absolute,op.wp.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),mk=(0,um.AH)([op.wp.height("100%"),op.wp.position.absolute,op.wp.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),mE=(0,um.AH)([op.wp.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function mC(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var mD={topLeft:(0,um.AH)([op.wp.top(0),op.wp.left(0),mC("topLeft")]),topRight:(0,um.AH)([op.wp.top(0),op.wp.right(0),mC("topRight")]),bottomLeft:(0,um.AH)([op.wp.bottom(0),op.wp.left(0),mC("bottomLeft")]),bottomRight:(0,um.AH)([op.wp.bottom(0),op.wp.right(0),mC("bottomRight")])};function mR(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,s.Y)(mA,{onPointerDown:r,style:(0,nX._)({height:t},n,-t),css:mI});if("right"===n||"left"===n)return(0,s.Y)(mA,{onPointerDown:r,style:(0,nX._)({width:t},n,-t),css:mk});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,s.Y)(mA,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[mE,mD[n]]})}var mF=["bottom","right","left","bottomRight","bottomLeft"],mU=(0,p.memo)(function(e){var n=rf(i2);return(0,s.Y)(s.FK,{children:mF.map(function(t){return(0,s.Y)(mR,{size:8,edge:t,onPointerDown:function(r){(0,uC.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mP=["top","right","left","topRight","topLeft"],mO=(0,p.memo)(function(e){var n=rf(i2);return(0,s.Y)(s.FK,{children:mP.map(function(t){return(0,s.Y)(mR,{size:8,edge:t,onPointerDown:function(r){(0,uC.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mT=t(93754),mL=t(31804),mM=t(29100),mG=t(55226),mN=t.n(mG),mz=(0,rS.CK)("index.module.css",["--transform-x","--transform-y","--scale","--transform-origin-x","--width","--height","--opacity","--interaction-blanket-display","--pointer-events","--user-select","--border-top-left-radius","--border-top-right-radius","--border-gap","--iframe-pointer-events"]),mH=(0,p.memo)(function(e){var n,t,r,i,o,a,l,u=e.paneId,c=(0,ne.Vv)().Content,d=oz(u),f=(0,uE.A)(d.isHidden),h=(0,uE.A)(d.data),g=(0,uE.A)(d.isActive),m=(0,uE.A)(d.isCommitted);(0,tR.a$)(u,h);var v=(n=aU(),t=rf(r0),r=rf(tY),i=rf(nr),o=rf(tS),(0,q.A)(function(){return function(e){switch(e.operation){case"commit":i(u);return;case"open":if(e.floating)return void t(e.pane,{commit:!0,location:"center"});n({pane:e.pane,activate:!0,placement:e.secondary?{type:"secondary",relativeTo:u}:{type:"after",paneId:u}});return;case"replace":r({paneId:u,pane:e.pane});return;case"remove":o(e.pane.id);return;case"openPip":return;default:(0,sw.A)(e)}}},[i,u,r,o,n,t])),w=(a=(0,o3.A)().container,l=(0,mT.A)({container:a,service:"panetracker"}).channel,(0,p.useCallback)(function(e,n){l&&l.send({paneMetricsTracker:{pane:e,flow:n}})},[l]));return(0,s.Y)(c,{pane:h,options:{paneId:u,isHidden:f,performPaneOperation:v,isActive:g,isCommitted:m,emitPaneMetrics:w}})});let mW=(0,p.memo)(function(e){var n=e.paneId,t=oP(),r=function(e){var n,t=e.paneId,r=(0,c._)((0,mm.H)({accept:[tV.pt.File,mL.N.Pane,mL.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){var r=n.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:t})},drop:function(e,n){var r=n.getClientOffset();if(r){if(e.type===mL.N.Pane)return void a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:t});if("nodes"===e.type){var i=(0,ne.u9)(e.nodes);i.length>0&&a.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:t})}if(e.type===mL.N.NewPane){var o=e.pane;a.drop({type:"newPaneGroup",panes:[o],pageX:r.x,pageY:r.y,over:t})}}}}),2),i=r[0].isOver,o=r[1],a=(n=rf(rk),(0,p.useEffect)(function(){i||n(null)},[i,n]),{drag:rf(iU),drop:rf(iP)});return o}({paneId:n}),i=oz(n),o=(0,uE.A)(i.isActive),a=(0,uE.A)(i.isFloating),l=(0,uE.A)(i.isModal),u=(0,uE.A)(i.paneType),d=(0,cs.A)(),f=(0,dw.vm)(),h=(0,dw.d0)(),g=(f||h)&&d?ra.uF:0,m=(0,p.useRef)(null);(0,r_.d)(m,mw(i.properties,i.getTransitionEnabled),function(e){var n,t=e.width,r=e.height,i=e.x,o=e.y,a=e.scale,l=e.opacity;return n={},(0,nX._)(n,mz.width,t+"px"),(0,nX._)(n,mz.height,r+"px"),(0,nX._)(n,mz.transformX,i+"px"),(0,nX._)(n,mz.transformY,o+"px"),(0,nX._)(n,mz.scale,a.toString()),(0,nX._)(n,mz.opacity,l.toString()),n}),(0,r_.d)(m,i.transformOriginXAtom,function(e){return(0,nX._)({},mz.transformOriginX,e)}),(0,r_.d)(m,i.viewportInset,function(e){return{"--fixed-position-offset-x":-e.x+"px","--fixed-position-offset-y":-e.y-g+"px"}}),(0,r_.d)(m,i.isHidden,function(e){return(0,nX._)({},mz.pointerEvents,e?"none":"auto")}),(0,r_.d)(m,i.zIndex,function(e){return{"z-index":e.toString()}}),(0,r_.d)(m,i.disableInteractions,function(e){var n;return n={},(0,nX._)(n,mz.interactionBlanketDisplay,e?"block":"none"),(0,nX._)(n,mz.userSelect,e?"none":"auto"),(0,nX._)(n,mz.iframePointerEvents,e?"none":"auto"),n});var v=o?void 0:function(){t(n,{commit:"codeEditor"!==u})},w=(0,at.kg)(),y=oW(),b="agentChat"===u,x=(0,nX._)({},mz.borderGap,"".concat(4,"px")),_=(0,uE.A)(i.isOnlyPane),Y="webview"===u&&_,S=(0,ro.p)();S&&Y&&(x.borderTopLeftRadius=4,x.borderTopRightRadius=4,x.overflow="hidden");var A=(0,aH.S)([m,a?void 0:r],{breadcrumb:"client/replEnvironmentDesktop/Pane/index.tsx:324"}),I=rf(oD),k=(0,uE.A)(i.headerHeight);return(0,s.Y)(s.FK,{children:(0,s.Y)(at.ph,{value:n,children:(0,s.Y)(av.ui,{role:"tabpanel",id:n,"aria-labelledby":"tab-".concat(n),innerRef:A,clsx:mN().root,style:x,elevated:!(b&&"centeredVisualPlanner"===y)&&!S,onMouseEnter:function(){return I(n)},onMouseLeave:function(){return I(null)},children:(0,s.FD)(mM.A,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,q.A)(function(){return{paneType:u}},[u]),children:[(0,s.FD)(of.S,{clsx:mN().container,onMouseDown:v,onContextMenu:v,innerRef:function(e){return w(n,e)},style:"agentChat"===u?{overflowX:"hidden"}:void 0,children:[(0,s.Y)(of.S,{tabIndex:-1}),(0,s.Y)(mH,{paneId:n})]}),(0,s.Y)(mS,{headerHeight:k,paneId:n}),a&&!l?(0,s.Y)(mU,{paneId:n}):null,(0,s.Y)(of.S,{clsx:mN().interactionBlanket})]},n)})})})});function mB(){var e=(0,o3.A)().presence,n=(0,c._)((0,p.useState)(e.getFollowingUsers()),2),t=n[0],r=n[1];return(0,p.useEffect)(function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged(function(e){r(e.followingUsers)})},[e]),t}function mj(){var e=(0,h._)(["\n  query WorkspaceActiveUserImages($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return mj=function(){return e},e}var m$={},mq=(0,g.J1)(mj()),mV=t(85433);function mK(e){var n,t,r=(n={variables:{userIds:e.slice(0,mV.Ry)},skip:0===e.length},t=(0,f._)({},m$,n),m.I(mq,t)).data;return r?new Map(r.usersByIds.map(function(e){return[e.id,e.image]})):null}var mZ={root:(0,um.AH)([op.wp.rowWithGap(4),op.wp.align.center]),text:(0,um.AH)([op.wp.flex.shrink(1),op.wp.align.center]),username:(0,um.AH)([op.wp.flex.shrink(2),op.wp.maxWidth(140),op.wp.truncate])};function mJ(){var e=mB();return 0===e.length?null:1===e.length?(0,s.Y)(mQ,{user:e[0]}):(0,s.FD)(aC.EY,{variant:"small",color:"dimmest",css:mZ.text,multiline:!1,children:[e.length," users are observing you"]})}function mQ(e){var n=e.user,t=n.id,r=n.username,i=n.color,o=mK([t]),a={id:t,username:r,color:i,image:null==o?void 0:o.get(t)};return(0,s.FD)(of.S,{css:mZ.root,children:[(0,s.Y)(fa.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,s.Y)(aC.EY,{variant:"small",color:"dimmer",css:mZ.username,multiline:!1,children:r}),(0,s.Y)(aC.EY,{variant:"small",color:"dimmest",css:mZ.text,multiline:!1,children:"is observing you"})]})}var mX={root:(0,um.AH)([op.wp.rowWithGap(4),op.wp.align.center]),text:(0,um.AH)([op.wp.flex.shrink(1),op.wp.align.center]),username:(0,um.AH)([op.wp.flex.shrink(2),op.wp.maxWidth(140),op.wp.truncate])};function m0(e){var n=e.id,t=e.username,r=e.color,i=mK([n]),o=(0,o3.A)().presence,a={id:n,username:t,color:r,image:null==i?void 0:i.get(n)};return(0,s.FD)(of.S,{css:mX.root,children:[(0,s.Y)(fa.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,s.Y)(aC.EY,{css:mX.text,variant:"small",color:"dimmest",multiline:!1,children:"Observing"}),(0,s.Y)(aC.EY,{css:mX.username,variant:"small",color:"dimmer",multiline:!1,children:t}),(0,s.Y)(f0.K0,{alt:"Stop observing",size:18,onClick:function(){o.unfollowUser()},children:(0,s.Y)(sn.A,{})})]})}var m1=(0,rA.x)({root:[op.wp.height("100%"),op.wp.border({color:rS.LU.outlineDimmest,direction:"bottom"}),op.wp.highRes({borderBottomWidth:.5}),op.wp.align.center]});function m2(e){var n,t,r,i=e.paneId,o=oR(i),a=(n=(0,my.A)(),t=oU({paneId:i}),n&&t?n:null),l=(r=mB(),oU({paneId:i})&&r.length>0?r:null),u=(0,ne.xS)(o)?o.data.path:null,c=null;return(a&&(c=(0,s.Y)(m0,{id:a.id,username:a.username,color:a.color})),null!==c||l)?(0,s.FD)(of.S,{css:m1.root,px:4,row:!0,gap:8,children:[l&&u?(0,s.Y)(mJ,{}):null,c]}):null}var m4=(0,rA.x)({handle:[op.wp.minWidth(16),op.wp.height("100%")]});function m5(e){var n=e.paneGroupId,t=m3({paneGroupId:n,activeTabPaneId:e.activeTabPaneId}),r=t.dnd,i=t.cursor,o=t.onPointerDown,a=t.toggleMaximizedPaneGroup,l=t.isMaximized;return r?(0,s.Y)(of.S,{grow:!0,shrink:!0,onDoubleClick:function(){a({paneGroupId:n})},title:l?"Double click to restore.":"Double click to maximize. Drag to move.",css:m4.handle,style:{cursor:l?void 0:i},onPointerDown:o}):null}function m3(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=oL({paneGroupId:n}),i=r.isDragging,o=r.dnd,a=oG().toggleMaximizedPaneGroup,l=oH(n),u=(0,uE.A)(l.isMaximized),c=oP();return{dnd:o,cursor:i?"grabbing":"grab",onPointerDown:function(e){c(t),!u&&"button"in e&&0===e.button&&(0,uC.j)(e,{start:o.start,move:o.update,end:o.end})},toggleMaximizedPaneGroup:a,isMaximized:u}}var m8=(0,rA.x)({container:[op.wp.width("100%"),op.wp.height("100%")],iconAndTitle:[op.wp.height("100%"),op.wp.align.center,op.wp.border({direction:"bottom",color:rS.LU.outlineDimmest}),op.wp.highRes({borderBottomWidth:.5})],text:[op.wp.fontSize(13)]});function m7(e){var n=e.headerId,t=e.paneId,r=oR(t),i=(0,ne.Vv)(),o=i.getTitle(r),a=i.Icon({pane:r,size:16});return(0,s.FD)(of.S,{css:m8.container,row:!0,children:[(0,s.FD)(of.S,{css:m8.iconAndTitle,pl:6,row:!0,gap:6,children:[a,(0,s.Y)(aC.EY,{css:m8.text,children:o})]}),(0,s.Y)(m5,{paneGroupId:n,activeTabPaneId:t})]})}var m6=t(81843),m9=t(36294),ve=t(17177),vn=t(82898),vt=t(50470),vr=t(55089),vi=t(3478),vo=t(89715),va=t.n(vo),vl=(0,rS.CK)("Tab.module.css",["--font-style"]),vu=(0,p.memo)(function(e){var n=e.paneId,t=e.paneGroupId,r=e.isActive,i=e.selectTab,o=e.removePane,a=e.dragGroup,l=oz(n),u=(0,uE.A)(l.isCommitted),d=rf(nr),f=oR(n),h=(0,ne.Vv)(),g=h.getTitle(f),m=h.Icon({pane:f,size:16}),v=(0,uE.A)(l.isActivePane),w=(0,uq.F9)({paneType:f.type}),y=(0,tR.WM)((0,ne.xS)(f)?f.data.path:null),b=void 0;(0,ne.xS)(f)&&f.data.path&&(b=f.data.path);var x=(0,hh.j)(),_=(0,p.useRef)(null),Y=(0,c._)((0,vt.i)({type:mL.N.Pane,item:function(){var e,t=(null==(e=_.current)?void 0:e.getBoundingClientRect().width)||80;return{type:mL.N.Pane,paneId:n,width:t}},collect:function(e){return{isDragging:e.isDragging()}}}),2),S=Y[0].isDragging,A=Y[1],I=rf(t4);(0,p.useEffect)(function(){return I(S)},[I,S]);var k=oL({paneGroupId:t}).dnd,E=(0,p.useCallback)(function(e){1!==e.button&&(L.current=v,k&&a&&(0,uC.j)(e,{start:k.start,move:k.update,end:k.end}),v||(dn.ZQ({category:"pane",message:"Tab clicked: "+f.type}),(0,oJ.u4)(oJ.AZ.WS_TAB_OPENED,{paneType:f.type}),i(n)))},[f.type,k,a,v,n,i]);(0,p.useEffect)(function(){r&&_.current&&(0,vr.A)(_.current,{behavior:x?"auto":"smooth",scrollMode:"if-needed"},!0)},[r,x,_]);var C=sY({paneId:n,paneGroupId:t}),D=(0,u2.EF)().onContextMenu,R=(0,p.useRef)(null),F=(0,c._)((0,m9.A9)(R,!1),4),U=F[0],P=F[1],O=F[2],T=F[3],L=(0,p.useRef)(!1);return(0,m9.xK)(P,R),(0,s.Y)(vc,{dragRef:a?void 0:A,uniquePath:y,title:g,icon:"commands"!==f.type?m:void 0,isActive:r,isActivePane:v,isDragging:S,italicizeTitle:!u&&"commands"!==f.type,tooltip:b,id:n,controls:n,indicatorColor:w,onTabClick:function(){if(T(),r&&!u)return function(){L.current&&d(n)}},onTabContextMenu:function(e){return D(e,{command:C()})},onTabPointerDown:E,handleClose:function(e){void 0===e?dn.ZQ({category:"pane",message:"Tab closed: "+f.type}):dn.ZQ({category:"pane",message:"Tab closed: "+f.type,data:{reason:e}}),(0,oJ.u4)(oJ.AZ.WS_TAB_CLOSED,{paneType:f.type}),o(n)},onTabKeyDown:O,tabIndex:U,tabRef:R,tabFocused:P,rootRef:_})});function vc(e){var n,t,r={delay:1e3,isDisabled:!e.tooltip,closeDelay:0},i=(0,ve.O)(r),o=(0,vn.D)(r,i,e.tabRef),a=o.triggerProps,l=o.tooltipProps,u=(0,aH.S)([e.dragRef,e.rootRef]);return(0,s.FD)(av.ui,{elevated:e.isActive,innerRef:u,style:(n={},(0,nX._)(n,vl.fontStyle,e.italicizeTitle?"italic":"inherit"),(0,nX._)(n,"opacity",e.isActive?1:.7),n),clsx:[va().tab,(t={},(0,nX._)(t,va().dragging,e.isDragging),(0,nX._)(t,va().active,e.isActive),t)],row:!0,align:"stretch",onMouseUp:function(n){1===n.button&&(n.preventDefault(),n.stopPropagation(),e.handleClose("middle click"))},children:[(0,s.FD)(of.S,(0,r6._)((0,f._)({},a),{tag:"button",role:"tab",innerRef:e.tabRef,tabIndex:e.tabIndex,onKeyDown:e.onTabKeyDown,onClick:e.onTabClick,onPointerDown:e.onTabPointerDown,onContextMenu:e.onTabContextMenu,clsx:va().tabButton,"aria-selected":e.isActive,"aria-controls":e.controls,id:"tab-".concat(e.id),"data-pane-tab-primary-button":!0,row:!0,align:"center",gap:6,px:6,grow:!0,shrink:!0,children:[e.icon?(0,s.Y)(of.S,{clsx:va().tabIcon,children:e.icon}):null,(0,s.FD)(of.S,{row:!0,gap:4,align:"center",children:[(0,s.Y)(aC.EY,{multiline:!1,clsx:va().tabTitle,title:e.title,children:e.title}),e.uniquePath?(0,s.Y)(aC.EY,{variant:"small",color:"dimmest",multiline:!1,clsx:va().uniquePath,children:e.uniquePath}):null]})]})),i.isOpen?(0,s.Y)(uv._m,{placement:"bottom",state:i,target:e.tabRef.current,tooltip:e.tooltip,tooltipProps:l,maxWidth:600}):null,e.indicatorColor?(0,s.Y)(of.S,{clsx:va().indicator,children:(0,s.Y)(vi.b,{color:e.indicatorColor})}):null,(0,s.Y)(f0.K0,{onClick:function(){return e.handleClose()},alt:"Close tab",tabIndex:e.tabFocused?0:-1,size:12,clsx:va().closeButton,children:(0,s.Y)(sn.A,{})}),e.isActivePane?(0,s.Y)(of.S,{clsx:va().activeLine,"data-active-pane-line":!0}):null]})}function vs(e){var n=rf(t$),t=rf(t1),r=oN(e),i=(0,uE.A)(r.panes);return(0,p.useCallback)(function(r,o){var a=(null==o?void 0:o.index)!==null?null==o?void 0:o.index:i.length;if("nodes"===r.type){var l=(0,ne.u9)(r.nodes);l.length>0&&n({activate:!0,commit:!0,paneGroupId:e,index:a,panes:l});return}if(r.type===mL.N.NewPane)return void n({activate:!0,paneGroupId:e,index:a,panes:[r.pane]});if("paneId"in r){var u=i.includes(r.paneId)?i.length-1:i.length;t({paneId:r.paneId,index:void 0!==a&&a<u?a:u,toPaneGroupId:e})}},[n,t,e,i])}var vd=t(38299),vp=t.n(vd);function vf(e){var n,t,r,i,o,a,l,u,d,f,h,g,m,v,w,y,b,x=e.headerId,_=rf(tJ),Y=rf(t$),S=rf(tS),A=(0,p.useRef)(null),I=oN(x),k=(0,uE.A)(I.activeIndex),E=(0,uE.A)(I.activeTabPaneId),C=(0,uE.A)(I.panes),D=(0,p.useCallback)(function(e){if(A.current&&0!==e.deltaY&&0===e.deltaX){e.preventDefault();var n=e.deltaY,t=A.current.scrollLeft,r=Math.max(0,Math.min(A.current.scrollWidth,t+n));A.current.scrollLeft=r}},[]),R=(u=oN(n=x),d=(0,uE.A)(u.panes),f=vs(n),g=(h=(0,c._)((0,mm.H)({accept:[tV.pt.File,mL.N.Pane,mL.N.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&y({item:e,panes:d,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){n.didDrop()||f(e,b)}}),2))[0],m=h[1],w=(v=(t=({isOver:g.isOver}).isOver,i=(r=(0,c._)((0,p.useState)(null),2))[0],o=r[1],a=(0,p.useRef)(null),l=(0,p.useRef)([]),(0,p.useEffect)(function(){if(!t){l.current=[],o(null);return}a.current&&(l.current=(0,ek._)(a.current.children).map(function(e){var n=e.getBoundingClientRect();return n.x+n.width/2}))},[t]),{tabContainerRef:a,hover:(0,p.useCallback)(function(e){if(0!==l.current.length){var n=e.item.type===mL.N.Pane?e.item:null,t=(null==n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,i=(null==n?void 0:n.width)||80,a=l.current.map(function(e,n){return -1===r||r>n?e:e+i/2}).findIndex(function(n){return n>e.sourceClientOffset}),u=-1===r?e.panes.length:e.panes.length-1;o({index:-1===a?u:Math.min(a,u),paneId:t,width:i})}},[]),dropState:i})).tabContainerRef,y=v.hover,{dropState:b=v.dropState,dropRef:m,tabContainerRef:w}),F=R.dropState,U=R.dropRef,P=R.tabContainerRef,O=F?F.index:null;if((null==F?void 0:F.paneId)&&null!==O){var T=C.indexOf(F.paneId);T>-1&&T<O&&O++}var L=F&&null!==O?(0,ek._)(C.slice(0,O)).concat([F],(0,ek._)(C.slice(O))):C;return(0,s.FD)(of.S,{clsx:vp().container,row:!0,align:"center",innerRef:U,role:"tablist",children:[(0,s.FD)(m9.Se,{children:[(0,s.FD)(m6.bL,{clsx:vp().tabScrollAreaRoot,onWheel:D,children:[(0,s.Y)(m6.LM,{clsx:vp().tabScrollAreaViewport,ref:A,children:(0,s.Y)(of.S,{innerRef:P,clsx:vp().tabContainer,row:!0,children:L.map(function(e,n){return"string"!=typeof e?(0,s.Y)(of.S,{p:4,children:(0,s.Y)(of.S,{style:{width:e.width},clsx:vp().tabPreview})},"preview"):(0,s.Y)(vu,{dragGroup:1===C.length,paneId:e,paneGroupId:x,isActive:k===n,selectTab:_,removePane:S},e)})})}),(0,s.Y)(m6.Ze,{clsx:vp().tabScrollAreaScrollbar,orientation:"horizontal",children:(0,s.Y)(m6.zi,{clsx:vp().tabScrollAreaThumb})})]}),(0,s.Y)(f0.K0,{clsx:vp().newTabButton,alt:"New tab",tooltipBehavior:"hidden",size:12,onClick:function(){Y({paneGroupId:x,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,s.Y)(aa.A,{})})]}),(0,s.Y)(m5,{paneGroupId:x,activeTabPaneId:E})]})}var vh=t(37743),vg={newTabButtonWidth:28,defaultTabWidth:160,gap:4},vm=function(){function e(n){var t=this;(0,vh._)(this,e),this.containerWidth=new ec.N(0),this.isHovered=new ec.N(!1),this.dragState=new ec.N(null),this.dropState=new ec.N(null),this.state=new ec.V_(function(e){var n=null;return ec.cP.combine(t.paneIds,t.containerWidth,t.isHovered,t.dragState,t.dropState).subscribe(function(t){var r=(0,c._)(t,5),i=r[0],o=r[1],a=r[2],l=r[3],u=r[4];if(u){var s,d,p=u.item.type===mL.N.Pane?u.item:null,h=p?null==n||null==(d=n.tabs)?void 0:d.get(p.paneId):null;s={xOffset:u.pointer.x,width:h?h.width:vg.defaultTabWidth,id:p?p.paneId:void 0}}var g=function(e){var n,t,r=e.ids,i=e.gap,o=e.containerWidth,a=e.defaultTabWidth,l=e.newTabButtonWidth,u=e.matchWidths,c=e.dropArea,s=e.dragState,d=new Map;if(0===r.length||0===o)return{tabs:d};s?_="own-tab":(null==c?void 0:c.id)&&(_="external");var p=o-l-i,f=r.length;"external"===_&&(f+=1);var h=f-1,g=f*a+h*i<=p?a:(p-h*i)/f,m=u&&r.length<u.size,v=0,w=!0,y=!1,b=void 0;try{for(var x,_,Y,S=r[Symbol.iterator]();!(w=(Y=S.next()).done);w=!0){var A,I,k=Y.value,E=m&&null!=(I=null==u||null==(A=u.get(k))?void 0:A.width)?I:g,C=v+E+i/2;c&&c.xOffset>=v&&c.xOffset<C&&(x={preview:{x:v,width:E},index:d.size},v+=E+i);var D=(null==s?void 0:s.id)===k;d.set(k,{x:v,width:D?0:E}),D||(v+=E+i)}}catch(e){y=!0,b=e}finally{try{w||null==S.return||S.return()}finally{if(y)throw b}}return c&&!x&&(x={preview:{x:v,width:m&&null!=(t=null==u||null==(n=u.get(r[r.length-1]))?void 0:n.width)?t:g},index:d.size}),{tabs:d,dropData:x}}((0,r6._)((0,f._)({containerWidth:o,ids:i,matchWidths:a&&n?n.tabs:void 0},vg),{dropArea:s,dragState:l||void 0}));nl()(n,g)||(n=g,e.next(g))})}),this.dropIndex=new ec.V_(function(e){var n=null;return t.state.subscribe(function(t){var r,i,o=null!=(i=null==(r=t.dropData)?void 0:r.index)?i:null;o!==n&&(n=o,e.next(o))})}),this.setContainerWidth=function(e){t.containerWidth.set(e)},this.tabs=new ec.V_(function(e){return t.state.select(function(e){return e?Array.from(e.tabs.keys()):[]}).subscribe(e)}),this.newTab=new ec.V_(function(e){var n=null;return t.state.subscribe(function(t){var r,i=Array.from(t.tabs.keys()).pop(),o=i?t.tabs.get(i):null;if(o){var a={x:o.x+o.width+4,width:28,visible:!t.dropData};t.dropData&&(null==(r=t.dropData)?void 0:r.index)>=t.tabs.size&&(a.x+=t.dropData.preview.width+4),nl()(n,a)||(n=a,e.next(a))}})}),this.dropPreview=new ec.V_(function(e){var n=null;return t.state.subscribe(function(t){var r,i,o=null!=(i=null==(r=t.dropData)?void 0:r.preview)?i:null;nl()(n,o)||(n=o,e.next(o))})}),this.paneIds=n.paneIds,this.activeId=n.activeId}return e.prototype.tab=function(e){var n=this;return new ec.V_(function(t){var r=null;return ec.cP.combine(n.state,n.activeId,n.dropState).subscribe(function(n){var i,o,a=(0,c._)(n,3),l=a[0],u=a[1],s=a[2],d=l.tabs.get(e);if(d){var p=(0,r6._)((0,f._)({},d),{active:u===e,isBeingDragged:(null==s||null==(i=s.item)?void 0:i.type)===mL.N.Pane&&(null==s||null==(o=s.item)?void 0:o.paneId)===e});nl()(r,p)||(r=p,t.next(p))}})})},e}(),vv=t(93695),vw=t.n(vv),vy=(0,rS.CK)("index.module.css",["--visibility","--tab-width","--tab-x","--tab-opacity","--tab-color","--tab-bg","--new-tab-width","--new-tab-x","--desktop-tab-fill-pointer-events","--font-style","--drop-preview-width","--drop-preview-x","--drop-preview-opacity"]),vb=(0,p.memo)(function(e){var n,t,r,i,o,a,l,u=oN(e.headerId),d=(0,es.Rj)(function(){return ec.cP.from(u.path).select(function(e){return"floating"===e[0]})},[u.path]),f=(0,p.useMemo)(function(){return new vm({paneIds:ec.cP.from(u.panes),activeId:ec.cP.from(u.activeTabPaneId)})},[u.panes,u.activeTabPaneId]),h=(0,es.J2)(f.tabs),g=(0,go.A)(function(e){return f.setContainerWidth(e.width)},{type:"debounce",wait:100}),m=rf(t$),v=(null==h?void 0:h.length)===1,w=(0,uE.A)(u.activeTabPaneId),y=m3({paneGroupId:e.headerId,activeTabPaneId:w}),b=y.cursor,x=y.onPointerDown,_=y.toggleMaximizedPaneGroup,Y=y.isMaximized,S=(0,p.useRef)(null),A=(n=e.headerId,t=(0,p.useRef)(null),r=(0,es.G9)(f.dropIndex),i=vs(n),a=(o=(0,c._)((0,mm.H)({accept:[tV.pt.File,mL.N.Pane,mL.N.NewPane],hover:function(e,n){var r=n.getClientOffset(),i=r&&t.current?{x:r.x-t.current.x,y:r.y-t.current.y}:{x:0,y:0};f.dropState.set({item:e,pointer:i})},collect:function(e){var n,r;return t.current=null!=(r=null==(n=S.current)?void 0:n.getBoundingClientRect())?r:null,{isOver:e.isOver()}},drop:function(e,n){var t,o=null!=(t=r.current)?t:null;f.dropState.set(null),n.didDrop()||i(e,null!==o?{index:o}:null)}}),2))[0].isOver,l=o[1],(0,p.useEffect)(function(){a||f.dropState.set(null)},[a,f]),{dropRef:l}).dropRef,I=(0,aH.S)([g,S,A]);return(0,s.FD)(of.S,{px:d||Y?6:0,pt:d&&!Y?6:0,row:!0,grow:!0,shrink:!0,align:"start",clsx:vw().tabBar,children:[Y?(0,s.Y)(d_.A,{}):null,(0,s.FD)(of.S,{grow:!0,shrink:!0,row:!0,clsx:vw().tabs,innerRef:I,onMouseEnter:function(){return f.isHovered.set(!0)},onMouseLeave:function(){return f.isHovered.set(!1)},onPointerDown:v&&!Y?x:void 0,children:[(0,s.Y)(vx,{paneGroupId:e.headerId,activeTabPaneId:w,isMaximized:Y,toggleMaximizedPaneGroup:_,cursor:b,onPointerDown:v?void 0:x}),(0,s.Y)(vS,{layout:f}),null==h?void 0:h.map(function(n){return(0,s.Y)(vY,{paneGroupId:e.headerId,paneId:n,layout:f,isOnlyTab:v},n)}),(0,s.Y)(v_,{layout:f,onClick:function(){return m({paneGroupId:e.headerId,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}})]}),Y?(0,s.Y)(f0.K0,{size:28,alt:"Minimize",onClick:function(){return _({paneGroupId:e.headerId})},children:(0,s.Y)(sh.A,{})}):null]})});function vx(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=e.toggleMaximizedPaneGroup,i=e.isMaximized,o=e.cursor,a=e.onPointerDown,l=sm({paneId:t,paneGroupId:n}),u=(0,u2.EF)().onContextMenu;return(0,s.Y)(of.S,{onContextMenu:function(e){return u(e,{command:l})},onDoubleClick:function(){r({paneGroupId:n})},title:i?"Double click to restore.":"Double click to maximize. Drag to move.",clsx:vw().dragArea,style:{cursor:i?void 0:o},onPointerDown:a})}function v_(e){var n=e.layout,t=(0,p.useRef)(null);return(0,r_.d)(t,mw(n.newTab,function(){return!0}),function(e){var n;return n={},(0,nX._)(n,vy.newTabWidth,e.width+"px"),(0,nX._)(n,vy.newTabX,e.x+"px"),(0,nX._)(n,"opacity",e.visible?"1":"0"),n}),(0,s.Y)(of.S,{innerRef:t,clsx:vw().newTab,children:(0,s.Y)(f0.K0,{size:28,alt:"New tab",onClick:e.onClick,children:(0,s.Y)(aa.A,{})})})}function vY(e){var n,t,r,i,o,a,l,u,d=e.layout,h=e.paneId,g=e.paneGroupId,m=oR(h),v=(0,p.useMemo)(function(){return d.tab(h)},[d,h]),w=(0,p.useRef)(null),y=oz(e.paneId),b=(0,es.J2)(y.isCommitted),x=(0,tR.WM)((0,ne.xS)(m)?m.data.path:null),_=sY({paneId:h,paneGroupId:g}),Y=(0,u2.EF)().onContextMenu,S=(0,es.Rj)(function(){return v.select(function(e){return e.width<64})},[v]);(0,r_.d)(w,mw(v,function(){return!0}),function(e){var n;return n={},(0,nX._)(n,vy.visibility,"visibile"),(0,nX._)(n,vy.tabWidth,e.width+"px"),(0,nX._)(n,vy.tabX,e.x+"px"),(0,nX._)(n,vy.tabBg,e.active?rS.LU.surfaceBackground:""),(0,nX._)(n,vy.tabOpacity,(e.active,"1")),(0,nX._)(n,vy.tabColor,e.active?rS.LU.foregroundDefault:""),(0,nX._)(n,vy.desktopTabFillPointerEvents,e.active?"all":"none"),n});var A=rf(tS),I=rf(tJ),k=(0,ne.Vv)(),E=k.getTitle(m),C=k.Icon({pane:m,size:16}),D=void 0;(0,ne.xS)(m)&&m.data.path?D=m.data.path:S&&(D=E);var R=!b&&"commands"!==m.type,F=rf(nr),U=(0,es.G9)(y.isActive),P=function(){U.current&&!b?F(h):I(h)},O=(n=e.paneId,t=e.layout,i=(r=(0,c._)((0,vt.i)({type:mL.N.Pane,item:function(){return{type:mL.N.Pane,paneId:n,width:80}},end:function(){t.dragState.set(null)},collect:function(e){var t=e.getItem();return{isActive:(null==t?void 0:t.paneId)===n,isDragging:e.isDragging()}}}),2))[0],o=r[1],a=rf(t4),l=i.isDragging,u=i.isActive,(0,p.useEffect)(function(){a(l)},[a,l]),(0,p.useEffect)(function(){t.dragState.set(u?{id:n}:null)},[t,u,n]),{dragRef:o}).dragRef,T=(0,aH.S)([w,e.isOnlyTab?void 0:O]);return(0,s.FD)(av.ui,{style:(0,nX._)({},vy.fontStyle,R?"italic":"inherit"),onMouseUp:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation(),A(h))},elevated:!0,innerRef:T,align:"center",justify:"center",row:!0,clsx:vw().tabContainer,onContextMenu:function(e){return Y(e,{command:_()})},children:[(0,s.Y)(uv.m_,{tooltip:D,delay:"long",placement:"bottom",isDisabled:!D,children:function(e,n){return(0,s.FD)(of.S,(0,r6._)((0,f._)({},e),{innerRef:n,pl:6,tag:"button",clsx:vw().tabButton,row:!0,grow:!0,shrink:!0,align:"center",gap:6,onClick:P,children:[C,(0,s.Y)(aC.EY,{multiline:!1,clsx:vw().title,children:E}),x?(0,s.Y)(aC.EY,{variant:"small",clsx:vw().title,color:"dimmest",multiline:!1,children:x}):null]}))}}),S?null:(0,s.Y)(f0.K0,{alt:"Close tab",clsx:vw().closeButton,size:28,onClick:function(){return A(h)},children:(0,s.Y)(sn.A,{size:12})})]})}function vS(e){var n=e.layout,t=(0,p.useRef)(null);return(0,r_.d)(t,n.dropPreview,function(e){var n;return n={},(0,nX._)(n,vy.dropPreviewWidth,(e?e.width:80)+"px"),(0,nX._)(n,vy.dropPreviewX,(e?e.x:"50%")+"px"),(0,nX._)(n,vy.dropPreviewOpacity,e?"1":"0"),n}),(0,s.Y)(of.S,{innerRef:t,clsx:vw().dropPreview})}var vA=t(71936),vI=t(10384),vk=t.n(vI),vE=(0,p.memo)(function(e){var n=e.headerId,t=oH(n),r=(0,uE.A)(t.isMaximized),i=oG().restoreMaximizedPaneGroup,o=(0,uE.A)(t.isModal),a=(0,uE.A)(t.isFloating),l=rf(i4),u=rf(tS),c=oN(n),d=(0,uE.A)(c.activeTabPaneId),p=(0,uE.A)(c.panes),f=p.length>1,h=(0,uE.A)(t.isBeingDragged),g=rf(iq),m=(0,ad.Jn)(sN.id),v=(0,s.Y)(f0.K0,{clsx:vk().headerContentMoreActions,onClick:function(){return g(d)},alt:"Pane actions",tooltipBehavior:void 0===m?"hidden":void 0,tooltipPlacement:"left",tooltipContents:m?(0,s.Y)(ad._y,{fontSize:12,keyCombo:m}):null,children:(0,s.Y)(vA.A,{color:rS.LU.foregroundDimmest})}),w=(0,s.Y)(f0.K0,{alt:"Close pane",onClick:function(){return p.forEach(u)},children:(0,s.Y)(sn.A,{color:rS.LU.foregroundDimmest})}),y=h?null:(0,s.FD)(s.FK,{children:[a?(0,s.Y)(f0.K0,{alt:"Unfloat",onClick:function(){return l(d)},children:(0,s.Y)(og,{color:rS.LU.foregroundDimmest})}):null,r?(0,s.Y)(f0.K0,{alt:"Restore pane",onClick:i,children:(0,s.Y)(sh.A,{color:rS.LU.foregroundDimmest})}):null,o?w:v]});return(0,s.FD)(s.FK,{children:[(0,s.Y)(of.S,{clsx:vk().left,grow:!0,shrink:!0,align:"center",row:!0,children:o&&!f?(0,s.Y)(m7,{headerId:n,paneId:d}):(0,s.Y)(vf,{headerId:n})}),(0,s.Y)(m2,{paneId:d}),(0,s.Y)(of.S,{clsx:vk().right,row:!0,children:y})]})}),vC=(0,rS.CK)("index.module.css",["--left","--top","--scale","--transform-origin-x","--width","--height","--z-index","--transform-x","--transform-y","--border-radius","--background-color","--controls-opacity","--opacity"]);let vD=(0,p.memo)(function(e){var n,t=e.headerId,r=oN(t),i=(0,uE.A)(r.activeTabPaneId),o=oH(t),a=(0,uE.A)(o.isFloating),l=(0,uE.A)(o.isModal),u=(0,p.useRef)(null);(0,r_.d)(u,mw(o.properties,o.getTransitionEnabled),function(e){var n,t,r,i=e.width,o=e.height,a=e.x,l=e.y,u=e.scale,c=e.opacity,s=e.positioning;return(0,f._)((n={},(0,nX._)(n,vC.width,i+"px"),(0,nX._)(n,vC.height,o+"px"),(0,nX._)(n,vC.scale,u.toString()),(0,nX._)(n,vC.opacity,c.toString()),n),"transform"===s?(t={},(0,nX._)(t,vC.transformX,Math.round(a)+"px"),(0,nX._)(t,vC.transformY,Math.round(l)+"px"),(0,nX._)(t,vC.top,"0px"),(0,nX._)(t,vC.left,"0px"),t):(r={},(0,nX._)(r,vC.transformX,"0px"),(0,nX._)(r,vC.transformY,"0px"),(0,nX._)(r,vC.top,Math.round(l)+"px"),(0,nX._)(r,vC.left,Math.round(a)+"px"),r))}),(0,r_.d)(u,o.transformOriginX,function(e){return(0,nX._)({},vC.transformOriginX,e)}),(0,r_.d)(u,o.zIndex,function(e){return{"z-index":e.toString()}});var c=rf(oD);(0,r_.d)(u,rp((0,p.useMemo)(function(){return(0,eo.eU)(function(e){return e(oD)===i})},[i])),function(e){return(0,nX._)({},vC.controlsOpacity,e?"1":"0")});var d=(0,ro.p)();return(0,s.FD)(av.ui,{innerRef:u,clsx:[vk().surface,(0,nX._)({},vk().simple,d)],row:!0,align:"center",style:(n={},(0,nX._)(n,vC.borderRadius,"4px"),(0,nX._)(n,vC.backgroundColor,d?rS.LU.surfaceBackground:uI.s),n),onMouseEnter:function(){return c(i)},onMouseLeave:function(){return c(null)},children:[d?(0,s.Y)(vb,{headerId:t}):(0,s.Y)(vE,{headerId:t}),a&&!l?(0,s.Y)(mO,{paneId:i}):null]})});var vR=t(42028),vF=t(7195),vU=t(68123),vP=t(5491),vO=t(77760),vT={Content:function(e){var n,t=(0,c._)((0,p.useState)(null),2),r=t[0],i=t[1];(0,at.HP)(function(){return r},[r]),(0,at.Qt)(function(){return{type:"agentChat",focusInput:function(){return null==r?void 0:r.focus()}}},[r]);var o=e.options.performPaneOperation,a=(0,p.useCallback)(function(e){return o({operation:"open",pane:e,secondary:"ghostwriterChat"!==e.type})},[o]),l=(0,p.useCallback)(function(e){o({operation:"openPip",data:e})},[o]),u=(0,vF.n)(null==(n=e.pane.data)?void 0:n.sessionId),d=u.session,f=u.setSession,h=(0,p.useCallback)(function(e){o({operation:"replace",pane:{type:"agentChat",data:{sessionId:e.id}}}),f(e)},[o,f]),g=oW(),m=rf(iO),v=rd(iT),w=(0,o3.A)(),y=w.secrets,b=w.fs;return(0,s.Y)(vU.j,{secrets:y,readFile:b.readFile,session:d,setSession:h,inputRef:i,openPane:a,onPlanApproval:function(){return m("tilingLayout")},isDesktopOrTabletAgentPresentationCentered:"centeredVisualPlanner"===g,isDesktopLayoutAgentPresentationTransitionInProgress:v,openPip:l})},Icon:function(e){var n=e.size;return(0,s.Y)(vP.l,{size:n})},getTitle:function(){return"Agent"},description:cu.RB,category:ne.bY.WorkspaceFeatures,decode:function(e){return vR.T(vO.V,e)}},vL=t(34563),vM={Content:function(e){var n=e.options,t=n.performPaneOperation,r=n.paneId,i=e.pane.data.autoFocus,o=rf(nr),a=(0,p.useRef)(null);(0,at.HP)(function(){return{focus:function(){var e;return null==(e=a.current)?void 0:e.call(a)}}},[]);var l=(0,p.useCallback)(function(e){t({operation:"replace",pane:e.pane}),o(r),(0,oJ.u4)(oJ.AZ.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[t,r,o]),u=as({currentPaneId:r,openPane:l});return(0,s.Y)(aw.r,{autoFocus:i,command:u,focusRef:a,showToolDescriptions:!0})},Icon:function(){return null},getTitle:function(){return"New tab"},category:ne.bY.Other,decode:vL.D},vG=t(51997),vN=t(32580),vz=t(90830),vH={Content:function(e){var n=e.options,t=n.paneId,r=n.performPaneOperation,i=e.pane.flow,o=oB(),a=o.isOpen,l=o.toggle,u=(0,p.useCallback)(function(){a.current||l()},[a,l]);return(0,s.Y)(vN.A,{flow:i,closeConfigPane:function(){return r({operation:"remove",pane:{id:t}})},useReadFile:vG.A,openSidebar:u,onNewPaneSelected:function(e){return r({operation:"open",pane:e})},openConsole:function(){return r({operation:"open",pane:{type:"runnerOutput"}})}})},Icon:function(){return(0,s.Y)(cC.A,{})},getTitle:function(){return"Configure Repl"},category:ne.bY.WorkspaceFeatures,decode:vz.D},vW=t(48500),vB=(0,um.AH)([op.wp.border({color:rS.LU.outlineDimmest,width:1,style:"solid"}),op.wp.width("100%"),op.wp.height("100%"),op.wp.overflow("hidden"),{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTop:"none"}]),vj={Content:function(e){var n,t=e.pane;return(0,s.Y)(av.ui,{css:vB,children:(0,s.Y)("iframe",{title:"Replit Docs",src:(null==t||null==(n=t.data)?void 0:n.url)||n1.ik.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,s.Y)(oh.Vx.Provider,{value:{color:rS.LU.yellowStrongest,size:n},children:(0,s.Y)(l6.A,{})})},getTitle:function(){return"Docs"},description:"View Replit Documentation to learn about workspace features, AI, Deployments, and more",category:ne.bY.Other,decode:vW.D},v$=t(59784),vq=(0,um.AH)([op.wp.backgroundColor.backgroundDefault,op.wp.height("100%"),op.wp.borderRadius(4),{overflow:"hidden"}]),vV=(0,um.AH)([op.wp.width("100%"),op.wp.height("100%"),op.wp.justify.center,op.wp.align.center,op.wp.display.flex]);function vK(e){var n=e.paneId,t=e.extensionPaneData,r=e.environmentAPIs,i=(0,aL.Z_)(t.installationId),o=(0,aL.X_)(t.installationId),a=l4({extension:i,environmentAPIs:r,sandboxTitle:t.name,sandboxUrl:(0,aG.sU)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),l=a.didConnectOnce,u=a.isValidExtensionPaneUrl,c=a.getIframeProps,d=a.reloadSandbox;return(0,at.Qt)(function(){return{type:"extension",commands:[{name:"Actions",commands:[{match:oX.G2,data:{icon:(0,s.Y)(cK.A,{}),label:"Refresh",type:"action",description:"Refresh extension",key:"refresh",run:function(){d()}}}]}]}},[d]),(0,s.Y)(of.S,{className:"extension-pane",css:vq,children:o&&l?(0,s.Y)(s.FK,{children:u()?(0,s.Y)("iframe",(0,f._)({},c({css:{width:"100%",height:"100%",border:"none"}}))):(0,s.Y)(of.S,{p:12,children:(0,s.FD)(aC.EY,{children:["Invalid url:"," ",(0,s.Y)(v$.R,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,s.Y)(of.S,{css:vV,children:(0,s.Y)(du.A,{})})})}var vZ=ed.ZU.Object({extensionId:ed.ZU.Unsafe(ed.ZU.String()),installationId:ed.ZU.Unsafe(ed.ZU.String()),baseUrl:ed.ZU.String(),path:ed.ZU.String(),name:ed.ZU.String(),filePath:ed.ZU.Optional(ed.ZU.Union([ed.ZU.String(),ed.ZU.Null(),ed.ZU.Undefined()])),icon:ed.ZU.Optional(ed.ZU.Union([ed.ZU.String(),ed.ZU.Null(),ed.ZU.Undefined()]))}),vJ=ed.ZU.Object({type:ed.ZU.Literal("extension"),data:vZ}),vQ={Content:function(e){var n=e.pane,t=e.options,r=aO();return(0,s.Y)(vK,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:r})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,s.Y)(uV.A,{src:(0,aG.sU)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""}):(0,s.Y)(l9.A,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+" â€” "+e.data.name:e.data.name},category:ne.bY.WorkspaceExtensions,decode:function(e){return vR.T(vJ,e)}},vX=t(5819),v0=t(45731),v1=t(89943),v2=t(1069),v4=t(57069);function v5(){var e=(0,h._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return v5=function(){return e},e}function v3(){var e=(0,h._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return v3=function(){return e},e}var v8={};v5();var v7=(0,g.J1)(v3()),v6=t(39695),v9=t(87261),we=t(83096),wn=t(85801),wt=(0,rA.x)({codeBlock:[op.wp.borderRadius(8),op.wp.position.relative],codeBlockCopyButton:[op.wp.position.absolute,op.wp.top(4),op.wp.right(4)],selectionContainer:[op.wp.maxHeight(400),op.wp.overflowY("scroll")],fsNode:[op.wp.flex.row,op.wp.rowWithGap(8),op.wp.align.center,op.wp.px(4),op.wp.py(2),op.wp.borderRadius(8),op.wp.cursor.pointer],fsNodeActive:[op.wp.backgroundColor.backgroundHigher]});function wr(e){var n=e.content,t=(0,aF.A)().showConfirm;return(0,s.FD)(av.ui,{tag:"code",elevated:!0,css:wt.codeBlock,p:8,children:[n,(0,s.Y)(f0.K0,{alt:"Copy",tooltipBehavior:"hidden",css:wt.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then(function(){return t("Copied")})},children:(0,s.Y)(cB.A,{})})]})}function wi(e){var n,t=e.glob,r=e.openFile,i=e.children,o=(0,c._)((0,p.useState)([]),2),a=o[0],l=o[1],u=(0,c._)((0,p.useState)(""),2),d=u[0],h=u[1],g=(0,v9.c)(),m=(0,o3.A)().fs,v=(0,l3.s_)(),w=(0,p.useMemo)(function(){return(0,uz.tL)(t)},[t]);return((0,p.useEffect)(function(){w&&m.listFiles().then(function(e){e.files&&l(e.files.filter(function(e){return e.match(w)}).map(function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}}))})},[w,v]),w)?(0,s.FD)(of.S,{css:wt.selectionContainer,gap:16,children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",children:(0,s.FD)(of.S,{gap:12,children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Choose an image"}),v?(0,s.Y)(dk.N,{icon:(0,s.Y)(wn.A,{}),colorway:"primary",text:(0,s.FD)(of.S,{gap:2,children:[(0,s.FD)(aC.EY,{children:["Images must be served from"," ",(0,s.Y)("span",{css:[op.wp.font.code,op.wp.backgroundColor.accentPrimaryDimmer,op.wp.borderRadius(4),op.wp.px(4),op.wp.py(2),op.wp.mr(2),op.wp.border({color:rS.LU.accentPrimaryDefault})],children:v.path}),"."]}),(0,s.Y)(aC.EY,{css:[op.wp.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,s.FD)(aC.EY,{css:[op.wp.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,s.Y)("span",{css:[op.wp.font.code,op.wp.fontSize("small"),op.wp.backgroundColor.backgroundHigher,op.wp.borderRadius(4),op.wp.px(4),op.wp.py(2),op.wp.mr(2),op.wp.border({color:rS.LU.outlineDefault})],children:null==(n=t.match(/\{(.*)\}/))?void 0:n[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),i,(0,s.Y)(v6.Ay,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,r=e.getItemProps,i=e.highlightedIndex,o=e.getRootProps,l=e.getMenuProps;return(0,s.FD)(of.S,(0,r6._)((0,f._)({},o({refKey:"innerRef"})),{gap:16,children:[(0,s.Y)(of.S,{css:[op.wp.position.relative],children:(0,s.Y)(we.pd,(0,f._)({id:g("file-search")},n({ref:null,value:d,onChange:function(e){return h(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,s.Y)(of.S,{children:a&&a.length?(0,s.Y)(of.S,(0,r6._)((0,f._)({elevated:!0,tag:"ul",css:(op.wp.pt(8),op.wp.colWithGap(8))},l({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(d)}).filter(function(e){return!v||e.path.startsWith(v.relativePath)||e.path.startsWith("public")}).map(function(e,n){return(0,s.FD)(of.S,(0,r6._)((0,f._)({tag:"li",css:[wt.fsNode,n===i&&wt.fsNodeActive]},r({item:e,index:n,disabled:!!v&&!e.path.startsWith(v.relativePath)})),{children:[(0,s.Y)(ai.A,{path:e.path,size:16}),(0,s.Y)(aC.EY,{children:e.filename}),(0,s.Y)(aC.EY,{variant:"small",color:"dimmest",children:e.dir})]}),n)})})):(0,s.Y)(of.S,{pt:8,children:(0,s.Y)(aC.EY,{color:"dimmer",children:(0,s.FD)("em",{children:["No files found matching ",(0,s.Y)("code",{children:t})]})})})})]}))}})]}):(0,s.FD)(of.S,{css:[op.wp.flex.column,op.wp.colWithGap(16)],children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,s.FD)(aC.EY,{children:["The glob pattern ",(0,s.Y)("code",{children:t})," could not be parsed."]}),(0,s.Y)(of.S,{css:op.wp.border({direction:"bottom",color:rS.LU.backgroundHigher})}),(0,s.FD)(of.S,{gap:8,children:[(0,s.Y)(aC.EY,{children:(0,s.Y)("strong",{children:"Match all Javascript Files"})}),(0,s.Y)(wr,{content:"**/*.js"})]}),(0,s.FD)(of.S,{gap:8,children:[(0,s.Y)(aC.EY,{children:(0,s.Y)("strong",{children:"Match JSON files at root level"})}),(0,s.Y)(wr,{content:"*.json"})]}),(0,s.FD)(of.S,{gap:8,children:[(0,s.Y)(aC.EY,{children:(0,s.Y)("strong",{children:"Match specified file extensions"})}),(0,s.Y)(wr,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}var wo=t(59093),wa=t(38848),wl=function(e){return e.Installing="Installing",e.Loading="Loading",e.Failed="Failed",e.Success="Success",e}(wl||{}),wu={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function wc(e){var n=e.isOpen,t=e.close,r=e.onSubmit,i=(0,l8.mN)(),o=(0,l8.FS)(),a=(0,c._)((0,p.useState)(null),2),l=a[0],u=a[1],d=(0,c._)((0,p.useState)(!0),2),f=d[0],h=d[1],g=(0,c._)((0,p.useState)(null),2),m=g[0],v=g[1],w=(0,c._)((0,p.useState)(null),2),y=w[0],b=w[1],x=(0,p.useRef)(null),_=(0,c._)((0,p.useState)(null),2),Y=_[0],S=_[1],A=(0,c._)((0,p.useState)(null),2),I=A[0],k=A[1],E=(y||I||"").startsWith("/")?y||I:"/"+(y||I),C=(0,c._)((0,p.useState)(null),2),D=C[0],R=C[1],F=function(){k(null),u(null),b(null),S(null),R(null),v(null)},U=function(){h(!0),u(null)};(0,p.useEffect)(function(){b(I)},[I]);var P=(0,p.useCallback)(function(e){return(0,n4._)(function(){var n,t,r,a;return(0,n5.YH)(this,function(c){switch(c.label){case 0:if(!E||!f||"Success"===l||"Failed"===l)return[2];if(n=function(e,n){return(0,n4._)(function(){var t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:return u("Loading"),v(t=(0,aG.sU)(e.baseUrl,n)),[4,fetch(t)];case 1:if(r.sent().ok)return R(n),u("Success"),h(!1),[2,!0];return[2,!1]}})})()},t=e||o)return[3,8];u("Installing"),c.label=1;case 1:return c.trys.push([1,5,,8]),[4,i()];case 2:if(!(r=c.sent()))return[3,4];return[4,P(r)];case 3:case 6:return c.sent(),[2];case 4:case 7:return[3,8];case 5:if(c.sent(),!o)return[3,7];return[4,P(o)];case 8:if(!t)return[3,11];return a=E.replace(/^(\/public|\/static)/,""),[4,n(t,a.slice(1))];case 9:if(c.sent())return[3,11];return[4,n(t,E)];case 10:c.sent(),c.label=11;case 11:return[2]}})})()},[o,E,i,l,f]);(0,p.useEffect)(function(){if(Y){var e=Y.split("/"),n=e.pop(),t=e.findIndex(function(e){return["public","static"].includes(e)});k((-1!==t?"/".concat(Y):"/".concat(e.slice(t+1).join("/"),"/").concat(n))||Y),h(!0),P()}},[P,Y]);var O=Y?Y.split("/"):[],T=O[O.length-1];return(0,s.Y)(am.a,{isOpen:n,onRequestClose:t,children:Y?(0,s.FD)(of.S,{css:[op.wp.flex.column,op.wp.colWithGap(16)],children:[(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(aE.$n,{text:"Back",size:"small",iconLeft:(0,s.Y)(wo.A,{}),onClick:function(){S(null),F()}}),(0,s.FD)(of.S,{row:!0,gap:4,align:"center",children:[(0,s.Y)(wa.A,{}),(0,s.Y)(aC.EY,{color:"dimmer",children:T||""})]})]}),(0,s.Y)(aC.EY,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,s.FD)(of.S,{gap:4,children:[(0,s.Y)(we.pd,{defaultValue:y||"",ref:x,placeholder:"/icon.png",onChange:function(e){return b(e.target.value)},autoFocus:!0,disabled:"Loading"===l||"Installing"===l||"Success"===l}),m&&("Loading"===l||"Success"===l||"Failed"===l)?(0,s.Y)("a",{href:m,target:"_blank",children:(0,s.FD)(aC.EY,{color:"dimmer",variant:"small",css:[op.wp.rowWithGap(4),op.wp.display.flex,{fontStyle:"italic"}],children:[(0,s.FD)("span",{css:[op.wp.truncate],children:["Loading"===l?"Checking ":null,"Success"===l?"Found at ":null,"Failed"===l?"Failed to load ":null,m]}),(0,s.Y)(of.S,{css:[op.wp.display.inlineBlock],children:(0,s.Y)(cj.A,{})})]})}):null]}),(0,s.FD)(of.S,{row:!0,justify:"space-between",align:"center",children:[(0,s.Y)(of.S,{row:!0,gap:4,align:"center",children:l?(0,s.Y)(s.FK,{children:"Loading"===l?(0,s.Y)(du.A,{}):(0,s.Y)(dk.N,{text:wu[l],colorway:"Failed"===l?"negative":"positive",icon:"Failed"===l?(0,s.Y)(pU.A,{}):(0,s.Y)(d4.A,{})})}):null}),"Failed"===l?(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(aE.$n,{text:"Add Anyways",onClick:function(){var e=I||Y;null!==e&&r(e),F(),t()},size:"small"}),(0,s.Y)(aE.$n,{text:"Try Again",onClick:function(){U()},size:"small"})]}):null,D&&"Success"===l?(0,s.Y)(aE.$n,{text:"Continue",iconLeft:(0,s.Y)(d4.A,{}),colorway:"primary",onClick:function(){r(D),F(),t()}}):null]})]}):(0,s.Y)(wi,{openFile:S,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var ws=t(80325),wd=t(48485),wp=(0,rA.x)({centerRowGap8:[op.wp.rowWithGap(8),op.wp.align.center],featureContainer:[op.wp.flex.column,op.wp.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[op.wp.border({style:"dashed"}),op.wp.borderRadius(8),op.wp.p(16),op.wp.colWithGap(8),op.wp.center],featureDetails:[op.wp.flex.column,op.wp.colWithGap(4),op.wp.flex.growAndShrink(1)],newFeatureFieldWrapper:[op.wp.border({direction:"bottom",color:rS.LU.backgroundHighest})],inputCounterFlex:[op.wp.flex.row,op.wp.justify.spaceBetween,op.wp.align.center]});function wf(e){var n=e.features,t=e.onCreate,r=e.onUpdate,i=e.onDelete,o=(0,c._)((0,p.useState)([]),2),a=o[0],l=o[1],u=(0,c._)((0,p.useState)(!1),2),d=u[0],f=u[1];return(0,s.FD)(of.S,{children:[(0,s.FD)(of.S,{pb:12,children:[(0,s.FD)(of.S,{css:wp.centerRowGap8,children:[(0,s.FD)(of.S,{css:wp.centerRowGap8,children:[(0,s.Y)(wd.A,{}),(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,s.Y)(f0.K0,{onClick:function(){f(!d)},alt:"Add a new Feature",tooltipBehavior:d?"hidden":"default",disabled:d,children:(0,s.Y)(aa.A,{})})]}),(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,s.FD)(of.S,{gap:8,children:[d?(0,s.Y)(wg,{onSubmit:function(e){t(e),f(!1)},onCancel:function(){return f(!1)}}):null,(0,s.Y)(of.S,{css:wp.featureContainer,children:n.length>0?n.map(function(e,t){return a.includes(t)?(0,s.Y)(wg,{feature:e,isLast:t===n.length-1,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){return l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,s.Y)(wh,{isLast:t===n.length-1,feature:e,onEdit:function(){return l(function(e){return(0,ek._)(e).concat([t])})},onDelete:function(){i(t)}},t)}):(0,s.Y)(s.FK,{children:d?null:(0,s.FD)(of.S,{css:wp.noFeaturesPlaceholder,children:[(0,s.Y)(aC.EY,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,s.Y)(aE.$n,{variant:"outlined",text:"New Feature",iconLeft:(0,s.Y)(aa.A,{}),onClick:function(){return f(!0)}})]})})})]})]})}function wh(e){var n=e.feature,t=e.onEdit,r=e.onDelete,i=e.isLast;return(0,s.FD)(av.ui,{elevated:!0,css:[op.wp.flex.row,op.wp.rowWithGap(8),op.wp.align.center,op.wp.p(8),i?null:op.wp.border({direction:"bottom",color:rS.LU.backgroundHighest})],children:[(0,s.Y)(wm,{size:64,icon:n.image}),(0,s.FD)(of.S,{css:wp.featureDetails,children:[(0,s.FD)(of.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,s.Y)(aC.EY,{children:n.title}),(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(f0.K0,{alt:"Delete",tooltipBehavior:"hidden",onClick:r,children:(0,s.Y)(uX.A,{color:rS.LU.accentNegativeStronger})}),(0,s.Y)(f0.K0,{alt:"Edit",tooltipBehavior:"hidden",onClick:t,children:(0,s.Y)(ws.A,{})})]})]}),(0,s.Y)(aC.EY,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function wg(e){var n=e.onSubmit,t=e.onCancel,r=e.feature,i=e.isLast,o=(0,c._)((0,p.useState)((null==r?void 0:r.title)||""),2),a=o[0],l=o[1],u=(0,c._)((0,p.useState)((null==r?void 0:r.body)||""),2),d=u[0],f=u[1],h=(0,c._)((0,p.useState)((null==r?void 0:r.image)||null),2),g=h[0],m=h[1],v=a.length>=3&&d.length>=16;return(0,s.FD)(av.ui,{css:[op.wp.flex.column,i||r?null:op.wp.borderRadius(8),r?op.wp.border({color:rS.LU.outlineDefault}):[i?null:op.wp.border({direction:"bottom",color:rS.LU.backgroundHighest})]],elevated:!0,children:[(0,s.FD)(of.S,{css:wp.newFeatureFieldWrapper,p:8,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,s.Y)(aC.EY,{children:a||"New Feature"}),(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(aE.$n,{text:"Cancel",onClick:t}),(0,s.Y)(aE.$n,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return n({title:a,body:d,image:g})},disabled:!v})]})]}),(0,s.FD)(of.S,{p:8,gap:8,children:[(0,s.FD)(of.S,{gap:4,children:[(0,s.FD)(of.S,{css:wp.inputCounterFlex,children:[(0,s.Y)(aC.EY,{color:"dimmer",children:"Title"}),(0,s.Y)(wv,{value:a.length,min:3})]}),(0,s.Y)(we.pd,{value:a,onChange:function(e){return l(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,s.FD)(of.S,{gap:4,children:[(0,s.FD)(of.S,{css:wp.inputCounterFlex,children:[(0,s.Y)(aC.EY,{color:"dimmer",children:"Body"}),(0,s.Y)(wv,{value:d.length,min:16})]}),(0,s.Y)(we.ov,{value:d,onChange:function(e){return f(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.FD)(of.S,{gap:4,grow:!0,shrink:!0,children:[(0,s.Y)(aC.EY,{color:"dimmer",children:"Image (Recommended)"}),(0,s.Y)(aC.EY,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your App. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,s.Y)(wm,{size:100,icon:g,editable:!0,onSubmit:function(e){m(e)}})]})]})]})}function wm(e){var n=e.size,t=e.icon,r=e.editable,i=void 0!==r&&r,o=e.onSubmit,a=(0,o3.A)().container,l=(0,aT.A)(a).url,u=l&&t?(0,aG.sU)(l,t):null,d=(0,c._)((0,p.useState)(!1),2),f=d[0],h=d[1];return(0,s.FD)(s.FK,{children:[(0,s.Y)(av.ui,{background:"default",css:[i?dP.b.filledAndOutlined:null,op.wp.flex.row,op.wp.center,op.wp.width(n),op.wp.height(.75*n),op.wp.maxWidth(n),op.wp.maxHeight(.75*n),op.wp.borderRadius(4),op.wp.border({color:rS.LU.backgroundHighest}),op.wp.flex.grow(1),{background:u?"".concat(rS.LU.backgroundDefault," url(").concat(u,") no-repeat center center / cover"):rS.LU.backgroundDefault}],onClick:function(){return h(!0)},children:u?null:(0,s.Y)(wa.A,{color:rS.LU.foregroundDimmest,size:24})}),i?(0,s.Y)(wc,{isOpen:f,close:function(){return h(!1)},onSubmit:function(e){null==o||o(e)}}):null]})}function wv(e){var n=e.value,t=e.min;return(0,s.FD)(aC.EY,{css:{color:n>=t?rS.LU.accentPositiveStronger:rS.LU.foregroundDimmest},children:[n,"/",t]})}var ww={readFile:"Failed to read manifest file, please try again",noManifest:"No extension.json found",parseManifest:"Failed to parse manifest file",removedManifest:"extension.json was moved or deleted, please re-create it in your static directory",stateUndefined:"State should be defined"},wy=function(){var e=(0,c._)((0,p.useState)(null),2),n=e[0],t=e[1],r=(0,p.useCallback)(function(e){t(function(n){if(!n)throw Error(ww.stateUndefined);return(0,r6._)((0,f._)({},n),{manifestStr:e})})},[]);return{state:n,setState:t,updateString:r}},wb=function(){var e=(0,o3.A)(),n=e.fs,t=e.dotReplit,r=wy(),i=r.state,o=r.setState,a=r.updateString,l=(0,c._)((0,p.useState)(0),2),u=l[0],s=l[1],d=(0,c._)((0,p.useState)(!1),2),h=d[0],g=d[1],m=(0,p.useCallback)(function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,n.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return e.sent(),[2]}})})()];case 1:return e.sent(),[2]}})})()},[n]);(0,p.useEffect)(function(){o(null);var e=!1,r=function(){};return(0,n4._)(function(){var i,l,u,s,d,p,f;return(0,n5.YH)(this,function(h){switch(h.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:if(u=(l=c._.apply(void 0,[h.sent(),2]))[0],s=l[1],e)return[2];if(!u.files||s.error)return o({fileReadError:ww.readFile}),[2];if(p=(0,lK.me)(function(e){let n="/"===e.charAt(0),t="/"===e.slice(-1),r=(function(e,n){let t=0;for(let n=e.length-1;n>=0;n--){let r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(n)for(;t--;)e.unshift("..");return e})(e.split("/").filter(e=>!!e),!n).join("/");return r||n||(r="."),r&&t&&(r+="/"),(n?"/":"")+r}(null!=(d=null==(i=s.config.extension)?void 0:i.outputDirectory)?d:"dist")),!(f=function(e){var n,t=e.filePaths,r=e.outputDir,i=[],o=!0,a=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;if("extension.json"===s)return s;s.endsWith("/extension.json")&&i.push(s)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,g=i[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;if(!m.startsWith(r))return m}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return null!=(n=i[0])?n:null}({filePaths:u.files,outputDir:p})))return o({fileReadError:ww.noManifest}),[2];return r=n.watchTextFile(f,{onReady:function(e){o({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:f})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){o({fileReadError:ww.removedManifest})},onError:function(){o({fileReadError:ww.readFile})}}),[2]}})})(),function(){r(),e=!0}},[n,a,t,u,o]);var v=(0,p.useMemo)(function(){if(!i||null!==i.fileReadError)return null;try{var e=v0._3(i.manifestStr);return(0,aG.Kf)(e)}catch(e){return{error:e,manifest:null}}},[i]),w=(0,p.useCallback)(function(e){if(!i||(null==v?void 0:v.error)||null!==i.fileReadError)throw Error(ww.parseManifest);var n=v0.F6(i.manifestStr,e);i.writeChange((0,v1.s)(i.manifestStr,n)),a(n)},[i,v,a]),y={retry:function(){s(function(e){return e+1})},creatingExtensionJson:h,setCreatingExtensionJson:g,createExtensionJson:m,updateString:a,updateManifest:w};return i?"string"==typeof i.fileReadError?(0,r6._)((0,f._)({},y),{__status:"fileReadError",state:{fileReadError:i.fileReadError},parsed:null}):v?v.manifest?(0,r6._)((0,f._)({},y),{__status:"success",state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:v}):(0,r6._)((0,f._)({},y),{__status:"fileParseError",state:i,parsed:{manifest:null,error:v.error}}):(0,r6._)((0,f._)({},y),{__status:"fileReadError",state:{fileReadError:ww.noManifest},parsed:null}):(0,r6._)((0,f._)({},y),{__status:"loading",state:null,parsed:null})},wx=function(e){return e.loading="loading",e.fileReadError="fileReadError",e.fileParseError="fileParseError",e.success="success",e}({}),w_=function(){return(0,s.Y)(of.S,{css:[op.wp.display.flex,op.wp.width("100%"),op.wp.height("100%")],justify:"center",align:"center",children:(0,s.Y)(du.A,{})})},wY=t(87102);function wS(e){var n=e.children;return(0,s.Y)(of.S,{gap:12,p:16,children:(0,s.Y)(av.ui,{elevated:!0,css:[op.wp.borderRadius(8),op.wp.colWithGap(8)],p:16,children:n})})}var wA=t(41382),wI=function(e){var n=e.error,t=e.performPaneOperation,r=e.manifestPath;return(0,s.Y)(wS,{children:(0,s.FD)(of.S,{gap:16,p:8,children:[(0,s.FD)(of.S,{row:!0,gap:8,css:[op.wp.display.flex,op.wp.align.center],children:[(0,s.Y)(pU.A,{}),(0,s.Y)(aC.EY,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Details:"}),(0,s.Y)(of.S,{gap:8,children:(0,aj._)(n,wY.yk)?n.issues.map(function(e,n){var t=e.path,r=e.message;return(0,s.FD)(of.S,{css:[op.wp.display.flex,op.wp.flex.row,op.wp.rowWithGap(4)],children:[(0,s.Y)(aC.EY,{css:[op.wp.font.code,op.wp.color.orangeStrongest,op.wp.backgroundColor.orangeDimmest],children:t}),(0,s.Y)(aC.EY,{children:r})]},n)}):(0,s.Y)(of.S,{tag:"pre",children:n.message})}),(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(aE.$n,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,wA.a)(r)})}}),(0,s.Y)(aE.$n,{iconLeft:(0,s.Y)(hy.A,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},wk=function(e){var n=e.message,t=wb(),r=t.createExtensionJson,i=t.creatingExtensionJson,o=t.retry,a=t.setCreatingExtensionJson;return(0,s.FD)(wS,{children:[(0,s.FD)(of.S,{row:!0,gap:8,css:[op.wp.display.flex,op.wp.align.center],children:[(0,s.Y)(pU.A,{}),(0,s.Y)(aC.EY,{variant:"subheadDefault",children:n})]}),(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(aE.$n,{colorway:"primary",text:"Create extension.json",loading:i,iconLeft:i?(0,s.Y)(du.A,{}):(0,s.Y)(aa.A,{}),onClick:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),o(),a(!1),[2]}})})()}}),(0,s.Y)(aE.$n,{text:"Retry",iconLeft:(0,s.Y)(cK.A,{}),onClick:function(){o()}})]})]})},wE=t(66121),wC=t(37558),wD=t(99854),wR=t(74013),wF=t(68075),wU=t(67405),wP=(0,rA.x)({iconContainer:[op.wp.position.relative,op.wp.width(64),op.wp.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[op.wp.flex.column,op.wp.position.absolute,op.wp.top(0),op.wp.left(0)],iconOverlay:[op.wp.flex.column,op.wp.colWithGap(4),op.wp.center,op.wp.position.absolute,op.wp.top(0),op.wp.left(0),op.wp.width("100%"),op.wp.height("100%"),op.wp.backgroundColor.backgroundOverlay,op.wp.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}]});function wO(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,l8.FS)(),i=(0,l8.mN)(),o=(0,l8.WB)(),a=(0,l8.EF)(),l=(0,l3.HG)(),u=(0,c._)((0,p.useState)(!1),2),d=u[0],f=u[1],h=(0,c._)((0,p.useState)(!1),2),g=h[0],m=h[1];return(0,s.Y)(of.S,{css:[op.wp.flex.wrap,{rowGap:8}],row:!0,gap:8,children:(0,s.FD)(of.S,{row:!0,gap:8,children:[r||g?(0,s.FD)(s.FK,{children:[(0,s.Y)(aE.$n,{size:"small",text:"Reload",iconLeft:g?(0,s.Y)(du.A,{}):(0,s.Y)(cK.A,{}),disabled:g,onClick:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:if(!r)return[2];return m(!0),[4,o(r.installationId)];case 1:return e.sent(),m(!1),[2]}})})()}}),(0,s.Y)(aE.$n,{size:"small",text:"Unload",iconLeft:(0,s.Y)(sy.A,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,s.Y)(aE.$n,{size:"small",text:"Load locally",colorway:"primary",iconLeft:d?(0,s.Y)(du.A,{}):(0,s.Y)(wR.A,{}),loading:d,onClick:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return f(!0),[4,i()];case 1:return e.sent(),f(!1),[2]}})})()}}),l?(0,s.Y)(aE.$n,{size:"small",text:"View on Store",iconLeft:(0,s.Y)(wU.A,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:l}}})}}):null,(0,s.Y)(aE.$n,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,s.Y)(ws.A,{})})]})})}function wT(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,o3.A)().container,i=(0,aT.A)(r).url,o=wb(),a=o.parsed,l=o.state,u=o.__status;if(u===wx.loading)return(0,s.Y)(w_,{});if(u===wx.fileReadError)return(0,s.Y)(wk,{message:l.fileReadError});var c=a.manifest,d=a.error;return d?(0,s.Y)(wI,{performPaneOperation:n,manifestPath:l.manifestPath,error:d}):(0,s.Y)(of.S,{gap:16,css:[op.wp.width("100%")],children:(0,s.FD)(av.ui,{elevated:!0,css:[op.wp.borderRadius(8),op.wp.colWithGap(8)],p:12,children:[(0,s.FD)(of.S,{row:!0,gap:16,align:"center",children:[(0,s.Y)(of.S,{css:[op.wp.display.flex,op.wp.flex.row],grow:0,children:(0,s.Y)(wC.B,{size:64,baseUrl:null!=i?i:null,icon:c.icon})}),(0,s.FD)(of.S,{grow:!0,shrink:!0,children:[(0,s.Y)(wD.z,{align:"center",justify:"space-between",children:(0,s.Y)(aC.EY,{variant:"subheadDefault",children:c.name})}),(0,s.Y)(aC.EY,{variant:"text",color:"dimmest",children:c.description})]})]}),(0,s.Y)(wO,{setSelectedTab:t,performPaneOperation:n})]})})}function wL(e){var n,t,r,i,o,a,l,u,d,h,g=e.manifest,v=e.onSubmit,w=e.updateManifest,y=(0,l3.HG)(),b=(0,ak.T)(),x=(0,v9.c)(),_=(0,c._)((0,p.useState)(null!=(l=g.name)?l:""),2),Y=_[0],S=_[1],A=(0,c._)((0,p.useState)(null!=(u=g.description)?u:""),2),I=A[0],k=A[1],E=(0,c._)((0,p.useState)(null!=(d=g.longDescription)?d:void 0),2),C=E[0],D=E[1],R=(0,c._)((0,p.useState)(!1),2),F=R[0],U=R[1],P=(0,o3.A)().container,O=(0,aT.A)(P).url,T=(n={variables:{id:y||""},skip:!y},t=(0,f._)({},v8,n),m.I(v7,t)),L=T.data,M=T.loading,G=T.refetch,N=(0,c._)((0,v4.$I)(),2),z=N[0],H=N[1].loading,W=(null==L||null==(r=L.extension)?void 0:r.__typename)==="Extension"&&(null==L||null==(i=L.extension)?void 0:i.user.id)===b,B=(null==L||null==(o=L.extension)?void 0:o.__typename)==="Extension"&&(null==L||null==(a=L.extension)?void 0:a.isListed);return(0,s.FD)(of.S,{tag:"form",gap:16,onSubmit:function(e){e.preventDefault(),v({name:Y,description:I,longDescription:C})},children:[(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:4,children:[(0,s.Y)(aC.EY,{css:[op.wp.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),M||H?(0,s.Y)(du.A,{}):(0,s.FD)(wE.z,{css:op.wp.colWithGap(8),name:"extensionListingStatus",value:B?"listed":"unlisted",disabled:!W,onChange:function(e){z({variables:{extensionId:y||"",isListed:"listed"===e.target.value}}).then(function(){return G()})},children:[W?null:(0,s.Y)(of.S,{css:[op.wp.width("fit-content")],children:(0,s.Y)(dk.N,{text:"You need to release this extension before listing it.",icon:(0,s.Y)(wn.A,{}),colorway:"yellow"})}),(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(wE.s,{id:x("listed"),value:"listed"}),(0,s.Y)("label",{htmlFor:x("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(wE.s,{id:x("unlisted"),value:"unlisted"}),(0,s.Y)("label",{htmlFor:x("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,s.Y)(dZ.a,{}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("name"),children:[(0,s.Y)(aC.EY,{children:"Extension Name"}),(0,s.Y)(we.pd,{id:x("name"),placeholder:"Give your extension a name",value:Y,onChange:function(e){S(e.currentTarget.value)},required:!0})]}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:4,children:[(0,s.Y)(aC.EY,{children:"Extension Icon"}),(0,s.FD)(of.S,{row:!0,gap:12,align:"center",children:[(0,s.FD)(of.S,{css:wP.iconContainer,children:[(0,s.Y)(of.S,{css:wP.iconWrapper,children:(0,s.Y)(wC.B,{size:64,baseUrl:null!=O?O:null,icon:g.icon})}),(0,s.FD)(of.S,{css:wP.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return U(!0)},children:[(0,s.Y)(ws.A,{}),(0,s.Y)(aC.EY,{variant:"small",children:"Edit"})]})]}),(0,s.Y)(aE.$n,{text:"Choose from file system",iconLeft:(0,s.Y)(wF.A,{}),onClick:function(){return U(!0)}})]})]}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("tagline"),children:[(0,s.FD)(of.S,{gap:0,children:[(0,s.Y)(aC.EY,{children:"Tagline"}),(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,s.Y)(we.pd,{id:x("tagline"),placeholder:"Give your extension a short tagline",value:I,onChange:function(e){k(e.currentTarget.value)},required:!0})]}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("longDescription"),children:[(0,s.FD)(of.S,{gap:0,children:[(0,s.Y)(aC.EY,{children:"Description"}),(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,s.Y)(we.ov,{id:x("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=C?C:"",onChange:function(e){D(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,s.Y)(dZ.a,{}),(0,s.Y)(wf,{features:null!=(h=g.features)?h:[],onDelete:function(e){if((null==(n=g.features)?void 0:n.length)===1&&0===e){var n,t,r=(0,f._)({},g);delete r.features,w(r)}else w((0,r6._)((0,f._)({},g),{features:null==(t=g.features)?void 0:t.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;w((0,r6._)((0,f._)({},g),{features:(0,ek._)(null!=(i=null==(t=g.features)?void 0:t.slice(0,n))?i:[]).concat([e],(0,ek._)(null!=(o=null==(r=g.features)?void 0:r.slice(n+1))?o:[]))}))},onCreate:function(e){var n;w((0,r6._)((0,f._)({},g),{features:(0,ek._)(null!=(n=g.features)?n:[]).concat([e])}))}}),(0,s.Y)(of.S,{row:!0,gap:12,css:[{alignSelf:"end"},op.wp.pt(8)],children:(0,s.Y)(aE.$n,{text:"Continue",iconRight:(0,s.Y)(ck.A,{}),colorway:"primary",type:"submit",disabled:!Y||!I||!C})}),(0,s.Y)(wc,{isOpen:F,close:function(){return U(!1)},onSubmit:function(e){w((0,r6._)((0,f._)({},g),{icon:e}))}})]})}function wM(e){var n=e.fileHandlers,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,c._)((0,p.useState)([]),2),l=a[0],u=a[1],d=(0,c._)((0,p.useState)(!1),2),f=d[0],h=d[1];return(0,s.FD)(of.S,{children:[(0,s.FD)(of.S,{pb:12,children:[(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(ur.A,{}),(0,s.Y)(aC.EY,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,s.Y)(f0.K0,{onClick:function(){return h(!f)},alt:"Add a new File Handler",tooltipBehavior:f?"hidden":"default",disabled:f,children:(0,s.Y)(aa.A,{})})]}),(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,s.FD)(of.S,{gap:8,children:[f?(0,s.Y)(wG,{onSubmit:function(e){t(e),h(!1)},onCancel:function(){h(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,s.Y)(wG,{initialFileHandler:e,onSubmit:function(e){r(e,n),u(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){u(function(e){return e.filter(function(e){return e!==n})})}},n):(0,s.FD)(av.ui,{css:[op.wp.borderRadius(8),op.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,s.Y)(aC.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,s.FD)(of.S,{row:!0,gap:12,align:"center",children:[(0,s.Y)(f0.K0,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){o(n)},children:(0,s.Y)(uX.A,{})}),(0,s.Y)(f0.K0,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){u(function(e){return(0,ek._)(e).concat([n])})},children:(0,s.Y)(ws.A,{})}),(0,s.Y)(aE.$n,{iconLeft:(0,s.Y)(wF.A,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,s.Y)(s.FK,{children:f?null:(0,s.FD)(of.S,{css:[op.wp.border({style:"dashed"}),op.wp.borderRadius(8),op.wp.p(16),op.wp.colWithGap(8),op.wp.center],children:[(0,s.Y)(aC.EY,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,s.Y)(aE.$n,{variant:"outlined",text:"New File Handler",iconLeft:(0,s.Y)(aa.A,{}),onClick:function(){return h(!0)}})]})})]})]})}function wG(e){var n,t,r,i,o=e.onSubmit,a=e.onCancel,l=e.initialFileHandler,u=(0,c._)((0,p.useState)(null!=(n=null==l?void 0:l.name)?n:""),2),d=u[0],f=u[1],h=(0,c._)((0,p.useState)(null!=(t=null==l?void 0:l.icon)?t:""),2),g=h[0],m=h[1],v=(0,c._)((0,p.useState)(null!=(r=null==l?void 0:l.handler)?r:""),2),w=v[0],y=v[1],b=(0,c._)((0,p.useState)(null!=(i=null==l?void 0:l.glob)?i:""),2),x=b[0],_=b[1],Y=(0,v9.c)();return(0,s.FD)(av.ui,{css:[op.wp.borderRadius(8),op.wp.border({color:rS.LU.outlineDimmest}),op.wp.p(8),op.wp.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),o({name:d,icon:g,handler:w,glob:x})},elevated:!0,children:[(0,s.FD)(of.S,{css:[op.wp.border({color:rS.LU.outlineDimmest,direction:"bottom"}),op.wp.align.center,op.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,s.Y)(aC.EY,{multiline:!1,children:d||"New File Viewer"}),(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(aE.$n,{text:"Cancel",onClick:function(){a()}}),(0,s.Y)(aE.$n,{colorway:"primary",iconLeft:(0,s.Y)(d4.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,s.FD)(of.S,{gap:8,children:[(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:Y("name"),children:[(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,s.Y)(we.pd,{id:Y("name"),placeholder:"SVG Editor",value:d,onChange:function(e){f(e.currentTarget.value)},required:!0})]}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:Y("handler"),children:[(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,s.Y)(we.pd,{id:Y("handler"),placeholder:"/svg-editor",value:w,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:Y("glob"),children:[(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,s.Y)(we.pd,{id:Y("glob"),placeholder:"*.svg",value:x,onChange:function(e){_(e.currentTarget.value)},required:!0})]}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:Y("icon"),children:[(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,s.Y)(we.pd,{id:Y("icon"),placeholder:"/svg-editor-logo.png",value:g,onChange:function(e){m(e.currentTarget.value)},required:!0})]})]})]})}function wN(e){var n=e.tools,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,c._)((0,p.useState)([]),2),l=a[0],u=a[1],d=(0,c._)((0,p.useState)(!1),2),f=d[0],h=d[1];return(0,s.FD)(of.S,{children:[(0,s.FD)(of.S,{pb:12,children:[(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(al.A,{}),(0,s.Y)(aC.EY,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,s.Y)(f0.K0,{onClick:function(){return h(!f)},alt:"Add a new tool",disabled:f,tooltipBehavior:f?"hidden":"default",children:(0,s.Y)(aa.A,{})})]}),(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,s.FD)(of.S,{gap:8,children:[f?(0,s.Y)(wz,{onSubmit:function(e){t(e),h(!1)},onCancel:function(){h(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,s.Y)(wz,{initialTool:e,onSubmit:function(e){r(e,n),u(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){u(function(e){return e.filter(function(e){return e!==n})})}},n):(0,s.FD)(av.ui,{css:[op.wp.borderRadius(8),op.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,s.Y)(aC.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,s.FD)(of.S,{row:!0,gap:12,align:"center",children:[(0,s.Y)(f0.K0,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){o(n)},children:(0,s.Y)(uX.A,{})}),(0,s.Y)(f0.K0,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){u(function(e){return(0,ek._)(e).concat([n])})},children:(0,s.Y)(ws.A,{})}),(0,s.Y)(aE.$n,{iconLeft:(0,s.Y)(cH.A,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,s.Y)(s.FK,{children:f?null:(0,s.FD)(of.S,{css:[op.wp.border({style:"dashed"}),op.wp.borderRadius(8),op.wp.p(16),op.wp.colWithGap(8),op.wp.center],children:[(0,s.Y)(aC.EY,{color:"dimmest",children:"You haven't added any tools"}),(0,s.Y)(aE.$n,{variant:"outlined",text:"New Tool",iconLeft:(0,s.Y)(aa.A,{}),onClick:function(){return h(!0)}})]})})]})]})}function wz(e){var n,t,r,i=e.onSubmit,o=e.onCancel,a=e.initialTool,l=(0,c._)((0,p.useState)(null!=(n=null==a?void 0:a.name)?n:""),2),u=l[0],d=l[1],f=(0,c._)((0,p.useState)(null!=(t=null==a?void 0:a.icon)?t:null),2),h=f[0],g=f[1],m=(0,c._)((0,p.useState)(null!=(r=null==a?void 0:a.handler)?r:""),2),v=m[0],w=m[1],y=(0,v9.c)();return(0,s.FD)(av.ui,{tag:"form",css:[op.wp.borderRadius(8),op.wp.border({color:rS.LU.outlineDimmest}),op.wp.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),i({name:u,icon:h,handler:v})},children:[(0,s.FD)(of.S,{css:[op.wp.border({color:rS.LU.outlineDimmest,direction:"bottom"}),op.wp.align.center,op.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,s.Y)(aC.EY,{multiline:!1,children:u||"New Tool"}),(0,s.FD)(of.S,{row:!0,gap:8,children:[(0,s.Y)(aE.$n,{text:"Cancel",onClick:function(){o()}}),(0,s.Y)(aE.$n,{colorway:"primary",iconLeft:(0,s.Y)(d4.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,s.FD)(of.S,{gap:8,children:[(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:y("name"),children:[(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,s.Y)(we.pd,{id:y("name"),placeholder:"SQL Viewer",value:u,onChange:function(e){d(e.currentTarget.value)},required:!0})]}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:y("handler"),children:[(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,s.Y)(we.pd,{id:y("handler"),placeholder:"/sql",value:v,onChange:function(e){w(e.currentTarget.value)},required:!0})]}),(0,s.FD)(of.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:y("icon"),children:[(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,s.Y)(we.pd,{id:y("icon"),placeholder:"/sql-logo.png",value:null!=h?h:"",onChange:function(e){g(e.currentTarget.value||null)},required:!0})]})]})]})}function wH(e){var n,t,r=e.manifest,i=e.performPaneOperation,o=e.update,a=(0,l8.FS)(),l=(0,l8.mN)(),u=(0,c._)((0,p.useState)(null),2),d=u[0],h=u[1];return(0,s.FD)(of.S,{gap:24,css:[op.wp.width("100%")],children:[(0,s.Y)(wM,{onOpen:function(e){return(0,n4._)(function(){return(0,n5.YH)(this,function(n){return h(e),[2]})})()},onDelete:function(e){var n;o((0,r6._)((0,f._)({},r),{fileHandlers:null==(n=r.fileHandlers)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,i,a,l;o((0,r6._)((0,f._)({},r),{fileHandlers:(0,ek._)(null!=(a=null==(t=r.fileHandlers)?void 0:t.slice(0,n))?a:[]).concat([e],(0,ek._)(null!=(l=null==(i=r.fileHandlers)?void 0:i.slice(n+1))?l:[]))}))},onCreate:function(e){var n;o((0,r6._)((0,f._)({},r),{fileHandlers:(0,ek._)(null!=(n=r.fileHandlers)?n:[]).concat([e])}))},fileHandlers:null!=(n=r.fileHandlers)?n:[]}),(0,s.Y)(wN,{onOpen:function(e){return(0,n4._)(function(){var n,t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:if(n=a)return[3,2];return[4,l()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return i({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=e.name)?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})})()},onDelete:function(e){var n;o((0,r6._)((0,f._)({},r),{tools:null==(n=r.tools)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,i,a,l;o((0,r6._)((0,f._)({},r),{tools:(0,ek._)(null!=(a=null==(t=r.tools)?void 0:t.slice(0,n))?a:[]).concat([e],(0,ek._)(null!=(l=null==(i=r.tools)?void 0:i.slice(n+1))?l:[]))}))},onCreate:function(e){var n;o((0,r6._)((0,f._)({},r),{tools:(0,ek._)(null!=(n=r.tools)?n:[]).concat([e])}))},tools:null!=(t=r.tools)?t:[]}),(0,s.Y)(am.a,{isOpen:!!d,onRequestClose:function(){return h(null)},children:d?(0,s.Y)(wi,{glob:d.glob,openFile:function(e){return(0,n4._)(function(){var n,t;return(0,n5.YH)(this,function(r){switch(r.label){case 0:if(!d)throw Error("Expected pending file handler");if(n=a)return[3,2];return[4,l()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return i({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=d.name)?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,aG.sU)(n.baseUrl,d.handler),filePath:e}}}),h(null),[2]}})})()}}):null})]})}var wW=t(30724),wB=t(50618),wj=t(2718),w$=(0,um.AH)(dP.b.filled,op.wp.position.relative,op.wp.p(4),op.wp.border({color:rS.LU.outlineDimmer}),op.wp.backgroundColor.backgroundHigher,{"&[data-complete]":[op.wp.backgroundColor.backgroundDefault,{pointerEvents:"none"}],button:{overflow:"hidden",margin:-1,borderWidth:0,padding:0,width:1,height:1,background:"none",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",zIndex:1}}}),wq=function(e){var n=e.complete,t=e.onClick,r=e.description,i=e.title,o=e.icon;return(0,s.Y)(of.S,{tag:"li",css:w$,"data-complete":n,children:(0,s.FD)(of.S,{p:4,children:[(0,s.FD)(of.S,{row:!0,gap:6,align:"center",children:[n?(0,s.Y)(d4.A,{color:rS.LU.accentPositiveStrongest,size:16,css:[op.wp.mr(4)]}):null!=o?o:null,(0,s.Y)(aC.EY,{variant:"small",color:n?"dimmer":"default",css:[op.wp.fontWeight.medium],children:i})]}),r?(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",children:r}):null,(0,s.Y)(of.S,{children:(0,s.Y)("button",{onClick:function(){t&&"function"==typeof t&&t()},type:"button",children:"Start"})})]})})};let wV=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,wW.g)("extensions-onboarding-checklist"),i=r.isDone,o=r.setAsDone,a=(0,wW.g)("extensions-onboarding-checklist-create"),l=a.isDone,u=a.setAsDone,c=(0,wW.g)("extensions-onboarding-checklist-concepts"),d=c.isDone,h=c.setAsDone,g=(0,wW.g)("extensions-onboarding-checklist-api"),m=g.isDone,v=g.setAsDone,w=(0,wW.g)("extensions-onboarding-checklist-publish").isDone;if((0,p.useEffect)(function(){u()},[]),void 0===i||!0===i)return null;var y=[l,d,m,w].filter(Boolean).length,b=[{name:"create",title:"Create an Extension",complete:!!l,icon:(0,s.Y)(l9.A,{})},{name:"concepts",title:"Learn key concepts",complete:!!d,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:n1.ik.EXTENSIONS}}}),(0,oJ.u4)(oJ.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),h()},icon:(0,s.Y)(wB.A,{})},{name:"learn",title:"Use the API",complete:!!m,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:n1.ik.EXTENSIONS}}}),(0,oJ.u4)(oJ.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),v()},icon:(0,s.Y)(cT.A,{})},{name:"publish",title:"Publish your Extension",complete:!!w,onClick:function(){t(1)},icon:(0,s.Y)(wj.A,{})}];return(0,s.Y)("section",{css:[op.wp.width("100%")],children:(0,s.FD)(of.S,{gap:12,children:[(0,s.Y)(of.S,{gap:2,children:(0,s.FD)(of.S,{row:!0,gap:12,css:[op.wp.flex.wrap],align:"center",children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,s.FD)(of.S,{row:!0,gap:12,align:"center",children:[(0,s.Y)(of.S,{row:!0,gap:2,align:"center",justify:"center",children:Array.from({length:b.length}).map(function(e,n){return(0,s.Y)(of.S,{css:[op.wp.borderRadius(8),op.wp.width(12),op.wp.height(4),n<y?op.wp.backgroundColor.accentPositiveDefault:op.wp.backgroundColor.backgroundHighest]},n)})}),(0,s.Y)(aC.EY,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(y,"/").concat(b.length)}),(0,s.Y)(f0.K0,{alt:"Hide section",onClick:o,children:(0,s.Y)(sn.A,{})})]})]})}),(0,s.Y)(of.S,{tag:"ul",css:[op.wp.flex.wrap,{listStyleType:"none",gap:rS.LU.space8}],row:!0,children:b.map(function(e,n){return(0,s.Y)(wq,(0,f._)({},e),n)})})]})})};var wK=t(37962);function wZ(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=wb(),i=r.__status,o=r.parsed,a=r.state,l=r.updateString;if("loading"===i)return(0,s.Y)(w_,{});if("fileReadError"===i)return(0,s.Y)(wk,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===i){var u=o.error;return(0,s.Y)(wI,{performPaneOperation:n,manifestPath:a.manifestPath,error:u})}var c=o.manifest;return"success"===i&&c?(0,s.FD)(of.S,{css:[op.wp.width("100%")],pt:12,gap:24,align:"center",children:[(0,s.Y)(wT,{performPaneOperation:n,setSelectedTab:t}),(0,s.Y)(wV,{performPaneOperation:n,setSelectedTab:t}),(0,s.Y)(of.S,{css:[op.wp.border({direction:"bottom",width:4,color:rS.LU.outlineDimmest}),op.wp.width("100%")]}),(0,s.FD)(of.S,{gap:8,css:[op.wp.width("100%")],children:[(0,s.FD)(of.S,{gap:2,children:[(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(wK.A,{}),(0,s.Y)(aC.EY,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,s.FD)(aC.EY,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,s.Y)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:n1.ik.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,s.Y)(of.S,{css:[op.wp.borderRadius(4),op.wp.border({color:rS.LU.outlineDimmest,width:1}),op.wp.flex.row,op.wp.align.center,op.wp.p(8),op.wp.flex.wrap,{gap:12},op.wp.width("fit-content")],children:v2.W.map(function(e){var n;return(0,s.FD)(of.S,{row:!0,gap:6,align:"center",children:[(0,s.Y)(un.S,{id:e.key,checked:null==(n=c.scopes)?void 0:n.some(function(n){return n.name===e.key}),onChange:function(n){var t,r,i,o=(null==(t=c.scopes)?void 0:t.some(function(n){return n.name===e.key}))&&!n?v0.F6(a.manifestStr,(0,r6._)((0,f._)({},c),{scopes:null==(r=c.scopes)?void 0:r.filter(function(n){return n.name!==e.key})})):v0.F6(a.manifestStr,(0,r6._)((0,f._)({},c),{scopes:(0,ek._)(null!=(i=c.scopes)?i:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,v1.s)(a.manifestStr,o)),l(o)}}),(0,s.Y)("label",{htmlFor:e.key,css:[op.wp.fontSize(12),op.wp.cursor.pointer],children:(0,s.Y)("abbr",{title:e.description,css:[{textDecorationColor:rS.LU.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,s.Y)(wH,{performPaneOperation:n,manifest:c,update:function(e){var n=v0.F6(a.manifestStr,e);a.writeChange((0,v1.s)(a.manifestStr,n)),l(n)}})]}):(0,s.Y)("div",{children:"unknown state"})}var wJ=t(8761),wQ=t(53556),wX=t(45440),w0=t(95513),w1=t(24857),w2=(0,rA.x)({logViewerTopLevel:[op.wp.height("100%")],logsContainer:[op.wp.scrollbar.thin,op.wp.backgroundColor.backgroundDefault,op.wp.overflowY("scroll"),op.wp.flex.growAndShrink(1)],logViewerHeader:[op.wp.border({direction:"bottom",width:rS.LU.borderWidthDefault}),op.wp.display.flex,op.wp.flex.row,op.wp.rowWithGap(8),op.wp.align.center],logViewerHeaderControl:[op.wp.flex.row,op.wp.rowWithGap(4),op.wp.align.center],logLine:[op.wp.font.code,dP.b.listItem,op.wp.rowWithGap(2),op.wp.align.center],logLineIcon:[{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function w4(e){var n=e.log,t=e.prevLevel,r=e.isLast,i=e.isFirst,o=(0,c._)((0,p.useState)(!1),2),a=o[0],l=o[1],u=(0,wQ.A)().ref;return(0,s.FD)(of.S,{css:[op.wp.flex.column,function(e){if(e===w0.$.warn)return{color:rS.LU.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:i?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===w0.$.error)return{color:rS.LU.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:i?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=rS.LU.backgroundHigher;return t===w0.$.warn?n="rgba(150, 125, 0, 0.5)":t===w0.$.error&&(n="rgba(229, 34, 34, 0.5)"),{color:rS.LU.foregroundDefault,borderTop:i?void 0:"1px solid ".concat(n),borderBottom:r?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,s.FD)(of.S,{css:w2.logLine,p:2,onClick:function(){return l(function(e){return!e})},children:[(0,s.Y)(of.S,{css:w2.logLineIcon,p:4,children:(0,s.Y)(function(){return n.logLevel===w0.$.warn?(0,s.Y)(pU.A,{size:16}):n.logLevel===w0.$.error?(0,s.Y)(w1.A,{size:16}):(0,s.Y)(wn.A,{size:16,css:{opacity:0}})},{})}),(0,s.Y)(aC.EY,{maxLines:10,css:w2.logMessage,variant:"small",children:n.message}),a?(0,s.Y)(fl.A,{size:16}):(0,s.Y)(pn.A,{size:16})]}),a?(0,s.Y)(of.S,{children:(0,s.Y)(wJ.Ay,{ref:u,css:wX.$1,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}let w5=function(){var e=(0,l1.Du)(a9.MN),n=(0,l1.Ol)(a9.KO),t=(0,c._)((0,l1.Cj)(a9.gT),2),r=t[0],i=t[1],o=(0,p.useRef)(null);return(0,p.useEffect)(function(){var e,n=o.current;n&&(null==(e=n.children[n.children.length-1])||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,s.FD)(of.S,{css:w2.logViewerTopLevel,children:[(0,s.FD)(of.S,{className:"log-viewer-header",css:w2.logViewerHeader,p:8,children:[(0,s.Y)(of.S,{css:w2.logViewerHeaderControl,style:{flexGrow:1},children:(0,s.Y)(we.pd,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return i(e.target.value)}})}),(0,s.FD)(of.S,{css:w2.logViewerHeaderControl,children:[(0,s.Y)(f0.K0,{alt:"Clear logs",onClick:function(){return n()},children:(0,s.Y)(sn.A,{id:"clear-logs"})}),(0,s.Y)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,s.Y)(of.S,{css:w2.logsContainer,innerRef:o,children:e.map(function(n,t){var r;return(0,s.Y)(w4,{log:n,prevLevel:null==(r=e[t-1])?void 0:r.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)})})]})};var w3=t(90676),w8=t(57933);function w7(){var e=(0,h._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return w7=function(){return e},e}function w6(){var e=(0,h._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w6=function(){return e},e}function w9(){var e=(0,h._)(["\n  query Publish2Extension($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n        name\n        description\n        canDeployExtension\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return w9=function(){return e},e}function ye(){var e=(0,h._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return ye=function(){return e},e}function yn(){var e=(0,h._)(["\n  mutation UpdateExtension(\n    $extensionId: String!\n    $name: String\n    $description: String\n  ) {\n    updateExtension(\n      extensionId: $extensionId\n      name: $name\n      description: $description\n    ) {\n      ... on Extension {\n        id\n        name\n        description\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return yn=function(){return e},e}var yt={},yr=(0,g.J1)(w7()),yi=(0,g.J1)(w6(),aY.Fz),yo=(0,g.J1)(w9()),ya=(0,g.J1)(ye()),yl=(0,g.J1)(yn()),yu=t(56101),yc=of.D.button,ys=function(e){return e.Pending="pending",e.Active="active",e.Complete="complete",e.Error="error",e}({}),yd=function(){return(0,s.Y)(of.S,{css:[op.wp.border({color:rS.LU.outlineDimmest,direction:"top"})],grow:!0,row:!0})},yp=function(e){var n=e.text,t=e.size,r=void 0===t?"default":t,i=e.state,o=e.onClick,a=e.disabled,l=e.hideLoadingIcon,u=(0,aE.J)(r),c=(0,aE.Jt)(r);return(0,s.Y)(yc,{type:"button",css:[op.wp.reset.button,op.wp.position.relative,o&&dP.b.nofill,op.wp.px(8),op.wp.py(2),op.wp.borderRadius(4),op.wp.rowWithGap(4),op.wp.align.center,{borderRadius:rS.LU.borderRadiusRound}].concat((0,ek._)("error"===i?[op.wp.color.accentNegativeStronger]:"active"===i?[op.wp.backgroundColor.accentPrimaryDimmer,op.wp.color.accentPrimaryStrongest]:"complete"===i?[op.wp.color.accentPositiveStronger]:[op.wp.color.foregroundDimmest])),onClick:o,disabled:a,children:(0,s.Y)(aE.EE,{text:n,iconSize:c,textVariant:u,iconRight:function(){if("error"===i)return(0,s.Y)(pU.A,{});if("active"===i){if(l)return;return(0,s.Y)(du.A,{})}return"complete"===i?(0,s.Y)(d4.A,{}):(0,s.Y)(wK.A,{})}()})})},yf=t(92949),yh=t(59552),yg=t(32512),ym=t(54154),yv=t(91175),yw=function(e){return e.Details="Details",e.Init="Init",e.CreatingExtension="CreatingExtension",e.CreatingExtensionError="CreatingExtensionError",e.Queued="Queued",e.Deploying="Deploying",e.DeployError="DeployError",e.Success="Success",e}(yw||{}),yy=["CreatingExtension","Deploying"],yb=function(e){return e.Details="Details",e.Init="Configure",e.Create="Create",e.Deploy="Deploy",e}(yb||{}),yx=["Details","Configure","Deploy"];function y_(e){var n,t,r,i,o,a=e.performPaneOperation,l=(0,o3.A)(),u=l.container,d=l.fs,h=l.dotReplit,g=(0,c._)((n=(0,f._)({},yt,void 0),w8._(yo,n)),1)[0],m=(0,wW.g)("extensions-onboarding-checklist-".concat("publish")).setAsDone,w=(0,c._)((0,p.useState)(null),2),y=w[0],b=w[1],x=(0,c._)((0,p.useState)("Details"),2),_=x[0],Y=x[1],S=(0,c._)((0,p.useState)(null),2),A=S[0],I=S[1],k=wb(),E=k.__status,C=k.parsed,D=k.state,R=k.updateManifest,F=(0,yu.W)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),U=F.value,P=F.setValue,O=F.error,T=F.validate,L=(0,c._)((0,p.useState)([]),2),M=L[0],G=L[1],N=(0,p.useCallback)(function(e){return a({operation:"open",secondary:!0,pane:{type:(0,ne.QY)(e),data:e}})},[a]),z=(0,c._)((0,yf.A)({openFile:N,listFiles:d.listFiles}),2),H=z[0],W=z[1],B=(0,yh.V)();t=(0,f._)({},yt,{variables:{extensionId:null!=y?y:""},onData:function(e){var n=e.data;if(n.data&&!n.error){var t=n.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===t.__typename&&G(function(e){return(0,ek._)(e).concat((0,ek._)(t.log))}),"ExtensionBuildDeployStatusAction"===t.__typename&&(t.status===pq.nHS.Success?Y("Success"):t.status===pq.nHS.Failed&&Y("DeployError"))}},skip:"Deploying"!==_||!y}),w3.R(yr,t),(0,p.useEffect)(function(){H&&(H.clear(),M.forEach(function(e){H.write(e.replaceAll("\n","\r\n"))}))},[M,H]);var j=(0,p.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){b(null),I(null),P(null);return}n.buildCommand&&I(n.buildCommand),n.outputDirectory&&P(n.outputDirectory),n.extensionID&&b(n.extensionID)}},[P]);(0,p.useEffect)(function(){var e=!1;return(0,n4._)(function(){var n;return(0,n5.YH)(this,function(t){switch(t.label){case 0:return[4,h.getConfig()];case 1:if(n=t.sent(),e)return[2];return j(n),[2]}})})(),function(){e=!0}},[h,j]);var $=(0,p.useCallback)(function(e){return(0,n4._)(function(){return(0,n5.YH)(this,function(n){switch(n.label){case 0:return b(e),[4,h.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})})()},[h]),q=(0,p.useCallback)(function(e){return(0,n4._)(function(){return(0,n5.YH)(this,function(n){switch(n.label){case 0:return I(e),[4,h.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})})()},[h]),V=(0,c._)((0,p.useState)(null),2),K=V[0],Z=V[1],J=(0,c._)((0,p.useState)(null),2),Q=J[0],X=J[1],ee=(0,c._)((0,p.useState)(null),2),en=ee[0],et=ee[1],er=(0,c._)((0,p.useState)(null),2),eo=er[0],ea=er[1],el=(0,c._)((0,p.useState)(null),2),eu=el[0],ec=el[1],es=(0,c._)((r=(0,f._)({},yt,void 0),v.n(yi,r)),1)[0],ed=(0,ei.A)(),ep=(0,c._)((i=(0,f._)({},yt,void 0),v.n(ya,i)),1)[0],ef=(0,c._)((0,p.useState)(null),2),eh=ef[0],eg=ef[1],em=(0,p.useCallback)(function(e){var n=e.name,t=e.description;return(0,n4._)(function(){var e,r,i;return(0,n5.YH)(this,function(o){switch(o.label){case 0:return[4,ep({variables:{name:n,description:t}})];case 1:if((r=o.sent()).errors)return[2,{error:r.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(i=null==(e=r.data)?void 0:e.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===i.__typename||"UserError"===i.__typename||"UnauthorizedError"===i.__typename)return[2,{error:"Failed to create extension: "+i.message,result:null}];if("Extension"===i.__typename)return[2,{error:null,result:i}];throw Error("Unexpected response from createExtension mutation")}})})()},[ep]),ev=(0,c._)((o=(0,f._)({},yt,void 0),v.n(yl,o)),1)[0],ew=(0,p.useCallback)(function(){return(0,n4._)(function(){var e,n,t,r,i,o,a,l,c,s,p,f,h,v,w,b,x,_;return(0,n5.YH)(this,function(S){switch(S.label){case 0:return e=y,[4,T()];case 1:if(null==(n=S.sent())?void 0:n.message)return et(null==n?void 0:n.message),[2];if(!U)throw Error("expected output folder");return t=(0,lK.Fd)(U),(r=function(){Y("Init"),G([]),ec(null),et(null),X(null),Z(null)})(),[4,d.flush()];case 2:if(S.sent(),!e)return[3,11];return[4,g({variables:{extensionId:e}})];case 3:if((i=S.sent()).error||!i.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(o=i.data.extension)?void 0:o.__typename)!=="NotFoundError")return[3,5];return[4,new Promise(function(n){eg({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){eg(null),n(e)}})})];case 4:case 6:if(!S.sent())return r(),[2];return e=null,[3,11];case 5:if(!((null==o?void 0:o.__typename)==="Extension"&&!o.canDeployExtension))return[3,7];return[4,new Promise(function(n){eg({message:"You do not have the permissions to deploy the extension referenced in .replit (".concat(e,"). Would you like to create a new extension?"),callback:function(e){eg(null),n(e)}})})];case 7:if(!((null==o?void 0:o.__typename)==="Extension"&&o.canDeployExtension))return[3,10];if(c=null==C||null==(a=C.manifest)?void 0:a.name,s=null==C||null==(l=C.manifest)?void 0:l.description,!(c&&c!==o.name||s&&s!==o.description))return[3,9];return[4,ev({variables:{extensionId:e,description:null!=s?s:void 0,name:null!=c?c:void 0}})];case 8:S.sent(),S.label=9;case 9:return[3,11];case 10:throw Error("Encountered an unknown error. Please contact support.");case 11:if(e)return[3,13];return Y("CreatingExtension"),[4,em({name:null!=(h=null==C||null==(p=C.manifest)?void 0:p.name)?h:"My extension",description:null!=(v=null==C||null==(f=C.manifest)?void 0:f.description)?v:"My extension's description"})];case 12:if(null!==(w=S.sent()).error)return Y("CreatingExtensionError"),ea(w.error),[2];$(e=w.result.id),S.label=13;case 13:var I;if(!e)throw Error("expected extension id to be set");return[4,(I=t,new Promise(function(e){var n=u.openChannel({service:"gcsfiles"},function(t){return t.channel.request({persistMirror:{path:I}}).then(function(t){t.ok,n(),e()}),function(e){e.willReconnect&&n()}})}))];case 14:S.sent(),Y("Queued"),S.label=15;case 15:return S.trys.push([15,17,,18]),[4,es({variables:{extensionId:e,replId:ed,outputDirectory:t,buildCommand:null!=A?A:""}})];case 16:return b=S.sent(),[3,18];case 17:if(x=S.sent(),Y("DeployError"),x.message.includes("received message larger than max"))return ec("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return ec(x.message),[2];case 18:if(b.errors)return Y("DeployError"),ec("Internal error. Please contact support: "+b.errors.map(function(e){return e.message}).join(", ")),[2];if(!b.data)return Y("DeployError"),ec("Encountered an unknown error. Please contact support."),[2];if("Extension"===(_=b.data.deployExtension2).__typename)return Y("Deploying"),m(),(0,oJ.u4)(oJ.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),Z(_),[2];if("message"in _)return Y("DeployError"),ec(_.message),[2];return Y("DeployError"),ec("Encountered an unknown error. Please contact support."),[2]}})})()},[A,u,U,T,ed,d,Y,es,g,ev,y,em,$,m,C]),ey=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(_),eb=yx.indexOf(ey);function ex(){return Q?"Build error: ".concat(Q):en?"Validation error: ".concat(en):en?"Create extension error: ".concat(eo):eu?"Deploy error: ".concat(eu):void 0}var e_=(0,aL.Ot)().find(function(e){return e.extensionId===y}),eY=(0,c._)((0,p.useState)(!1),2),eS=eY[0],eA=eY[1],eI=(0,aL.Sc)(),eE=(0,p.useMemo)(function(){return eS?(0,s.Y)(du.A,{}):e_?(0,s.Y)(d4.A,{}):(0,s.Y)(wR.A,{})},[eS,e_]),eC=(0,l2.D)().values.global,eD=(0,hg.mO)().fireBurst,eR=(0,c._)((0,p.useState)(!1),2),eF=eR[0],eU=eR[1],eP=(0,p.useRef)(null);if((0,p.useEffect)(function(){eP.current&&!eF&&"Success"===_&&(eD({x:eP.current.getBoundingClientRect().left,y:eP.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,hg.Im)(300,5e3)},size:function(){return{width:(0,hg.Im)(8,16),height:(0,hg.Im)(8,16)}},color:[eC.tealStronger,eC.blurpleStronger,eC.yellowStronger]}),eD({x:eP.current.getBoundingClientRect().right,y:eP.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,hg.Im)(300,5e3)},size:function(){return{width:(0,hg.Im)(8,16),height:(0,hg.Im)(8,16)}},color:[eC.blueStronger,eC.greenStronger,eC.pinkStronger]}),eU(!0))},[_,eC,eD,eF]),E===wx.loading)return(0,s.Y)(w_,{});if(E===wx.fileReadError)return(0,s.Y)(wk,{message:D.fileReadError});var eO=C.manifest,eT=C.error;return eT?(0,s.Y)(wI,{performPaneOperation:a,manifestPath:D.manifestPath,error:eT}):(0,s.FD)(of.S,{css:[op.wp.flex.column,op.wp.display.flex,op.wp.height("100%"),op.wp.justify.center,op.wp.align.center,op.wp.position.relative],children:[(0,s.Y)(of.S,{css:[op.wp.position.absolute,op.wp.top(0),op.wp.left(0),op.wp.right(0)],className:"Confetti",innerRef:eP}),(0,s.FD)(of.S,{css:[op.wp.width("100%"),op.wp.maxWidth(vX.R)],grow:!0,shrink:!0,p:12,pt:16,gap:24,children:["Success"!==_?(0,s.FD)(s.FK,{children:[(0,s.FD)(of.S,{gap:16,children:[(0,s.Y)(aC.EY,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,s.Y)(of.S,{row:!0,gap:4,align:"center",children:yx.map(function(e,n){var t;return(0,s.FD)(p.Fragment,{children:[0!==n&&(0,s.Y)(yd,{}),(0,s.Y)(yp,{state:(t=n)<eb?ys.Complete:t!==eb?ys.Pending:["CreatingExtensionError","DeployError"].includes(_)?ys.Error:ys.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===_?(0,s.Y)(of.S,{css:[op.wp.flex.column,op.wp.colWithGap(8),op.wp.width("100%")],children:(0,s.Y)(wL,{manifest:eO,updateManifest:R,onSubmit:function(e){R((0,f._)({},eO,e)),Y("Init")}})}):null,"Details"!==_?(0,s.FD)(s.FK,{children:[(0,s.FD)(of.S,{gap:16,children:[(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(yv.A,{}),(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Build settings"}),(0,s.Y)(of.S,{css:[op.wp.border({color:rS.LU.backgroundHighest,direction:"y"})],grow:!0})]}),(0,s.FD)(of.S,{gap:4,children:[(0,s.FD)("label",{htmlFor:"buildCommand",css:[op.wp.display.flex,op.wp.rowWithGap(4),op.wp.align.center],children:[(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,s.Y)(uv.m_,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,s.Y)(wn.A,{size:12})})]}),(0,s.Y)(we.pd,{value:null!=A?A:"",onChange:function(e){return q(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==_&&yy.includes(_)})]}),(0,s.FD)(of.S,{gap:4,children:[(0,s.FD)("label",{htmlFor:"outputFolder",css:[op.wp.display.flex,op.wp.rowWithGap(4),op.wp.align.center],children:[(0,s.Y)(aC.EY,{color:"dimmer",variant:"small",children:"Output folder"}),(0,s.Y)(uv.m_,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,s.Y)(wn.A,{size:12})})]}),(0,s.Y)(we.pd,{id:"outputFolder",value:null!=U?U:"",disabled:"Init"!==_&&yy.includes(_),onChange:function(e){P(e.currentTarget.value),h.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),O?(0,s.Y)(aC.EY,{css:[op.wp.color.accentNegativeStronger],children:O.message}):null]}),(0,s.Y)(aE.$n,{text:"Init"===_||_.endsWith("Error")?"Deploy and Release":"Deployingâ€¦",iconLeft:"Init"===_||_.endsWith("Error")?(0,s.Y)(f6.A,{}):(0,s.Y)(du.A,{}),onClick:ew,disabled:"Init"!==_&&yy.includes(_),colorway:"primary"}),(0,s.FD)(aC.EY,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,s.Y)("a",{href:n1.aC.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),M.length>0?(0,s.FD)(of.S,{gap:8,children:[(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(ym.A,{}),(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Build logs"}),(0,s.Y)(of.S,{css:[op.wp.border({color:rS.LU.backgroundHighest,direction:"y"})],grow:!0})]}),ex()?(0,s.Y)(dk.N,{text:ex(),colorway:"red",icon:(0,s.Y)(w1.A,{})}):null,(0,s.Y)(of.S,{css:[op.wp.display.flex,op.wp.py(12),op.wp.pl(16),op.wp.borderRadius(8),op.wp.overflow("hidden"),{border:"1px solid ".concat(rS.LU.outlineDimmest),backgroundColor:null==B?void 0:B.background}],children:(0,s.Y)(of.D.div,{css:[op.wp.width("100%"),op.wp.maxWidth("100%")],ref:W})})]}):null,eh?(0,s.FD)(av.ui,{elevated:!0,css:[op.wp.borderRadius(8)],p:8,gap:8,children:[(0,s.Y)(aC.EY,{variant:"text",multiline:!0,maxLines:3,children:eh.message}),(0,s.FD)(of.S,{row:!0,gap:4,align:"center",children:[(0,s.Y)(aE.$n,{text:"No",css:[op.wp.flex.grow(1)],onClick:function(){return eh.callback(!1)}}),(0,s.Y)(aE.$n,{text:"Yes",colorway:"primary",css:[op.wp.flex.grow(1)],onClick:function(){return eh.callback(!0)}})]})]}):null]}):null]}):null,K&&"Success"===_?(0,s.FD)(of.S,{gap:16,children:[(0,s.FD)(of.S,{gap:4,children:[(0,s.Y)(aC.EY,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,s.Y)(of.S,{py:8,children:(0,s.Y)(yg.q,{showMetadata:!1,extension:K,onClick:function(){a({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,aI.PM)(K.id)}}})}})}),(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(wB.A,{}),(0,s.Y)(aC.EY,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,s.Y)(of.S,{css:[op.wp.border({color:rS.LU.backgroundHighest,direction:"y"})],grow:!0})]}),(0,s.FD)(of.S,{css:[op.wp.border({color:rS.LU.outlineDimmest}),op.wp.borderRadius(8)],p:12,gap:8,children:[(0,s.Y)(aC.EY,{variant:"subheadDefault",children:"Install your Extension"}),(0,s.Y)(aC.EY,{color:"dimmer",children:"Once installed, you can use the extension in any of your Apps."}),(0,s.Y)(aE.$n,{text:e_?"Already installed":"Install Extension",colorway:e_?"green":"primary",disabled:eS||!!e_,iconLeft:eE,loading:eS,onClick:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return eA(!0),[4,eI({extensionId:(0,aI.PM)(K.id),replId:null})];case 1:return e.sent(),eA(!1),[2]}})})()}})]})]}):null]})]})}var yY=t(30416),yS=t(21769);function yA(e){var n=e.performPaneOperation,t=(0,c._)((0,p.useState)(0),2),r=t[0],i=t[1];return(0,s.Y)(of.S,{css:[op.wp.flex.column,op.wp.height("100%"),op.wp.position.relative],children:(0,s.FD)(yY.tU,{css:[op.wp.flex.grow(1),op.wp.flex.column,op.wp.align.center,op.wp.display.flex,op.wp.overflow("hidden")],selectedIndex:r,onSelectionChange:function(e){return i(e)},children:[(0,s.Y)(av.ui,{css:[op.wp.top(0),op.wp.width("100%"),op.wp.zIndex(1)],align:"center",children:(0,s.FD)(yY.wb,{css:[op.wp.align.center,op.wp.width("100%"),op.wp.pb(0),op.wp.maxWidth(vX.R)],children:[(0,s.Y)(yY.oz,{css:[op.wp.p(12),op.wp.height("100%"),op.wp.borderRadius(0)],iconLeft:(0,s.Y)(fc.A,{}),children:"Home"}),(0,s.Y)(yY.oz,{css:[op.wp.p(12),op.wp.height("100%"),op.wp.borderRadius(0)],iconLeft:(0,s.Y)(yS.A,{}),children:"Releases"}),(0,s.Y)(yY.oz,{css:[op.wp.p(12),op.wp.height("100%"),op.wp.borderRadius(0)],iconLeft:(0,s.Y)(w1.A,{}),children:"Logs"}),(0,s.Y)(of.S,{grow:!0}),(0,s.Y)(av.ui,{css:[{boxShadow:"inset 0 -1px 0 ".concat(rS.LU.outlineDimmest)}],p:8,children:(0,s.Y)(aE.$n,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:n1.ik.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,s.Y)(hy.A,{}),css:[op.wp.display.inlineFlex]})})]})}),(0,s.FD)(yY.T2,{css:[op.wp.flex.grow(1),op.wp.align.center,op.wp.justify.center,op.wp.width("100%"),op.wp.display.flex,op.wp.overflow("hidden")],children:[(0,s.Y)(yY.Kp,{css:[op.wp.height("100%"),op.wp.p(12),op.wp.maxWidth(vX.R),op.wp.display.flex,op.wp.width("100%"),op.wp.justify.center,op.wp.overflowY("scroll")],children:(0,s.Y)(wZ,{performPaneOperation:n,setSelectedTab:i})}),(0,s.Y)(yY.Kp,{css:[op.wp.height("100%"),op.wp.width("100%"),op.wp.overflowY("scroll")],children:(0,s.Y)(y_,{performPaneOperation:n})}),(0,s.Y)(yY.Kp,{css:[op.wp.height("100%"),op.wp.width("100%")],children:(0,s.Y)(w5,{})})]})]})})}var yI=ed.ZU.Object({type:ed.ZU.Literal("extensionDevtools")}),yk={Content:function(e){var n=e.options.performPaneOperation;return(0,s.Y)(yA,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,s.Y)(l9.A,{size:n})},getTitle:function(){return"Extensions Devtools"},description:"Manage and debug workspace extensions",category:ne.bY.WorkspaceExtensions,decode:function(e){return vR.T(yI,e)}},yE=t(78200),yC=t(3251);function yD(e){var n=rf(tY),t=(0,aL.Sc)(),r=(0,aL.l$)(),i=(0,aL.Ot)(),o=(0,p.useCallback)(function(t,r){if("cover"===t){if(null===r)return void o("store",null);n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})},[n,e.paneId]);if("cover"===e.page){var a,l,u=null!=(l=null==(a=i.find(function(n){return n.extensionId===e.coverPageExtensionId}))?void 0:a.installationId)?l:null;return(0,s.Y)(yE.G,{existingInstallationId:u,extensionId:e.coverPageExtensionId,goBackToStore:function(){return o("store",null)},installExtension:function(){return(0,n4._)(function(){var n;return(0,n5.YH)(this,function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw Error("Failed to install extension");return[2,(0,aI.qq)(n.id)]}})})()},uninstallExtension:function(e){return(0,n4._)(function(){return(0,n5.YH)(this,function(n){switch(n.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return n.sent(),[2]}})})()}})}return(0,s.Y)(yC.A,{storeMode:"pane",openExtensionCover:function(e){return o("cover",e)},setPage:function(e){return o(e,null)},page:e.page})}var yR=ed.ZU.Union([ed.ZU.Object({page:ed.ZU.Union([ed.ZU.Literal("store"),ed.ZU.Literal("manage")])}),ed.ZU.Object({page:ed.ZU.Literal("cover"),coverPageExtensionId:ed.ZU.Unsafe(ed.ZU.String())})]),yF=ed.ZU.Object({type:ed.ZU.Literal("extensionStore"),data:yR}),yU={Content:function(e){return(0,s.Y)(yD,(0,r6._)((0,f._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,s.Y)(oh.Vx.Provider,{value:{color:rS.LU.yellowStronger,size:n},children:(0,s.Y)(l9.A,{})})},getTitle:function(){return"Extension Store"},description:"Find and install workspace extensions",category:ne.bY.WorkspaceExtensions,decode:function(e){return vR.T(yF,e)}},yP=t(76428),yO=ed.ZU.Object({type:ed.ZU.Literal("replAuth")}),yT={Content:yP.A,Icon:function(e){var n=e.size;return(0,s.Y)(oh.Vx.Provider,{value:{color:rS.LU.orangeStrongest,size:n},children:(0,s.Y)(gV.A,{})})},getTitle:function(){return"Authentication"},description:"Let users log in to your App using a prebuilt login page or customize your own button",category:ne.bY.CloudServices,decode:function(e){return vR.T(yO,e)}},yL=function(e){var n;null==(n=e.focus)||n.call(e)};function yM(e){var n=e.isValid,t=e.move,r=e.focus,i=void 0===r?yL:r,o=e.wrap,a=void 0!==o&&o,l=e.selector,u=e.boundary,c=(0,p.useRef)(null);return(0,p.useEffect)(function(){if(c.current){var e=c.current,r=function(r){if(!n(r))return;if(l)p=(0,ek._)(e.querySelectorAll(l));else{var o;o=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),p=(0,ek._)(o)}if(0!==p.length){var c=document.activeElement;if(e.contains(c)){if(l)if(u){var s=null==c?void 0:c.closest(u),d=null==c?void 0:c.closest(l);c=d||(null==s?void 0:s.querySelector(l))}else c=null==c?void 0:c.closest(l);if(l&&(!c||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var p,f,h=null==(f=document.activeElement)?void 0:f.querySelector(l);h?i(h):i(p[0]);return}if(!c){r.preventDefault(),r.stopPropagation(),i(p[0]);return}var g=p.findIndex(function(e){return e===c});if(-1===g){r.preventDefault(),r.stopPropagation(),i(p[0]);return}var m=t({event:r,children:p,activeIndex:g,activeElement:c});!a&&(m<0||m>p.length-1)||(i(m<0?p[p.length-1]:m>p.length-1?p[0]:p[m]),r.stopPropagation(),r.preventDefault())}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[u,n,t,i,c,l,a]),c}var yG=t(48576),yN=t(1195),yz=(0,rA.x)({queryPill:[op.wp.display.inline,op.wp.fontSize(rS.LU.fontSizeDefault)],popover:[{"& > .popover-control-container":op.wp.mr(0)}]});function yH(e){var n=e.text;return(0,s.Y)(pL.a,{css:yz.queryPill,text:0===n.length?"âŽµ":n})}function yW(e){var n=e.query,t=e.replacement,r=e.numMatches,i=e.onCancel,o=e.onConfirm;return(0,s.FD)(of.S,{gap:24,children:[(0,s.FD)(aC.EY,{children:["Replace ",(0,s.Y)(yH,{text:n})," with ",(0,s.Y)(yH,{text:t})," ","in ",(0,sv.A)("match",r,!0),"?"]}),(0,s.Y)(aC.EY,{children:"This operation cannot be undone!"}),(0,s.FD)(of.S,{row:!0,gap:12,justify:"end",children:[(0,s.Y)(aE.$n,{onClick:function(){return i()},text:"Cancel"}),(0,s.Y)(aE.$n,{colorway:"negative",onClick:function(){return o()},text:"Yes, replace ".concat((0,sv.A)("match",r,!0)),iconLeft:(0,s.Y)(yN.A,{})})]})]})}function yB(e){var n=e.disabled,t=e.loading,r=e.query,i=e.replacement,o=e.results,a=e.replace,l=e.onReplace,u=e.buttonProps,d=(0,c._)((0,p.useState)(!1),2),h=d[0],g=d[1],m=(0,p.useMemo)(function(){return o.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[o]);return(0,s.Y)(of.S,{css:yz.popover,children:(0,s.FD)(fK.A,{isOpen:h,maxWidth:400,showArrow:!0,children:[(0,s.Y)(aE.$n,(0,r6._)((0,f._)({},u),{text:"Replace all",disabled:n||t,onClick:function(){g(function(e){return!e})}})),(0,s.Y)(yW,{query:r,replacement:i,numMatches:m,onCancel:function(){return g(!1)},onConfirm:function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return g(!1),(0,oJ.u4)(oJ.AZ.SEARCH_PANE_USED,{action:"replace"}),[4,a()];case 1:return e.sent().success&&l(),[2]}})})()}})]})})}var yj=t(21733),y$=(0,rA.x)({self:[op.wp.position.relative,op.wp.flex.shrink(1),op.wp.width("100%")],iconWrapper:[op.wp.position.absolute,op.wp.top(0),op.wp.right(0),op.wp.height("100%"),op.wp.p(4)]}),yq=(0,p.forwardRef)(function(e,n){var t,r=e.onClear,i=(0,se._)(e,["onClear"]);return(0,s.FD)(of.S,{css:y$.self,children:[(0,s.Y)(yj.O,(0,f._)({ref:n},i)),((null==(t=i.value)?void 0:t.length)||0)>0?(0,s.Y)(of.S,{css:y$.iconWrapper,children:(0,s.Y)(f0.K0,{alt:"Clear search query",tooltipBehavior:"hidden",onClick:r,css:{"&:hover":{backgroundColor:"".concat(rS.LU.backgroundHighest," !important")}},children:(0,s.Y)(sn.A,{})})}):null]})});yq.displayName="SearchInput";var yV=t(53736),yK=t(40180),yZ=t(44232),yJ=(0,rA.x)({self:[op.wp.width("fit-content"),op.wp.display.inlineBlock,op.wp.color.accentNegativeDefault,op.wp.fontWeight.bold]});function yQ(e){var n=e.content;return(0,s.Y)(s.FK,{children:n.split("\n").reduce(function(e,n,t){return null===e?[n]:(0,ek._)(e).concat([(0,s.Y)(of.D.span,{css:yJ.self,children:"\\n"},"".concat(n,"-").concat(t)),n])},null)})}var yX=t(95526),y0=of.D.span,y1="SearchMatch",y2=function(e){return e.HIGHLIGHT="highlight",e.REMOVE="remove",e.ADD="add",e.TEXT="text",e}(y2||{});function y4(e){return{outlineColor:e,outlineWidth:"1px",outlineStyle:"solid"}}var y5=(0,rA.x)((a={self:[op.wp.width("fit-content"),op.wp.display.inline,op.wp.cursor.pointer,{"&:focus-visible":[op.wp.focusRing]},op.wp.mx(1),op.wp.px(2),op.wp.borderRadius(4)]},(0,nX._)(a,"highlight",[op.wp.backgroundColor.accentPrimaryDimmest,y4(rS.LU.accentPrimaryDimmer)]),(0,nX._)(a,"remove",[op.wp.backgroundColor.accentNegativeDimmest,y4(rS.LU.accentNegativeDimmer),{textDecoration:"line-through"}]),(0,nX._)(a,"add",[op.wp.backgroundColor.accentPositiveDimmest,y4(rS.LU.accentPositiveDimmer)]),(0,nX._)(a,"hiddenTextWrapper",[op.wp.display.inlineBlock,op.wp.mx(2),{"& > div":[op.wp.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,nX._)(a,"firstHiddenTextWrapper",[op.wp.ml(0)]),(0,nX._)(a,"lastHiddenTextWrapper",[op.wp.mr(0)]),a));function y3(e){var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=e.isRegex,a=e.query,l=e.onOpenAtPosition;return(0,s.Y)(s.FK,{children:(function(e){for(var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,l=0;l<t.length;l++){var u=t[l],c=u.start+u.length;o.push({start:a,end:u.start,type:"text"});var s=n.substring(u.start,c);i.length>0&&i!==s?(o.push({start:u.start,end:c,type:"remove"}),o.push({start:-1,end:c,type:"add"})):o.push({start:u.start,end:c,type:"highlight",matchIndex:l}),a=c}return o.push({start:a,end:n.length,type:"text"}),o})({content:n,matches:t,dedentBy:r,replacement:i}).map(function(e,t,r){var u=e.start,c=e.end,d=e.type,f="".concat(u,"-").concat(c),h=c-u;if("text"===d){var g=r[t+1];if(0===t&&h>50)return(0,s.FD)(p.Fragment,{children:[(0,s.Y)(y0,{css:[y5.hiddenTextWrapper,y5.firstHiddenTextWrapper],children:(0,s.Y)(f0.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(c-50)},children:(0,s.Y)(yX.A,{})})},f),(0,s.Y)("span",{children:n.substring(c-50,c)})]},f);if(t===r.length-1&&h>50)return(0,s.FD)(p.Fragment,{children:[(0,s.Y)("span",{children:n.substring(u,u+50)}),(0,s.Y)(y0,{css:[y5.hiddenTextWrapper,y5.lastHiddenTextWrapper],children:(0,s.Y)(f0.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(u+50)},children:(0,s.Y)(yX.A,{})})},f)]},f);if(g&&h>100)return(0,s.FD)(p.Fragment,{children:[(0,s.Y)("span",{children:n.substring(u,u+50)}),(0,s.Y)(y0,{css:y5.hiddenTextWrapper,children:(0,s.Y)(f0.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(u+50)},children:(0,s.Y)(yX.A,{})})},f),(0,s.Y)("span",{children:n.substring(c-50,c)})]},f)}var m=-1===u?i:n.substring(u,c);if("text"===d)return(0,s.Y)(p.Fragment,{children:m},f);var v=null,w=r[t-1];return"add"===d&&(null==w?void 0:w.type)==="remove"&&(v=n.substring(w.start,w.end)),(0,s.Y)(y8,{content:m,type:d,isRegex:o,query:a,replacement:i,removedText:v,onClick:function(e){e.stopPropagation(),l(c)}},f)})})}function y8(e){var n=e.content,t=e.type,r=e.isRegex,i=e.replacement,o=e.query,a=e.removedText,l=(0,se._)(e,["content","type","isRegex","replacement","query","removedText"]),u=n,c=void 0;switch(t){case"highlight":c="Matched text ".concat(u);break;case"remove":c="Removed text ".concat(u);break;case"add":if(c="Added text ".concat(u),r&&null!==a)try{u=a.replace(new RegExp(o),i.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,s.Y)(of.D.span,(0,r6._)((0,f._)({css:[y5.self,y5[t]],tabIndex:0,"aria-label":c,role:"button","data-nav":y1},l),{children:"add"===t?(0,s.Y)(yQ,{content:u}):u}))}var y7=(0,rA.x)({self:[op.wp.width("100%"),op.wp.flex.wrap],text:[op.wp.display.block,op.wp.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function y6(e){var n=e.error;return(0,s.FD)(of.S,{css:y7.self,pt:8,pb:8,row:!0,gap:4,align:"center",justify:"center",children:[(0,s.Y)(pU.A,{}),(0,s.Y)(aC.EY,{css:y7.text,multiline:!1,children:n})]})}var y9=t(66787),be=t(88166),bn="SearchLine",bt="--search-line-number-width",br=(0,rA.x)({self:[op.wp.overflow("hidden"),op.wp.cursor.pointer,op.wp.borderRadius(4),{"&:focus-visible":[op.wp.focusRing],"&:hover, &:focus-visible":[op.wp.backgroundColor.backgroundHighest]}],content:[op.wp.font.code,op.wp.maxWidth("100%"),op.wp.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word"}],lineNumberWrapper:[op.wp.display.inlineBlock,op.wp.color.foregroundDimmest,op.wp.mr(8),op.wp.pl(8)],lineNumber:[op.wp.display.inlineBlock,op.wp.textAlign.right,{width:"var(".concat(bt,")")}]});function bi(e){var n=e.lineNumber,t=e.content,r=e.matches,i=e.path,o=e.dedentBy,a=e.onFileLineClicked,l=(0,se._)(e,["lineNumber","content","matches","path","dedentBy","onFileLineClicked"]),u=(0,q.A)(function(){return function(e){(0,oJ.u4)(oJ.AZ.SEARCH_PANE_RESULT_CLICKED,(0,f._)({},l)),a({path:i,lineNumber:n,columnNumber:e})}},[n,l,i,a]),c=(0,q.A)(function(){return function(){var e=r.length>0?r[0]:null;u(e?e.start+e.length:0)}},[r,u]);return(0,s.FD)(of.S,{tabIndex:0,css:br.self,row:!0,gap:8,align:"stretch","data-nav":bn,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),c())},onClick:c,children:[(0,s.Y)(of.S,{css:br.lineNumberWrapper,children:(0,s.Y)(of.S,{tag:"span",css:br.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,s.Y)("pre",{css:br.content,children:(0,s.Y)(y3,{isRegex:l.isRegex,content:t,matches:r,dedentBy:o,query:l.query,replacement:l.replacement,onOpenAtPosition:u})})]})}var bo=t(83031),ba="SearchFileNav",bl="SearchFileHeaderNav",bu="SearchQueryNav",bc="SearchQueryTogglesNav",bs=parseInt(rS.zu.space24,10)+10,bd=(0,rA.x)({header:[op.wp.rowWithGap(4),op.wp.align.center,op.wp.rowWithGap(6),op.wp.flex.growAndShrink(1),op.wp.overflow("hidden")],headerParentPathText:[op.wp.flex.shrink(1e7)],headerFileNameText:[op.wp.flex.shrink(1)],headerMatchesCountPill:[op.wp.height(20),op.wp.flex.shrink(0)],accordionWrapper:[op.wp.mx(4),op.wp.border({direction:"top",color:rS.LU.outlineDimmest})],accordionChildren:[op.wp.p(4)],linesWrapper:[op.wp.overflow("hidden"),op.wp.borderRadius(4),op.wp.font.code]});function bp(e){var n=e.path,t=e.lines,r=e.dedentBy,i=e.isFirst,o=e.expanded,a=e.onClick,l=e.scrollOffset,u=e.onFileLineClicked,c=e.searchResultBackgroundColor,d=(0,se._)(e,["path","lines","dedentBy","isFirst","expanded","onClick","scrollOffset","onFileLineClicked","searchResultBackgroundColor"]),h=(0,uG.g)("fontSize").preferences.fontSize,g=(0,p.useRef)(null),m=(0,q.A)(function(){return t.reduce(function(e,n){return e+n.matches.length},0)},[t]),v=(0,q.A)(function(){var e=t[t.length-1];if(!e)return{};var n=(0,be.V)(e.lineNumber),r=(0,y9.s)(h);return(0,nX._)({fontSize:h,lineHeight:r},bt,"".concat(n,"ch"))},[t,h]);return(0,s.Y)(av.ui,{css:bd.accordionWrapper,style:v,"data-nav":ba,innerRef:g,children:(0,s.Y)(bo.A,{expanded:void 0===o||o,onClick:function(){a(g.current)},headerProps:{"data-nav":"".concat(bl," ").concat(bn," ").concat(i?"".concat(bu," ").concat(bc):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===l?0:l,"px"),borderRadius:0,backgroundColor:c}},headerContent:(0,s.FD)(of.S,{css:bd.header,children:[(0,s.Y)(ai.A,{path:n,size:16}),(0,s.Y)(aC.EY,{css:bd.headerFileNameText,multiline:!1,children:(0,ik.WP)(n)}),(0,s.Y)(aC.EY,{color:"dimmest",css:bd.headerParentPathText,multiline:!1,children:(0,ik._6)(n).replace(/^\.\//,"")}),(0,s.Y)(pL.a,{variant:"muted",text:"".concat(m," ").concat((0,sv.A)("match",m)),css:bd.headerMatchesCountPill})]}),children:(0,s.Y)(of.S,{css:bd.accordionChildren,children:(0,s.Y)(of.S,{css:bd.linesWrapper,children:t.map(function(e){return(0,s.Y)(bi,(0,r6._)((0,f._)({},e,d),{path:n,dedentBy:r,onFileLineClicked:u}),e.lineNumber)})})})})})}var bf=t(56064),bh=(0,rA.x)({container:[op.wp.border({direction:"bottom",color:rS.LU.outlineDimmest})],actions:[op.wp.display.flex,op.wp.rowWithGap(4)]});function bg(e){var n="collapse"===e.collapseExpandAllState;return(0,s.FD)(of.S,{css:bh.container,p:4,row:!0,align:"center",justify:"space-between",children:[(0,s.FD)(aC.EY,{color:"dimmer",children:[e.totalCount," results in ",(0,sv.A)("file",e.fileCount,!0)]}),(0,s.FD)(of.S,{css:bh.actions,children:[(0,s.Y)(f0.K0,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,s.Y)(u6.A,{})}),(0,s.Y)(f0.K0,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,s.Y)(uK.A,{}):(0,s.Y)(bf.A,{})})]})]})}var bm=t(85011),bv=(0,um.i7)({from:{opacity:0},to:{opacity:1}}),bw=(0,rA.x)({listWrapper:[op.wp.overflowY("auto"),op.wp.flex.grow(1),{contain:"strict"}],list:[op.wp.width("100%"),op.wp.position.relative],listItem:[op.wp.position.absolute,op.wp.top(0),op.wp.left(0),op.wp.width("100%")],resultRow:[{animation:"".concat(bv," 120ms linear forwards")}]});function by(e){var n,t,r,i,o,a,l,u,d,h,g=e.results,m=e.error,v=e.paneRef,w=e.onFileLineClicked,y=e.onOpenSearchPane,b=e.searchResultBackgroundColor,x=(0,se._)(e,["results","error","paneRef","onFileLineClicked","onOpenSearchPane","searchResultBackgroundColor"]),_=(0,q.A)(function(){return g.filter(function(e){return e.lines.length>0})},[g]),Y=(0,q.A)(function(){return _.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[_]),S=(0,c._)((0,p.useState)({}),2),A=S[0],I=S[1],k=(0,p.useRef)(null),E=(0,yZ.Te)({count:_.length,getScrollElement:function(){return k.current},estimateSize:function(e){var n;return function(e,n){var t=e.length;if(n)for(var r=n-24,i=0;i<e.length;i++){var o=e[i],a=9*(0,be.V)(i)+9*o.content.length+4*o.matches.length;a>r&&(t+=Math.floor(r/a)+1)}return bs+20+24.39*t+2*t}(_[e].lines,null==v||null==(n=v.current)?void 0:n.offsetWidth)},overscan:3}),C=E.getVirtualItems(),D=(0,p.useRef)(null),R=(0,p.useCallback)(function(e){var n=k.current;if(n&&D.current!==e){if(e.matches('[data-nav*="'.concat(bl,'"]')))return void e.focus();var t=e.closest('[data-nav="'.concat(ba,'"]')),r=null==t?void 0:t.querySelector('[data-nav*="'.concat(bl,'"]'));if(!r)return void e.focus();var i=r.getBoundingClientRect();if(r.offsetTop+i.height>e.offsetTop){var o=e.offsetTop-i.height;D.current=e;var a=function(){n.scrollTop===o&&(n.removeEventListener("scroll",a),D.current===e&&(e.focus(),D.current=null))};n.addEventListener("scroll",a),n.scrollTo({top:o})}else e.focus()}},[]),F=(n={selector:'[data-nav*="'.concat(bl,'"]'),boundary:'[data-nav*="'.concat(ba,'"]')},t=(0,p.useCallback)(function(e){return"Tab"===e.key},[]),r=(0,p.useCallback)(function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1},[]),yM((0,r6._)((0,f._)({},n),{isValid:t,move:r}))),U=(i={selector:'[data-nav*="'.concat(bn,'"]'),focus:R},o=(0,p.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),a=(0,p.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1},[]),yM((0,r6._)((0,f._)({},i),{isValid:o,move:a}))),P=(l={selector:'[data-nav*="'.concat(y1,'"]'),focus:R},u=(0,p.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),d=(0,p.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1},[]),yM((0,r6._)((0,f._)({},l),{isValid:u,move:d}))),O=(0,yK.P)(F,U,P),T=(0,q.A)(function(){return _.length===Object.keys(A).length&&Object.values(A).every(Boolean)},[A,_.length]),L=null;return _.length>0?L=(0,s.FD)(s.FK,{children:[(0,s.Y)(bg,{fileCount:_.length,totalCount:Y,collapseExpandAllState:T?"expand":"collapse",onToggleCollapseExpandAll:function(){T?I({}):I(_.reduce(function(e,n){return(0,r6._)((0,f._)({},e),(0,nX._)({},n.path,!0))},{}))},onStartNewSearch:y}),(0,s.Y)(of.D.div,{ref:k,css:bw.listWrapper,children:(0,s.Y)(of.S,{css:bw.list,style:{height:E.getTotalSize()},children:(0,s.Y)(of.S,{css:bw.listItem,style:{transform:"translateY(".concat(null==(h=C[0])?void 0:h.start,"px)")},innerRef:O,children:C.map(function(e){var n,t=_[e.index],r=t.path;return(0,s.Y)(of.D.div,{"data-index":e.index,ref:E.measureElement,css:bw.resultRow,children:(0,s.Y)(bp,(0,r6._)((0,f._)({},t,x),{scrollOffset:null==(n=C[0])?void 0:n.start,onFileLineClicked:w,isFirst:0===e.index,expanded:!0!==A[r],searchResultBackgroundColor:b,onClick:function(e){if(I(function(e){return(0,r6._)((0,f._)({},e),(0,nX._)({},r,!(r in e)||!e[r]))}),k.current&&e){var n,t,i=Math.floor(null!=(t=null==(n=C[0])?void 0:n.start)?t:0),o=Math.floor(k.current.scrollTop),a=e.offsetTop+i;a>o||k.current.scrollTo({top:a-1})}}}))},e.key.toString())})})})})]}):m===bm.F.EMPTY_RESULTS&&(L=(0,s.Y)(yG.A,{pane:{type:"searchReplace"},headerText:m})),(0,s.FD)(s.FK,{children:[m&&m!==bm.F.EMPTY_RESULTS?(0,s.Y)(y6,{error:m}):null,L]})}var bb=t(11960);function bx(e){return(0,p.useMemo)(function(){return(0,ek._)((0,bb.l0)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var b_=function(e){return e.QUERY_EMPTY="The query is empty",e.QUERY_SAME="The query is the same as replacement",e.NO_MATCHES="No matches were found to replace",e.RG_EMPTY="Ripgrep didn't return a response",e.NOT_MOUNTED="Component wasn't mounted",e}({}),bY=t(86197),bS=t(63806),bA=t(64850),bI=t(83317),bk=t(69806),bE=t(97902),bC=t(97041),bD="SearchQueryControlsNav",bR="SearchQueryExcludeNav",bF="SearchQueryControlsColumnNav",bU=(0,um.i7)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),bP=op.kL.min(360),bO=(0,rA.x)({self:[op.wp.height("100%"),op.wp.width("100%"),op.wp.overflow("hidden"),op.wp.px(4),op.wp.container()],filesIncludeExcludeWrapper:[op.wp.mt(6),op.wp.border({direction:"top",color:rS.LU.outlineDimmest}),(0,nX._)({},bP,[op.wp.rowWithGap(6),op.wp.align.start,op.wp.mt(0),{border:"none"}])],inputWithLabel:[op.wp.flex.growAndShrink(1),op.wp.colWithGap(1)],inputLabelText:[{userSelect:"none"},op.wp.color.foregroundDimmest,op.wp.truncate,{fontSize:rS.LU.fontSizeSmall}],inputLabel:[op.wp.flex.shrink(1),op.wp.m(0),{lineHeight:1}],input:[op.wp.viewStyle,op.wp.border(),{blockSize:rS.LU.space32,"::placeholder":{color:rS.LU.foregroundDimmest},"&:hover::placeholder":{color:rS.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:rS.LU.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[op.wp.rowWithGap(2),op.wp.align.center,(0,nX._)({order:2},bP,[{order:1," > *":op.wp.height("100%")}])],closeWrapper:[(0,nX._)({order:1},bP,{order:2," > *":op.wp.height("100%")})],results:[op.wp.position.relative,{flex:"1 1 auto"}],searchWrapper:[{flex:"0 1 auto"}],expandCollapseButton:[op.wp.height(32)],searchInputAndOptionsWrapper:(0,nX._)({flex:1,display:"grid",gap:4,gridTemplateColumns:"1fr max-content"},bP,{gridTemplateColumns:"1fr max-content max-content"}),replacementWrapper:[op.wp.ml(24),op.wp.pl(4),op.wp.pb(6)],replaceInputWrapper:[op.wp.border({direction:"top",color:rS.LU.outlineDimmest}),(0,nX._)({},bP,[op.wp.rowWithGap(4),op.wp.pt(0),op.wp.align.center,{border:"none"}])],loadingBar:[op.wp.position.absolute,op.wp.mt(2),op.wp.height(1),op.wp.borderRadius(2),op.wp.width("100%"),op.wp.backgroundColor.accentPrimaryDimmer,{animation:"".concat(bU," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function bT(e){var n=e.updateData,t=e.query,r=e.setQuery,i=e.isRegex,o=e.setIsRegex,a=e.isCaseSensitive,l=e.setIsCaseSensitive,u=e.isMatchingWholeWords,c=e.setIsMatchingWholeWords,d=e.isCollapsed,p=e.setIsCollapsed,f=e.executeSearch,h=e.searchInputRef,g=e.onCloseRequested;return(0,s.FD)(of.S,{css:bO.searchWrapper,pb:4,row:!0,gap:4,children:[(0,s.Y)(f0.K0,{onClick:function(){return p(function(e){return!e})},alt:d?"Show replacement options":"Hide replacement options",css:bO.expandCollapseButton,children:d?(0,s.Y)(pn.A,{}):(0,s.Y)(fl.A,{})}),(0,s.FD)(of.S,{css:bO.searchInputAndOptionsWrapper,children:[(0,s.Y)(yq,{"data-nav":"".concat(bu," ").concat(bD),ref:h,autoSize:!0,placeholder:"Search",value:t,css:bO.input,onChange:function(e){r(e),n({initialQuery:e})},onClear:function(){r(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,uN.T$)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),f())}}),(0,s.FD)(of.S,{css:bO.optionsWrapper,children:[(0,s.Y)(yV.A,{alt:"case sensitive","data-nav":"".concat(bD," ").concat(bF),icon:(0,s.Y)(bk.A,{}),checked:a,onClick:function(){return l(function(e){return!e})}}),(0,s.Y)(yV.A,{alt:"regular expressions","data-nav":"".concat(bD," ").concat(bF),icon:(0,s.Y)(bE.A,{}),checked:i,onClick:function(){return o(function(e){return!e})}}),(0,s.Y)(yV.A,{alt:"whole words","data-nav":"".concat(bD," ").concat(bF),icon:(0,s.Y)(bC.A,{}),checked:u,onClick:function(){return c(function(e){return!e})}})]}),(0,s.Y)(of.S,{css:bO.closeWrapper,row:!0,gap:2,align:"center",children:g?(0,s.Y)(f0.K0,{onClick:g,alt:"Close",children:(0,s.Y)(sn.A,{})}):null})]})]})}function bL(e){var n=e.updateData,t=e.replacement,r=e.setReplacement,i=e.query,o=e.replaceLoading,a=e.search,l=e.includeGlob,u=e.setIncludeGlob,c=e.excludeGlob,d=e.setExcludeGlob,p=e.replace,f=e.results;return(0,s.FD)(of.S,{css:bO.replacementWrapper,children:[(0,s.FD)(of.S,{css:bO.replaceInputWrapper,pt:8,gap:6,children:[(0,s.Y)(yq,{"data-nav":"".concat(bu," ").concat(bD," ").concat(bR),autoSize:!0,placeholder:"Replacement",value:t,css:bO.input,onChange:function(e){r(e),n({initialReplacement:e})},onClear:function(){r(""),n({initialReplacement:""})}}),(0,s.Y)(of.S,{css:bO.optionsWrapper,children:(0,s.Y)(yB,{query:i,replacement:t,results:f,disabled:0===i.length,loading:o,replace:p,onReplace:a,buttonProps:{"data-nav":"".concat(bD," ").concat(bc," ").concat(bF)}})})]}),(0,s.FD)(of.S,{css:bO.filesIncludeExcludeWrapper,pt:8,gap:8,children:[(0,s.FD)(of.S,{css:bO.inputWithLabel,id:"filesToInclude",children:[(0,s.Y)("label",{htmlFor:"filesToIncludeInput",css:bO.inputLabel,children:(0,s.Y)(aC.EY,{css:bO.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,s.Y)(yq,{id:"filesToIncludeInput","data-nav":"".concat(bu," ").concat(bD),autoSize:!0,value:l,css:bO.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){u(e),n({initialIncludeGlob:e})},onClear:function(){u(""),n({initialIncludeGlob:""})}})]}),(0,s.FD)(of.S,{css:bO.inputWithLabel,id:"filesToExclude",children:[(0,s.Y)("label",{htmlFor:"filesToExcludeInput",css:bO.inputLabel,children:(0,s.Y)(aC.EY,{css:bO.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,s.Y)(yq,{id:"filesToExcludeInput","data-nav":"".concat(bD," ").concat(bR),autoSize:!0,value:c,css:bO.input,onChange:function(e){d(e),n({initialExcludeGlob:e})},onClear:function(){d(""),n({initialExcludeGlob:""})}})]})]})]})}function bM(e){var n,t,r,i,o,a,l,u,d,h,g,m,v,w,y,b,x,_,Y,S,A,I,k,E,C,D,R,F,U,P,O,T,M,G,N,z,H,W,B,j,$,V=e.isActive,K=e.initialQuery,Z=void 0===K?"":K,J=e.initialReplacement,Q=void 0===J?"":J,X=e.initialIncludeGlob,ee=void 0===X?"":X,en=e.initialExcludeGlob,et=void 0===en?"":en,er=e.searchInputRef,ei=e.onDataChanged,eo=e.onFileLineClicked,ea=e.onOpenSearchPane,el=e.onCloseRequested,eu=e.searchResultBackgroundColor,ec=(0,c._)((0,p.useState)(Z),2),es=ec[0],ed=ec[1],ep=(0,c._)((0,p.useState)(Q),2),ef=ep[0],eh=ep[1],eg=(0,c._)((0,p.useState)(!1),2),em=eg[0],ev=eg[1],ew=(0,c._)((0,p.useState)(!1),2),ey=ew[0],eb=ew[1],ex=(0,c._)((0,p.useState)(!1),2),e_=ex[0],eY=ex[1],eS=(0,c._)((0,p.useState)(!0),2),eA=eS[0],eI=eS[1],eE=(0,c._)((0,p.useState)(et),2),eC=eE[0],eD=eE[1],eR=(0,c._)((0,p.useState)(ee),2),eF=eR[0],eU=eR[1],eP=bx(eC),eO=bx(eF),eT=(0,p.useRef)(null),eL=(t=(n={query:es,isRegex:em,isCaseSensitive:ey,isMatchingWholeWords:e_,excludeGlobs:eP,includeGlobs:eO}).query,r=n.isRegex,i=n.isCaseSensitive,o=n.isMatchingWholeWords,l=void 0===(a=n.includeGlobs)?[]:a,d=void 0===(u=n.excludeGlobs)?[]:u,g=(h=(0,o3.A)()).container,m=h.dotReplit,v=(0,bA.o)(m),w=(0,L._P)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),b=(y=(0,c._)((0,p.useState)([]),2))[0],x=y[1],Y=(_=(0,c._)((0,p.useState)(null),2))[0],S=_[1],I=(A=(0,c._)((0,p.useState)(t.length>0),2))[0],k=A[1],E=(0,q.A)(function(){return(0,ek._)(d).concat((0,ek._)(v||[]),(0,ek._)(bS.TJ))},[d,v]),C=g.getConnectionState(),D=(0,p.useMemo)(function(){return(0,bI.A)({container:g,onError:function(e){return S(e)},onUpdate:function(e){return x(e)},onLoadingStateChange:function(e){return k(e)},isStreaming:!0,trackLatency:w})},[]),(0,p.useEffect)(function(){C===aN.KN.CONNECTED&&D({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:E})},[C,D,t,r,i,o,l,E,v]),{loading:I,error:Y,data:b,search:function(){return D({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:E})}}),eM=eL.loading,eG=eL.error,eN=eL.data,ez=eL.search;(0,dW.A)(function(){""!==es&&(0,oJ.u4)(oJ.AZ.SEARCH_PANE_USED,{action:"search",isRegex:em,isCaseSensitive:ey,hasIncludes:eO.length>0,hasExcludes:eP.length>0})},[es,eO,eP,em,ey],1e3);var eH=(F=(R={replacement:ef,query:es,isRegex:em,isCaseSensitive:ey,isMatchingWholeWords:e_,excludeGlobs:eP,includeGlobs:eO,fileList:eG?void 0:eN}).query,U=R.replacement,P=R.fileList,O=(0,se._)(R,["query","replacement","fileList"]),T=(0,o3.A)().container,G=(M=(0,c._)((0,p.useState)(!1),2))[0],N=M[1],H=(z=(0,c._)((0,p.useState)(null),2))[0],W=z[1],j=(B=(0,c._)((0,p.useState)(!1),2))[0],$=B[1],{replace:(0,p.useCallback)(function(){return(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:var t;return $(!0),W(null),[4,(t=(0,f._)({container:T,query:F,replacement:U,fileList:null==P?void 0:P.map(function(e){return e.path})},O),(0,n4._)(function(){var e,n,r,i,o,a,l,u,c;return(0,n5.YH)(this,function(s){switch(s.label){case 0:if(n=t.container,r=t.fileList,0===(i=(0,se._)(t,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:b_.QUERY_EMPTY}];if(i.query===i.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:b_.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return o=r,[3,3];case 1:return[4,(a=n).exec.apply(a,(0,ek._)((0,bY.Qq)((0,r6._)((0,f._)({},i),{context:1,mode:"files"}))))];case 2:if((u=s.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===u.error?b_.NO_MATCHES:u.error}];o=(null==(l=u.output)?void 0:l.split("\n").filter(function(e){return e.trim().length>0}))||[],s.label=3;case 3:var d,p,h,g,m,v,w,y;if(0===o.length)return[2,{success:!1,errorOn:"rg",errorMessage:b_.NO_MATCHES}];return[4,(e=n).exec.apply(e,(0,ek._)((p=(d=i).replacement,h=d.query,g=d.isRegex,m=d.isCaseSensitive,v=d.isMatchingWholeWords,w=["sd"],y=[h.indexOf("\n")>=0?"m":"e",m?"c":"i"],v&&y.push("w"),w.push("--flags",y.join("")),!g&&w.push("--string-mode"),h.startsWith("-")&&(h="\\"+h),w.push(h,p),w)).concat((0,ek._)(o)))];case 4:if((c=s.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:c.error}];return[2,{success:!0}]}})})())];case 1:return(e=n.sent()).success||W(e.errorMessage),$(!1),N(e.success),[2,e]}})})()},[T,F,U,P,O]),loading:j,error:H,data:G}),eW=eH.loading,eB=eH.replace,ej=(0,p.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null==ei||ei({initialQuery:es,initialReplacement:ef,initialIncludeGlob:eF,initialExcludeGlob:eC},e)},[ei,es,ef,eC,eF]);(0,p.useLayoutEffect)(function(){ed(Z),eh(Q),eU(ee),eD(et)},[Z,Q,ee,et]);var e$=yM({selector:'[data-nav*="'.concat(bu,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(bu,'"]')),r=e.target.matches("[data-nav*=".concat(bl,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eq=yM({selector:'[data-nav*="'.concat(bc,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(bc,'"]')),r=e.target.matches("[data-nav*=".concat(bl,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eV=yM({selector:'[data-nav*="'.concat(bF,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(bc,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(bF,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,i=n.target.matches('[data-nav*="'.concat(bc,'"]'));return(n.preventDefault(),n.stopPropagation(),i)?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),eK=yM({selector:'[data-nav*="'.concat(bR,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(bR,'"]')),r=e.target.matches("[data-nav*=".concat(bu,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eZ=yM({selector:'[data-nav*="'.concat(bD,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(bF,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),eJ=(0,aH.S)([e$,eq,eV,eK,eZ],{breadcrumb:"client/workspace/components/SearchReplace/index.tsx:661"}),eQ=(0,p.useCallback)(function(e){"Escape"===e.key&&(null==el||el())},[el]);return(0,s.FD)(of.S,{css:bO.self,innerRef:eJ,onKeyDown:eQ,children:[(0,s.Y)(bT,{isActive:V,query:es,setQuery:ed,updateData:ej,isRegex:em,isCaseSensitive:ey,isMatchingWholeWords:e_,setIsRegex:ev,setIsCaseSensitive:eb,setIsMatchingWholeWords:eY,isCollapsed:eA,setIsCollapsed:eI,executeSearch:ez,searchInputRef:er,onCloseRequested:el}),eA?null:(0,s.Y)(bL,{replacement:ef,setReplacement:eh,updateData:ej,query:es,replaceLoading:eW,search:ez,includeGlob:eF,setIncludeGlob:eU,excludeGlob:eC,setExcludeGlob:eD,replace:eB,results:eN}),(0,s.FD)(of.S,{css:bO.results,children:[eM?(0,s.Y)(of.S,{css:bO.loadingBar},es):null,0===es.length&&0===eN.length?(0,s.Y)(yG.A,{pane:{type:"searchReplace"},bodyText:"Enter a search query above to see results."}):(0,s.Y)(by,{isRegex:em,query:es,replacement:ef,include:eF,exclude:eC,results:eN,error:eG,paneRef:eT,onOpenSearchPane:ea,onFileLineClicked:eo,searchResultBackgroundColor:eu})]})]})}var bG=ed.ZU.Object({type:ed.ZU.Literal("searchReplace"),data:ed.ZU.Optional(ed.ZU.Object({initialQuery:ed.ZU.Optional(ed.ZU.String()),initialReplacement:ed.ZU.Optional(ed.ZU.String()),initialIncludeGlob:ed.ZU.Optional(ed.ZU.String()),initialExcludeGlob:ed.ZU.Optional(ed.ZU.String())}))}),bN={Content:function(e){var n=e.pane,t=e.options;return(0,s.Y)(bH,{paneData:(null==n?void 0:n.data)||{},isActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,s.Y)(o4.A,{size:n})},getTitle:function(e){var n,t=null==e||null==(n=e.data)?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},description:"Search through the text contents of your App",category:ne.bY.WorkspaceFeatures,decode:function(e){return vR.T(bG,e)}},bz=(0,rA.x)({wrapper:[op.wp.height("100%"),op.wp.width("100%")]});function bH(e){var n=e.paneData,t=e.isActive,r=e.performPaneOperation,i=(0,p.useRef)(null),o=(0,p.useCallback)(function(){var e,n;null==(e=i.current)||e.select(),null==(n=i.current)||n.focus()},[]);(0,at.Qt)(function(){return{type:"searchReplace",focusSearchInput:o}},[o]),(0,at.HP)(function(){return{focus:o}},[o]);var a=(0,p.useCallback)(function(e){r({operation:"open",pane:{type:"codeEditor",data:{path:e.path,line:e.lineNumber,col:e.columnNumber}},secondary:!0})},[r]),l=(0,p.useCallback)(function(){r({operation:"commit"}),r({operation:"open",pane:{type:"searchReplace"}})},[r]),u=(0,p.useCallback)(function(e,n){r({operation:"replace",pane:{type:"searchReplace",data:(0,f._)({},e,n)}})},[r]);return(0,s.Y)(of.S,{css:bz.wrapper,pt:6,children:(0,s.Y)(bM,(0,r6._)((0,f._)({},n),{isActive:t,searchInputRef:i,onFileLineClicked:a,onOpenSearchPane:l,onDataChanged:u,searchResultBackgroundColor:rS.LU.backgroundDefault}))})}var bW=t(65797),bB=t(39794),bj=t(13481),b$=t(87384),bq=t(79320),bV=t(85586),bK=function(e){return e.Ready="READY",e.Loading="LOADING",e.Error="ERROR",e}(bK||{}),bZ=function(e){var n=e.progress;return(0,s.Y)(uv.m_,{tooltip:"Progress: ".concat(Math.round(100*n*10)/10,"%"),children:(0,s.Y)(of.S,{css:[op.wp.width("100%"),op.wp.height(4),op.wp.backgroundColor.backgroundHigher],children:(0,s.Y)(of.S,{css:[op.wp.width("".concat(100*n,"%")),op.wp.height("100%"),op.wp.backgroundColor.purpleDefault]})})})},bJ=ed.ZU.Object({type:ed.ZU.Literal("tutorial")}),bQ={Content:function(){var e,n,t,r,i=(0,o3.A)().fs,o=(e=rd(i5),n=rd(i8),t=rf(i6),n||!e?null:t),a=(0,dV.Jw)(bB.C.id,bB.j.Sidepane),l=(0,c._)((0,p.useState)([]),2),u=l[0],d=l[1],f=(0,c._)((0,p.useState)("LOADING"),2),h=f[0],g=f[1],m=(0,ei.A)(),v=(0,c._)((0,bW.A)("tutorialProgress--".concat(m),0),2),w=v[0],y=v[1],b=(0,c._)((0,p.useState)(!1),2),x=b[0],_=b[1],Y=(0,p.useRef)(null),S=(0,ak.T)(),A=S?S.toString():"",I=(0,uq.vO)(),k=(0,uq.rM)(),E=(0,b$.A)(k),C=(0,q.A)(function(){return E?function(e){var n,t;return E({code:e,insertAt:null!=(t=null==(n=I())?void 0:n.position.offset)?t:"end"})}:void 0},[E,I]),D=(0,bV.wp)(A,m),R=D?(0,s.Y)(bV.Q9,{challenge:D}):null,F=(0,p.useCallback)(function(){Y.current&&(Y.current.scrollTop=0)},[Y]);return((0,p.useEffect)(function(){var e=!1;return(0,n4._)(function(){var n,t,r,o,a,l,u,s,p,f,h,m,v,w;return(0,n5.YH)(this,function(y){switch(y.label){case 0:return g("LOADING"),[4,i.readDir(bq.T)];case 1:if(n=y.sent(),e)return[2];if(n.error)return g("ERROR"),[2];return t=[],[4,Promise.all(n.children.filter(function(e){var n;return e.type===tV.pt.File&&(null==(n=bS.Jh.from(e.filename))?void 0:n.id)==="markdown"}).map(function(e){var n="".concat(bq.T,"/").concat(e.filename);return Promise.all([n,i.readFile(n)])}))];case 2:if(r=y.sent(),e)return[2];o=!0,a=!1,l=void 0;try{for(u=r[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)f=(p=(0,c._)(s.value,2))[0],(h=p[1]).error?g("ERROR"):(v=h.content.toString(),w=RegExp("^#\\s(?<title>.*)").exec(v),t.push({title:null==w||null==(m=w.groups)?void 0:m.title,content:v,path:f}))}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return d(t),g("READY"),[2]}})})(),function(){e=!0}},[i]),(0,p.useEffect)(function(){u[w]||y(0)},[w,y,u]),"LOADING"===h)?(0,s.Y)(of.S,{css:[op.wp.center],grow:!0,shrink:!0,children:(0,s.Y)(du.A,{})}):"ERROR"===h?(0,s.Y)(of.S,{css:[op.wp.center],grow:!0,shrink:!0,children:(0,s.FD)(of.S,{css:[op.wp.center,op.wp.colWithGap(4)],children:[(0,s.Y)(sn.A,{color:rS.LU.accentNegativeDefault}),(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===u.length?(0,s.Y)(of.S,{css:[op.wp.center],grow:!0,shrink:!0,children:(0,s.FD)(of.S,{css:[op.wp.center,op.wp.colWithGap(4)],children:[(0,s.Y)(sn.A,{color:rS.LU.accentNegativeDefault}),(0,s.Y)(aC.EY,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):x?(0,s.FD)(of.S,{css:[op.wp.overflowY("scroll"),op.wp.flex.growAndShrink(1),op.wp.p(8),op.wp.colWithGap(16)],children:[(0,s.Y)(aC.EY,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,s.Y)(of.S,{grow:!0,shrink:!0,gap:8,children:u.map(function(e,n){return(0,s.FD)(of.S,{css:[w===n?op.wp.backgroundColor.backgroundHighest:op.wp.backgroundColor.backgroundHigher,op.wp.borderRadius(4),op.wp.rowWithGap(8),op.wp.align.center,op.wp.cursor.pointer,w===n?{outline:"solid 2px ".concat(rS.LU.outlineDimmest)}:{},{":hover":{outline:"solid 2px ".concat(rS.LU.outlineDimmest)}}],p:8,onClick:function(){y(n),_(!1)},children:[(0,s.Y)(of.S,{css:[op.wp.backgroundColor.backgroundHighest,op.wp.width(20),op.wp.height(20),op.wp.borderRadius("full"),op.wp.center,{outline:"solid 1px ".concat(rS.LU.outlineDimmest)}],children:(0,s.Y)(aC.EY,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,s.Y)(aC.EY,{css:[op.wp.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,s.Y)(of.S,{innerRef:a,css:[op.wp.height("100%")],children:(0,s.FD)(of.S,{dataCy:"tutorial-viewer-content",innerRef:Y,css:[op.wp.overflowY("scroll"),op.wp.flex.growAndShrink(1),op.wp.p(16),op.wp.pb(48),op.wp.colWithGap(16)],children:[o?(0,s.Y)(aE.$n,{text:"Show tutorial video",iconLeft:(0,s.Y)(cV.A,{}),onClick:function(){return o()}}):null,R,u.length>1&&(0,s.Y)(aE.$n,{text:"Table of Contents",iconLeft:(0,s.Y)(ym.A,{}),onClick:function(){return _(!0)}}),(0,s.Y)(bj.A,{fs:i,path:u[w].path,source:u[w].content,sourcePos:!1,onCodeInsert:C}),u.length>1&&(0,s.FD)(of.S,{css:[op.wp.position.absolute,op.wp.width("100%"),op.wp.left(0),op.wp.bottom(0),op.wp.overflow("hidden")],children:[(0,s.Y)(bZ,{progress:(w+1)/u.length}),(0,s.FD)(of.S,{css:[op.wp.width("100%"),op.wp.height(40),op.wp.align.center,op.wp.flex.row],children:[(0,s.Y)(of.S,{tag:"button",css:[op.wp.backgroundColor.backgroundHigher,op.wp.cursor.pointer,op.wp.width(40),op.wp.height("100%")],p:8,justify:"center",onClick:function(){w>0&&(y(function(e){return e-1}),F())},children:w>0&&(0,s.Y)(wo.A,{size:24})}),(0,s.Y)(of.S,{tag:"button",css:[op.wp.height("100%"),op.wp.justify.spaceBetween,op.wp.backgroundColor.backgroundHighest,op.wp.align.center,op.wp.p(8),op.wp.cursor.pointer,{userSelect:"none"}],grow:!0,shrink:!0,row:!0,gap:8,onClick:function(){w<u.length-1&&(y(function(e){return e+1}),F())},children:w<u.length-1&&(0,s.FD)(s.FK,{children:[(0,s.FD)(aC.EY,{multiline:!1,css:[op.wp.flex.growAndShrink(1),op.wp.textAlign.left,op.wp.fontSize(rS.LU.fontSizeSubheadDefault)],children:[(0,s.FD)("span",{css:[op.wp.color.foregroundDimmer],children:["Next",u[w+1].title?": ":" page"]}),(0,s.Y)("b",{children:null!=(r=u[w+1].title)?r:""})]}),(0,s.Y)(pn.A,{size:24})]})})]})]})]})})},Icon:function(e){var n=e.size;return(0,s.Y)(hy.A,{size:n})},getTitle:function(){return"Tutorial"},category:ne.bY.Other,decode:function(e){return vR.T(bJ,e)}},bX=t(41683),b0=t(21881),b1=t(70537),b2=t(15473),b4=t(71204),b5=t(22170),b3=t(1095),b8=t(26),b7=t(91806),b6={Content:function(e){var n,t,r=e.pane.data,i=e.options.performPaneOperation,o=(0,p.useRef)(null),a=(0,B.jt)(),l=(0,b2.z)().isExpertMode,u=(0,o3.A)(),c=u.ports,d=u.container,h=(0,bX.w)(c),g=(0,p.useMemo)(function(){var e;return null!=(e=(0,b4.E)(r,h))?e:80},[r,h]),m=(0,b5.X)(g),v=(0,p_.A)(),w=v.didConnectOnce,y=v.didDisconnect,b=(0,p.useCallback)(function(e){i({operation:"open",secondary:!1,pane:e})},[i]),x=(0,p.useCallback)(function(){return b({type:"networking"})},[b]),_=(0,p.useCallback)(function(){return b({type:"deployments"})},[b]),Y=null==r?void 0:r.previewScreenSize,S=(0,p.useCallback)(function(e){i({operation:"replace",pane:{type:"webview",data:{previewScreenSize:e}}})},[i]),A=(0,b8.xQ)({openDeploymentsPane:_,includeSharing:!0}).getCommandGroups;return((0,at.Qt)(function(){var e={type:"webview",refresh:function(){var e;null==(e=o.current)||e.refresh()},navigate:function(e,n){var t;null==(t=o.current)||t.navigateTo(e,n)}},n=A();return n.length>0?(0,r6._)((0,f._)({},e),{commands:n}):e},[A]),a&&!l)?(0,s.Y)(b9,{ref:o,initialPort:g,initialPath:null==r||null==(t=r.ports)?void 0:t.path,openPane:b,previewScreenSize:Y,setPreviewScreenSize:S}):m?(0,s.Y)(b3.A,{openNetworkingTool:x,didConnectOnce:w,didDisconnect:y}):(0,s.Y)(b4.Q,{ref:o,initialPort:g,initialPath:null==r||null==(n=r.ports)?void 0:n.path,openPane:b,ports:c,container:d,previewScreenSize:Y,setPreviewScreenSize:S})},Icon:function(e){var n=e.size;return(0,s.Y)(oh.Vx.Provider,{value:{size:n},children:(0,s.Y)(c$.A,{})})},getTitle:function(){return"Preview"},description:"Preview your App",category:ne.bY.WorkspaceFeatures,decode:b7.D4},b9=(0,p.forwardRef)(function(e,n){var t=e.initialPort,r=e.initialPath,i=e.openPane,o=e.previewScreenSize,a=e.setPreviewScreenSize,l=(0,b1.X5)(),u=(0,o3.A)(),c=u.ports,d=u.container;if(l.state!==b1.J4.READY&&l.state!==b1.J4.LAST_RESORT_READY)return(0,s.Y)(b0.j,{webviewState:l,openPane:i});var p=l.state===b1.J4.READY?l.presentPort:l.externalPort,f=l.state===b1.J4.READY?l.presentRoute:r;return(0,s.Y)(s.FK,{children:(0,s.Y)(b4.Q,{ref:n,initialPort:null!=p?p:t,initialPath:null!=f?f:r,ports:c,container:d,openPane:i,previewScreenSize:o,setPreviewScreenSize:a})})}),xe=t(45465),xn=t(28420),xt=t(35932),xr=t(24408),xi=t(738),xo=(0,rI.v)(["opacity","pointerEvents"]),xa=xo.styleTokens,xl=xo.cssVars,xu={opacity:xa.opacity,pointerEvents:xa.pointerEvents},xc=t(56374),xs=(0,rI.v)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),xd=xs.cssVars,xp=xs.styleTokens,xf=(0,rA.x)({root:[op.wp.center,op.wp.position.absolute,op.wp.top(0),op.wp.left(0),(l={transform:"translate(".concat(xp.transformX,", ").concat(xp.transformY,")"),width:xp.width,height:xp.height,cursor:xp.cursor,zIndex:xp.zIndex},(0,nX._)(l,op.$_.canHover,[{"&:hover":{zIndex:rY.W.gutterHovered}}]),(0,nX._)(l,"&:hover .blanket",{transform:"scale(".concat(xp.hoverScaleX,", ").concat(xp.hoverScaleY,")")}),(0,nX._)(l,"& .icon",{transform:"rotate(".concat(xp.rotation,")")}),(0,nX._)(l,"&:active .blanket",[op.wp.height("200vh"),op.wp.width("200vw"),{transform:"translate(-50%, -50%)"}]),(0,nX._)(l,"&:not(:active):hover > .grip",(0,nX._)({},xd.gripColor,rS.LU.foregroundDefault)),l)],blanket:op.wp.coverContainer,grip:[op.wp.borderRadius(4),{width:xp.gripWidth,height:xp.gripHeight,visibility:xp.gripVisibility,background:xp.gripColor,transitionProperty:"opacity, width, height, background-color",transitionTimingFunction:"ease-out"}]}),xh=(0,p.memo)(function(e){var n,t,r,i,o=function(e){var n,t,r,i,o,a,l,u,c,s=r5(e),d=r3(e),p=nR(d),f=nF(d),h=r8(e),g=(n=r5(e),(0,q.A)(function(){return(0,eV.mg)(n,function(e){return!!e.snapped})},[n])),m=r7(e),v=(t=nR(r3(e)),r=r7(e),(0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(t),i=n.width,o=n.height;return e(r)?i:o})},[t,r])),w=(i=r5(e),(0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(i),t=n.snapped,r=n.stacked;return"right"===t?r?180:90:"left"===t?270*!r:0})},[i])),y=(o=r7(e),a=r8(e),l=nR(r3(e)),(0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(l),t=n.width,r=n.height,i=e(a),u=e(o),c=e(nh);return u?{width:i?t:24,height:c?6:2}:{height:i?r:24,width:c?6:2}})},[l,o,a])),b=(u=nR(r3(e)),c=r7(e),(0,q.A)(function(){return(0,eo.eU)(function(e){var n=e(u),t=n.width,r=n.height;return(e(c)?t:r)<24})},[u,c]));return{handle:rp(s),size:rp(p),position:rp(f),isActive:rp(h),isSnapped:rp(g),isStacked:rp(m),length:rp(v),rotation:rp(w),gripSize:rp(y),gripIsHidden:rp(b)}}(e.handleId),a=(n=(0,p.useRef)(null),t=(0,hh.j)(),r=rd(nh),(0,r_.d)(n,o.size,function(e){var n,t=e.width,r=e.height;return n={},(0,nX._)(n,xd.width,t+"px"),(0,nX._)(n,xd.height,r+"px"),n}),(0,r_.d)(n,o.position,function(e){var n,t=e.x,r=e.y;return n={},(0,nX._)(n,xd.transformX,Math.round(t)+"px"),(0,nX._)(n,xd.transformY,Math.round(r)+"px"),n}),(0,r_.d)(n,o.rotation,function(e){return(0,nX._)({},xd.rotation,e+"deg")}),(0,r_.d)(n,o.gripIsHidden,function(e){return(0,nX._)({},xd.gripVisibility,e?"hidden":"visible")}),(0,r_.d)(n,o.length,function(e){return(0,nX._)({},xd.transitionDuration,(t?0:Math.min(Math.max(100/e*1,.08),.12))+"ms")}),(0,r_.d)(n,rp(no),function(e){var n,t;return"centeredVisualPlanner"===e?(n={},(0,nX._)(n,xl.pointerEvents,"none"),(0,nX._)(n,xl.opacity,"0"),n):(t={},(0,nX._)(t,xl.pointerEvents,"auto"),(0,nX._)(t,xl.opacity,"1"),t)}),i=r?3:2,(0,r_.d)(n,o.isStacked,function(e){var n;return n={},(0,nX._)(n,xd.cursor,e?"row-resize":"col-resize"),(0,nX._)(n,xd.hoverScaleX,(e?1:i).toString()),(0,nX._)(n,xd.hoverScaleY,(e?i:1).toString()),n}),(0,r_.d)(n,o.isActive,function(e){var n;return n={},(0,nX._)(n,xd.gripColor,e?"radial-gradient(circle, ".concat(rS.LU.accentPrimaryDefault," calc(100% - 48px), transparent)"):rS.LU.outlineDimmest),(0,nX._)(n,xd.zIndex,(e?rY.W.gutterActive:rY.W.gutter).toString()),n}),(0,r_.d)(n,o.gripSize,function(e){var n,t=e.width,r=e.height;return n={},(0,nX._)(n,xd.gripWidth,t+"px"),(0,nX._)(n,xd.gripHeight,r+"px"),n}),n),l=rf(r4),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,p.useRef)(e),t=rf(tD),r=rh(ng);return(0,p.useCallback)(function(i){if(i.snapped)return void t({leftPath:i.leftPath,percent:n.current});Promise.resolve(r()).then(function(r){var o=eC(r,i.leftPath);if(!o||!eA(o))throw Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})})},[e,t,r])}(),c=(0,p.useRef)(null),d=(0,uE.A)(o.isSnapped),f=(0,ro.p)();return(0,s.FD)(of.S,{style:xu,innerRef:a,css:xf.root,onDoubleClick:function(){u(o.handle.current)},onPointerDown:function(e){(0,uC.j)(e,{start:function(){var e=o.handle.current;c.current=document.activeElement,l({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){l({type:"update",moveDelta:e.delta})},end:function(){var e,n;l({type:"end"}),null==(n=c.current)||null==(e=n.focus)||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,s.Y)(of.S,{className:"blanket",css:xf.blanket}),d?(0,s.Y)(xc.A,{className:"icon"}):(0,s.Y)(s.FK,{children:f?null:(0,s.Y)(of.S,{className:"grip",css:xf.grip})})]})}),xg=t(1594),xm=t(47414),xv=t(88521),xw=t(12267),xy=t(35046),xb=t(14106),xx="video.json",x_=(0,xb.join)(bq.T,xx),xY=t(71696);function xS(){var e=(0,h._)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return xS=function(){return e},e}var xA={},xI=(0,g.J1)(xS()),xk=t(84383),xE=t(91539);function xC(){var e=(0,h._)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return xC=function(){return e},e}var xD={},xR=(0,g.J1)(xC()),xF={direction:"reverse",state:{isExecutingPlan:!1},reducer:function(e,n){if(e.sender.type!==eu.utd.AI)return!1;var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"agentPlanEventContents":var r=t.agentPlanEventContents;if(!r)break;if(!0===r.requiresApproval)return n.notification={id:r.planId,text:"Plan is waiting for approval"},n.isExecutingPlan=!0,!1;if(n.isExecutingPlan&&r.step.subSteps.every(function(e){return e.status===eu.jhd.STEP_COMPLETE}))return n.notification={id:r.planId,text:"Plan has been completed!"},n.isExecutingPlan=!1,!1;break;case"agentAskUserForActionRequest":var i=t.agentAskUserForActionRequest.request;if((null==i?void 0:i.$kind)==="userSecretsRequest")return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;return n.notification={id:e.id,text:"Agent has an update for you"},!1;case"agentTimelineEventContents":var o,a=t.agentTimelineEventContents,l=a.toolData,u=a.toolName;if((null==l?void 0:l.$kind)==="messageData"){switch(null==(o=l.messageData.agentAction.optionType)?void 0:o.$kind){case"messageButtonAction":return n.notification={id:e.id,text:"Agent has a question for you"},!1;case"secretRequestAction":return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;case"deployRequestAction":return n.notification={id:e.id,text:"Agent needs your permission to deploy the application"},!1}if("user_response"===u)return n.notification={id:e.id,text:"Agent has a question for you"},!1}}n.notification=void 0}};function xU(){var e=(0,h._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return xU=function(){return e},e}var xP=(0,g.J1)(xU()),xO=t(6520);function xT(){var e=(0,h._)(["\n  query TrackMultiplayer($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return xT=function(){return e},e}var xL={},xM=(0,g.J1)(xT());function xG(){var e=oO(),n=(0,l3.oR)(),t=rh(n_),r=rf(t_);return(0,p.useCallback)(function(i){var o=!!i&&i.reveal;if(n)return void e({pane:{type:"runnerOutput"},activate:!1,commit:!0});var a=t().find(function(e){var n=(0,c._)(e,2);return"runnerOutput"===(n[0],n[1]).type});a||e({pane:{type:"runnerOutput"},activate:!1,commit:!0}),o&&a&&r({paneId:a[0],activate:!0})},[n,t,e,r])}function xN(e,n,t){var r=rd(nk),i=rf(tq),o=rf(t_),a=rh(n_);(0,ad.SJ)(function(){if(r)return[e,function(){var e=a().find(function(e){return(0,c._)(e,2)[1].type===n.type});if(e)return void o({paneId:e[0],activate:!0});i((0,r6._)((0,f._)({},t),{pane:n,activate:!0,placement:{type:"secondary"}}))}]},[r,i,o])}var xz=t(314),xH=t(1923),xW=t(29829),xB=t(98118),xj=t(24481),x$=t(46153),xq=t(7083),xV=t(98803),xK=t(57194),xZ=t(25691),xJ=t(5568),xQ=t(67486),xX=t(50568),x0=t(85271),x1=t(89385),x2=t(87380);function x4(){var e=(0,h._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return x4=function(){return e},e}var x5={},x3=(0,g.J1)(x4()),x8=t(26216),x7=t(27784),x6=t(20016),x9=t(67571),_e=t(8787),_n=t(70918),_t=t(38197);function _r(e){var n,t,r,i,o,a,l,u,d,h,g,w,y,b,x,_,Y,S,A,I,k,E,C,D,R,F,U,P,O,T,M,G,z,H,W,j,$,V,K,Z,J,Q,X,ee,en,et,er,eo,ea,ed,ep,ef,eh,eg,em,ev,ew,ey,eb,ex,e_,eY,eS,eA,eI,ek,eC,eD,eR,eF,eU,eP,eO,eT,eL,eM,eG,eN,ez,eH,eW,eB,ej,e$,eq,eV,eK,eZ,eJ,eQ,eX,e0,e1,e2,e4,e5,e3,e8,e7,e6,e9,ne,nt,nr,no,na,nl,nu,nc,ns,nd,np,ng,nm,nv,nw,nb,nx,n_=e.repl,nY=e.currentUser,nS=(0,o3.A)(),nI=nS.replspaceApi,nE=nS.dotReplit,nC=nS.container,nD=nS.ports;n=(0,o3.A)().lspnix,t=(0,uG.g)("codeIntelligence").preferences.codeIntelligence,r=(0,L._P)({controlName:"flag-download-more-ram"}),i=(0,tR.L2)().length>0,(0,p.useEffect)(function(){if(r&&!i||!t)return void n.disable();n.enable()},[n,t,i,r]),o=(0,c._)((0,xE.eY)(),1)[0],a=rf(tl),l=(0,q.A)(function(){return el()(a,1e3)},[a]),u=(0,ei.A)(),(0,p.useEffect)(function(){var e=function(){l({replId:u,force:!1}),l.flush()};if(!o)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[l,u,o]),(0,p.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&l({replId:u,force:!1})};if(!o)return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[l,u,o]),(0,p.useEffect)(function(){if(!o){var e=null;return function n(){e=setTimeout(function(){l({replId:u,force:!1}),n()},6e4)}(),function(){e&&clearTimeout(e)}}},[l,u,o]),(0,p.useEffect)(function(){return function(){l({replId:u,force:!1}),l.flush()}},[l,u,o]),(0,xv.A)(),(0,x7.A)(),(0,x9.A)({workspaceType:"desktop"}),(0,p.useEffect)(function(){var e=function(e){"s"===e.key&&(0,uN.T$)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),h=(d=(0,o3.A)()).container,g=d.presence,(0,p.useEffect)(function(){var e=g.onUserJoin(function(n){var t,r=null==(t=h.getContext())?void 0:t.repl;if(r){var i,o=n.username;return(i=r.id,(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:if(!n3.V)throw Error("Expected Apollo client");return[4,n3.V.query({query:xP,variables:{id:i}})];case 1:return[2,(null==(e=n.sent().data)?void 0:e.getRepl.__typename)==="Repl"?e.getRepl.title:null]}})})()).then(function(e){e&&mg({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(r.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})}),function(){e()}}})},[g,h]),w=(0,ei.A)(),y=(0,uG.g)("agentAudioNotification").preferences.agentAudioNotification,b=(0,p.useCallback)(function(e,n){if(y&&document.hidden)try{new Audio("/public/sounds/pop.mp3").play()}catch(e){}mg({title:"Agent Update",body:n,tag:"".concat(w,"-").concat(e),icon:"/public/images/ai/agent/AgentIconStandard.png",cacheDuration:3e5})},[y,w]),x=(0,B.NC)(),_=(0,es.J2)(x.sessions.agent.current),Y=(0,p.useMemo)(function(){return null==_?void 0:_.reduce(xF,1)},[_]),S=null==_?void 0:_.agent.state,A=(0,p.useMemo)(function(){return S&&Y?ec.cP.combine(S,Y):null},[S,Y]),(0,es.q3)(A,{next:function(e){var n=(0,c._)(e,2),t=n[0],r=n[1].notification;r&&(null==t?void 0:t.state)===eu.g32.AGENT_STATE_PAUSED&&b(r.id,r.text)}}),(0,xX.A)(),I=(0,ei.A)(),k=(0,o3.A)().container,E={variables:{replId:I},skip:(0,aW.A)(k)!==xY.KN.CONNECTED},C=(0,f._)({},xD,E),w3.R(xR,C),D=(0,o3.A)().presence,(0,p.useEffect)(function(){return D.onFollowingUsersChanged(function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,oJ.u4)(gY.AZ.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,oJ.u4)(gY.AZ.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[D]),(0,_e.A)(),R=(0,o3.A)().presence,F=rd(ni),(0,p.useEffect)(function(){R.updateOpenFile(F)},[R,F]),P=(U=(0,aF.A)()).showConfirm,O=U.showNotice,T=U.hideMessage,M=U.showError,G=(0,o3.A)().container,z=(0,p.useRef)(!1),(0,p.useEffect)(function(){var e=G.onToast(function(e){e.startsWith("PANIC")||O(e,Math.max(1e4,e.length/.025+1e3))}),n=null,t=!1,r=G.onConnectionStateChanged(function(e){if(n&&(T(n),n=null),e===xY.KN.CONNECTED){t&&z.current&&(n=P("Connected",1500),z.current=!1),t=!0;return}if(t){if(e===xY.KN.CONNECTING){n=O("Reconnecting");return}if(e===xY.KN.DISCONNECTED){n=M("Disconnected"),z.current=!0;return}}});return function(){n&&T(n),e(),r()}},[G,P,O,M,T]),H=(0,aF.A)().showConfirm,W=(0,o3.A)().fs,(0,p.useEffect)(function(){var e=W.registerOnFlushSuccess(function(e,n){if(n===tV.sT.MANUAL_SAVE){var t="Saved ".concat(e);H(t,Math.max(1e4,t.length/.025+1e3))}});return function(){e()}},[W,H]),$=(j=(0,aF.A)()).showNotice,V=j.showError,(0,dr.b)(function(e,n){var t=n.signal;return(0,n4._)(function(){var n,r;return(0,n5.YH)(this,function(i){switch(i.label){case 0:return[4,e.pythonMigration.detectLegacyPython.rpc({},{signal:t})];case 1:if(!(n=i.sent()).ok||!n.payload.oldVenvDetected)return[2];return[4,e.pythonMigration.migratePython.rpc({},{signal:t})];case 2:if(!(r=i.sent()).ok)return"NOP"!==r.payload.code&&V((0,s.FD)(s.FK,{children:[(0,s.Y)("div",{children:"Failed to migrate legacy Python configuration."}),(0,s.Y)("div",{children:"You may need to reinstall your Python packages, or contact support."})]}),1e4),[2];return $((0,s.FD)(s.FK,{children:[(0,s.Y)("div",{children:"This Repl contained legacy Python configuration"}),(0,s.Y)("div",{children:"and has been automatically migrated."})]}),1e4),[2]}})})()},[V,$]),K=rd(nk),Z=xG(),J=(0,dV.Os)(bB.C.id,bB.j.Output),(0,p.useEffect)(function(){if(K&&(null==J?void 0:J.isActive)){var e=setInterval(function(){Z()},200);return function(){clearInterval(e)}}},[null==J?void 0:J.isActive,Z,K]),xN(cG.showShell.id,{type:"shell"}),xN(cG.showDocs.id,{type:"docs"}),xN(cG.showGit.id,{type:"git"}),xN(cG.showSettings.id,{type:"preferences"}),xN(cG.showConsole.id,{type:"runnerOutput"}),xN(cG.showReplitAi.id,{type:"ghostwriterChat"},{commit:!0}),(0,xH.A)(),Q=(0,o3.A)().presence,X=oM(),(0,p.useEffect)(function(){return Q.onUserOpenedFile(function(e){var n=e.user,t=e.file,r=Q.getFollowedUser();r&&r.id===n.id&&t&&X({path:t})})},[Q,X]),en=(ee=(0,c._)((0,p.useState)(null),2))[0],et=ee[1],(0,p.useEffect)(function(){return Q.onFollowedUserChanged(et)},[Q]),(0,p.useEffect)(function(){if(en){var e=setTimeout(function(){document.addEventListener("click",n)},0);return function(){clearTimeout(e),document.removeEventListener("click",n)}}function n(){Q.unfollowUser()}},[en]),er=(0,uq.xu)(),ep=(null==(ed=(eo={variables:{replId:(0,ei.A)()}},ea=(0,f._)({},x5,eo),m.I(x3,ea)).data)?void 0:ed.getRepl.__typename)==="Repl"?ed.getRepl:null,(0,p.useEffect)(function(){var e;ep&&(null==(e=ep.templateInfo)?void 0:e.label.includes("Blank Repl"))&&er(!0)},[er,ep]),ef=rf(i7),eh=(0,o3.A)().fs,eg=(0,bq.A)().isTutorial,em=(0,oo.A)(ef),(0,p.useEffect)(function(){if(eg){var e=!1,n=eh.watchDir(bq.T,{onChange:function(n){(0,n4._)(function(){var e;return(0,n5.YH)(this,function(t){switch(t.label){case 0:if(!n.find(function(e){return e.type===tV.pt.File&&e.filename===xx}))return[2,null];return[4,eh.readFile(x_)];case 1:if((e=t.sent()).error)return[2,null];return[2,e.content.toString()]}})})().then(function(n){if(!e){if(!n)return void em.current(null);var t=null;try{t=v0._3(n)}catch(e){}var r=(void 0===t?"undefined":(0,eE._)(t))==="object"&&"string"==typeof t.embedUrl?t.embedUrl:null;em.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){em.current(null)},onError:function(){em.current(null)}});return function(){e=!0,n()}}},[eh,eg,em]),ev=(0,bq.A)().isTutorial,ew=rf(oe),(0,p.useEffect)(function(){ev&&ew()},[ew,ev]),ey=(0,xO.A)(),eb=(0,uq.RF)(),(0,p.useEffect)(function(){eb({paneType:"envEditor",indicatorType:ey?rS.LU.redStronger:void 0})},[ey,eb]),(0,xQ.R)({onOpenEnvEditor:function(){nR({pane:{type:"envEditor"},activate:!0,placement:{type:"secondary"}})}}),ex=rd(nn),e_=(0,tR.T_)(),eY=(0,tR.nF)(),(0,p.useEffect)(function(){ex?e_(ex):eY()},[e_,eY,ex]),eS=(0,at.eZ)(),eA=rp(od),eI=rh(nn),ek=(0,oo.A)(eS),(0,p.useEffect)(function(){var e=function(e){e&&(null!==n&&clearTimeout(n),n=setTimeout(function(){var e=eI();e&&ek.current(e)}))},n=null;e(eA.current);var t=eA.subscribe(e);return function(){null!==n&&clearTimeout(n),t()}},[eA,ek,eI]),eC=rd(t4),eD=rf(oT),(0,p.useEffect)(function(){var e=function(){eD()};if(eC)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[eC,eD]),(0,xJ.A)(),eR=rd(nk),eF=(0,at.gB)(),eU=rh(ny),(0,ad.SJ)(function(){if(eR)return[cG.webviewRefresh.id,function(){var e=eU().filter(function(e){return"webview"===(0,c._)(e,2)[1].type}),n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,c._)(i.value,1)[0],l=eF(a);l&&"webview"===l.type&&l.refresh()}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}]},[eR,eF,eU]),(0,x0.A)(),(0,xy.i)(!(null==(nb=n_.org)?void 0:nb.id));var nR=aU(),nF=(0,B.jt)();(0,p.useEffect)(function(){return dn.NA("replId",n_.id),function(){dn.NA("replId",void 0)}},[n_.id]),(0,p.useEffect)(function(){return dn.NA("agent",nF),(0,lX.$Y)(nF),function(){dn.NA("agent",void 0),(0,lX.qh)()}},[nF]),(0,xz.A)({repl:n_,currentUser:nY,container:nC}),eP=(0,ei.A)(),eT=(eO=(0,o3.A)()).container,eL=eO.ports,eG=(0,c._)((eM=(0,f._)({},xA,void 0),v.n(xI,eM)),1)[0],eN=(0,uG.g)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,ez=(0,l3.oR)(),eH=(0,B.jt)(),eW=oO(),eB=(0,p.useCallback)(function(e){e.isForwarded&&!eH&&(ez||eW({pane:{type:"vnc"}}),eG({variables:{input:{id:eP,isVnc:!0}}}))},[eH,ez,eG,eP,eW]),ej=(0,p.useCallback)(function(e){var n=e.isForwarded,t=e.isOpen,r=e.data;n&&(void 0===t||t)&&!eH&&(eN&&!ez&&eW({pane:{type:"webview",data:r}}),eG({variables:{input:{id:eP,isServer:!0}}}))},[ez,eH,eP,eG,eN,eW]),(0,p.useEffect)(function(){return eL.portsState.subscribe(el()(function(e){if(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.configuration,u=a.isOpen;if(l.isVnc)return void eB({isForwarded:u});var c=l.type===xk.gH.FORWARDED;ej({isForwarded:c,isOpen:u,data:{ports:function(e){var n=e.configuration;if(n.localPort)return{type:"local",path:"/",port:n.localPort};var t=(0,xk.Zd)(n);if(t)return{type:"external",path:"/",port:t}}(a)}})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},500,{leading:!0}))},[eT,eL.portsState,ej,eB]),(0,x6.A)(),e$=(0,L._P)({controlName:"flag-open-telemetry-tracing"}),e4=(eV=(eq=(0,c._)((0,p.useState)(!1),2))[0],eK=eq[1],eJ=(eZ=(0,c._)((0,p.useState)(Date.now()),2))[0],eQ=eZ[1],e0=(eX=(0,c._)((0,p.useState)(Date.now()),2))[0],e1=eX[1],(0,p.useEffect)(function(){var e=function(){eK(!document.hidden),document.hidden?e1(Date.now()):eQ(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),e2={visibility:eV,visibleTime:eJ,hiddenTime:e0}).visibility,e5=e2.visibleTime,e3=e2.hiddenTime,(0,p.useEffect)(function(){e$&&e4&&(e5-e3)/1e3>60&&(0,N.O)(x2.rA)},[e$,e4,e3,e5]),e8=(0,o3.A)().ports,e7=(0,uG.g)("forwardPortsAutomatically").preferences,(0,p.useEffect)(function(){e8.setForwardPortsAutomatically(e7.forwardPortsAutomatically)},[e7.forwardPortsAutomatically,e8]),(0,xw.A)(n_,nY);var nU=rf(nf),nP=(0,hh.j)();(0,p.useEffect)(function(){nU(!nP)},[nP,nU]);var nO=rf(nh),nT=(0,xm.A)();(0,p.useEffect)(function(){nO(nT)},[nT,nO]),e9=(0,o3.A)().presence,ne=(0,ei.A)(),nt=(0,p.useRef)(!1),nl=(nr={variables:{replId:ne}},no=(0,f._)({},xL,nr),na=m.I(xM,no)).data,nu=na.loading,nc=0,(null==nl?void 0:nl.getRepl.__typename)==="Repl"&&(nc=nl.getRepl.multiplayers.length,(null==(e6=nl.getRepl.owner)?void 0:e6.__typename)==="User"&&(nc+=1)),(0,p.useEffect)(function(){if(!nu&&!nt.current){var e=e9.onActiveUsersChange(function(){nt.current=!0,e(),(0,oJ.u4)(oJ.AZ.MULTIPLAYER_REPL_OPENED,{replId:ne,participantsCount:nc,usersOnlineCount:e9.getActiveUsers().length})});return e}},[ne,nu,nc,e9]);var nL=(0,tR.c_)();(0,p.useEffect)(function(){nI.setWaitForFileClose(nL)},[nI,nL]);var nM=(0,xE.iO)(),nG=rd(nA);(0,p.useEffect)(function(){nG&&nM(nG)},[nM,nG]),nd=(ns=(0,o3.A)()).packager,np=ns.toolchain,(0,p.useEffect)(function(){var e=setTimeout(function(){(0,n4._)(function(){var e,n,t,r,i,o,a,l,u,c;return(0,n5.YH)(this,function(s){switch(s.label){case 0:if(!np.configs.current||!nd)return[2];e=np.configs.current.packagers,n=!0,t=!1,r=void 0,s.label=1;case 1:s.trys.push([1,7,8,9]),i=e[Symbol.iterator](),s.label=2;case 2:if(n=(o=i.next()).done)return[3,6];return a=o.value,[4,nd.listSpecfile(a.id)];case 3:var d;return(l=s.sent()).packages&&l.packages.length>0&&(u=l.packages.map(function(e){return e.name||""})||[],lX.vF.info("packager installed packages",{packagerId:a.id,language:a.language,packages:u}),(0,oJ.u4)(gY.AZ.PACKAGER_PACKAGES_INSTALLED,{packages:u})),[4,(d=(5+5*Math.random())*1e3,(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){return setTimeout(function(){return e()},d)})];case 1:return e.sent(),[2]}})})())];case 4:s.sent(),s.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return c=s.sent(),t=!0,r=c,[3,9];case 8:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 9:return[2]}})})()},(10+5*Math.random())*1e3);return function(){clearTimeout(e)}},[nd,np.configs.current]),ng=(0,tR.RG)(),nm=(0,at.eZ)(),(0,p.useEffect)(function(){var e=function(){var e=ng();e&&nm(e)},n=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",n),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",n)}},[nm,ng]),(0,x$.A)();var nN=rf(iR),nz=rf(iF),nH=(0,o3.A)().fs;(0,x1.A)({fs:nH,openMultipleFiles:nN,openMultipleURLs:nz,waitForFileClose:nL,isMobileWorkspace:!1}),(0,ar.Pt)({supportsAgent:nF}),(0,cL.I7)({dotReplit:nE}),(0,_t.en)();var nW=oO();(0,dV.Os)(dq.X.id,dq.F.ProjectPane,{onEnter:function(){return nW({pane:{type:"project"},commit:!0,activate:!0})}}),(0,_n.A)(nD),nv=xG(),nw=(0,p.useCallback)(function(){nv({reveal:!1})},[nv]),(0,cL.bD)(nw,[nw]),(0,xW.u)(),(0,xj.M)(),(0,x8.H)(),(0,xV.k)(),(0,xK.t)(),(0,xB.E)(),(0,xq.e)(!!(null==(nx=n_.config)?void 0:nx.isAgentRepl));var nB=oO(),nj=(0,p.useCallback)(function(e){nB({pane:{type:e},activate:!0,reveal:!0,commit:!0})},[nB]);return(0,xg.A)({handleOpenPane:nj}),(0,xZ.A)(),null}var _i=t(62293);function _o(e){var n=e.children,t=e.tour,r=e.userId;if(!t)return(0,s.Y)(s.FK,{children:n});var i="workspace-desktop-new-user-tour"===t.id||"workspace-desktop-tour-2024"===t.id;function o(e){i&&t&&(0,oJ.ls)({id:r.toString(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})}return(0,s.Y)(_i.f,{tour:t,onStep:function(e){t&&((0,oJ.u4)(oJ.AZ.WORKSPACE_TOUR_STEP_VIEWED,{tour:t.id,stepId:e.toLowerCase()}),o(e))},onDone:function(e){(0,oJ.u4)(oJ.AZ.WORKSPACE_TOUR_DISMISSED,{tour:t.id,stepId:e.toLowerCase(),didComplete:e===t.steps[t.steps.length-1].id}),o(e)},children:n})}var _a=t(44007),_l=t(95353),_u=t(2418),_c=t(63082),_s=t.n(_c),_d=t(10409),_p=t(37566);function _f(){var e=(0,es.J2)((0,mb.S)()),n=(0,es.J2)((0,_p.e)()),t=_d.O.prompt;return e?t=_d.O.agentWorking:n&&(t=_d.O.agentWaiting),t?(0,s.Y)(_s(),{children:(0,s.Y)("link",{rel:"shortcut icon",href:t,sizes:"192x192",type:"image/png"})}):null}var _h=t(63570),_g=t(27144),_m=t(21234),_v=t(5278);function _w(){var e=(0,h._)(["\n  query PublishedAs($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        publishedAs\n      }\n    }\n  }\n"]);return _w=function(){return e},e}var _y={},_b=(0,g.J1)(_w()),_x=t(73920),__=t(95570),_Y=".replit-dynamic-template",_S=t(66541),_A=t(95069),_I=t(68898);function _k(){var e,n,t,r,i,o,a,l,u,d,h,g,v,w,y,b,x,_,Y,S=(0,c._)((0,p.useState)(!1),2),A=S[0],I=S[1],k=(0,p.useCallback)(function(e){switch(e){case"starting":return void I(!0);case"none":return void I(!1);case"running":if(!A)throw Error("expected repl not to need dynamic template initialization")}},[I,A]),E=(0,c._)((0,p.useState)([]),2),C=E[0],D=E[1],R=(0,v9.c)();n=(e={handleRPC:(0,p.useCallback)(function(e){switch(e.type){case"progress":case"failed":return D(function(n){return(0,ek._)(n).concat([(0,f._)({key:R(n.length)},e)])}),null;case"query":case"prompt":case"confirm":var n=(0,_v.A)();return D(function(t){return(0,ek._)(t).concat([(0,f._)({respond:n,key:R(t.length)},e)])}),n.promise;default:throw Error("unhandled request type: "+JSON.stringify(e))}},[R]),onConnStateChange:k}).handleRPC,t=e.onConnStateChange,r=(0,L._P)({controlName:"octopus-smokescreen"}),l=(i={variables:{id:(0,ei.A)()}},o=(0,f._)({},_y,i),a=m.I(_b,o)).loading,u=a.data,d=(0,q.A)(function(){if(l)return!1;var e=null==u?void 0:u.getRepl;return(null==e?void 0:e.__typename)==="Repl"&&e.publishedAs===pq.Q_w.Template},[l,u]),g=(h=(0,o3.A)()).container,v=h.fs,y=(w=(0,c._)((0,p.useState)(!1),2))[0],b=w[1],_=(x=(0,mT.A)({container:g,service:"exec",skip:!y})).channel,Y=x.isConnecting,(0,p.useEffect)(function(){!r||d||l||(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,v.stat(_Y)];case 1:return b(e.sent().exists),[2]}})})()},[v,r,d,l,b]),(0,p.useEffect)(function(){if(!Y){if(!_)throw Error("exec channel is not open");var e=(0,_v.A)();e.promise.then(function(){return(0,n4._)(function(){var e;return(0,n5.YH)(this,function(n){switch(n.label){case 0:return[4,_.request({input:JSON.stringify({type:"start"})+"\n"})];case 1:if(!(e=n.sent()).ok)throw Error((e.error,": "+e.error));return[2]}})})()});var r=_.onCommand(function(r){switch(r.body){case"state":r.state===_x.api.State.Running?(t("starting"),e.resolve()):t("none");return;case"output":var i,o,a=r.output;if(!a)return;try{o=JSON.parse(a)}catch(e){throw Error("failed to parse dynamic template output: ".concat(e))}null==(i=n(o))||i.then(function(e){return _.send({input:JSON.stringify(e)+"\n"})});return;case"stderr":__.warn("got dynamic template generator stderr:",r.stderr);return;case"error":__.error("got dynamic template generator error:",r.error);return;case"ok":return;default:throw Error("unhandled exec channel body: ".concat(r.body))}});return _.send({exec:{args:["sh",_Y],lifecycle:_x.api.Exec.Lifecycle.STDIN}}),function(){r()}}},[_,n,Y,t,y]);var F=C.map(function(e){switch(e.type){case"progress":return(0,s.Y)(_E,(0,f._)({},e));case"failed":return(0,s.Y)(_C,(0,f._)({},e));case"query":return(0,s.Y)(_D,(0,f._)({},e));case"prompt":return(0,s.Y)(_R,(0,f._)({},e));case"confirm":return(0,s.Y)(_F,(0,f._)({},e))}});return(0,s.Y)(am.a,{isOpen:A,onRequestClose:function(){return I(!1)},children:(0,s.Y)(of.S,{gap:8,children:F})})}function _E(e){var n=e.progress,t=(0,se._)(e,["progress"]);return(0,s.FD)(of.S,(0,r6._)((0,f._)({},t),{children:["progress: ",n]}))}function _C(e){var n=e.error,t=(0,se._)(e,["error"]);return(0,s.FD)(of.S,(0,r6._)((0,f._)({},t),{children:["error: ",n]}))}function _D(e){var n=e.query,t=e.options,r=e.respond,i=(0,se._)(e,["query","options","respond"]),o=(0,c._)((0,p.useState)(null),2),a=o[0],l=o[1],u=(0,c._)((0,p.useState)(!1),2),d=u[0],h=u[1],g=(0,v9.c)(),m=(0,p.useCallback)(function(){null!==a&&(h(!0),r.resolve({type:"answer",answer:t[a]}))},[a,t,r]);return(0,s.FD)(of.S,(0,r6._)((0,f._)({},i),{children:["query: ",n,t.map(function(e,t){return(0,s.FD)("label",{children:[(0,s.Y)("input",{type:"radio",name:n,value:t,checked:a===t,onChange:function(){d||l(t)}}),e]},g(t))}),(0,s.Y)(aE.$n,{text:"submit",onClick:m})]}))}function _R(e){var n=e.prompt,t=e.respond,r=(0,se._)(e,["prompt","respond"]),i=(0,c._)((0,p.useState)(""),2),o=i[0],a=i[1],l=(0,c._)((0,p.useState)(!1),2),u=l[0],d=l[1],h=(0,p.useCallback)(function(){d(!0),t.resolve({type:"answer",answer:o})},[o,t]);return(0,s.FD)(of.S,(0,r6._)((0,f._)({},r),{children:["prompt: ",n,(0,s.Y)(we.pd,{disabled:u,inputMode:"text",title:n,onChange:function(e){return a(e.currentTarget.value)}}),(0,s.Y)(aE.$n,{text:"submit",onClick:h})]}))}function _F(e){var n=e.confirm,t=e.dataConfirmation,r=e.respond,i=(0,se._)(e,["confirm","dataConfirmation","respond"]),o=Object.keys(t),a=Object.values(t);return(0,s.FD)(of.S,(0,r6._)((0,f._)({},i),{children:["confirm: ",n,(0,s.FD)(_S.A,{"aria-label":"the data to be used to generate your App",children:[(0,s.Y)(_I.A,{children:o.map(function(e){return(0,s.Y)(_m.VP,{isRowHeader:!0,children:e},e)})}),(0,s.Y)(_A.A,{children:(0,s.Y)(_m.fI,{children:a.map(function(e,n){return(0,s.Y)(_m.fh,{children:e},o[n])})})})]}),(0,s.Y)(aE.$n,{text:"yes",onClick:function(){return r.resolve({type:"answer",answer:"yes"})}}),(0,s.Y)(aE.$n,{text:"no",onClick:function(){return r.resolve({type:"answer",answer:"no"})}})]}))}var _U=t(10681),_P=t(22198);let _O=function(e){return(0,s.Y)(am.a,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,s.FD)(of.S,{gap:24,children:[(0,s.Y)(aC.Y9,{variant:"headerDefault",level:2,css:op.wp.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,s.Y)(aC.EY,{children:"Never miss messages from your collaborators if youâ€™re in another tab or window."}),(0,s.FD)(of.S,{row:!0,gap:12,justify:"end",children:[(0,s.Y)(aE.$n,{onClick:e.onCancel,text:"Deny",iconLeft:(0,s.Y)(sn.A,{})}),(0,s.Y)(aE.$n,{text:"Allow notifications",colorway:"positive",iconLeft:(0,s.Y)(d4.A,{}),onClick:e.onConfirm})]})]})})};var _T=t(7069),_L=t(91981),_M=t(49540);function _G(e){var n=e.isInLayout,t=(0,se._)(e,["isInLayout"]),r=(0,es.J2)((0,mb.S)()),i=(0,es.J2)((0,_p.e)()),o=(0,c._)((0,p.useState)(!1),2),a=o[0],l=o[1];(0,p.useEffect)(function(){if(!i||r||n)return void l(!1);var e=setTimeout(function(){return l(!a)},a?1e3:5e3);return function(){clearTimeout(e)}},[a,i,r,n]);var u=!n&&r||a;return(0,s.Y)(vP.l,(0,f._)({loading:u},t))}var _N=t(69681),_z=t.n(_N),_H=(0,rS.CK)("index.module.css",["--x","--y","--width","--height","--z-index","--expand-blanket-opacity","--expand-blanket-pointer-events","--expand-blanket-width","--sidebar-resize-handle-width","--sidebar-resize-handle-grip-color"]);function _W(){}function _B(){var e=oW(),n=rf(iO),t=rd(iT),r=(0,o3.A)(),i=r.secrets,o=r.fs,a=oO(),l=(0,p.useCallback)(function(e){return a({pane:e})},[a]),u=(0,vF.n)(),d=u.session,f=u.setSession,h=u.setSessionId,g=o$(),m=(0,p.useRef)(null);(0,r_.d)(m,mw(g.rect,g.getTransitionEnabled),function(e){var n;return n={},(0,nX._)(n,_H.x,e.x+"px"),(0,nX._)(n,_H.y,e.y+"px"),(0,nX._)(n,_H.width,e.width+"px"),(0,nX._)(n,_H.height,e.height+"px"),n});var v=(0,uE.A)(g.displayState),w=(0,c._)((0,p.useState)(null),2),y=w[0],b=w[1],x=g.setChatRef;(0,p.useEffect)(function(){if(y)return x({setSessionId:h,focusInput:function(){return y.focus()}}),function(){x(null)}},[y,x,h]);var _=(0,ro.p)();return(0,s.FD)(av.ui,{elevated:"centered"!==v&&!_,innerRef:m,clsx:_z().root,style:(0,nX._)({},_H.zIndex,rY.W.tiledPane.toString()),children:[(0,s.Y)(vU.j,{secrets:i,readFile:o.readFile,session:d,setSession:f,openPane:l,onPlanApproval:function(){return n("tilingLayout")},isDesktopOrTabletAgentPresentationCentered:"centeredVisualPlanner"===e,isDesktopLayoutAgentPresentationTransitionInProgress:t,openPip:_W,inputRef:b}),(0,s.Y)(_j,{}),(0,s.Y)(_$,{})]})}function _j(){var e,n=o$(),t=(0,p.useRef)(null);(0,r_.d)(t,n.displayState,function(e){var n;return n={},(0,nX._)(n,_H.expandBlanketOpacity,"collapsed"===e?"1":"0"),(0,nX._)(n,_H.expandBlanketPointerEvents,"collapsed"===e?"all":"none"),n});var r=(0,uE.A)(n.agentFiletreeOrder);return(0,s.FD)(av.ui,{type:"button",clsx:[_z().expandBlanket,(e={},(0,nX._)(e,_z().left,"filetree-agent"===r),(0,nX._)(e,_z().right,"agent-filetree"===r),e)],justify:"start",align:"center",innerRef:t,py:10,style:(0,nX._)({},_H.expandBlanketWidth,n.collapsedWidth+"px"),onClick:function(){n.toggle(!0)},children:[(0,s.Y)(_G,{size:16,isInLayout:!1}),(0,s.Y)(of.S,{clsx:_z().expandIcon,children:(0,s.Y)(pn.A,{rotate:180*("agent-filetree"!==r),size:24})})]})}var _$=(0,p.memo)(function(){var e,n=(0,p.useRef)(null),t=o$(),r=(0,p.useRef)(null);(0,r_.d)(r,t.gutter,function(e){return(0,nX._)({},_H.sidebarResizeHandleWidth,e+"px")});var i=(0,uE.A)(t.agentFiletreeOrder);return(0,s.Y)(of.S,{innerRef:r,clsx:[_z().sidebarResizeHandle,(e={},(0,nX._)(e,_z().left,"filetree-agent"===i),(0,nX._)(e,_z().right,"agent-filetree"===i),e)],align:"center",justify:"center",onDoubleClick:function(){t.toggle("collapsed"===t.displayState.current)},onPointerDown:function(e){(0,uC.j)(e,{start:function(){n.current=document.activeElement,t.resizeSidebar({type:"start"})},move:function(e){var n=e.delta;t.resizeSidebar({type:"update",moveDelta:n})},end:function(){var e,r;t.resizeSidebar({type:"end"}),null==(r=n.current)||null==(e=r.focus)||e.call(r)}})}})}),_q=t(24640),_V=t(30453);function _K(e){var n=e.session,t=(0,se._)(e,["session"]),r=(0,es.Rj)(function(){return n.type},[n])===eu.dF3.AGENT_SESSION?"agent_chat":"assistant_chat",i=(0,_q.K)(n,r),o=i.openFeedbackModal,a=i.FeedbackModal;return(0,s.FD)(s.FK,{children:[(0,s.Y)(f0.K0,(0,r6._)((0,f._)({},t),{alt:"Submit feedback",onClick:o,children:(0,s.Y)(_V.A,{color:rS.LU.foregroundDimmer})})),(0,s.Y)(a,{})]})}var _Z=t(70402);function _J(){var e=(0,h._)(["\n  query ReplEnvironmentDesktopSidebarUpgradeCta {\n    currentUser {\n      id\n      ...UserPlanStateCurrentUser\n    }\n  }\n  ","\n"]);return _J=function(){return e},e}var _Q={},_X=(0,g.J1)(_J(),_Z.o),_0=t(91087),_1=t(57339);function _2(e){var n,t,r,i=e.iconButton,o=(n=(0,f._)({},_Q,void 0),m.I(_X,n)),a=o.data,l=o.loading,u=(0,gI.ET)().orgId;if(l||!(null==a?void 0:a.currentUser))return null;var c=(0,_1.q)({user:a.currentUser}),d=c.plan,p=c.showUpgradeCta;if(void 0!==u||!p)return null;function h(){window.location.reload()}if(d.name!==dY.en)return(0,s.Y)(of.S,{dataCy:"workspace-sidebar-upgrade-cta",children:(0,s.Y)(dS.A,{onPlanCheckoutComplete:h,size:"small",context:"workspace_sidebar",variant:"default",colorway:"primary",iconButton:i,stretch:!0})});if(null==(t=d.trial)?void 0:t.cancelsAt){var g=new Date;if(g.setMonth(g.getMonth()+1),new Date(d.trial.cancelsAt)>g)return null}var v=(null==(r=d.trial)?void 0:r.cancelsAt)?"Trial ends ".concat((0,_0.g)(d.trial.cancelsAt)):void 0;return(0,s.Y)(dS.A,{onPlanCheckoutComplete:h,variant:"default",context:"workspace_sidebar",text:v,iconButton:i,stretch:!0})}var _4={38:20,36:16,32:16,20:14},_5=(0,rI.v)(["toolIconButtonSize","toolIconBorderRadius"]),_3=_5.cssVars,_8=_5.styleTokens,_7=[op.wp.position.relative,op.wp.center,{borderRadius:_8.toolIconBorderRadius}],_6=(0,ek._)(_7).concat([op.wp.reset.button,{width:_8.toolIconButtonSize,height:_8.toolIconButtonSize,borderRadius:_8.toolIconBorderRadius}]),_9=(0,rA.x)({static:_7,buttonFilled:[op.wp.display.inlineFlex,{button:(0,ek._)(_6).concat([dP.b.filled])}],button:[op.wp.display.inlineFlex,{button:(0,ek._)(_6).concat([dP.b.nofill])}]});function Ye(e){var n=e.indicator,t=e.children,r=e.size;return(0,s.FD)(s.FK,{children:[(0,p.cloneElement)(t,{size:_4[void 0===r?38:r]}),n?(0,s.Y)(vi.b,{color:n}):null]})}function Yn(e){var n=e.indicator,t=e.children,r=e.className,i=e.size,o=void 0===i?38:i,a=e.backgroundColor;return(0,s.Y)(av.ui,{elevated:!0,className:r,css:_9.static,style:(0,nX._)({width:o,height:o,backgroundColor:a},_3.toolIconBorderRadius,20===o?"4px":"8px"),children:(0,s.Y)(Ye,{indicator:n,size:o,children:t})})}var Yt=(0,p.forwardRef)(function(e,n){var t,r=e.children,i=e.alt,o=e.size,a=void 0===o?38:o,l=e.filled,u=e.indicator,c=e.backgroundColor,d=e.tooltipContents,p=(0,se._)(e,["children","alt","size","filled","indicator","backgroundColor","tooltipContents"]);return(0,s.Y)(of.S,{css:void 0===l||l?_9.buttonFilled:_9.button,style:(t={},(0,nX._)(t,_3.toolIconButtonSize,a+"px"),(0,nX._)(t,_3.toolIconBorderRadius,20===a?"4px":"8px"),t),children:(0,s.Y)(f0.K0,(0,r6._)((0,f._)({},p),{alt:i,ref:n,style:{backgroundColor:c},isTooltipOpen:p.isTooltipOpen,tooltipContents:(0,s.Y)(of.S,{grow:!0,shrink:!0,children:null!=d?d:i}),children:(0,s.Y)(Ye,{indicator:u,size:a,children:r})}))})}),Yr=t(62684),Yi={searchReplace:cG.searchFileContents,shell:cG.showShell,runnerOutput:cG.showConsole,docs:cG.showDocs,ghostwriterChat:cG.showReplitAi,preferences:cG.showSettings,git:cG.showGit},Yo=(u={},(0,nX._)(u,ne.bY.CloudServices,"Replit-native and third-party services which your App can interact with"),(0,nX._)(u,ne.bY.WorkspaceFeatures,"Everything you need to write, run, debug, and maintain your code"),(0,nX._)(u,ne.bY.Collaboration,"Communication tools for working with collaborators"),(0,nX._)(u,ne.bY.WorkspaceExtensions,"Make your workspace more powerful with new tools, commands, and integrations"),u),Ya=(0,rA.x)({tooltipTitle:[op.wp.flex.growAndShrink(1)]});function Yl(e){var n=e.title,t=e.subtitle,r=e.description,i=e.icon,o=e.titleInfoIcon;return(0,s.FD)(of.S,{grow:!0,shrink:!0,p:2,gap:4,children:[(0,s.FD)(of.S,{row:!0,gap:4,align:"center",children:[(0,s.Y)(Yn,{size:20,children:i}),(0,s.Y)(aC.EY,{css:Ya.tooltipTitle,children:n}),o]}),t?(0,s.Y)(aC.EY,{children:(0,s.Y)("strong",{children:t})}):null,r]})}function Yu(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onDragStart,t=rf(oT),r=(0,c._)((0,vt.i)({type:mL.N.NewPane,item:function(){return{type:mL.N.NewPane,pane:e,grid:!0}},end:function(){t()},collect:function(e){return{isDragging:e.isDragging()}}}),3),i=r[0],o=r[1],a=r[2],l=i.isDragging;return(0,p.useEffect)(function(){l&&(null==n||n())},[l,n]),{dragRef:o,dragPreview:a}}function Yc(e){var n,t=e.panes,r=e.dismissPopover,i=(n=(0,ne.Vv)(),(0,p.useMemo)(function(){return function(e,n){var t=(a={},(0,nX._)(a,ne.bY.CloudServices,[]),(0,nX._)(a,ne.bY.Collaboration,[]),(0,nX._)(a,ne.bY.WorkspaceFeatures,[]),(0,nX._)(a,ne.bY.WorkspaceExtensions,[]),(0,nX._)(a,ne.bY.Other,[]),a),r=!0,i=!1,o=void 0;try{for(var a,l,u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value,s=n.getCategory(c);["extensionStore","extensionDevtools","integrations"].includes(c.type)?t[s].unshift(c):t[s].push(c)}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return t}(t,n)},[t,n])),o=(0,ne.Vv)(),a=oO(),l=(0,p.useMemo)(function(){var e,n,t,l,u,d;return n=(e={categorizedPanes:i,ui:o,openPane:function(e){r(),a({pane:e,activate:!0})},dismissPopover:r}).categorizedPanes,t=e.ui,l=e.openPane,u=e.dismissPopover,d=Object.entries(n).map(function(e){var n=(0,c._)(e,2),r=n[0],i=n[1];return{data:{type:"context",label:r,icon:(0,s.Y)(o4.A,{}),tooltip:Yo[r]},commands:function(){return i.map(function(e){var n,r,i,o,a;return{match:(r=(n={pane:e,aliases:ae.f.get(e.type),dismissPopover:u}).pane,o=void 0===(i=n.aliases)?[]:i,a=n.dismissPopover,function(e){var n=e.searchQuery,t=e.data,i=e.active;if("group"===t.type)return null;if(!n)return{score:1,render:{content:(0,s.Y)(Ys,{pane:r,dismissPopover:a,toolItemProps:{pane:r,active:i}})}};var l=(0,Yr.w2)(n,t.label,{filterLowMatchScores:!0});if(null!=l)return{score:null!=(p=null==l?void 0:l.score)?p:0,render:{content:(0,s.Y)(Ys,{pane:r,dismissPopover:a,toolItemProps:{pane:r,labelHighlights:null!=(f=null==l?void 0:l.ranges)?f:[],active:i}})}};var u=!0,c=!1,d=void 0;try{for(var p,f,h,g=o[Symbol.iterator]();!(u=(h=g.next()).done);u=!0){var m=h.value,v="string"==typeof m?{alias:m,prefix:void 0}:m,w=v.alias,y=v.prefix,b=(0,Yr.w2)(n,w,{filterLowMatchScores:!0});if(b)return{score:b.score,render:{content:(0,s.Y)(Ys,{pane:r,dismissPopover:a,toolItemProps:{active:i,alias:w,aliasPrefix:y,pane:r}})}}}}catch(e){c=!0,d=e}finally{try{u||null==g.return||g.return()}finally{if(c)throw d}}return null}),data:{key:"extension"===e.type?"extension-".concat(e.data.installationId):e.type,type:"action",label:t.getTitle(e),icon:t.Icon({pane:e}),run:function(){return l(e)}}}})}}}),{data:{type:"context",label:"Search actions",description:"Search tools",icon:(0,s.Y)(o4.A,{})},commands:function(){return d}}},[i,o,r,a]),u=(0,p.useRef)(null);return(0,p.useEffect)(function(){u.current&&u.current()},[u]),(0,s.Y)(aw.r,{focusRef:u,command:l})}function Ys(e){var n=e.pane,t=e.dismissPopover,r=e.toolItemProps,i=Yu(n,{onDragStart:t}).dragRef,o=(0,ne.qo)(n,{short:!0}),a=(0,ne.Vv)(),l=a.Icon({pane:n}),u=a.getTitle(n),c=Yi[n.type];return(0,s.Y)(uv.m_,{tooltip:o?(0,s.Y)(Yl,{description:o,title:u,icon:l}):null,placement:"right-start",isDisabled:!o,maxWidth:300,children:function(e,n){return(0,s.Y)(of.S,(0,r6._)((0,f._)({innerRef:n},e),{style:{height:"100%"},children:(0,s.Y)(of.S,{style:{height:"100%"},innerRef:i,justify:"center",children:(0,s.Y)(o9.k,(0,r6._)((0,f._)({},r),{shortcutCommand:c}))})}))}})}var Yd=t(77751),Yp=t.n(Yd);function Yf(e){var n=e.placement,t=e.tooltipPlacement,r=(0,c._)((0,p.useState)(!1),2),i=r[0],o=r[1],a=(0,p.useCallback)(function(){return o(!1)},[]);return(0,s.FD)(dO.Wv,{isOpen:i,onOpenChange:o,label:"All tools",placement:void 0===n?"right":n,children:[(0,s.Y)(Yt,{filled:!1,alt:"All tools",onClick:function(){return o(!0)},tooltipPlacement:void 0===t?"right-end":t,size:32,children:(0,s.Y)(sl.A,{})}),(0,s.Y)(Yh,{dismissPopover:a})]})}function Yh(e){var n=e.dismissPopover,t=(0,ar.Tb)();return(0,s.Y)(of.S,{clsx:Yp().toolsListPopover,children:(0,s.Y)(Yc,{panes:t,dismissPopover:n})})}var Yg=(0,rA.x)({dockItem:[op.wp.position.relative,op.wp.width(36)],inLayoutIndicator:[op.wp.position.absolute,op.wp.top("50%"),op.wp.left(4),op.wp.width(3),op.wp.height(3),op.wp.borderRadius("full"),op.wp.shadow(1),{transform:"translate(0, -50%)",backgroundColor:rS.LU.foregroundDimmest,pointerEvents:"none"}]});function Ym(e){var n,t,r,i,o,a,l,u=e.pane,c=e.tooltipPlacement,d=e.indicatorPlacement,p=void 0===d?"right":d,f=(t=(n=(0,ne.Vv)()).Icon({pane:u}),r=n.getTitle(u),i=(0,ne.qo)(u),o=(0,uq.F9)({paneType:u.type}),a=oO(),{icon:t,title:r,description:i,indicator:o,onClick:function(){a({pane:u,commit:!0,reveal:!0})}}),h=f.title,g=f.description,m=f.indicator,v=f.onClick,w=f.icon,y=(l=u.type,rd((0,q.A)(function(){return(0,eo.eU)(function(e){return e(e2).some(function(n){return e(n.dataAtom).type===l})})},[l]))),b=Yu(u).dragRef,x=(0,ro.p)(),_=g?(0,s.Y)(Yl,{title:h,icon:w,description:(0,s.Y)(aC.EY,{multiline:!0,children:g})}):null,Y=(0,dV.Jw)(hj,hT.Assistant),S=(0,dV.Jw)(hj,hT.Agent);return(0,s.FD)(of.S,{css:Yg.dockItem,style:x?{width:32}:{},innerRef:(0,ne.GN)(u)?S:(0,ne.N5)(u)?Y:void 0,children:[(0,s.Y)(Yt,{ref:b,filled:!1,alt:h,indicator:m,size:x?32:36,onClick:v,tooltipContents:_,tooltipPlacement:void 0===c?"right-start":c,children:"agentChat"===u.type?(0,s.Y)(_G,{isInLayout:y}):w}),y&&null!==p?(0,s.Y)(of.S,{css:Yg.inLayoutIndicator,style:"bottom"===p?{bottom:-2,left:"50%",transform:"translateX(-50%)"}:{right:-2}}):null]})}var Yv=t(89660),Yw=t(5501),Yy=(0,rA.x)({files:{transitionProperty:"opacity",transitionDuration:sD.Ds.duration,transitionTimingFunction:sD.Ds.timingFunction,"&& button":[op.wp.border({color:rS.LU.outlineDimmest}),{backgroundColor:uI.s}]}});function Yb(){var e=oB(),n=(0,uE.A)(e.isOpen),t=(0,ad.Jn)(ct.id),r=e.toggle;return(0,ad.SJ)(function(){return[ct.id,function(){return r()}]},[r]),(0,s.Y)(Yx,{onClick:function(){return e.toggle(!n)},shortcut:t,isOpen:n})}function Yx(e){var n=e.isOpen,t=e.shortcut,r=e.onClick,i=(n?"Close":"Open")+" files",o=t?(0,s.Y)(Y_,{shortcut:t,text:i}):i;return(0,s.Y)(of.S,{css:Yy.files,children:(0,s.Y)(Yt,{dataCy:"toggle-files-sidebar",filled:!1,alt:i,tooltipContents:o,onClick:r,tooltipPlacement:"right",size:32,children:n?(0,s.Y)(Yv.A,{}):(0,s.Y)(Yw.A,{})})})}function Y_(e){return(0,s.FD)(of.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(aC.EY,{multiline:!1,variant:"small",children:e.text}),(0,s.Y)(ad._y,{fontSize:10,keyCombo:e.shortcut})]})}var YY=t(38535),YS=t.n(YY);function YA(e){var n,t,r,i=(n=(0,p.useRef)(null),t=(0,p.useRef)(null),r=(0,p.useRef)(null),(0,p.useEffect)(function(){var e=n.current;if(e){var i=!1,o=null,a=null,l=function(){if(n.current){var e=n.current,i=e.scrollTop,l=e.scrollHeight,u=e.clientHeight,c=i<=0,s=1>=Math.abs(l-u-i);c!==o&&t.current&&(t.current.style.setProperty("opacity",c?"0":"1"),o=c),s!==a&&r.current&&(r.current.style.setProperty("opacity",s?"0":"1"),a=s)}},u=function(){i||(i=!0,requestAnimationFrame(function(){i=!1,l()}))};return u(),e.addEventListener("scroll",u),function(){e.removeEventListener("scroll",u)}}},[]),{scrollRef:n,topRef:t,bottomRef:r}),o=i.scrollRef,a=i.topRef,l=i.bottomRef;return(0,s.FD)(of.S,{style:{top:ra.uF,width:e.width,height:"calc(100vh - ".concat(ra.uF,"px)")},innerRef:e.innerRef,clsx:YS().root,align:"stretch",justify:"space-between",gap:6,children:[(0,s.Y)(of.S,{align:"center",children:e.filesButton}),(0,s.FD)(of.S,{clsx:YS().middle,align:"center",children:[(0,s.Y)(of.S,{clsx:YS().primaryTools,children:e.primaryTools}),(0,s.Y)(of.S,{clsx:YS().divider}),(0,s.FD)(of.S,{clsx:YS().secondarySection,align:"stretch",children:[(0,s.FD)(of.S,{clsx:YS().secondaryTools,align:"center",children:[(0,s.Y)(of.S,{clsx:[YS().fade,YS().fadeTop],innerRef:a}),(0,s.Y)(of.S,{clsx:YS().secondaryToolsScroll,innerRef:o,children:e.secondaryTools}),(0,s.Y)(of.S,{clsx:[YS().fade,YS().fadeBottom],innerRef:l,align:"center",justify:"end"})]}),(0,s.Y)(of.S,{align:"center",children:e.allToolsButton})]})]}),(0,s.Y)(of.S,{align:"center",children:e.footer})]})}var YI=t(97172),Yk=t(66186),YE=t(11294),YC=t(70552);function YD(e){return(0,s.FD)(dO.Wv,{placement:"right",label:"Tool added",isOpen:e.isOpen,onOpenChange:function(n){!1===n&&e.dismissOnOutsideClick&&e.dismiss()},arrow:!0,children:[function(n){var t=n.ref,r=(0,se._)(n,["ref"]);return(0,s.Y)(of.S,(0,r6._)((0,f._)({},r),{innerRef:t,children:e.children}))},(0,s.FD)(of.S,{gap:8,style:{padding:8},children:[e.callout,(0,s.FD)(of.S,{row:!0,gap:4,children:[e.action,(0,s.Y)(aE.$n,{colorway:"primary",text:"Got it",onClick:e.dismiss,style:{marginLeft:"auto"}})]})]})]})}function YR(e){return"extension"===e.type?e.data.installationId:e.type}var YF=(0,p.memo)(function(e){var n,t,r,i,o,a,l,u,d,f,h,g,m,v,w,y,b,x,_,Y,S,A,I,k,E,C,D=oW(),R=0===(0,ar.Tb)().length,F=oj((0,ar.No)()),U=(t=(n=(0,YC.Cv)("neon")).toolState,r=n.dismissCallout,i=n.showCallout,o=n.setToolState,a=rf(nK),l=(0,YI.GK)().database,u=(0,YE.ex)(),d=(0,Yk.C9)().agentState,f=(0,es.G9)((0,p.useMemo)(function(){return null==d?void 0:d.select(function(e){return null==e?void 0:e.state})},[d])),h=(0,p.useRef)(!1),g=void 0!==l,m=null==l?void 0:l.isEphemeral,(0,p.useEffect)(function(){"callout-dismissed"!==t&&g&&!h.current&&f.current===eu.g32.AGENT_STATE_RUNNING&&(h.current=!0,a({pane:{type:"neon"}}),o("was-added-by-agent"))},[t,g,a,o,f]),w=(v=l&&m&&u)?(0,s.Y)(of.S,{children:(0,s.Y)(YE.Bt,{isFrozen:l.isFrozen,scheduledFreezeTime:l.scheduledFreezeTime,scheduledDeletionTime:l.scheduledDeletionTime})}):(0,s.FD)(aC.EY,{children:["We created a database for you,",(0,s.Y)("br",{}),"manage it here"]}),{action:v?(0,s.Y)(dS.A,{context:"workspace_ephemeral_postgres_database_banner",text:"Upgrade to Replit ".concat(dY.en),colorway:"brand",variant:"outlined",style:{flex:"1 1 auto"}}):null,callout:i?w:null,dismissCallout:r,isActive:i}),P=(b=(y=(0,YC.Cv)("replitAuth")).toolState,x=y.dismissCallout,_=y.showCallout,Y=y.setToolState,S=(0,c._)((0,YC.Ne)(),1)[0],A=oj((0,ar.No)()),I=rf(nK),E=(k=(0,c._)((0,p.useState)(!1),2))[0],C=k[1],(0,p.useEffect)(function(){if(A.secondaryTools){C(S);var e=A.secondaryTools.some(function(e){return"replitAuth"===e.type});S&&!e&&"was-added-by-agent"!==b&&"callout-dismissed"!==b&&(I({pane:{type:"replitAuth"}}),Y("was-added-by-agent"))}},[S,b,I,Y,A]),{callout:_?(0,s.FD)(aC.EY,{children:["Manage users and log in settings",(0,s.Y)("br",{}),"from the Authentication pane"]}):null,dismissCallout:x,isActive:_,showFlag:E}),O=(0,dV.Jw)(hj,hT.SidebarDock),T=(0,B.jt)(),L=(0,B.NC)(),M=(0,es.Rj)(function(){return T?L.sessions.agent.current:L.sessions.chat.open.latest},[L,T]),G=(0,pE.F)().isFreemiumStarterPlanUsersOwnRepl;return!F.visible||"centeredVisualPlanner"===D||R?null:(0,s.Y)(s.FK,{children:(0,s.Y)(YA,{innerRef:O,width:48,filesButton:(0,s.Y)(Yb,{}),primaryTools:F.primaryTools.map(function(e){return(0,s.Y)(Ym,{pane:e},YR(e))}),secondaryTools:F.secondaryTools.map(function(n){var t={neon:{callout:U.callout,action:U.action,dismiss:U.dismissCallout,isActive:U.isActive},replitAuth:{callout:P.callout,dismiss:P.dismissCallout,isActive:P.isActive,showFlag:P.showFlag}}[n.type];if(t){var r=t.callout,i=t.action,o=t.dismiss,a=t.isActive,l=t.showFlag;return(0,s.Y)(YD,{callout:r,action:i,dismiss:o,isOpen:(!!r||!!l)&&!e.isWorkspaceTourActive&&!1!==a,dismissOnOutsideClick:!0,children:(0,s.Y)(Ym,{pane:n})},YR(n))}return(0,s.Y)(Ym,{pane:n},YR(n))}),allToolsButton:(0,s.Y)(Yf,{}),footer:(0,s.FD)(of.S,{gap:4,align:"center",children:[(0,s.Y)(_2,{iconButton:!0}),M&&!G?(0,s.Y)(_K,{session:M,size:32,tooltipPlacement:"top-start"}):null,(0,s.Y)(gL.Ay,{})]})})})}),YU=t(48495),YP=t.n(YU);(0,ag.FM)({cmdOrCtrl:!0,shift:!0,key:"b"});var YO=(0,rS.CK)("index2.module.css",["--width","--height","--transform","--pointer-events","--opacity","--z-index"]),YT=(0,p.memo)(function(){var e=(0,p.useRef)(null),n=oB(),t=n.view;(0,r_.d)(e,mw(t,n.getTransitionEnabled),function(e){var n;return n={},(0,nX._)(n,YO.width,e.width+"px"),(0,nX._)(n,YO.height,e.height+"px"),(0,nX._)(n,YO.transform,"translate(".concat(e.x,"px, ").concat(e.y,"px)")),(0,nX._)(n,YO.pointerEvents,e.isOpen?"all":"none"),(0,nX._)(n,YO.opacity,e.isOpen?"1":"0"),(0,nX._)(n,YO.zIndex,rY.W.filetreeDragLayer.toString()),n});var r=u8(),i=r.filetree,o=r.activeModal,a=r.closeModal;return(0,s.FD)(s.FK,{children:[(0,s.FD)(av.ui,{clsx:YP().root,innerRef:e,children:[(0,s.Y)(YL,{filetree:i}),(0,s.FD)(of.S,{clsx:YP().content,grow:!0,shrink:!0,children:[(0,s.Y)(uM,{}),(0,s.Y)(of.S,{grow:!0,shrink:!0,dataCy:"sidebar-filetree-section",children:(0,s.Y)(uf.J,{store:i.store})})]}),(0,s.Y)(uU,{})]}),(0,s.FD)(am.a,{isOpen:!!o,onRequestClose:a,children:[(null==o?void 0:o.type)==="conflicts"?(0,s.Y)(uh.A,{paths:o.data.conflicts.map(function(e){return e.path}),onCancel:a,onConfirm:function(){var e=o.data;"move"===e.type?i.move({nodes:e.nodes,to:e.to,overwrite:!0}):i.upload({files:e.files,parentPath:e.to,overwrite:!0}),a()}}):null,(null==o?void 0:o.type)==="deleteNode"?(0,s.Y)(u7.A,(0,r6._)((0,f._)({},(0,uA.D)(o.data.nodes)),{delete:function(){return o.data.confirm()},hideModal:a})):null]})]})});function YL(e){var n=e.filetree,t=oB().toggle,r=(0,p.useCallback)(function(){return t(!1)},[t]);return(0,s.FD)(of.S,{clsx:YP().header,row:!0,gap:4,align:"center",pl:6,pr:4,children:[(0,s.Y)(of.S,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:(0,s.Y)(aC.EY,{css:YP().title,children:"Files"})}),(0,s.FD)(of.S,{row:!0,gap:0,align:"center",children:[(0,s.Y)(f0.K0,{dataCy:"filetree-add-file",alt:"New file",onClick:function(){n.create(tV.pt.File)},children:(0,s.Y)(u6.A,{})}),(0,s.Y)(f0.K0,{alt:"New folder",onClick:function(){n.create(tV.pt.Directory)},children:(0,s.Y)(u9.A,{})}),(0,s.Y)(uk.U,{closeFiletree:r,filetree:n})]})]})}var YM=(0,rA.x)({root:[op.wp.position.absolute,op.wp.borderRadius(8),op.wp.pt(16),op.wp.align.center,{border:"1px solid",borderColor:rS.LU.outlineDimmest}],content:[op.wp.width("100%"),op.wp.flex.growAndShrink(1)]});function YG(){var e=rd(rB),n=rd(n9),t=rf(tP),r=function(){var e,n=(0,c._)((0,mm.H)({accept:[tV.pt.File,mL.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){i.drag()},drop:function(e){if("nodes"===e.type){var n=(0,ne.u9)(e.nodes);n.length>0&&i.drop({panes:n})}if(e.type===mL.N.NewPane){var t=e.pane;i.drop({panes:[t]})}}}),2),t=n[0].isOver,r=n[1],i=(e=rf(rk),(0,p.useEffect)(function(){t||e(null)},[t,e]),{drag:rf(rH),drop:rf(rW)});return r}(),i=as({openPane:(0,p.useCallback)(function(e){(0,oJ.u4)(oJ.AZ.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),t({pane:e.pane,edge:"left"})},[t])});return(0,s.Y)(of.S,{style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)"),zIndex:n?100:void 0},css:YM.root,innerRef:r,children:(0,s.Y)(of.S,{css:YM.content,children:(0,s.Y)(aw.r,{autoFocus:!0,command:i,showToolDescriptions:!0})})})}var YN=ed.ZU.Object({sidebar:ed.ZU.Optional(nc),layout:eb,data:ed.ZU.Record(ed.ZU.String(),ed.ZU.Object({type:ed.ZU.String()})),dock:ed.ZU.Optional(n$)});function Yz(e,n,t){var r=null;try{r=vR.T(YN,e)}catch(e){}if(null===r)return null;var i=r.sidebar&&!t.wsUiSimplification?r.sidebar:{width:180,isOpen:!1},o={layout:r.layout,data:{},type:"saved",sidebar:i,dock:r.dock?function(e,n,t){var r=[],i=!0,o=!1,a=void 0;try{for(var l,u=e.secondaryTools[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,s=n(c.type,c);s&&r.push(s)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}if(t.isAgentChatEnabled){var d="webview";r.some(function(e){return e.type===d})||r.unshift({type:d})}if(r.length)return{visible:e.visible,primaryTools:[{type:"agentChat"},{type:"ghostwriterChat"}],secondaryTools:r}}(r.dock,n,t):void 0},a=new Set,l=function(e){var n=new Set,t=!0,r=!1,i=void 0;try{for(var o,a=e.floating[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,u=!0,c=!1,s=void 0;try{for(var d,p=l.panes[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;n.add(f)}}catch(e){c=!0,s=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw s}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e.tiling&&function e(t){if("paneGroup"!==t.type)return t.children.forEach(e);var r=!0,i=!1,o=void 0;try{for(var a,l=t.panes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;n.add(u)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(e.tiling),n}(o.layout),u=!0,s=!1,d=void 0;try{for(var p,f=Object.entries(r.data)[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=(0,c._)(p.value,2),g=h[0],m=h[1];if(l.has(g)){var v=n(m.type,m);if(!v){a.add(g);continue}o.data[g]=v}}}catch(e){s=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw d}}return(0,eq.jM)(o,function(e){var n=function(n){if(l.has(n))return void eH(e.layout,n)},r=!0,i=!1,o=void 0;try{for(var u,s=a[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var d=u.value;n(d)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var p=!0,f=!1,h=void 0;try{for(var g,m=Object.entries(e.data)[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var v=(0,c._)(g.value,2),w=v[0],y=v[1];("commands"===y.type||"codeEditor"===y.type&&!y.data.path||"agentProgress"===y.type||t.wsUiSimplification&&"agentChat"===y.type)&&(delete e.data[w],n(w))}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}})}var YH=t(77986),YW=t(81160),YB=t(82804),Yj=t.n(YB);function Y$(e){var n,t,r,i,o,a,l,u,h,g,m,v,w,y=e.repl,b=e.currentUser,x=(0,d.useRouter)(),_=(0,K.pE)("enterInAgentMode","boolean"),Y=(0,K.pE)("agent","boolean"),S=(0,K.pE)("enterInExpertMode","boolean"),A=(0,K.pE)("popupId","string"),I=(0,V.Po)(x),k=(0,V.ME)(x,"workspace2"),E=(0,ri.E)(),C=(0,c._)((0,p.useState)(function(){var e;return(0,ne.HJ)({config:(e=(0,xe.P)(),(0,r6._)((0,f._)({},e),{webview:b6,commands:vM,docs:vj,tutorial:bQ,extension:vQ,extensionStore:yU,replAuth:yT,searchReplace:bN,deployments:xt.B,config:vH,integrations:xr.u,extensionDevtools:yk,csvPreview:xn.J,agentChat:vT,agentProgress:xi.M,multiplayer:xi.M})),filePaneFlag:E})}),1)[0],D=(0,L._P)({controlName:"flag-agent-everywhere"}),R=null,F=(0,K.pE)("gitImport","boolean"),U=!!y.config.isAgentRepl,P=_||U||D,O=(0,ro.p)();A?R=Yz(!(u=n8.A.get(tt(A)))||"string"==typeof u&&parseInt(u,10)<Date.now()?null:n8.A.get(tn(A)),C.decode,{isAgentChatEnabled:P,wsUiSimplification:O}):y.layoutState?R=Yz(y.layoutState,C.decode,{isAgentChatEnabled:P,wsUiSimplification:O}):F&&!D&&(R={type:"default",data:Object.values(h={config:{paneId:(0,n0.A)(),pane:{type:"config",flow:"githubImport"}},codeEditor:{paneId:(0,n0.A)(),pane:{type:"codeEditor",data:{path:""}}},output:{paneId:(0,n0.A)(),pane:{type:"runnerOutput"}},shell:{paneId:(0,n0.A)(),pane:{type:"shell"}}}).reduce(function(e,n){var t=n.pane;return e[n.paneId]=t,e},{}),layout:{floating:[],tiling:{type:"split",percent:100,stacked:!1,children:[{id:(0,n0.A)(),type:"paneGroup",percent:40,activeIndex:0,panes:[h.config.paneId]},{type:"split",percent:60,stacked:!0,children:[{id:(0,n0.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[h.codeEditor.paneId]},{id:(0,n0.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[h.output.paneId,h.shell.paneId]}]}]}}}),(Y||U||D)&&(w=R?"saved":S?"split-with-console":"split-with-webview");var T=(r=(n={repl:y,currentUser:b,isAgentChatEnabled:P,enteredWithAgentPrompt:_}).repl,i=n.currentUser,a=void 0!==(o=n.isAgentChatEnabled)&&o,l=n.enteredWithAgentPrompt,r&&i&&null==r.lesson&&!r.config.isInPlanningPhase?void 0!==l&&l||i.hasSeenWorkspaceTour2024?a?null:!i.hasSeenProjectsTour2024&&(null==(t=r.project)?void 0:t.id)?dq.X:null:{id:hj,steps:[a?hG:hN,hz,hH,hW,hB].filter(Boolean)}:null),M=(g=(0,K.pE)("deploymentPane","boolean"),m=(0,K.pE)("projectPane","boolean"),(0,q.A)(function(){return g?{type:"deployments"}:m?{type:"project"}:void 0},[g,m])),G=(!!(null==(v=y.origin)?void 0:v.id)||S)&&!y.config.isInPlanningPhase,N=(_||!!y.config.isInPlanningPhase)&&!y.config.figmaUrl&&!G;return(0,s.FD)(Z.Ve,{currentUsername:b.username,replId:y.id,children:[(0,s.Y)(uq.CP,{children:(0,s.Y)(rc,{initialPane:M,savedLayoutState:R,isExtension:!!y.config.isExtension,isBlankRepl:j(y),popupId:A,agentCenteredLayout:N,agentLayoutVariation:w,children:(0,s.Y)(_o,{tour:T,userId:b.id,children:(0,s.Y)(Yq,{ui:C,repl:y,currentUser:b,isBonsaiWebview:I,doesBonsaiSupportWorkspace2:k,agentChatEnabled:P,activeWorkspaceTour:T,enterInExpertMode:S,agentIsEverywhere:D},y.id)})})}),(0,s.Y)(J.A,{})]})}function Yq(e){var n,t,r,i,o,a,l,u,d,f,h,g,m,v,w,y,b,x,_,Y=e.repl,S=e.currentUser,A=e.isBonsaiWebview,I=e.doesBonsaiSupportWorkspace2,k=e.ui,E=e.agentChatEnabled,C=e.activeWorkspaceTour,D=e.agentIsEverywhere,R=e.enterInExpertMode,F=(n=oM(),t=rf(iR),r=rf(iF),i=(0,xE.iO)(),o=(0,L._P)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),a="html"===Y.language?"html":"outputs",u=(l=(0,c._)((0,p.useState)(!1),2))[0],d=l[1],h=(f=(0,c._)((0,p.useState)(!1),2))[0],g=f[1],m=(0,fV.q6)(),v=(0,fV.DJ)(),w=(0,L._P)({controlName:"flag-open-telemetry-tracing"}),y=(0,L._P)({controlName:"flag-multi-lsp-connections"}),b=(0,q.A)(function(){return{runnerMode:a,onPresenceCommand:m,getColorForUser:v,onUnrecoverableError:(0,_u.A)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===$.ub.NotAllowed?d(!0):e===$.ub.RequiresRefresh&&g(!0)},throwBsod:i}),openFile:n,openMultipleFiles:t,openMultipleURLs:r,enableUserEvents:o,enableMultipleLSPClientsPerFile:y,openTelemetryTracing:w,enableReplspaceSshTokenPassthrough:!0}},[o,a,n,t,r,i,m,v,w,y]),x=(0,_a.q)(b),(0,q.A)(function(){return{services:x,isPleaseRefresh:h,isNotAllowed:u}},[x,h,u])),U=F.services,P=F.isPleaseRefresh,O=F.isNotAllowed,T=(0,b2.z)(),M=T.setExpertMode,G=T.isExpertMode;(0,p.useEffect)(function(){R&&M&&D&&!G&&M(!0)},[M,D,R,G]),(0,_M.X$)(!!Y.layoutState);var N=(0,q.A)(function(){return(0,sq.Y)(null==S?void 0:S.keybindings.keybindings)},[S]);if(!U)return null;var z=Y.authorizations.useAdvancedChat.isAuthorized;return(0,s.Y)(B.KH,{replId:Y.id,currentUser:S,hasAccessToAdvancedModel:z,agentChatEnabled:E,orgId:null==(_=Y.org)?void 0:_.id,children:(0,s.Y)(u2.SF,{children:(0,s.FD)(sQ,{services:U,ui:k,repl:Y,userKeybindings:N,children:[(0,s.FD)(mM.A,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,s.Y)(sC,{}),(0,s.Y)(c1,{isAdmin:S.isAdmin,isSubscribed:S.isSubscribed}),(0,s.Y)(_T.A,{repl:Y}),A&&!I?(0,s.Y)(s7,{}):null,(0,s.Y)(a_,{}),(0,s.Y)(s2,{repl:Y}),(0,s.Y)(_r,{repl:Y,currentUser:S}),(0,s.Y)(dv,{}),(0,s.Y)(dh,{}),(0,s.Y)(YZ,{isBonsaiWebview:A,doesBonsaiSupportWorkspace2:I,isWorkspaceTourActive:!!C,repl:Y,currentUser:S}),(0,s.Y)(uc,{}),(0,s.Y)(ui,{}),(0,s.Y)(_h.A,{}),(0,s.Y)(_k,{}),(0,s.Y)(YK,{isMultiplayerSession:Y.multiplayers.length>0}),(0,s.Y)(_U.A,{isOpen:O}),(0,s.Y)(_P.A,{isOpen:P}),(0,s.Y)(YW.$,{}),(0,s.Y)(YH.F,{}),(0,s.Y)(ue,{}),(0,s.Y)(s4,{}),(0,s.Y)(_g.P,{}),(0,s.Y)(_L.y,{repl:Y}),(0,s.Y)(oZ,{})]}),(0,s.Y)(YV,{replId:Y.id})]})})})}function YV(e){var n,t=e.replId,r=(0,c._)((0,xE.eY)(),1)[0],i=(0,c._)((n=(0,f._)({},H,void 0),v.n(W,n)),1)[0],o=(0,p.useCallback)(function(){i({variables:{input:{replId:t,state:{}}}})},[i,t]);return(0,p.useEffect)(function(){r&&o()},[r,o]),(0,s.Y)(_l.A,{})}function YK(e){var n,t,r,i,o,a=(n=e.isMultiplayerSession,r=(t=(0,c._)((0,p.useState)(!1),2))[0],i=t[1],o=(0,dV.qv)(),(0,p.useEffect)(function(){!o&&n&&"default"===md()&&i(!0)},[n,o]),{shouldShowModal:r,hideModal:(0,p.useCallback)(function(){mf(!0),i(!1)},[]),confirm:(0,p.useCallback)(function(){return(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,(0,n4._)(function(){return(0,n5.YH)(this,function(e){switch(e.label){case 0:return[4,(0,n4._)(function(){return(0,n5.YH)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(n){e(n)})})]}return[2,window.Notification.requestPermission()]})})()];case 1:return e.sent(),mf(!1),[2]}})})()];case 1:return e.sent(),i(!1),[2]}})})()},[])}),l=a.shouldShowModal,u=a.hideModal,d=a.confirm;return l?(0,s.Y)(_O,{onCancel:u,onConfirm:d}):null}var YZ=(0,p.memo)(function(e){var n,t,r,i,o,a,l,u=e.isWorkspaceTourActive,c=e.isBonsaiWebview,d=e.doesBonsaiSupportWorkspace2,f=e.repl,h=e.currentUser,g=(n=rf(nH),t=(0,cs.A)(),r=(0,dw.vm)(),i=(0,dw.d0)(),o=(r||i)&&t?ra.uF:0,a=(0,p.useRef)(null),l=(0,go.A)(function(e){var t=e.width,r=e.height;if(t&&r&&a.current){var i=a.current.getBoundingClientRect(),l=i.top;n({width:t,height:r,x:i.left,y:l-o})}}),(0,p.useCallback)(function(e){a.current=e,l(e)},[l])),m=rd(nS),v=rd(eZ),w=rd(eJ),y=rd(eQ),b=(0,p.useRef)(null),x=(0,B.jt)(),_=(0,p.useCallback)(function(e){g(e),b.current=e},[g]),Y=(0,ro.p)();return(0,s.FD)(av.ui,{elevated:Y,innerRef:_,clsx:Yj().contentContainer,style:Y?void 0:{backgroundColor:"transparent"},children:[m?(0,s.FD)(s.FK,{children:[c?(0,s.Y)(gi,{doesBonsaiSupportWorkspace2:d}):(0,s.Y)(s.FK,{children:Y?(0,s.Y)(mo,{repl:f,currentUser:h}):(0,s.Y)(h8,{repl:f,currentUser:h})}),Y?(0,s.Y)(YT,{}):(0,s.Y)(ci,{}),(0,s.FD)("main",{id:"main-content",children:[w.map(function(e){return(0,s.Y)(xh,{handleId:e},e)}),y.map(function(e){return(0,s.Y)(vD,{headerId:e},e)}),v.map(function(e){return(0,s.Y)(mW,{paneId:e},e)}),0===v.length?(0,s.Y)(YG,{}):null]}),(0,s.Y)(rN,{}),(0,s.Y)(oC,{}),(0,s.Y)(sz,{}),(0,s.Y)(u2.tz,{}),Y?null:(0,s.Y)(YF,{isWorkspaceTourActive:u}),Y&&x?(0,s.Y)(_B,{}):null]}):null,(0,s.Y)(_f,{})]})}),YJ=t(84149),YQ=t(44263),YX=t(85916),Y0=t(58124),Y1=t(11756),Y2=t(46356),Y4=t(78950),Y5=t(6609),Y3=t(88179),Y8=t(28659),Y7=t.n(Y8);let Y6=function(){var e,n,t,r=null,i=(0,d.useRouter)().query;if(!i.replUrl)throw Error("Expected replUrl to be set");if(!i.replId)throw Error("Expected replId to be set");var o=(0,c._)((0,G.t)(),2),a=(o[0],o[1]),l=i.replUrl.toString(),u=i.replId.toString(),h=(0,M.A)(u).loading,g=(e={variables:{replId:u,environment:(0,Y0.v)(),platform:(0,Y1.V)()},ssr:!!i.ssr},n=(0,f._)({},P,e),m.I(O,n)),v=g.data,w=g.loading,y=g.error,b=(0,L._P)({controlName:"flag-token-email-verification"}),x=(null==v?void 0:v.currentUser)||void 0,_=(null==v?void 0:v.getRepl)&&("Repl"===v.getRepl.__typename||"ReplRedirect"===v.getRepl.__typename||"ReplSubscriptionExpired"===v.getRepl.__typename)?v.getRepl:null,Y=(null==v?void 0:v.getRepl)&&"Repl"!==v.getRepl.__typename&&"ReplRedirect"!==v.getRepl.__typename&&"ReplSubscriptionExpired"!==v.getRepl.__typename?v.getRepl.message:null,S=(null==_?void 0:_.__typename)==="Repl"?_:null,A="https://replit.com".concat(l),I=null!=(t=null==S?void 0:S.description)?t:void 0,k=null!=Y?Y:null==y?void 0:y.message,E=(0,c._)((0,p.useState)(!1),2),C=E[0],D=E[1];(0,p.useEffect)(function(){return D(!0)},[]);var R=b&&x&&!x.isVerified;return r=R?(0,s.Y)(of.S,{clsx:Y7().emailVerificationWrapper,grow:!0,shrink:!0,children:(0,s.Y)(T.A,{})}):k?(0,s.Y)(of.S,{align:"center",justify:"center",grow:!0,shrink:!0,children:(0,s.Y)(aC.EY,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):w||!C||a||h?(0,s.Y)(of.S,{clsx:Y7().loadingAnimationWrapper,grow:!0,shrink:!0,children:(0,s.Y)(Y4.A,{height:100})}):S&&x?(0,s.Y)(Y2.A.Provider,{value:S.id,children:(0,s.Y)(Y$,{repl:S,currentUser:x},S.id)}):(0,s.Y)(of.S,{clsx:Y7().loadingAnimationWrapper,grow:!0,shrink:!0,children:(0,s.Y)(Y4.A,{height:100})}),(0,s.Y)(Y5.A,{children:(0,s.FD)(Y3.A,{dataCy:"workspace-page",title:"".concat((null==S?void 0:S.title)||"Loading..."),oembedUrl:A,description:I,noHeader:!R,noMain:!R,noSidebar:!R,noFooter:!0,hideEmailVerify:!0,children:[(0,s.Y)(N.d,{}),(0,s.Y)(YX.A,{replResponse:_,replUrl:l,children:(0,s.FD)(av.ui,{clsx:Y7().surface,children:[(0,s.Y)(YJ.z,{}),(0,s.Y)(YQ.u,{}),r]})})]})})}},77751:e=>{e.exports={toolsListPopover:"AllToolsButton_toolsListPopover__HvH5A"}},78627:(e,n,t)=>{"use strict";t.d(n,{rh:()=>u,wW:()=>c});var r=t(12584),i=t(41114);function o(){var e=(0,r._)(["\n  fragment OrgCurrentUser on CurrentUser {\n    id\n    displayName\n    username\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment OrgMetadata on Org {\n    id\n    slug\n    type\n    name\n    image\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgMetadata($orgId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return l=function(){return e},e}var u=(0,i.J1)(o()),c=(0,i.J1)(a());l()},78828:(e,n,t)=>{"use strict";t.d(n,{L:()=>P});var r=t(12694),i=t(34837),o=t(21462),a=t(17844),l=t(12584),u=t(41114),c=t(54744);function s(){var e=(0,l._)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    fullName\n    image\n    userSubscriptionType\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,l._)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,u.J1)(s()),h=(0,u.J1)(d(),f),g=t(96513),m=t(29922),v=t(52963),w=t(39534),y=t(70764),b=t(51292),x=t(18712),_=t(31051),Y=t(66277),S=t(70251),A=t(28611),I=t(3937),k=t(91953),E=t(25227),C=t(85826),D=t(78745),R=t(8548),F=t(94686),U=(0,y.x)({wrapper:[x.wp.noDragRegion],button:[b.b.nofill,x.wp.p(4),x.wp.viewStyle,x.wp.reset.button,x.wp.rowWithGap(2),x.wp.align.center,x.wp.color.foregroundDefault,x.wp.cursor.pointer,x.wp.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:w.LU.foregroundDefault}}],surface:[x.wp.borderRadius(8),x.wp.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[x.wp.ml(8)],menuItem:[],accountModal:[x.wp.overflow("auto"),x.wp.height("100%")],appVersionWrapper:[x.wp.center,x.wp.border({color:w.LU.outlineDimmer,width:1,style:"solid",direction:"top"})]});function P(e){var n,t=e.showName,l=(0,r._)((0,o.useState)(!1),2),u=l[0],s=l[1],d=(0,r._)((0,o.useState)(!1),2),f=d[0],y=d[1],b=(n=(0,a._)({},p,void 0),c.I(h,n)).data,x=null==b?void 0:b.currentUser;if(!x)return null;var P=[{label:"Home",icon:(0,i.Y)(R.A,{}),onAction:function(){v.M.openExternalUrl("/"),s(!1)}},{label:"Account",icon:(0,i.Y)(F.A,{}),onAction:function(){y(function(e){return!e}),s(!1)}},{label:"Log out",icon:(0,i.Y)(D.A,{}),onAction:function(){v.M.logout()}}];return(0,i.FD)(E.S,{css:U.wrapper,children:[(0,i.FD)(A.Wv,{isOpen:u,onOpenChange:s,placement:"bottom start",label:"Account options",children:[(0,i.FD)("button",{onClick:function(){s(function(e){return!e})},css:U.button,"data-cy":"desktop-app-avatar-menu",children:[(0,i.Y)(_.e,{size:24,src:(null==x?void 0:x.image)||null,username:(null==x?void 0:x.username)||"",fullName:(null==x?void 0:x.fullName)||"",showCoreBadge:x.userSubscriptionType===g.Ohf.HackerPro}),t?(0,i.FD)(E.S,{css:U.username,className:"username",children:["@",null==x?void 0:x.username]}):null,(0,i.Y)(C.A,{color:w.LU.foregroundDimmest,size:12})]}),(0,i.FD)(I.ui,{elevated:!0,css:U.surface,background:"higher",children:[(0,i.Y)(Y.W1,{label:"Account options",onAction:function(e){var n=P[parseInt(e,10)];n&&n.onAction()},children:P.map(function(e,n){return(0,i.Y)(Y.q7,{"aria-label":e.label,children:(0,i.FD)(E.S,{row:!0,gap:8,align:"center",children:[e.icon,(0,i.Y)(k.EY,{children:e.label})]})},n)})}),(0,i.Y)(E.S,{css:U.appVersionWrapper,py:4,px:8,children:(0,i.Y)(k.EY,{color:"dimmer",variant:"small",dataCy:"desktop-app-version",children:"Version ".concat(v.M.getVersion())})})]})]}),(0,i.Y)(S.a,{isOpen:f,onRequestClose:function(){return y(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:U.accountModal,children:(0,i.Y)(m.A,{})})]})}},80667:e=>{e.exports={root:"ResizeHandle_root__LCasx",left:"ResizeHandle_left__9Zai2",right:"ResizeHandle_right__PpIC3",grip:"ResizeHandle_grip__sYPtd"}},82804:e=>{e.exports={contentContainer:"Workspace_contentContainer__DubhE"}},82954:(e,n,t)=>{"use strict";t.d(n,{Cp:()=>r,GB:()=>o,xn:()=>i});var r=86,i=140,o=48},84282:e=>{var n=1/0,t=0/0,r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=/^(?:0|[1-9]\d*)$/,u=parseFloat,c=parseInt,s=Object.prototype.toString,d=Math.floor,p=Math.min,f=Math.random;function h(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function g(e){return e?(e=function(e){if("number"==typeof e)return e;if("symbol"==typeof(n=e)||n&&"object"==typeof n&&"[object Symbol]"==s.call(n))return t;if(h(e)){var n,l="function"==typeof e.valueOf?e.valueOf():e;e=h(l)?l+"":l}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var u=o.test(e);return u||a.test(e)?c(e.slice(2),u?2:8):i.test(e)?t:+e}(e))===n||e===-n?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}e.exports=function(e,n,t){if(t&&"boolean"!=typeof t&&function(e,n,t){if(!h(t))return!1;var r,i,o,a,u,c,d,p=typeof n;return("number"==p?!!(null!=(r=t)&&"number"==typeof(i=r.length)&&i>-1&&i%1==0&&i<=0x1fffffffffffff&&"[object Function]"!=(a=h(o=r)?s.call(o):"")&&"[object GeneratorFunction]"!=a&&(d=null==(d=t.length)?0x1fffffffffffff:d)&&("number"==typeof n||l.test(n))&&n>-1&&n%1==0&&n<d):"string"==p&&n in t)&&(u=t[n],u===(c=e)||u!=u&&c!=c)}(e,n,t)&&(n=t=void 0),void 0===t&&("boolean"==typeof n?(t=n,n=void 0):"boolean"==typeof e&&(t=e,e=void 0)),void 0===e&&void 0===n?(e=0,n=1):(e=g(e),void 0===n?(n=e,e=0):n=g(n)),e>n){var r,i,o=e;e=n,n=o}if(t||e%1||n%1){var a=f();return p(e+a*(n-e+u("1e-"+((a+"").length-1))),n)}return r=e,i=n,r+d(f()*(i-r+1))}},85586:(e,n,t)=>{"use strict";t.d(n,{Q9:()=>f,_:()=>d,wp:()=>p});var r=t(34837),i=t(40185),o=(0,t(86105)._)(["workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website"]).concat(["100-days-of-python","100-days-of-python-promo","add-guest-new-user","agent-banner","agent-disclaimer","ai-image-generation-banner","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","custom-domain-purchase-announcement","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","deployments-synced-secrets","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","flexible-spend-announcement","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","home-page-demo-repl-tour-suggestion","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","replit-teams-onboarding-tour","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-assistant-auto-apply-changes","workspace-assistant-auto-restart-repl","workspace-assistant-intro-video","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website","workspace-history-announcement","workspace-ssh-connect-to-vscode-config-tour","workspace-tools-databases-postgres-tour","workspace-repo-projects-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-tour-2024","workspace-bonsai-tour-2025","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement","mobileApp-teams-coming-soon-announcement","incident-20240219-action-required-banner","incident-20250711-refund-banner","scheduled-deployments-banner","quick-start-guides","teams-projects-onboarding-card","onboarding-purchase-seen","replit-teams-banner","integrations-toast","starter-changes-announcement-aug-2024","private-deployments-banner","editors-have-secret-access-warning","workspace-right-sidebar-cta","assistant-now-defaulting-to-claude-3-5","org-roles-and-permissions-info-banner","onboarding-seen","teams-sponsorships-onboarding-card","agent-billing-notification-usage-page","agent-billing-notification-creation-entrypoint","agent-billing-creation-disclaimer","agent-billing-workspace-disclaimer","agent-billing-threshold-reached-warning","agent-billing-workspace-flex-credits-almost-reached","agent-billing-announcement","agent-billing-announcement-banner","drizzle-studio-announcement","freemium-agent-access-announcement","referral-program-banner","referral-pending-banner","post-verification-educational-upsell","invoice-threshold-change-announcement","agent-v2-welcome-modal","agent-v2-homepage-modal","agent-mobile-notification-nudge","visual-editor-callout","deterministic-edits-callout","image-gen-awareness-callout","bonsai-ws-agent-onboarding","queue-drawer-callout","viewer-seats-announcement","apps-private-by-default-announcement","agent-billing-v2-announcement","agent-billing-v2-home-banner","agent-chat-mode-intro-callout","effort-based-pricing-announcement","dynamic-intelligence-modal","expert-mode-acknowledged","workspace-deployment-pane-production-database-banner","workspace-database-pane-toggle-tour"]),a=t(58631),l=t(34778),u=t(30724),c=t(40756),s=t(73635),d=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},p=function(e,n){var t,r=JSON.parse(a.A.get(d(e,n),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(t=r.tourName,o.includes(t)))return r},f=function(e){var n=e.challenge,t=o.find(function(e){return e.toString()===n.tourName})||"js-4-day-challenge-day-1",a=(0,u.g)(t),d=a.isDone,p=a.isLoading,f=a.setAsDone,h=(0,i.useRouter)();return p?null:(0,r.Y)(c.$n,{colorway:d?"primary":"positive",onClick:function(){f(),(0,l.u4)(l.AZ.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:d,iconLeft:(0,r.Y)(s.A,{}),size:"big",text:d?"Challenge completed!":"Complete Challenge"})}},86059:e=>{e.exports={container:"FigmaImportEntry_container__0gcKx",replitIcon:"FigmaImportEntry_replitIcon__Vmv79",figmaIcon:"FigmaImportEntry_figmaIcon__cj71Z",button:"FigmaImportEntry_button__tGaaO"}},86296:e=>{e.exports={overlay:"FigmaImport_overlay__to7_u",animationWrapper:"FigmaImport_animationWrapper__8PuMi",progressBarContainer:"FigmaImport_progressBarContainer__GBU7c",progressBarTrack:"FigmaImport_progressBarTrack__AjpdN",progressBarFill:"FigmaImport_progressBarFill__WUllg"}},89715:e=>{e.exports={tab:"Tab_tab__EF2Lk",active:"Tab_active__WvwT0",dragging:"Tab_dragging__eIlED",closeButton:"Tab_closeButton__SEFkG",tabButton:"Tab_tabButton__2m0lS",tabIcon:"Tab_tabIcon__Gmt_u",tabTitle:"Tab_tabTitle__hyRHu",uniquePath:"Tab_uniquePath___dbzh",activeLine:"Tab_activeLine__jYh7y",indicator:"Tab_indicator__wLq2U"}},89742:(e,n,t)=>{"use strict";t.d(n,{B:()=>i});var r=t(90629);function i(e,n){return r.v4(function(t){t.setTag("start-with-ai",!0),n&&t.setExtras(n),r.Cp(e)}),e}},89846:e=>{e.exports={importButtonContainer:"FigmaImportForm_importButtonContainer__wEqpP",limitMeter:"FigmaImportForm_limitMeter__U_gFJ",input:"FigmaImportForm_input__hx_c9",container:"FigmaImportForm_container__ZGfRZ",divider:"FigmaImportForm_divider__POsUX"}},90803:e=>{e.exports={root:"PlanningBadge_root__xmkd4"}},92059:e=>{e.exports={flipped:"FiletreeButton_flipped__X0Trh"}},92084:(e,n,t)=>{"use strict";t.d(n,{Fe:()=>u});var r=t(12584),i=t(41114),o=t(78627);function a(){var e=(0,r._)(["\n  fragment OrgGroupMetadata on OrgGroup {\n    id\n    color\n    slug\n    type\n    name\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgGroupMetadata($orgId: String!, $groupId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              ...OrgGroupMetadata\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return l=function(){return e},e}var u=(0,i.J1)(a());l(),o.rh,o.wW},93695:e=>{e.exports={tabBar:"TabBar_tabBar__ER_xz",tabs:"TabBar_tabs__HezdH",tabContainer:"TabBar_tabContainer__PSUON",tabButton:"TabBar_tabButton__JA6lj",closeButton:"TabBar_closeButton__AMLhT",title:"TabBar_title__cXkyz",newTab:"TabBar_newTab__Buyvr",dragArea:"TabBar_dragArea__Fyv_A",dropPreview:"TabBar_dropPreview__T43OH"}},97608:(e,n,t)=>{"use strict";t.d(n,{Um:()=>f,y3:()=>g,zT:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(54744),l=t(78627);function u(){var e=(0,i._)(["\n  fragment OrgGroupsOrg on Org {\n    ...OrgMetadata\n    authorizations {\n      createOrgGroup {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment OrgGroupsOrgGroup on OrgGroup {\n    id\n    slug\n    type\n    name\n    color\n    isMember\n    memberCount\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query OrgGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var d={},p=(0,o.J1)(u(),l.wW),f=(0,o.J1)(c()),h=(0,o.J1)(s(),f);function g(e){var n=(0,r._)({},d,e);return a.I(h,n)}},99874:e=>{e.exports={root:"RunStatusButton_root__Zgid2",agentStatusIcon:"RunStatusButton_agentStatusIcon__dyBqs",running:"RunStatusButton_running__tAAYE",agent:"RunStatusButton_agent__q_Sk6"}}},e=>{e.O(0,[4017,7433,3451,6976,5325,8185,7573,1938,363,2647,6614,7368,1425,5621,8508,9066,2634,1234,4611,4357,3030,3669,6549,4739,4490,2255,6504,3655,5235,474,6424,9451,7313,1701,3577,7658,2290,5941,1520,4262,3739,1252,6618,8519,5519,8179,4869,1962,5296,2669,7682,479,7276,908,4796,7420,1140,6354,2468,6660,9907,3288,7122,9922,9398,3251,9184,5435,9940,8200,6593,636,8792],()=>e(e.s=6125)),_N_E=e.O()}]);
//# sourceMappingURL=replEnvironmentDesktop-cd8382230bd420d0.js.map